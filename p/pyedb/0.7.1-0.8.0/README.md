# Comparing `tmp/pyedb-0.7.1.tar.gz` & `tmp/pyedb-0.8.0.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "pyedb-0.7.1.tar", last modified: Fri Jan  1 00:00:00 2016, max compression
+gzip compressed data, was "pyedb-0.8.0.tar", last modified: Fri Jan  1 00:00:00 2016, max compression
```

## Comparing `pyedb-0.7.1.tar` & `pyedb-0.8.0.tar`

### file list

```diff
@@ -1,133 +1,137 @@
--rw-r--r--   0        0        0     1089 2024-04-10 14:12:59.655281 pyedb-0.7.1/LICENSE
--rw-r--r--   0        0        0     5476 2024-04-10 14:12:59.655281 pyedb-0.7.1/README.md
--rw-r--r--   0        0        0     4507 2024-04-10 14:12:59.715282 pyedb-0.7.1/pyproject.toml
--rw-r--r--   0        0        0     1520 2024-04-10 14:12:59.715282 pyedb-0.7.1/src/pyedb/__init__.py
--rw-r--r--   0        0        0        0 2024-04-10 14:12:59.715282 pyedb-0.7.1/src/pyedb/dotnet/__init__.py
--rw-r--r--   0        0        0    79042 2024-04-10 14:12:59.715282 pyedb-0.7.1/src/pyedb/dotnet/application/Variables.py
--rw-r--r--   0        0        0        0 2024-04-10 14:12:59.715282 pyedb-0.7.1/src/pyedb/dotnet/application/__init__.py
--rw-r--r--   0        0        0     3406 2024-04-10 14:12:59.715282 pyedb-0.7.1/src/pyedb/dotnet/clr_module.py
--rw-r--r--   0        0        0   169918 2024-04-10 14:12:59.715282 pyedb-0.7.1/src/pyedb/dotnet/edb.py
--rw-r--r--   0        0        0       52 2024-04-10 14:12:59.715282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/__init__.py
--rw-r--r--   0        0        0        0 2024-04-10 14:12:59.715282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/cell/__init__.py
--rw-r--r--   0        0        0        0 2024-04-10 14:12:59.715282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/cell/hierarchy/__init__.py
--rw-r--r--   0        0        0     3318 2024-04-10 14:12:59.715282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/cell/hierarchy/model.py
--rw-r--r--   0        0        0   103052 2024-04-10 14:12:59.715282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/components.py
--rw-r--r--   0        0        0    32032 2024-04-10 14:12:59.715282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/configuration.py
--rw-r--r--   0        0        0        0 2024-04-10 14:12:59.715282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/definition/__init__.py
--rw-r--r--   0        0        0     6752 2024-04-10 14:12:59.715282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/definition/component_def.py
--rw-r--r--   0        0        0     2038 2024-04-10 14:12:59.715282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/definition/component_model.py
--rw-r--r--   0        0        0     1559 2024-04-10 14:12:59.715282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/definition/definition_obj.py
--rw-r--r--   0        0        0     2136 2024-04-10 14:12:59.715282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/definition/definitions.py
--rw-r--r--   0        0        0     4964 2024-04-10 14:12:59.715282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/definition/package_def.py
--rw-r--r--   0        0        0        0 2024-04-10 14:12:59.715282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/dotnet/__init__.py
--rw-r--r--   0        0        0    37597 2024-04-10 14:12:59.715282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/dotnet/database.py
--rw-r--r--   0        0        0     8904 2024-04-10 14:12:59.715282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/dotnet/layout.py
--rw-r--r--   0        0        0    48320 2024-04-10 14:12:59.715282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/dotnet/primitive.py
--rw-r--r--   0        0        0        0 2024-04-10 14:12:59.715282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/__init__.py
--rw-r--r--   0        0        0    37235 2024-04-10 14:12:59.715282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/components_data.py
--rw-r--r--   0        0        0     4265 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/connectable.py
--rw-r--r--   0        0        0    48425 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/control_file.py
--rw-r--r--   0        0        0     2057 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/design_options.py
--rw-r--r--   0        0        0     1977 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/edbvalue.py
--rw-r--r--   0        0        0    13190 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/hfss_extent_info.py
--rw-r--r--   0        0        0    48944 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/hfss_simulation_setup_data.py
--rw-r--r--   0        0        0    21880 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/layer_data.py
--rw-r--r--   0        0        0     9933 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/nets_data.py
--rw-r--r--   0        0        0     1882 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/obj_base.py
--rw-r--r--   0        0        0    78754 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/padstacks_data.py
--rw-r--r--   0        0        0     9223 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/ports.py
--rw-r--r--   0        0        0    48059 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/primitives_data.py
--rw-r--r--   0        0        0    99967 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/simulation_configuration.py
--rw-r--r--   0        0        0    42156 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/siwave_simulation_setup_data.py
--rw-r--r--   0        0        0    15342 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/sources.py
--rw-r--r--   0        0        0    25287 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/terminals.py
--rw-r--r--   0        0        0     4928 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/utilities.py
--rw-r--r--   0        0        0     3501 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/variables.py
--rw-r--r--   0        0        0     4726 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/general.py
--rw-r--r--   0        0        0    68343 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/hfss.py
--rw-r--r--   0        0        0    50907 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/layout.py
--rw-r--r--   0        0        0    11798 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/layout_validation.py
--rw-r--r--   0        0        0    43342 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/materials.py
--rw-r--r--   0        0        0    11857 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/net_class.py
--rw-r--r--   0        0        0    43851 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/nets.py
--rw-r--r--   0        0        0    54540 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/padstack.py
--rw-r--r--   0        0        0    61143 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/siwave.py
--rw-r--r--   0        0        0   114967 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/stackup.py
--rw-r--r--   0        0        0       58 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/utilities/__init__.py
--rw-r--r--   0        0        0     2220 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/utilities/heatsink.py
--rw-r--r--   0        0        0    23967 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/dotnet/edb_core/utilities/simulation_setup.py
--rw-r--r--   0        0        0    14472 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/edb_logger.py
--rw-r--r--   0        0        0      111 2024-04-10 14:12:59.719282 pyedb-0.7.1/src/pyedb/exceptions.py
--rw-r--r--   0        0        0        0 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/generic/__init__.py
--rw-r--r--   0        0        0    28956 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/generic/constants.py
--rw-r--r--   0        0        0     7137 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/generic/data_handlers.py
--rw-r--r--   0        0        0     4354 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/generic/design_types.py
--rw-r--r--   0        0        0     3941 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/generic/filesystem.py
--rw-r--r--   0        0        0    43608 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/generic/general_methods.py
--rw-r--r--   0        0        0     4901 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/generic/plot.py
--rw-r--r--   0        0        0    11206 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/generic/process.py
--rw-r--r--   0        0        0     8967 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/generic/settings.py
--rw-r--r--   0        0        0        0 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/__init__.py
--rw-r--r--   0        0        0        0 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/bom/__init__.py
--rw-r--r--   0        0        0     1853 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/bom/bom.py
--rw-r--r--   0        0        0     2394 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/bom/bom_item.py
--rw-r--r--   0        0        0     3329 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/bom/characteristics.py
--rw-r--r--   0        0        0     1661 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/bom/refdes.py
--rw-r--r--   0        0        0        0 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/content/__init__.py
--rw-r--r--   0        0        0     1883 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/content/color.py
--rw-r--r--   0        0        0     3187 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/content/content.py
--rw-r--r--   0        0        0     2052 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/content/dictionary_color.py
--rw-r--r--   0        0        0     2026 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/content/dictionary_fill.py
--rw-r--r--   0        0        0     2142 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/content/dictionary_line.py
--rw-r--r--   0        0        0     1546 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/content/entry_color.py
--rw-r--r--   0        0        0     1687 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/content/entry_line.py
--rw-r--r--   0        0        0     1651 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/content/fill.py
--rw-r--r--   0        0        0     1427 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/content/layer_ref.py
--rw-r--r--   0        0        0     3931 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/content/standard_geometries_dictionary.py
--rw-r--r--   0        0        0        0 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/ecad/__init__.py
--rw-r--r--   0        0        0        0 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/__init__.py
--rw-r--r--   0        0        0     2300 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/assembly_drawing.py
--rw-r--r--   0        0        0     2405 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/cad_data.py
--rw-r--r--   0        0        0     2628 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/component.py
--rw-r--r--   0        0        0     2083 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/drill.py
--rw-r--r--   0        0        0     3023 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/feature.py
--rw-r--r--   0        0        0     2270 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/layer.py
--rw-r--r--   0        0        0     8586 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/layer_feature.py
--rw-r--r--   0        0        0     2042 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/logical_net.py
--rw-r--r--   0        0        0     2197 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/outline.py
--rw-r--r--   0        0        0     5598 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/package.py
--rw-r--r--   0        0        0     2535 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/padstack_def.py
--rw-r--r--   0        0        0     2004 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/padstack_hole_def.py
--rw-r--r--   0        0        0     3866 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/padstack_instance.py
--rw-r--r--   0        0        0     2014 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/padstack_pad_def.py
--rw-r--r--   0        0        0     5044 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/path.py
--rw-r--r--   0        0        0     3640 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/phy_net.py
--rw-r--r--   0        0        0     2124 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/pin.py
--rw-r--r--   0        0        0     8945 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/polygon.py
--rw-r--r--   0        0        0     2781 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/profile.py
--rw-r--r--   0        0        0     2274 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/stackup.py
--rw-r--r--   0        0        0     2717 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/stackup_group.py
--rw-r--r--   0        0        0     1970 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/stackup_layer.py
--rw-r--r--   0        0        0    12590 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/step.py
--rw-r--r--   0        0        0     2143 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_header.py
--rw-r--r--   0        0        0     1797 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/ecad/ecad.py
--rw-r--r--   0        0        0     3115 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/ecad/spec.py
--rw-r--r--   0        0        0     2739 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/history_record.py
--rw-r--r--   0        0        0    22685 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/ipc2581.py
--rw-r--r--   0        0        0     2092 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/ipc2581/logistic_header.py
--rw-r--r--   0        0        0        0 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/misc/__init__.py
--rw-r--r--   0        0        0     1759 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/misc/aedtlib_personalib_install.py
--rw-r--r--   0        0        0    12223 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/misc/downloads.py
--rw-r--r--   0        0        0     3315 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/misc/misc.py
--rw-r--r--   0        0        0      301 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/misc/pyedb.runtimeconfig.json
--rw-r--r--   0        0        0        0 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/misc/siw_feature_config/__init__.py
--rw-r--r--   0        0        0        0 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/misc/siw_feature_config/emc/__init__.py
--rw-r--r--   0        0        0     1560 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/misc/siw_feature_config/emc/component_tags.py
--rw-r--r--   0        0        0     1184 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/misc/siw_feature_config/emc/net_tags.py
--rw-r--r--   0        0        0     1557 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/misc/siw_feature_config/emc/tag_library.py
--rw-r--r--   0        0        0     2521 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/misc/siw_feature_config/emc/xml_generic.py
--rw-r--r--   0        0        0     7389 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/misc/siw_feature_config/emc_rule_checker_settings.py
--rw-r--r--   0        0        0      465 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/misc/utilities.py
--rw-r--r--   0        0        0    66820 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/modeler/geometry_operators.py
--rw-r--r--   0        0        0    10056 2024-04-10 14:12:59.723282 pyedb-0.7.1/src/pyedb/siwave.py
--rw-r--r--   0        0        0     8321 1970-01-01 00:00:00.000000 pyedb-0.7.1/PKG-INFO
+-rw-r--r--   0        0        0     1089 2024-04-19 14:58:42.239572 pyedb-0.8.0/LICENSE
+-rw-r--r--   0        0        0     5476 2024-04-19 14:58:42.239572 pyedb-0.8.0/README.md
+-rw-r--r--   0        0        0     4506 2024-04-19 14:58:42.299572 pyedb-0.8.0/pyproject.toml
+-rw-r--r--   0        0        0     1520 2024-04-19 14:58:42.299572 pyedb-0.8.0/src/pyedb/__init__.py
+-rw-r--r--   0        0        0        0 2024-04-19 14:58:42.299572 pyedb-0.8.0/src/pyedb/dotnet/__init__.py
+-rw-r--r--   0        0        0    79042 2024-04-19 14:58:42.299572 pyedb-0.8.0/src/pyedb/dotnet/application/Variables.py
+-rw-r--r--   0        0        0        0 2024-04-19 14:58:42.299572 pyedb-0.8.0/src/pyedb/dotnet/application/__init__.py
+-rw-r--r--   0        0        0     3406 2024-04-19 14:58:42.299572 pyedb-0.8.0/src/pyedb/dotnet/clr_module.py
+-rw-r--r--   0        0        0   169971 2024-04-19 14:58:42.299572 pyedb-0.8.0/src/pyedb/dotnet/edb.py
+-rw-r--r--   0        0        0       52 2024-04-19 14:58:42.299572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/__init__.py
+-rw-r--r--   0        0        0        0 2024-04-19 14:58:42.299572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/cell/__init__.py
+-rw-r--r--   0        0        0        0 2024-04-19 14:58:42.299572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/cell/hierarchy/__init__.py
+-rw-r--r--   0        0        0     3309 2024-04-19 14:58:42.299572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/cell/hierarchy/model.py
+-rw-r--r--   0        0        0   103173 2024-04-19 14:58:42.299572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/components.py
+-rw-r--r--   0        0        0    33626 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/configuration.py
+-rw-r--r--   0        0        0        0 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/definition/__init__.py
+-rw-r--r--   0        0        0     6743 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/definition/component_def.py
+-rw-r--r--   0        0        0     2029 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/definition/component_model.py
+-rw-r--r--   0        0        0     1550 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/definition/definition_obj.py
+-rw-r--r--   0        0        0     2476 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/definition/definitions.py
+-rw-r--r--   0        0        0     5967 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/definition/package_def.py
+-rw-r--r--   0        0        0        0 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/dotnet/__init__.py
+-rw-r--r--   0        0        0    37653 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/dotnet/database.py
+-rw-r--r--   0        0        0     8904 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/dotnet/layout.py
+-rw-r--r--   0        0        0    48320 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/dotnet/primitive.py
+-rw-r--r--   0        0        0        0 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/__init__.py
+-rw-r--r--   0        0        0    37225 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/components_data.py
+-rw-r--r--   0        0        0     4256 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/connectable.py
+-rw-r--r--   0        0        0    48425 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/control_file.py
+-rw-r--r--   0        0        0     2057 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/design_options.py
+-rw-r--r--   0        0        0     1977 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/edbvalue.py
+-rw-r--r--   0        0        0    13190 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/hfss_extent_info.py
+-rw-r--r--   0        0        0    48944 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/hfss_simulation_setup_data.py
+-rw-r--r--   0        0        0    21945 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/layer_data.py
+-rw-r--r--   0        0        0     9933 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/nets_data.py
+-rw-r--r--   0        0        0    78754 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/padstacks_data.py
+-rw-r--r--   0        0        0     9223 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/ports.py
+-rw-r--r--   0        0        0    48155 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/primitives_data.py
+-rw-r--r--   0        0        0    99967 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/simulation_configuration.py
+-rw-r--r--   0        0        0    42354 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/siwave_simulation_setup_data.py
+-rw-r--r--   0        0        0    15342 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/sources.py
+-rw-r--r--   0        0        0    25287 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/terminals.py
+-rw-r--r--   0        0        0     4928 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/utilities.py
+-rw-r--r--   0        0        0     3501 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/variables.py
+-rw-r--r--   0        0        0     4726 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/general.py
+-rw-r--r--   0        0        0        0 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/geometry/__init__.py
+-rw-r--r--   0        0        0     1590 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/geometry/point_data.py
+-rw-r--r--   0        0        0     2990 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/geometry/polygon_data.py
+-rw-r--r--   0        0        0    68343 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/hfss.py
+-rw-r--r--   0        0        0    50907 2024-04-19 14:58:42.303572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/layout.py
+-rw-r--r--   0        0        0    11798 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/layout_validation.py
+-rw-r--r--   0        0        0    44463 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/materials.py
+-rw-r--r--   0        0        0    11857 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/net_class.py
+-rw-r--r--   0        0        0    43882 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/nets.py
+-rw-r--r--   0        0        0     3312 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/obj_base.py
+-rw-r--r--   0        0        0    54540 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/padstack.py
+-rw-r--r--   0        0        0    61077 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/siwave.py
+-rw-r--r--   0        0        0   115375 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/stackup.py
+-rw-r--r--   0        0        0       58 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/utilities/__init__.py
+-rw-r--r--   0        0        0     2220 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/utilities/heatsink.py
+-rw-r--r--   0        0        0    23967 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/dotnet/edb_core/utilities/simulation_setup.py
+-rw-r--r--   0        0        0     1931 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/dotnet/sim_setup_data/data/siw_dc_ir_settings.py
+-rw-r--r--   0        0        0    14950 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/edb_logger.py
+-rw-r--r--   0        0        0      111 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/exceptions.py
+-rw-r--r--   0        0        0        0 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/generic/__init__.py
+-rw-r--r--   0        0        0    28956 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/generic/constants.py
+-rw-r--r--   0        0        0     7137 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/generic/data_handlers.py
+-rw-r--r--   0        0        0     4354 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/generic/design_types.py
+-rw-r--r--   0        0        0     3941 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/generic/filesystem.py
+-rw-r--r--   0        0        0    43608 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/generic/general_methods.py
+-rw-r--r--   0        0        0     4901 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/generic/plot.py
+-rw-r--r--   0        0        0    11206 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/generic/process.py
+-rw-r--r--   0        0        0     9235 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/generic/settings.py
+-rw-r--r--   0        0        0        0 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/__init__.py
+-rw-r--r--   0        0        0        0 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/bom/__init__.py
+-rw-r--r--   0        0        0     1853 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/bom/bom.py
+-rw-r--r--   0        0        0     2394 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/bom/bom_item.py
+-rw-r--r--   0        0        0     3329 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/bom/characteristics.py
+-rw-r--r--   0        0        0     1661 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/bom/refdes.py
+-rw-r--r--   0        0        0        0 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/content/__init__.py
+-rw-r--r--   0        0        0     1883 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/content/color.py
+-rw-r--r--   0        0        0     3187 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/content/content.py
+-rw-r--r--   0        0        0     2052 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/content/dictionary_color.py
+-rw-r--r--   0        0        0     2026 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/content/dictionary_fill.py
+-rw-r--r--   0        0        0     2142 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/content/dictionary_line.py
+-rw-r--r--   0        0        0     1546 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/content/entry_color.py
+-rw-r--r--   0        0        0     1687 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/content/entry_line.py
+-rw-r--r--   0        0        0     1651 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/content/fill.py
+-rw-r--r--   0        0        0     1427 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/content/layer_ref.py
+-rw-r--r--   0        0        0     3931 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/content/standard_geometries_dictionary.py
+-rw-r--r--   0        0        0        0 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/ecad/__init__.py
+-rw-r--r--   0        0        0        0 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/__init__.py
+-rw-r--r--   0        0        0     2300 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/assembly_drawing.py
+-rw-r--r--   0        0        0     2405 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/cad_data.py
+-rw-r--r--   0        0        0     2628 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/component.py
+-rw-r--r--   0        0        0     2083 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/drill.py
+-rw-r--r--   0        0        0     3023 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/feature.py
+-rw-r--r--   0        0        0     2270 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/layer.py
+-rw-r--r--   0        0        0     8586 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/layer_feature.py
+-rw-r--r--   0        0        0     2042 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/logical_net.py
+-rw-r--r--   0        0        0     2197 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/outline.py
+-rw-r--r--   0        0        0     5598 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/package.py
+-rw-r--r--   0        0        0     2535 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/padstack_def.py
+-rw-r--r--   0        0        0     2004 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/padstack_hole_def.py
+-rw-r--r--   0        0        0     3866 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/padstack_instance.py
+-rw-r--r--   0        0        0     2014 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/padstack_pad_def.py
+-rw-r--r--   0        0        0     5044 2024-04-19 14:58:42.307572 pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/path.py
+-rw-r--r--   0        0        0     3640 2024-04-19 14:58:42.311572 pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/phy_net.py
+-rw-r--r--   0        0        0     2124 2024-04-19 14:58:42.311572 pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/pin.py
+-rw-r--r--   0        0        0     8945 2024-04-19 14:58:42.311572 pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/polygon.py
+-rw-r--r--   0        0        0     2781 2024-04-19 14:58:42.311572 pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/profile.py
+-rw-r--r--   0        0        0     2274 2024-04-19 14:58:42.311572 pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/stackup.py
+-rw-r--r--   0        0        0     2717 2024-04-19 14:58:42.311572 pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/stackup_group.py
+-rw-r--r--   0        0        0     1970 2024-04-19 14:58:42.311572 pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/stackup_layer.py
+-rw-r--r--   0        0        0    12590 2024-04-19 14:58:42.311572 pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/step.py
+-rw-r--r--   0        0        0     2143 2024-04-19 14:58:42.311572 pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_header.py
+-rw-r--r--   0        0        0     1797 2024-04-19 14:58:42.311572 pyedb-0.8.0/src/pyedb/ipc2581/ecad/ecad.py
+-rw-r--r--   0        0        0     3115 2024-04-19 14:58:42.311572 pyedb-0.8.0/src/pyedb/ipc2581/ecad/spec.py
+-rw-r--r--   0        0        0     2739 2024-04-19 14:58:42.311572 pyedb-0.8.0/src/pyedb/ipc2581/history_record.py
+-rw-r--r--   0        0        0    22685 2024-04-19 14:58:42.311572 pyedb-0.8.0/src/pyedb/ipc2581/ipc2581.py
+-rw-r--r--   0        0        0     2092 2024-04-19 14:58:42.311572 pyedb-0.8.0/src/pyedb/ipc2581/logistic_header.py
+-rw-r--r--   0        0        0        0 2024-04-19 14:58:42.311572 pyedb-0.8.0/src/pyedb/misc/__init__.py
+-rw-r--r--   0        0        0     1759 2024-04-19 14:58:42.311572 pyedb-0.8.0/src/pyedb/misc/aedtlib_personalib_install.py
+-rw-r--r--   0        0        0    12223 2024-04-19 14:58:42.311572 pyedb-0.8.0/src/pyedb/misc/downloads.py
+-rw-r--r--   0        0        0     3315 2024-04-19 14:58:42.311572 pyedb-0.8.0/src/pyedb/misc/misc.py
+-rw-r--r--   0        0        0      301 2024-04-19 14:58:42.311572 pyedb-0.8.0/src/pyedb/misc/pyedb.runtimeconfig.json
+-rw-r--r--   0        0        0        0 2024-04-19 14:58:42.311572 pyedb-0.8.0/src/pyedb/misc/siw_feature_config/__init__.py
+-rw-r--r--   0        0        0        0 2024-04-19 14:58:42.311572 pyedb-0.8.0/src/pyedb/misc/siw_feature_config/emc/__init__.py
+-rw-r--r--   0        0        0     1560 2024-04-19 14:58:42.311572 pyedb-0.8.0/src/pyedb/misc/siw_feature_config/emc/component_tags.py
+-rw-r--r--   0        0        0     1184 2024-04-19 14:58:42.311572 pyedb-0.8.0/src/pyedb/misc/siw_feature_config/emc/net_tags.py
+-rw-r--r--   0        0        0     1557 2024-04-19 14:58:42.311572 pyedb-0.8.0/src/pyedb/misc/siw_feature_config/emc/tag_library.py
+-rw-r--r--   0        0        0     2521 2024-04-19 14:58:42.311572 pyedb-0.8.0/src/pyedb/misc/siw_feature_config/emc/xml_generic.py
+-rw-r--r--   0        0        0     7389 2024-04-19 14:58:42.311572 pyedb-0.8.0/src/pyedb/misc/siw_feature_config/emc_rule_checker_settings.py
+-rw-r--r--   0        0        0      465 2024-04-19 14:58:42.311572 pyedb-0.8.0/src/pyedb/misc/utilities.py
+-rw-r--r--   0        0        0    66820 2024-04-19 14:58:42.311572 pyedb-0.8.0/src/pyedb/modeler/geometry_operators.py
+-rw-r--r--   0        0        0    11576 2024-04-19 14:58:42.311572 pyedb-0.8.0/src/pyedb/siwave.py
+-rw-r--r--   0        0        0     8320 1970-01-01 00:00:00.000000 pyedb-0.8.0/PKG-INFO
```

### Comparing `pyedb-0.7.1/LICENSE` & `pyedb-0.8.0/LICENSE`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/README.md` & `pyedb-0.8.0/README.md`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/pyproject.toml` & `pyedb-0.8.0/pyproject.toml`

 * *Files 2% similar despite different names*

```diff
@@ -25,41 +25,41 @@
 ]
 
 dependencies = [
     "cffi>=1.16.0,<1.17; platform_system=='Linux'",
     "pywin32 >= 303;platform_system=='Windows'",
     "ansys-pythonnet >= 3.1.0rc3",
     "dotnetcore2 ==3.1.23;platform_system=='Linux'",
-    "pydantic>=2.6.4,<2.7",
+    "pydantic>=2.6.4,<2.8",
     "toml == 0.10.2",
 ]
 
 [project.optional-dependencies]
 tests = [
     "matplotlib>=3.5.0,<3.9",
     "numpy>=1.20.0,<2",
     "mock>=5.1.0,<5.2",
     "pandas>=1.1.0,<2.3",
     "pytest>=7.4.0,<8.2",
     "pytest-cov>=4.0.0,<5.1",
     "pytest-xdist>=3.5.0,<3.6",
 ]
 doc = [
-    "ansys-sphinx-theme>=0.10.0,<0.15",
+    "ansys-sphinx-theme>=0.10.0,<0.16",
     "imageio>=2.30.0,<2.35",
     "ipython>=8.13.0,<8.24",
     "jupyterlab>=4.0.0,<4.3",
     "matplotlib>=3.5.0,<3.9",
     "nbsphinx>=0.9.0,<0.10",
     "numpydoc>=1.5.0,<1.8",
     "pypandoc>=1.10.0,<1.14",
     # NOTE: Remove recommonmark once examples are reworked.
     "recommonmark",
-    "Sphinx>=7.1.0,<7.3",
-    "sphinx-autobuild==2021.3.14; python_version == '3.8'",
+    "Sphinx>=7.1.0,<7.4",
+    "sphinx-autobuild==2024.2.4; python_version == '3.8'",
     "sphinx-autobuild==2024.2.4; python_version > '3.8'",
     "sphinx-copybutton>=0.5.0,<0.6",
     "sphinx-gallery>=0.14.0,<0.16",
     "sphinx_design>=0.4.0,<0.6",
 ]
 full = [
     "matplotlib>=3.5.0,<3.9",
```

### Comparing `pyedb-0.7.1/src/pyedb/__init__.py` & `pyedb-0.8.0/src/pyedb/__init__.py`

 * *Files 7% similar despite different names*

```diff
@@ -40,13 +40,13 @@
 
 
 deprecation_warning()
 
 #
 
 pyedb_path = os.path.dirname(__file__)
-__version__ = "0.7.1"
+__version__ = "0.8.0"
 version = __version__
 
 #
 
 from pyedb.generic.design_types import Edb, Siwave
```

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/application/Variables.py` & `pyedb-0.8.0/src/pyedb/dotnet/application/Variables.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/clr_module.py` & `pyedb-0.8.0/src/pyedb/dotnet/clr_module.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb.py`

 * *Files 0% similar despite different names*

```diff
@@ -3633,14 +3633,15 @@
         --------
         >>> from pyedb.dotnet.edb import Edb
         >>> edbapp = Edb()
         >>> setup1 = edbapp.create_hfss_setup("setup1")
         >>> setup1.hfss_port_settings.max_delta_z0 = 0.5
         """
         if name in self.setups:
+            self.logger.info("setup already exists")
             return False
         setup = HfssSimulationSetup(self).create(name)
         return setup
 
     @pyedb_function_handler()
     def create_siwave_syz_setup(self, name=None):
         """Create a setup from a template.
```

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/cell/hierarchy/model.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/cell/hierarchy/model.py`

 * *Files 1% similar despite different names*

```diff
@@ -16,15 +16,15 @@
 # IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 # FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 # AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 # LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 # OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 # SOFTWARE.
 
-from pyedb.dotnet.edb_core.edb_data.obj_base import ObjBase
+from pyedb.dotnet.edb_core.obj_base import ObjBase
 from pyedb.generic.general_methods import pyedb_function_handler
 
 
 class Model(ObjBase):
     """Manages model class."""
 
     def __init__(self, pedb, edb_object):
```

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/components.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/components.py`

 * *Files 0% similar despite different names*

```diff
@@ -34,14 +34,15 @@
 from pyedb.dotnet.edb_core.edb_data.components_data import EDBComponent
 from pyedb.dotnet.edb_core.edb_data.padstacks_data import EDBPadstackInstance
 from pyedb.dotnet.edb_core.edb_data.sources import Source, SourceType
 from pyedb.dotnet.edb_core.general import convert_py_list_to_net_list
 from pyedb.dotnet.edb_core.padstack import EdbPadstacks
 from pyedb.generic.general_methods import (
     _retry_ntimes,
+    generate_unique_name,
     get_filename_without_extension,
     pyedb_function_handler,
 )
 from pyedb.modeler.geometry_operators import GeometryOperators
 
 
 def resistor_value_parser(RValue):
@@ -1446,15 +1447,15 @@
             is_parallel=is_parallel,
         )
 
     @pyedb_function_handler()
     def create(
         self,
         pins,
-        component_name,
+        component_name=None,
         placement_layer=None,
         component_part_name=None,
         is_rlc=False,
         r_value=None,
         c_value=None,
         l_value=None,
         is_parallel=False,
@@ -1492,14 +1493,16 @@
 
         >>> from pyedb import Edb
         >>> edbapp = Edb("myaedbfolder")
         >>> pins = edbapp.components.get_pin_from_component("A1")
         >>> edbapp.components.create(pins, "A1New")
 
         """
+        if not component_name:
+            component_name = generate_unique_name("Comp_")
         if component_part_name:
             compdef = self._getComponentDefinition(component_part_name, pins)
         else:
             compdef = self._getComponentDefinition(component_name, pins)
         if not compdef:
             return False
         new_cmp = self._pedb.edb_api.cell.hierarchy.component.Create(
```

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/configuration.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/configuration.py`

 * *Files 2% similar despite different names*

```diff
@@ -379,14 +379,15 @@
 
             if src_type == "voltage":
                 src_obj = self._pedb.create_voltage_source(pos_terminal, neg_terminal)
                 src_obj.magnitude = src["magnitude"]
             elif src_type == "current":
                 src_obj = self._pedb.create_current_source(pos_terminal, neg_terminal)
                 src_obj.magnitude = src["magnitude"]
+            src_obj.name = name
 
     @pyedb_function_handler
     def _load_setups(self):
         """Imports setup information from json."""
         for setup in self.data["setups"]:
             setup_type = setup["type"]
 
@@ -397,14 +398,21 @@
                 if name not in self._pedb.setups:
                     self._pedb.logger.info("Setup {} created.".format(name))
                     edb_setup = self._pedb.create_siwave_dc_setup(name)
                 else:
                     self._pedb.logger.warning("Setup {} already existing. Editing it.".format(name))
                     edb_setup = self._pedb.setups[name]
                 edb_setup.set_dc_slider(setup["dc_slider_position"])
+                dc_ir_settings = setup.get("dc_ir_settings", None)
+                if dc_ir_settings:
+                    for k, v in dc_ir_settings.items():
+                        if k not in dir(edb_setup.dc_ir_settings):
+                            self._pedb.logger.error(f"Invalid keyword {k}")
+                        else:
+                            setattr(edb_setup.dc_ir_settings, k, v)
             else:
                 if setup_type.lower() == "hfss":
                     if name not in self._pedb.setups:
                         self._pedb.logger.info("Setup {} created.".format(name))
                         edb_setup = self._pedb.create_hfss_setup(name)
                     else:
                         self._pedb.logger.warning("Setup {} already existing. Editing it.".format(name))
@@ -549,21 +557,29 @@
                 for refdes, comp in comps.items():
                     if refdes in sp["components"]:
                         comp.assign_spice_model(fpath, sp_name, sub_circuit_name)
 
     @pyedb_function_handler
     def _load_pin_groups(self):
         """Imports pin groups information from JSON."""
+        comps = self._pedb.components.components
         for pg in self.data["pin_groups"]:
             name = pg["name"]
             ref_designator = pg["reference_designator"]
             if "pins" in pg:
                 self._pedb.siwave.create_pin_group(ref_designator, pg["pins"], name)
             elif "net" in pg:
-                self._pedb.siwave.create_pin_group_on_net(ref_designator, pg["net"], name)
+                nets = pg["net"]
+                nets = nets if isinstance(nets, list) else [nets]
+                comp = comps[ref_designator]
+                pins = [p for p, obj in comp.pins.items() if obj.net_name in nets]
+                self._pedb.siwave.create_pin_group(ref_designator, pins, name)
+            else:
+                pins = [i for i in comps[ref_designator].pins.keys()]
+                self._pedb.siwave.create_pin_group(ref_designator, pins, name)
 
     @pyedb_function_handler
     def _load_nets(self):
         """Imports nets information from JSON."""
         nets = self._pedb.nets.nets
         for i in self.data["nets"]["power_ground_nets"]:
             nets[i].is_power_ground = True
@@ -688,15 +704,19 @@
     def _load_package_def(self):
         """Imports package definition information from JSON."""
         comps = self._pedb.components.components
         for pkgd in self.data["package_definitions"]:
             name = pkgd["name"]
             if name in self._pedb.definitions.package:
                 self._pedb.definitions.package[name].delete()
-            package_def = PackageDef(self._pedb, name=name)
+            extent_bounding_box = pkgd.get("extent_bounding_box", None)
+            if extent_bounding_box:
+                package_def = PackageDef(self._pedb, name=name, extent_bounding_box=extent_bounding_box)
+            else:
+                package_def = PackageDef(self._pedb, name=name, component_part_name=pkgd["component_definition"])
             package_def.maximum_power = pkgd["maximum_power"]
             package_def.therm_cond = pkgd["therm_cond"]
             package_def.theta_jb = pkgd["theta_jb"]
             package_def.theta_jc = pkgd["theta_jc"]
             package_def.height = pkgd["height"]
 
             heatsink = pkgd.get("heatsink", None)
@@ -704,10 +724,22 @@
                 package_def.set_heatsink(
                     heatsink["fin_base_height"],
                     heatsink["fin_height"],
                     heatsink["fin_orientation"],
                     heatsink["fin_spacing"],
                     heatsink["fin_thickness"],
                 )
-            json_comps = pkgd["components"] if isinstance(pkgd["components"], list) else [pkgd["components"]]
-            for i in json_comps:
-                comps[i].package_def = name
+
+            comp_def_name = pkgd["component_definition"]
+            comp_def = self._pedb.definitions.component[comp_def_name]
+
+            comp_list = dict()
+            if pkgd["apply_to_all"]:
+                comp_list.update(
+                    {refdes: comp for refdes, comp in comp_def.components.items() if refdes not in pkgd["components"]}
+                )
+            else:
+                comp_list.update(
+                    {refdes: comp for refdes, comp in comp_def.components.items() if refdes in pkgd["components"]}
+                )
+            for _, i in comp_list.items():
+                i.package_def = name
```

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/definition/component_def.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/definition/component_def.py`

 * *Files 0% similar despite different names*

```diff
@@ -19,15 +19,15 @@
 # LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 # OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 # SOFTWARE.
 
 import os
 
 from pyedb.dotnet.edb_core.definition.component_model import NPortComponentModel
-from pyedb.dotnet.edb_core.edb_data.obj_base import ObjBase
+from pyedb.dotnet.edb_core.obj_base import ObjBase
 from pyedb.generic.general_methods import pyedb_function_handler
 
 
 class EDBComponentDef(ObjBase):
     """Manages EDB functionalities for component definitions.
 
     Parameters
```

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/definition/component_model.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/definition/component_model.py`

 * *Files 5% similar despite different names*

```diff
@@ -16,15 +16,15 @@
 # IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 # FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 # AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 # LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 # OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 # SOFTWARE.
 
-from pyedb.dotnet.edb_core.edb_data.obj_base import ObjBase
+from pyedb.dotnet.edb_core.obj_base import ObjBase
 from pyedb.generic.general_methods import pyedb_function_handler
 
 
 class ComponentModel(ObjBase):
     """Manages component model class."""
 
     def __init__(self, pedb, edb_object):
```

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/definition/definition_obj.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/definition/definition_obj.py`

 * *Files 1% similar despite different names*

```diff
@@ -16,15 +16,15 @@
 # IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 # FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 # AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 # LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 # OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 # SOFTWARE.
 
-from pyedb.dotnet.edb_core.edb_data.obj_base import ObjBase
+from pyedb.dotnet.edb_core.obj_base import ObjBase
 
 
 class DefinitionObj(ObjBase):
     """Base class for definition objects."""
 
     def __init__(self, pedb, edb_object):
         super().__init__(pedb, edb_object)
```

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/definition/definitions.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/definition/definitions.py`

 * *Files 18% similar despite different names*

```diff
@@ -36,21 +36,27 @@
 
     @property
     def package(self):
         """Package definitions."""
         return {l.GetName(): PackageDef(self._pedb, l) for l in list(self._pedb.active_db.PackageDefs)}
 
     @pyedb_function_handler
-    def add_package_def(self, name):
+    def add_package_def(self, name, component_part_name=None, boundary_points=None):
         """Add a package definition.
 
         Parameters
         ----------
         name: str
             Name of the package definition.
+        component_part_name : str, optional
+            Part name of the component.
+        boundary_points : list, optional
+            Boundary points which define the shape of the package.
 
         Returns
         -------
 
         """
-        package_def = PackageDef(self._pedb, name=name)
+        package_def = PackageDef(
+            self._pedb, name=name, component_part_name=component_part_name, extent_bounding_box=boundary_points
+        )
         return package_def
```

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/definition/package_def.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/definition/package_def.py`

 * *Files 25% similar despite different names*

```diff
@@ -16,67 +16,86 @@
 # IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 # FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 # AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 # LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 # OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 # SOFTWARE.
 
-from pyedb.dotnet.edb_core.dotnet.database import PolygonDataDotNet
-from pyedb.dotnet.edb_core.edb_data.obj_base import ObjBase
+from pyedb.dotnet.edb_core.geometry.polygon_data import PolygonData
+from pyedb.dotnet.edb_core.obj_base import ObjBase
 from pyedb.generic.general_methods import pyedb_function_handler
 
 
 class PackageDef(ObjBase):
     """Manages EDB functionalities for package definitions.
 
     Parameters
     ----------
     pedb : :class:`pyedb.edb`
         Edb object.
     edb_object : object
-        Edb PackageDef Object
+    Edb PackageDef Object
+        component_part_name : str, optional
+        Part name of the component.
+    extent_bounding_box : list, optional
+        Bounding box defines the shape of the package. For example, [[0, 0], ["2mm", "2mm"].
+
     """
 
-    def __init__(self, pedb, edb_object=None, name=None):
-        self._pedb = pedb
-        if edb_object is None and name is not None:
-            self._edb_object = self.__create_from_name(name)
+    def __init__(self, pedb, edb_object=None, name=None, component_part_name=None, extent_bounding_box=None):
+        super().__init__(pedb, edb_object)
+        if self._edb_object is None and name is not None:
+            self._edb_object = self.__create_from_name(name, component_part_name, extent_bounding_box)
         else:
             self._edb_object = edb_object
 
     @pyedb_function_handler
-    def __create_from_name(self, name):
-        """Create a package defininitiion.
+    def __create_from_name(self, name, component_part_name=None, extent_bounding_box=None):
+        """Create a package definition.
 
         Parameters
         ----------
         name: str
             Name of the package definition.
 
         Returns
         -------
         edb_object: object
             EDB PackageDef Object
         """
         edb_object = self._pedb.edb_api.definition.PackageDef.Create(self._pedb.active_db, name)
-        pointA = self._pedb.edb_api.geometry.point_data(
-            self._pedb.edb_value(0),
-            self._pedb.edb_value(0),
-        )
+        if component_part_name:
+            x_pt1, y_pt1, x_pt2, y_pt2 = list(
+                self._pedb.components.definitions[component_part_name].components.values()
+            )[0].bounding_box
+            x_mid = (x_pt1 + x_pt2) / 2
+            y_mid = (y_pt1 + y_pt2) / 2
+            bbox = [[y_pt1 - y_mid, x_pt1 - x_mid], [y_pt2 - y_mid, x_pt2 - x_mid]]
+        else:
+            bbox = extent_bounding_box
+        polygon_data = PolygonData(self._pedb, create_from_bounding_box=True, points=bbox)
 
-        polygon = PolygonDataDotNet(self._pedb).create_from_bbox([pointA, pointA])
-        edb_object.SetExteriorBoundary(polygon)
+        edb_object.SetExteriorBoundary(polygon_data._edb_object)
         return edb_object
 
     @pyedb_function_handler
     def delete(self):
         """Delete a package definition object from the database."""
         return self._edb_object.Delete()
 
     @property
+    def exterior_boundary(self):
+        """Get the exterior boundary of a package definition."""
+        return PolygonData(self._pedb, self._edb_object.GetExteriorBoundary()).points
+
+    @exterior_boundary.setter
+    def exterior_boundary(self, value):
+        self._edb_object.SetExteriorBoundary(value._edb_object)
+
+    @property
     def maximum_power(self):
         """Maximum power of the package."""
         return self._edb_object.GetMaximumPower().ToDouble()
 
     @maximum_power.setter
     def maximum_power(self, value):
         value = self._pedb.edb_value(value)
```

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/dotnet/database.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/dotnet/database.py`

 * *Files 0% similar despite different names*

```diff
@@ -717,18 +717,19 @@
             except IndexError:
                 raise Exception("No ANSYSEM_ROOTxxx is found.")
         self.edbversion = edbversion
         self.student_version = student_version
         """Initialize DLLs."""
         from pyedb.dotnet.clr_module import _clr, edb_initialized
 
-        if settings.enable_screen_logs:
-            self._logger.enable_stdout_log()
-        else:  # pragma: no cover
-            self._logger.disable_stdout_log()
+        if not settings.use_pyaedt_log:
+            if settings.enable_screen_logs:
+                self._logger.enable_stdout_log()
+            else:  # pragma: no cover
+                self._logger.disable_stdout_log()
         if not edb_initialized:  # pragma: no cover
             self._logger.error("Failed to initialize Dlls.")
             return
         self._logger.info("Logger is initialized in EDB.")
         self._logger.info("legacy v%s", __version__)
         self._logger.info("Python version %s", sys.version)
         if is_linux:  # pragma: no cover
```

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/dotnet/layout.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/dotnet/layout.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/dotnet/primitive.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/dotnet/primitive.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/components_data.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/components_data.py`

 * *Files 0% similar despite different names*

```diff
@@ -325,15 +325,15 @@
         """Solder ball height if available."""
         if "GetSolderBallProperty" in dir(self.component_property):
             return self.component_property.GetSolderBallProperty().GetHeight()
         return None
 
     @solder_ball_height.setter
     def solder_ball_height(self, value):
-        if "GetSolderBallProperty" in dir(self.component_property) and value:
+        if "GetSolderBallProperty" in dir(self.component_property):
             sball_height = round(self._edb.utility.Value(value).ToDouble(), 9)
             cmp_property = self.component_property
             solder_ball_prop = cmp_property.GetSolderBallProperty().Clone()
             solder_ball_prop.SetHeight(self._get_edb_value(sball_height))
             cmp_property.SetSolderBallProperty(solder_ball_prop)
             self.component_property = cmp_property
```

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/connectable.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/connectable.py`

 * *Files 1% similar despite different names*

```diff
@@ -16,15 +16,15 @@
 # IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 # FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 # AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 # LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 # OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 # SOFTWARE.
 
-from pyedb.dotnet.edb_core.edb_data.obj_base import ObjBase
+from pyedb.dotnet.edb_core.obj_base import ObjBase
 from pyedb.generic.general_methods import pyedb_function_handler
 
 
 class LayoutObjInstance:
     """Manages EDB functionalities for the layout object instance."""
 
     def __init__(self, pedb, edb_object):
```

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/control_file.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/control_file.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/design_options.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/design_options.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/edbvalue.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/edbvalue.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/hfss_extent_info.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/hfss_extent_info.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/hfss_simulation_setup_data.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/hfss_simulation_setup_data.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/layer_data.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/layer_data.py`

 * *Files 1% similar despite different names*

```diff
@@ -559,16 +559,17 @@
             self.color = layer["color"]
             self.type = layer["type"]
             if isinstance(layer["material"], str):
                 self.material = layer["material"]
             else:
                 material_data = layer["material"]
                 if material_data is not None:
-                    self._pclass._pedb.materials.add_material(**material_data)
-                    self.material = layer["material"]["name"]
+                    material_name = layer["material"]["name"]
+                    self._pclass._pedb.materials.add_material(material_name, **material_data)
+                    self.material = material_name
             if layer["dielectric_fill"]:
                 if isinstance(layer["dielectric_fill"], str):
                     self.dielectric_fill = layer["dielectric_fill"]
                 else:
                     dielectric_data = layer["dielectric_fill"]
                     if dielectric_data is not None:
                         self._pclass._pedb.materials.add_material(**dielectric_data)
```

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/nets_data.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/nets_data.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/obj_base.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/geometry/point_data.py`

 * *Files 20% similar despite different names*

```diff
@@ -17,35 +17,21 @@
 # FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 # AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 # LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 # OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 # SOFTWARE.
 
 
-class ObjBase(object):
-    """Manages EDB functionalities for a base object."""
+class PointData:
+    """Point Data."""
 
-    def __init__(self, pedb, edb_object):
+    def __init__(self, pedb, edb_object=None, x=None, y=None):
         self._pedb = pedb
-        self._edb_object = edb_object
-
-    @property
-    def is_null(self):
-        """Flag indicating if this object is null."""
-        return self._edb_object.IsNull()
-
-    @property
-    def type(self):
-        """Type of the edb object."""
-        try:
-            return self._edb_object.GetType()
-        except AttributeError:  # pragma: no cover
-            return None
-
-    @property
-    def name(self):
-        """Name of the definition."""
-        return self._edb_object.GetName()
-
-    @name.setter
-    def name(self, value):
-        self._edb_object.SetName(value)
+        if edb_object:
+            self._edb_object = edb_object
+        else:
+            x = x if x else 0
+            y = y if y else 0
+            self._edb_object = self._pedb.edb_api.geometry.point_data(
+                self._pedb.edb_value(x),
+                self._pedb.edb_value(y),
+            )
```

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/padstacks_data.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/padstacks_data.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/ports.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/ports.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/primitives_data.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/primitives_data.py`

 * *Files 0% similar despite different names*

```diff
@@ -884,25 +884,27 @@
             return self._app.hfss.create_wave_port(
                 self.id, pos, name, 50, horizontal_extent_factor, vertical_extent_factor, pec_launch_width
             )
         else:
             return self._app.hfss.create_edge_port_vertical(self.id, pos, name, 50, reference_layer)
 
     @pyedb_function_handler()
-    def create_via_fence(self, distance, gap, padstack_name):
+    def create_via_fence(self, distance, gap, padstack_name, net_name="GND"):
         """Create via fences on both sides of the trace.
 
         Parameters
         ----------
         distance: str, float
             Distance between via fence and trace center line.
         gap: str, float
             Gap between vias.
         padstack_name: str
             Name of the via padstack.
+        net_name: str, optional
+            Name of the net.
 
         Returns
         -------
         """
 
         def getAngle(v1, v2):  # pragma: no cover
             v1_mag = math.sqrt(v1[0] ** 2 + v1[1] ** 2)
@@ -986,15 +988,15 @@
             return leftline, rightline
 
         distance = self._pedb.edb_value(distance).ToDouble()
         gap = self._pedb.edb_value(gap).ToDouble()
         center_line = self.get_center_line()
         leftline, rightline = getParalletLines(center_line, distance)
         for x, y in getLocations(rightline, gap) + getLocations(leftline, gap):
-            self._pedb.padstacks.place([x, y], padstack_name)
+            self._pedb.padstacks.place([x, y], padstack_name, net_name=net_name)
 
 
 class EdbRectangle(EDBPrimitives, RectangleDotNet):
     def __init__(self, raw_primitive, core_app):
         EDBPrimitives.__init__(self, raw_primitive, core_app)
         RectangleDotNet.__init__(self, self._app, raw_primitive)
```

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/simulation_configuration.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/simulation_configuration.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/siwave_simulation_setup_data.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/siwave_simulation_setup_data.py`

 * *Files 0% similar despite different names*

```diff
@@ -23,14 +23,15 @@
 import warnings
 
 from pyedb.dotnet.edb_core.general import (
     convert_netdict_to_pydict,
     convert_pydict_to_netdict,
 )
 from pyedb.dotnet.edb_core.utilities.simulation_setup import BaseSimulationSetup
+from pyedb.dotnet.sim_setup_data.data.siw_dc_ir_settings import SiwaveDCIRSettings
 from pyedb.generic.general_methods import is_linux, pyedb_function_handler
 
 
 def _parse_value(v):
     """Parse value in C sharp format."""
     #  duck typing parse of the value 'v'
     if v is None or v == "":
@@ -1140,14 +1141,19 @@
         :class:`SiwaveDCSimulationSetup`
         """
         self._name = name
         self._create(name)
         self.set_dc_slider(1)
         return self
 
+    @property
+    def dc_ir_settings(self):
+        """DC IR settings."""
+        return SiwaveDCIRSettings(self)
+
     @pyedb_function_handler
     def get_configurations(self):
         """Get SIwave DC simulation settings.
 
         Returns
         -------
         dict
```

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/sources.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/sources.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/terminals.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/terminals.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/utilities.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/utilities.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/edb_data/variables.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/edb_data/variables.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/general.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/general.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/hfss.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/hfss.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/layout.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/layout.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/layout_validation.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/layout_validation.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/materials.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/materials.py`

 * *Files 6% similar despite different names*

```diff
@@ -69,14 +69,27 @@
     "loss_tangent_at_frequency",
     "permittivity_at_frequency",
     "dc_conductivity",
     "dc_permittivity",
 ]
 
 
+def get_line_float_value(line):
+    """Retrieve the float value expected in the line of an AMAT file.
+
+    The associated string is expected to follow one of the following cases:
+    - simple('permittivity', 12.)
+    - permittivity='12'.
+    """
+    try:
+        return float(re.split(",|=", line)[-1].strip("'\n)"))
+    except ValueError:
+        return None
+
+
 class MaterialProperties(BaseModel):
     """Store material properties."""
 
     conductivity: Optional[PositiveFloat] = None
     dielectric_loss_tangent: Optional[PositiveFloat] = None
     magnetic_loss_tangent: Optional[PositiveFloat] = None
     mass_density: Optional[PositiveFloat] = None
@@ -396,15 +409,15 @@
     @pyedb_function_handler()
     def update(self, input_dict: dict):
         if input_dict:
             # Update attributes
             for attribute in ATTRIBUTES:
                 if attribute in input_dict:
                     setattr(self, attribute, input_dict[attribute])
-            if "loss_tangent" in input_dict:
+            if "loss_tangent" in input_dict:  # pragma: no cover
                 setattr(self, "loss_tangent", input_dict["loss_tangent"])
 
             # Update DS model
             # NOTE: Contrary to before we don't test 'dielectric_model_frequency' only
             if any(map(lambda attribute: input_dict.get(attribute, None) is not None, DC_ATTRIBUTES)):
                 if not self.__dc_model:
                     self.__dc_model = self.__edb_definition.DjordjecvicSarkarModel()
@@ -517,15 +530,15 @@
         """
         if name in self.__materials:
             raise ValueError(f"Material {name} already exists in material library.")
 
         material_def = self.__edb_definition.MaterialDef.Create(self.__edb.active_db, name)
         material = Material(self.__edb, material_def)
         attributes_input_dict = {key: val for (key, val) in kwargs.items() if key in ATTRIBUTES + DC_ATTRIBUTES}
-        if "loss_tangent" in kwargs:
+        if "loss_tangent" in kwargs:  # pragma: no cover
             warnings.warn(
                 "This key is deprecated in versions >0.7.0 and will soon be removed. "
                 "Use key dielectric_loss_tangent instead.",
                 DeprecationWarning,
             )
             attributes_input_dict["dielectric_loss_tangent"] = kwargs["loss_tangent"]
         if attributes_input_dict:
@@ -546,22 +559,18 @@
             Conductivity of the new material.
 
         Returns
         -------
         :class:`pyedb.dotnet.edb_core.materials.Material`
 
         """
-        if name in self.__materials:
-            raise ValueError(f"Material {name} already exists in material library.")
-
         extended_kwargs = {key: value for (key, value) in kwargs.items()}
         extended_kwargs["conductivity"] = conductivity
         material = self.add_material(name, **extended_kwargs)
 
-        self.__materials[name] = material
         return material
 
     @pyedb_function_handler()
     def add_dielectric_material(self, name, permittivity, dielectric_loss_tangent, **kwargs):
         """Add a new dielectric material in library.
 
         Parameters
@@ -573,23 +582,19 @@
         dielectric_loss_tangent : str, float, int
             Dielectric loss tangent of the new material.
 
         Returns
         -------
         :class:`pyedb.dotnet.edb_core.materials.Material`
         """
-        if name in self.__materials:
-            raise ValueError(f"Material {name} already exists in material library.")
-
         extended_kwargs = {key: value for (key, value) in kwargs.items()}
         extended_kwargs["permittivity"] = permittivity
         extended_kwargs["dielectric_loss_tangent"] = dielectric_loss_tangent
         material = self.add_material(name, **extended_kwargs)
 
-        self.__materials[name] = material
         return material
 
     @pyedb_function_handler()
     def add_djordjevicsarkar_dielectric(
         self,
         name,
         permittivity_at_frequency,
@@ -628,15 +633,15 @@
         if dc_permittivity is not None:
             material_model.SetUseDCRelativePermitivity(True)
             material_model.SetDCRelativePermitivity(dc_permittivity)
         try:
             material = self.__add_dielectric_material_model(name, material_model)
             for key, value in kwargs.items():
                 setattr(material, key, value)
-            if "loss_tangent" in kwargs:
+            if "loss_tangent" in kwargs:  # pragma: no cover
                 warnings.warn(
                     "This key is deprecated in versions >0.7.0 and will soon be removed. "
                     "Use key dielectric_loss_tangent instead.",
                     DeprecationWarning,
                 )
                 setattr(material, "dielectric_loss_tangent", kwargs["loss_tangent"])
             self.__materials[name] = material
@@ -694,15 +699,15 @@
         material_model.SetRelativePermitivityAtHighLowFrequency(
             self.__edb_value(permittivity_low), self.__edb_value(permittivity_high)
         )
         try:
             material = self.__add_dielectric_material_model(name, material_model)
             for key, value in kwargs.items():
                 setattr(material, key, value)
-            if "loss_tangent" in kwargs:
+            if "loss_tangent" in kwargs:  # pragma: no cover
                 warnings.warn(
                     "This key is deprecated in versions >0.7.0 and will soon be removed. "
                     "Use key dielectric_loss_tangent instead.",
                     DeprecationWarning,
                 )
                 setattr(material, "dielectric_loss_tangent", kwargs["loss_tangent"])
             self.__materials[name] = material
@@ -757,15 +762,15 @@
             convert_py_list_to_net_list(permittivities),
             convert_py_list_to_net_list(loss_tangents),
         )
         try:
             material = self.__add_dielectric_material_model(name, material_model)
             for key, value in kwargs.items():
                 setattr(material, key, value)
-            if "loss_tangent" in kwargs:
+            if "loss_tangent" in kwargs:  # pragma: no cover
                 warnings.warn(
                     "This key is deprecated in versions >0.7.0 and will soon be removed. "
                     "Use key dielectric_loss_tangent instead.",
                     DeprecationWarning,
                 )
                 setattr(material, "dielectric_loss_tangent", kwargs["loss_tangent"])
             self.__materials[name] = material
@@ -833,57 +838,37 @@
     def update_material(self, material_name, input_dict):
         """Update material attributes."""
         if material_name not in self.__materials:
             raise ValueError(f"Material {material_name} does not exist in material library.")
 
         material = self[material_name]
         attributes_input_dict = {key: val for (key, val) in input_dict.items() if key in ATTRIBUTES + DC_ATTRIBUTES}
-        if "loss_tangent" in input_dict:
+        if "loss_tangent" in input_dict:  # pragma: no cover
             warnings.warn(
                 "This key is deprecated in versions >0.7.0 and will soon be removed. "
                 "Use key dielectric_loss_tangent instead.",
                 DeprecationWarning,
             )
             attributes_input_dict["dielectric_loss_tangent"] = input_dict["loss_tangent"]
         if attributes_input_dict:
             material.update(attributes_input_dict)
         self.__materials[material_name] = material
         return material
 
     @pyedb_function_handler()
     def load_material(self, material):
         """Load material."""
-        if self.materials:
-            mat_keys = [i.lower() for i in self.materials.keys()]
-            mat_keys_case = [i for i in self.materials.keys()]
-        else:
-            mat_keys = []
-            mat_keys_case = []
-
-        if not material:
-            return
-        if material["name"].lower() not in mat_keys:
-            if "conductivity" not in material:
-                self.add_dielectric_material(material["name"], material["permittivity"], material["loss_tangent"])
-            elif material["conductivity"] > 1e4:
-                self.add_conductor_material(material["name"], material["conductivity"])
-            else:
-                self.add_dielectric_material(material["name"], material["permittivity"], material["loss_tangent"])
-            self.materials[material["name"]]._load(material)
-        else:
-            self.materials[mat_keys_case[mat_keys.index(material["name"].lower())]]._load(material)
-
         if material:
             material_name = material["name"]
             material_conductivity = material.get("conductivity", None)
             if material_conductivity and material_conductivity > 1e4:
                 self.add_conductor_material(material_name, material_conductivity)
             else:
                 material_permittivity = material["permittivity"]
-                if "loss_tangent" in material:
+                if "loss_tangent" in material:  # pragma: no cover
                     warnings.warn(
                         "This key is deprecated in versions >0.7.0 and will soon be removed. "
                         "Use key dielectric_loss_tangent instead.",
                         DeprecationWarning,
                     )
                     material_dlt = material["loss_tangent"]
                 else:
@@ -949,108 +934,145 @@
             raise FileNotFoundError(f"File path {amat_file} does not exist.")
         materials_dict = self.read_materials(amat_file)
         for material_name, material_properties in materials_dict.items():
             if not material_name in self:
                 if "tangent_delta" in material_properties:
                     material_properties["dielectric_loss_tangent"] = material_properties["tangent_delta"]
                     del material_properties["tangent_delta"]
-                elif "loss_tangent" in material_properties:
+                elif "loss_tangent" in material_properties:  # pragma: no cover
                     warnings.warn(
                         "This key is deprecated in versions >0.7.0 and will soon be removed. "
                         "Use key dielectric_loss_tangent instead.",
                         DeprecationWarning,
                     )
                     material_properties["dielectric_loss_tangent"] = material_properties["loss_tangent"]
                     del material_properties["loss_tangent"]
                 self.add_material(material_name, **material_properties)
             else:
                 self.__edb.logger.warning(f"Material {material_name} already exist and was not loaded from AMAT file.")
         return True
 
-    @staticmethod
     @pyedb_function_handler()
-    def read_materials(amat_file):
+    def iterate_materials_in_amat(self, amat_file=None):
+        """Iterate over material description in an AMAT file.
+
+        Parameters
+        ----------
+        amat_file : str
+            Full path to the AMAT file to read.
+
+        Yields
+        ------
+        dict
+        """
+        if amat_file is None:
+            amat_file = os.path.join(self.__edb.base_path, "syslib", "Materials.amat")
+
+        begin_regex = re.compile(r"^\$begin '(.+)'")
+        end_regex = re.compile(r"^\$end '(.+)'")
+        material_properties = ATTRIBUTES.copy()
+        # Remove cases manually handled
+        material_properties.remove("conductivity")
+
+        with open(amat_file, "r") as amat_fh:
+            in_material_def = False
+            material_description = {}
+            for line in amat_fh:
+                if in_material_def:
+                    # Yield material definition
+                    if end_regex.search(line):
+                        in_material_def = False
+                        yield material_description
+                        material_description = {}
+                    # Extend material definition if possible
+                    else:
+                        for material_property in material_properties:
+                            if material_property in line:
+                                value = get_line_float_value(line)
+                                if value is not None:
+                                    material_description[material_property] = value
+                                break
+                        # Extra case to cover bug in syslib AMAT file (see #364)
+                        if "thermal_expansion_coeffcient" in line:
+                            value = get_line_float_value(line)
+                            if value is not None:
+                                material_description["thermal_expansion_coefficient"] = value
+                        # Extra case to avoid confusion ("conductivity" is included in "thermal_conductivity")
+                        if "conductivity" in line and "thermal_conductivity" not in line:
+                            value = get_line_float_value(line)
+                            if value is not None:
+                                material_description["conductivity"] = value
+                        # Extra case to avoid confusion ("conductivity" is included in "thermal_conductivity")
+                        if (
+                            "loss_tangent" in line
+                            and "dielectric_loss_tangent" not in line
+                            and "magnetic_loss_tangent" not in line
+                        ):
+                            warnings.warn(
+                                "This key is deprecated in versions >0.7.0 and will soon be removed. "
+                                "Use key dielectric_loss_tangent instead.",
+                                DeprecationWarning,
+                            )
+                            value = get_line_float_value(line)
+                            if value is not None:
+                                material_description["dielectric_loss_tangent"] = value
+                # Check if we reach the beginning of a material description
+                else:
+                    match = begin_regex.search(line)
+                    if match:
+                        material_name = match.group(1)
+                        # Skip unwanted data
+                        if material_name in ("$index$", "$base_index$"):
+                            continue
+                        material_description["name"] = match.group(1)
+                        in_material_def = True
+
+    @pyedb_function_handler()
+    def read_materials(self, amat_file):
         """Read materials from an AMAT file.
 
         Parameters
         ----------
         amat_file : str
             Full path to the AMAT file to read.
 
         Returns
         -------
         dict
             {material name: dict of material properties}.
         """
+        res = {}
+        for material in self.iterate_materials_in_amat(amat_file):
+            material_name = material["name"]
+            res[material_name] = {}
+            for material_property, value in material.items():
+                if material_property != "name":
+                    res[material_name][material_property] = value
+
+        return res
 
-        def get_line_float_value(line):
-            """Retrieve the float value expected in the line of an AMAT file.
+    @pyedb_function_handler()
+    def read_syslib_material(self, material_name):
+        """Read a specific material from syslib AMAT file.
 
-            The associated string is expected to follow one of the following cases:
-            - simple('permittivity', 12.)
-            - permittivity='12'.
-            """
-            try:
-                return float(re.split(",|=", line)[-1].strip(")'"))
-            except ValueError:
-                return None
+        Parameters
+        ----------
+        material_name : str
+            Name of the material.
 
+        Returns
+        -------
+        dict
+            {material name: dict of material properties}.
+        """
         res = {}
-        _begin_search = re.compile(r"^\$begin '(.+)'")
-        _end_search = re.compile(r"^\$end '(.+)'")
-        material_properties = [
-            "thermal_conductivity",
-            "permittivity",
-            "dielectric_loss_tangent",
-            "permeability",
-            "magnetic_loss_tangent",
-            "thermal_expansion_coeffcient",
-            "specific_heat",
-            "mass_density",
-        ]
-
-        with open(amat_file, "r") as amat_fh:
-            raw_lines = amat_fh.read().splitlines()
-            material_name = ""
-            for line in raw_lines:
-                b = _begin_search.search(line)
-                if b:  # walk down a level
-                    material_name = b.group(1)
-                    res.setdefault(material_name, {})
-                    if len(res) > 165:
-                        pass
-                if material_name:
-                    for material_property in material_properties:
-                        if material_property in line:
-                            value = get_line_float_value(line)
-                            if value is not None:
-                                res[material_name][material_property] = value
-                            break
-                    # Extra case to avoid confusion ("conductivity" is included in "thermal_conductivity")
-                    if "conductivity" in line and "thermal_conductivity" not in line:
-                        value = get_line_float_value(line)
-                        if value is not None:
-                            res[material_name]["conductivity"] = value
-                    # Extra case to avoid confusion ("conductivity" is included in "thermal_conductivity")
-                    if (
-                        "loss_tangent" in line
-                        and "dielectric_loss_tangent" not in line
-                        and "magnetic_loss_tangent" not in line
-                    ):
-                        warnings.warn(
-                            "This key is deprecated in versions >0.7.0 and will soon be removed. "
-                            "Use key dielectric_loss_tangent instead.",
-                            DeprecationWarning,
-                        )
-                        value = get_line_float_value(line)
-                        if value is not None:
-                            res[material_name]["dielectric_loss_tangent"] = value
-                end = _end_search.search(line)
-                if end:
-                    material_name = ""
-
-        # Clean unwanted data
-        for key in ("$index$", "$base_index$"):
-            if key in res:
-                del res[key]
+        amat_file = os.path.join(self.__edb.base_path, "syslib", "Materials.amat")
+        for material in self.iterate_materials_in_amat(amat_file):
+            iter_material_name = material["name"]
+            if iter_material_name == material_name:
+                for material_property, value in material.items():
+                    if material_property != "name":
+                        res[material_property] = value
+                return res
 
+        self.__edb.logger.error(f"Material {material_name} does not exist in syslib AMAT file.")
         return res
```

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/net_class.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/net_class.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/nets.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/nets.py`

 * *Files 0% similar despite different names*

```diff
@@ -468,27 +468,27 @@
                 # i += 1
         # fmt: on
         return x, y
 
     @pyedb_function_handler()
     def get_plot_data(
         self,
-        nets,
+        nets=None,
         layers=None,
         color_by_net=False,
         outline=None,
         plot_components_on_top=False,
         plot_components_on_bottom=False,
     ):
         """Return List of points for Matplotlib 2D Chart.
 
         Parameters
         ----------
-        nets : str, list
-            Name of the net or list of nets to plot. If `None` all nets will be plotted.
+        nets : str, list, optional
+            Name of the net or list of nets to plot. If `None` (default value) all nets will be plotted.
         layers : str, list, optional
             Name of the layers to include in the plot. If `None` all the signal layers will be considered.
         color_by_net : bool, optional
             If ``True``  the plot will be colored by net.
             If ``False`` the plot will be colored by layer. (default)
         outline : list, optional
             List of points of the outline to plot.
```

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/padstack.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/padstack.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/siwave.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/siwave.py`

 * *Files 0% similar despite different names*

```diff
@@ -1192,16 +1192,16 @@
         l_value=1e-9,
         is_parallel=False,
     ):
         """Create physical Rlc component.
 
         Parameters
         ----------
-        pins : list[Edb.Primitive.PadstackInstance]
-             List of EDB pins, length must be 2, since only 2 pins component are currently supported.
+        pins : list[Edb.Cell.Primitive.PadstackInstance]
+             List of EDB pins.
 
         component_name : str
             Component name.
 
         r_value : float
             Resistor value.
```

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/stackup.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/stackup.py`

 * *Files 2% similar despite different names*

```diff
@@ -78,7109 +78,7134 @@
 000004d0: 6162 736f 6c75 7465 5f69 6d70 6f72 7420  absolute_import 
 000004e0: 2023 206e 6f72 656f 7264 6572 0a0a 6672   # noreorder..fr
 000004f0: 6f6d 2063 6f6c 6c65 6374 696f 6e73 2069  om collections i
 00000500: 6d70 6f72 7420 4f72 6465 7265 6444 6963  mport OrderedDic
 00000510: 740a 696d 706f 7274 206a 736f 6e0a 696d  t.import json.im
 00000520: 706f 7274 206c 6f67 6769 6e67 0a69 6d70  port logging.imp
 00000530: 6f72 7420 6d61 7468 0a69 6d70 6f72 7420  ort math.import 
-00000540: 7761 726e 696e 6773 0a0a 696d 706f 7274  warnings..import
-00000550: 206d 6174 706c 6f74 6c69 622e 636f 6c6f   matplotlib.colo
-00000560: 7273 0a0a 6672 6f6d 2070 7965 6462 2e64  rs..from pyedb.d
-00000570: 6f74 6e65 742e 6564 625f 636f 7265 2e65  otnet.edb_core.e
-00000580: 6462 5f64 6174 612e 6c61 7965 725f 6461  db_data.layer_da
-00000590: 7461 2069 6d70 6f72 7420 280a 2020 2020  ta import (.    
-000005a0: 4c61 7965 7245 6462 436c 6173 732c 0a20  LayerEdbClass,. 
-000005b0: 2020 2053 7461 636b 7570 4c61 7965 7245     StackupLayerE
-000005c0: 6462 436c 6173 732c 0a29 0a66 726f 6d20  dbClass,.).from 
-000005d0: 7079 6564 622e 646f 746e 6574 2e65 6462  pyedb.dotnet.edb
-000005e0: 5f63 6f72 652e 6765 6e65 7261 6c20 696d  _core.general im
-000005f0: 706f 7274 2063 6f6e 7665 7274 5f70 795f  port convert_py_
-00000600: 6c69 7374 5f74 6f5f 6e65 745f 6c69 7374  list_to_net_list
-00000610: 0a66 726f 6d20 7079 6564 622e 6765 6e65  .from pyedb.gene
-00000620: 7269 632e 6765 6e65 7261 6c5f 6d65 7468  ric.general_meth
-00000630: 6f64 7320 696d 706f 7274 2028 0a20 2020  ods import (.   
-00000640: 2045 542c 0a20 2020 2067 656e 6572 6174   ET,.    generat
-00000650: 655f 756e 6971 7565 5f6e 616d 652c 0a20  e_unique_name,. 
-00000660: 2020 2069 735f 6972 6f6e 7079 7468 6f6e     is_ironpython
-00000670: 2c0a 2020 2020 7079 6564 625f 6675 6e63  ,.    pyedb_func
-00000680: 7469 6f6e 5f68 616e 646c 6572 2c0a 290a  tion_handler,.).
-00000690: 6672 6f6d 2070 7965 6462 2e6d 6973 632e  from pyedb.misc.
-000006a0: 6165 6474 6c69 625f 7065 7273 6f6e 616c  aedtlib_personal
-000006b0: 6962 5f69 6e73 7461 6c6c 2069 6d70 6f72  ib_install impor
-000006c0: 7420 7772 6974 655f 7072 6574 7479 5f78  t write_pretty_x
-000006d0: 6d6c 0a0a 7064 203d 204e 6f6e 650a 6e70  ml..pd = None.np
-000006e0: 203d 204e 6f6e 650a 6966 206e 6f74 2069   = None.if not i
-000006f0: 735f 6972 6f6e 7079 7468 6f6e 3a0a 2020  s_ironpython:.  
-00000700: 2020 7472 793a 0a20 2020 2020 2020 2069    try:.        i
-00000710: 6d70 6f72 7420 6e75 6d70 7920 6173 206e  mport numpy as n
-00000720: 700a 2020 2020 6578 6365 7074 2049 6d70  p.    except Imp
-00000730: 6f72 7445 7272 6f72 3a0a 2020 2020 2020  ortError:.      
-00000740: 2020 6e70 203d 204e 6f6e 650a 0a20 2020    np = None..   
-00000750: 2074 7279 3a0a 2020 2020 2020 2020 696d   try:.        im
-00000760: 706f 7274 2070 616e 6461 7320 6173 2070  port pandas as p
-00000770: 640a 2020 2020 6578 6365 7074 2049 6d70  d.    except Imp
-00000780: 6f72 7445 7272 6f72 3a0a 2020 2020 2020  ortError:.      
-00000790: 2020 7064 203d 204e 6f6e 650a 0a6c 6f67    pd = None..log
-000007a0: 6765 7220 3d20 6c6f 6767 696e 672e 6765  ger = logging.ge
-000007b0: 744c 6f67 6765 7228 5f5f 6e61 6d65 5f5f  tLogger(__name__
-000007c0: 290a 0a0a 636c 6173 7320 5374 6163 6b75  )...class Stacku
-000007d0: 7028 6f62 6a65 6374 293a 0a20 2020 2022  p(object):.    "
-000007e0: 2222 4d61 6e61 6765 7320 4544 4220 6d65  ""Manages EDB me
-000007f0: 7468 6f64 7320 666f 7220 7374 6163 6b75  thods for stacku
-00000800: 7020 6163 6365 7373 6962 6c65 2066 726f  p accessible fro
-00000810: 6d20 6045 6462 2e73 7461 636b 7570 6020  m `Edb.stackup` 
-00000820: 7072 6f70 6572 7479 2e22 2222 0a0a 2020  property."""..  
-00000830: 2020 6465 6620 5f5f 6765 7469 7465 6d5f    def __getitem_
-00000840: 5f28 7365 6c66 2c20 6974 656d 293a 0a20  _(self, item):. 
-00000850: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00000860: 6c66 2e6c 6179 6572 735b 6974 656d 5d0a  lf.layers[item].
-00000870: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
-00000880: 5f28 7365 6c66 2c20 7065 6462 293a 0a20  _(self, pedb):. 
-00000890: 2020 2020 2020 2023 2070 6172 656e 7420         # parent 
-000008a0: 6361 6c6c 6572 2063 6c61 7373 0a20 2020  caller class.   
-000008b0: 2020 2020 2073 656c 662e 5f70 6564 6220       self._pedb 
-000008c0: 3d20 7065 6462 0a20 2020 2020 2020 2073  = pedb.        s
-000008d0: 656c 662e 5f6c 6320 3d20 4e6f 6e65 0a0a  elf._lc = None..
-000008e0: 2020 2020 4070 726f 7065 7274 790a 2020      @property.  
-000008f0: 2020 6465 6620 5f6c 6f67 6765 7228 7365    def _logger(se
-00000900: 6c66 293a 0a20 2020 2020 2020 2072 6574  lf):.        ret
-00000910: 7572 6e20 7365 6c66 2e5f 7065 6462 2e6c  urn self._pedb.l
-00000920: 6f67 6765 720a 0a20 2020 2040 7072 6f70  ogger..    @prop
-00000930: 6572 7479 0a20 2020 2064 6566 206c 6179  erty.    def lay
-00000940: 6572 5f74 7970 6573 2873 656c 6629 3a0a  er_types(self):.
-00000950: 2020 2020 2020 2020 2222 224c 6179 6572          """Layer
-00000960: 2074 7970 6573 2e0a 0a20 2020 2020 2020   types...       
-00000970: 2052 6574 7572 6e73 0a20 2020 2020 2020   Returns.       
-00000980: 202d 2d2d 2d2d 2d2d 0a20 2020 2020 2020   -------.       
-00000990: 2074 7970 650a 2020 2020 2020 2020 2020   type.          
-000009a0: 2020 5479 7065 7320 6f66 206c 6179 6572    Types of layer
-000009b0: 732e 0a20 2020 2020 2020 2022 2222 0a20  s..        """. 
-000009c0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-000009d0: 6c66 2e5f 7065 6462 2e65 6462 5f61 7069  lf._pedb.edb_api
-000009e0: 2e63 656c 6c2e 6c61 7965 725f 7479 7065  .cell.layer_type
-000009f0: 0a0a 2020 2020 4070 726f 7065 7274 790a  ..    @property.
-00000a00: 2020 2020 6465 6620 7468 6963 6b6e 6573      def thicknes
-00000a10: 7328 7365 6c66 293a 0a20 2020 2020 2020  s(self):.       
-00000a20: 2022 2222 5265 7472 6965 7665 2053 7461   """Retrieve Sta
-00000a30: 636b 7570 2074 6869 636b 6e65 7373 2e0a  ckup thickness..
-00000a40: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
-00000a50: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-00000a60: 0a20 2020 2020 2020 2066 6c6f 6174 0a20  .        float. 
-00000a70: 2020 2020 2020 2020 2020 204c 6179 6f75             Layou
-00000a80: 7420 7374 6163 6b75 7020 7468 6963 6b6e  t stackup thickn
-00000a90: 6573 732e 0a0a 2020 2020 2020 2020 2222  ess...        ""
-00000aa0: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
-00000ab0: 2073 656c 662e 6765 745f 6c61 796f 7574   self.get_layout
-00000ac0: 5f74 6869 636b 6e65 7373 2829 0a0a 2020  _thickness()..  
-00000ad0: 2020 4070 726f 7065 7274 790a 2020 2020    @property.    
-00000ae0: 6465 6620 6e75 6d5f 6c61 7965 7273 2873  def num_layers(s
-00000af0: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
-00000b00: 2252 6574 7269 6576 6520 7468 6520 7374  "Retrieve the st
-00000b10: 6163 6b75 7020 6c61 7965 7220 6e75 6d62  ackup layer numb
-00000b20: 6572 2e0a 0a20 2020 2020 2020 2052 6574  er...        Ret
-00000b30: 7572 6e73 0a20 2020 2020 2020 202d 2d2d  urns.        ---
-00000b40: 2d2d 2d2d 0a20 2020 2020 2020 2069 6e74  ----.        int
-00000b50: 0a20 2020 2020 2020 2020 2020 206c 6179  .            lay
-00000b60: 6572 206e 756d 6265 722e 0a0a 2020 2020  er number...    
-00000b70: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00000b80: 7265 7475 726e 206c 656e 286c 6973 7428  return len(list(
-00000b90: 7365 6c66 2e73 7461 636b 7570 5f6c 6179  self.stackup_lay
-00000ba0: 6572 732e 6b65 7973 2829 2929 0a0a 2020  ers.keys()))..  
-00000bb0: 2020 4070 7965 6462 5f66 756e 6374 696f    @pyedb_functio
-00000bc0: 6e5f 6861 6e64 6c65 7228 290a 2020 2020  n_handler().    
-00000bd0: 6465 6620 5f69 6e74 5f74 6f5f 6c61 7965  def _int_to_laye
-00000be0: 725f 7479 7065 7328 7365 6c66 2c20 7661  r_types(self, va
-00000bf0: 6c29 3a0a 2020 2020 2020 2020 6966 2069  l):.        if i
-00000c00: 6e74 2876 616c 2920 3d3d 2030 3a0a 2020  nt(val) == 0:.  
-00000c10: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00000c20: 2073 656c 662e 6c61 7965 725f 7479 7065   self.layer_type
-00000c30: 732e 5369 676e 616c 4c61 7965 720a 2020  s.SignalLayer.  
-00000c40: 2020 2020 2020 656c 6966 2069 6e74 2876        elif int(v
-00000c50: 616c 2920 3d3d 2031 3a0a 2020 2020 2020  al) == 1:.      
-00000c60: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00000c70: 662e 6c61 7965 725f 7479 7065 732e 4469  f.layer_types.Di
-00000c80: 656c 6563 7472 6963 4c61 7965 720a 2020  electricLayer.  
-00000c90: 2020 2020 2020 656c 6966 2069 6e74 2876        elif int(v
-00000ca0: 616c 2920 3d3d 2032 3a0a 2020 2020 2020  al) == 2:.      
-00000cb0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00000cc0: 662e 6c61 7965 725f 7479 7065 732e 436f  f.layer_types.Co
-00000cd0: 6e64 7563 7469 6e67 4c61 7965 720a 2020  nductingLayer.  
-00000ce0: 2020 2020 2020 656c 6966 2069 6e74 2876        elif int(v
-00000cf0: 616c 2920 3d3d 2033 3a0a 2020 2020 2020  al) == 3:.      
-00000d00: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00000d10: 662e 6c61 7965 725f 7479 7065 732e 4169  f.layer_types.Ai
-00000d20: 726c 696e 6573 4c61 7965 720a 2020 2020  rlinesLayer.    
-00000d30: 2020 2020 656c 6966 2069 6e74 2876 616c      elif int(val
-00000d40: 2920 3d3d 2034 3a0a 2020 2020 2020 2020  ) == 4:.        
-00000d50: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00000d60: 6c61 7965 725f 7479 7065 732e 4572 726f  layer_types.Erro
-00000d70: 7273 4c61 7965 720a 2020 2020 2020 2020  rsLayer.        
-00000d80: 656c 6966 2069 6e74 2876 616c 2920 3d3d  elif int(val) ==
-00000d90: 2035 3a0a 2020 2020 2020 2020 2020 2020   5:.            
-00000da0: 7265 7475 726e 2073 656c 662e 6c61 7965  return self.laye
-00000db0: 725f 7479 7065 732e 5379 6d62 6f6c 4c61  r_types.SymbolLa
-00000dc0: 7965 720a 2020 2020 2020 2020 656c 6966  yer.        elif
-00000dd0: 2069 6e74 2876 616c 2920 3d3d 2036 3a0a   int(val) == 6:.
-00000de0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00000df0: 726e 2073 656c 662e 6c61 7965 725f 7479  rn self.layer_ty
-00000e00: 7065 732e 4d65 6173 7572 654c 6179 6572  pes.MeasureLayer
-00000e10: 0a20 2020 2020 2020 2065 6c69 6620 696e  .        elif in
-00000e20: 7428 7661 6c29 203d 3d20 383a 0a20 2020  t(val) == 8:.   
-00000e30: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00000e40: 7365 6c66 2e6c 6179 6572 5f74 7970 6573  self.layer_types
-00000e50: 2e41 7373 656d 626c 794c 6179 6572 0a20  .AssemblyLayer. 
-00000e60: 2020 2020 2020 2065 6c69 6620 696e 7428         elif int(
-00000e70: 7661 6c29 203d 3d20 393a 0a20 2020 2020  val) == 9:.     
-00000e80: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00000e90: 6c66 2e6c 6179 6572 5f74 7970 6573 2e53  lf.layer_types.S
-00000ea0: 696c 6b73 6372 6565 6e4c 6179 6572 0a20  ilkscreenLayer. 
-00000eb0: 2020 2020 2020 2065 6c69 6620 696e 7428         elif int(
-00000ec0: 7661 6c29 203d 3d20 3130 3a0a 2020 2020  val) == 10:.    
-00000ed0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00000ee0: 656c 662e 6c61 7965 725f 7479 7065 732e  elf.layer_types.
-00000ef0: 536f 6c64 6572 4d61 736b 4c61 7965 720a  SolderMaskLayer.
-00000f00: 2020 2020 2020 2020 656c 6966 2069 6e74          elif int
-00000f10: 2876 616c 2920 3d3d 2031 313a 0a20 2020  (val) == 11:.   
-00000f20: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00000f30: 7365 6c66 2e6c 6179 6572 5f74 7970 6573  self.layer_types
-00000f40: 2e53 6f6c 6465 7250 6173 7465 4c61 7965  .SolderPasteLaye
-00000f50: 720a 2020 2020 2020 2020 656c 6966 2069  r.        elif i
-00000f60: 6e74 2876 616c 2920 3d3d 2031 323a 0a20  nt(val) == 12:. 
-00000f70: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00000f80: 6e20 7365 6c66 2e6c 6179 6572 5f74 7970  n self.layer_typ
-00000f90: 6573 2e47 6c75 654c 6179 6572 0a20 2020  es.GlueLayer.   
-00000fa0: 2020 2020 2065 6c69 6620 696e 7428 7661       elif int(va
-00000fb0: 6c29 203d 3d20 3133 3a0a 2020 2020 2020  l) == 13:.      
-00000fc0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00000fd0: 662e 6c61 7965 725f 7479 7065 732e 5769  f.layer_types.Wi
-00000fe0: 7265 626f 6e64 4c61 7965 720a 2020 2020  rebondLayer.    
-00000ff0: 2020 2020 656c 6966 2069 6e74 2876 616c      elif int(val
-00001000: 2920 3d3d 2031 343a 0a20 2020 2020 2020  ) == 14:.       
-00001010: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00001020: 2e6c 6179 6572 5f74 7970 6573 2e55 7365  .layer_types.Use
-00001030: 724c 6179 6572 0a20 2020 2020 2020 2065  rLayer.        e
-00001040: 6c69 6620 696e 7428 7661 6c29 203d 3d20  lif int(val) == 
-00001050: 3136 3a0a 2020 2020 2020 2020 2020 2020  16:.            
-00001060: 7265 7475 726e 2073 656c 662e 6c61 7965  return self.laye
-00001070: 725f 7479 7065 732e 5349 7761 7665 4846  r_types.SIwaveHF
-00001080: 5353 536f 6c76 6572 5265 6769 6f6e 730a  SSSolverRegions.
-00001090: 2020 2020 2020 2020 656c 6966 2069 6e74          elif int
-000010a0: 2876 616c 2920 3d3d 2031 373a 0a20 2020  (val) == 17:.   
-000010b0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000010c0: 7365 6c66 2e6c 6179 6572 5f74 7970 6573  self.layer_types
-000010d0: 2e50 6f73 7470 726f 6365 7373 696e 674c  .PostprocessingL
-000010e0: 6179 6572 0a20 2020 2020 2020 2065 6c69  ayer.        eli
-000010f0: 6620 696e 7428 7661 6c29 203d 3d20 3138  f int(val) == 18
-00001100: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00001110: 7475 726e 2073 656c 662e 6c61 7965 725f  turn self.layer_
-00001120: 7479 7065 732e 4f75 746c 696e 654c 6179  types.OutlineLay
-00001130: 6572 0a20 2020 2020 2020 2065 6c69 6620  er.        elif 
-00001140: 696e 7428 7661 6c29 203d 3d20 3136 3a0a  int(val) == 16:.
-00001150: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00001160: 726e 2073 656c 662e 6c61 7965 725f 7479  rn self.layer_ty
-00001170: 7065 732e 4c61 7965 7254 7970 6573 436f  pes.LayerTypesCo
-00001180: 756e 740a 2020 2020 2020 2020 656c 6966  unt.        elif
-00001190: 2069 6e74 2876 616c 2920 3d3d 202d 313a   int(val) == -1:
-000011a0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-000011b0: 7572 6e20 7365 6c66 2e6c 6179 6572 5f74  urn self.layer_t
-000011c0: 7970 6573 2e55 6e64 6566 696e 6564 4c61  ypes.UndefinedLa
-000011d0: 7965 7254 7970 650a 0a20 2020 2040 7079  yerType..    @py
-000011e0: 6564 625f 6675 6e63 7469 6f6e 5f68 616e  edb_function_han
-000011f0: 646c 6572 2829 0a20 2020 2064 6566 205f  dler().    def _
-00001200: 6c61 7965 725f 7479 7065 735f 746f 5f69  layer_types_to_i
-00001210: 6e74 2873 656c 662c 206c 6179 6572 5f74  nt(self, layer_t
-00001220: 7970 6529 3a0a 2020 2020 2020 2020 6966  ype):.        if
-00001230: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
-00001240: 6c61 7965 725f 7479 7065 2c20 696e 7429  layer_type, int)
-00001250: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-00001260: 206c 6179 6572 5f74 7970 6520 3d3d 2073   layer_type == s
-00001270: 656c 662e 6c61 7965 725f 7479 7065 732e  elf.layer_types.
-00001280: 5369 676e 616c 4c61 7965 723a 0a20 2020  SignalLayer:.   
-00001290: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-000012a0: 7572 6e20 300a 2020 2020 2020 2020 2020  urn 0.          
-000012b0: 2020 656c 6966 206c 6179 6572 5f74 7970    elif layer_typ
-000012c0: 6520 3d3d 2073 656c 662e 6c61 7965 725f  e == self.layer_
-000012d0: 7479 7065 732e 4469 656c 6563 7472 6963  types.Dielectric
-000012e0: 4c61 7965 723a 0a20 2020 2020 2020 2020  Layer:.         
-000012f0: 2020 2020 2020 2072 6574 7572 6e20 310a         return 1.
-00001300: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-00001310: 206c 6179 6572 5f74 7970 6520 3d3d 2073   layer_type == s
-00001320: 656c 662e 6c61 7965 725f 7479 7065 732e  elf.layer_types.
-00001330: 436f 6e64 7563 7469 6e67 4c61 7965 723a  ConductingLayer:
-00001340: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00001350: 2072 6574 7572 6e20 320a 2020 2020 2020   return 2.      
-00001360: 2020 2020 2020 656c 6966 206c 6179 6572        elif layer
-00001370: 5f74 7970 6520 3d3d 2073 656c 662e 6c61  _type == self.la
-00001380: 7965 725f 7479 7065 732e 4169 726c 696e  yer_types.Airlin
-00001390: 6573 4c61 7965 723a 0a20 2020 2020 2020  esLayer:.       
-000013a0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000013b0: 330a 2020 2020 2020 2020 2020 2020 656c  3.            el
-000013c0: 6966 206c 6179 6572 5f74 7970 6520 3d3d  if layer_type ==
-000013d0: 2073 656c 662e 6c61 7965 725f 7479 7065   self.layer_type
-000013e0: 732e 4572 726f 7273 4c61 7965 723a 0a20  s.ErrorsLayer:. 
-000013f0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00001400: 6574 7572 6e20 340a 2020 2020 2020 2020  eturn 4.        
-00001410: 2020 2020 656c 6966 206c 6179 6572 5f74      elif layer_t
-00001420: 7970 6520 3d3d 2073 656c 662e 6c61 7965  ype == self.laye
-00001430: 725f 7479 7065 732e 5379 6d62 6f6c 4c61  r_types.SymbolLa
-00001440: 7965 723a 0a20 2020 2020 2020 2020 2020  yer:.           
-00001450: 2020 2020 2072 6574 7572 6e20 350a 2020       return 5.  
-00001460: 2020 2020 2020 2020 2020 656c 6966 206c            elif l
-00001470: 6179 6572 5f74 7970 6520 3d3d 2073 656c  ayer_type == sel
-00001480: 662e 6c61 7965 725f 7479 7065 732e 4d65  f.layer_types.Me
-00001490: 6173 7572 654c 6179 6572 3a0a 2020 2020  asureLayer:.    
+00000540: 7761 726e 696e 6773 0a0a 6672 6f6d 2070  warnings..from p
+00000550: 7965 6462 2e64 6f74 6e65 742e 6564 625f  yedb.dotnet.edb_
+00000560: 636f 7265 2e65 6462 5f64 6174 612e 6c61  core.edb_data.la
+00000570: 7965 725f 6461 7461 2069 6d70 6f72 7420  yer_data import 
+00000580: 280a 2020 2020 4c61 7965 7245 6462 436c  (.    LayerEdbCl
+00000590: 6173 732c 0a20 2020 2053 7461 636b 7570  ass,.    Stackup
+000005a0: 4c61 7965 7245 6462 436c 6173 732c 0a29  LayerEdbClass,.)
+000005b0: 0a66 726f 6d20 7079 6564 622e 646f 746e  .from pyedb.dotn
+000005c0: 6574 2e65 6462 5f63 6f72 652e 6765 6e65  et.edb_core.gene
+000005d0: 7261 6c20 696d 706f 7274 2063 6f6e 7665  ral import conve
+000005e0: 7274 5f70 795f 6c69 7374 5f74 6f5f 6e65  rt_py_list_to_ne
+000005f0: 745f 6c69 7374 0a66 726f 6d20 7079 6564  t_list.from pyed
+00000600: 622e 6765 6e65 7269 632e 6765 6e65 7261  b.generic.genera
+00000610: 6c5f 6d65 7468 6f64 7320 696d 706f 7274  l_methods import
+00000620: 2028 0a20 2020 2045 542c 0a20 2020 2067   (.    ET,.    g
+00000630: 656e 6572 6174 655f 756e 6971 7565 5f6e  enerate_unique_n
+00000640: 616d 652c 0a20 2020 2069 735f 6972 6f6e  ame,.    is_iron
+00000650: 7079 7468 6f6e 2c0a 2020 2020 7079 6564  python,.    pyed
+00000660: 625f 6675 6e63 7469 6f6e 5f68 616e 646c  b_function_handl
+00000670: 6572 2c0a 290a 6672 6f6d 2070 7965 6462  er,.).from pyedb
+00000680: 2e6d 6973 632e 6165 6474 6c69 625f 7065  .misc.aedtlib_pe
+00000690: 7273 6f6e 616c 6962 5f69 6e73 7461 6c6c  rsonalib_install
+000006a0: 2069 6d70 6f72 7420 7772 6974 655f 7072   import write_pr
+000006b0: 6574 7479 5f78 6d6c 0a0a 636f 6c6f 7273  etty_xml..colors
+000006c0: 203d 204e 6f6e 650a 7064 203d 204e 6f6e   = None.pd = Non
+000006d0: 650a 6e70 203d 204e 6f6e 650a 6966 206e  e.np = None.if n
+000006e0: 6f74 2069 735f 6972 6f6e 7079 7468 6f6e  ot is_ironpython
+000006f0: 3a0a 2020 2020 7472 793a 0a20 2020 2020  :.    try:.     
+00000700: 2020 2069 6d70 6f72 7420 6d61 7470 6c6f     import matplo
+00000710: 746c 6962 2e63 6f6c 6f72 7320 6173 2063  tlib.colors as c
+00000720: 6f6c 6f72 730a 2020 2020 6578 6365 7074  olors.    except
+00000730: 2049 6d70 6f72 7445 7272 6f72 3a0a 2020   ImportError:.  
+00000740: 2020 2020 2020 636f 6c6f 7273 203d 204e        colors = N
+00000750: 6f6e 650a 0a20 2020 2074 7279 3a0a 2020  one..    try:.  
+00000760: 2020 2020 2020 696d 706f 7274 206e 756d        import num
+00000770: 7079 2061 7320 6e70 0a20 2020 2065 7863  py as np.    exc
+00000780: 6570 7420 496d 706f 7274 4572 726f 723a  ept ImportError:
+00000790: 0a20 2020 2020 2020 206e 7020 3d20 4e6f  .        np = No
+000007a0: 6e65 0a0a 2020 2020 7472 793a 0a20 2020  ne..    try:.   
+000007b0: 2020 2020 2069 6d70 6f72 7420 7061 6e64       import pand
+000007c0: 6173 2061 7320 7064 0a20 2020 2065 7863  as as pd.    exc
+000007d0: 6570 7420 496d 706f 7274 4572 726f 723a  ept ImportError:
+000007e0: 0a20 2020 2020 2020 2070 6420 3d20 4e6f  .        pd = No
+000007f0: 6e65 0a0a 6c6f 6767 6572 203d 206c 6f67  ne..logger = log
+00000800: 6769 6e67 2e67 6574 4c6f 6767 6572 285f  ging.getLogger(_
+00000810: 5f6e 616d 655f 5f29 0a0a 0a63 6c61 7373  _name__)...class
+00000820: 2053 7461 636b 7570 286f 626a 6563 7429   Stackup(object)
+00000830: 3a0a 2020 2020 2222 224d 616e 6167 6573  :.    """Manages
+00000840: 2045 4442 206d 6574 686f 6473 2066 6f72   EDB methods for
+00000850: 2073 7461 636b 7570 2061 6363 6573 7369   stackup accessi
+00000860: 626c 6520 6672 6f6d 2060 4564 622e 7374  ble from `Edb.st
+00000870: 6163 6b75 7060 2070 726f 7065 7274 792e  ackup` property.
+00000880: 2222 220a 0a20 2020 2064 6566 205f 5f67  """..    def __g
+00000890: 6574 6974 656d 5f5f 2873 656c 662c 2069  etitem__(self, i
+000008a0: 7465 6d29 3a0a 2020 2020 2020 2020 7265  tem):.        re
+000008b0: 7475 726e 2073 656c 662e 6c61 7965 7273  turn self.layers
+000008c0: 5b69 7465 6d5d 0a0a 2020 2020 6465 6620  [item]..    def 
+000008d0: 5f5f 696e 6974 5f5f 2873 656c 662c 2070  __init__(self, p
+000008e0: 6564 6229 3a0a 2020 2020 2020 2020 2320  edb):.        # 
+000008f0: 7061 7265 6e74 2063 616c 6c65 7220 636c  parent caller cl
+00000900: 6173 730a 2020 2020 2020 2020 7365 6c66  ass.        self
+00000910: 2e5f 7065 6462 203d 2070 6564 620a 2020  ._pedb = pedb.  
+00000920: 2020 2020 2020 7365 6c66 2e5f 6c63 203d        self._lc =
+00000930: 204e 6f6e 650a 0a20 2020 2040 7072 6f70   None..    @prop
+00000940: 6572 7479 0a20 2020 2064 6566 205f 6c6f  erty.    def _lo
+00000950: 6767 6572 2873 656c 6629 3a0a 2020 2020  gger(self):.    
+00000960: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00000970: 5f70 6564 622e 6c6f 6767 6572 0a0a 2020  _pedb.logger..  
+00000980: 2020 4070 726f 7065 7274 790a 2020 2020    @property.    
+00000990: 6465 6620 6c61 7965 725f 7479 7065 7328  def layer_types(
+000009a0: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
+000009b0: 2222 4c61 7965 7220 7479 7065 732e 0a0a  ""Layer types...
+000009c0: 2020 2020 2020 2020 5265 7475 726e 730a          Returns.
+000009d0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0a          -------.
+000009e0: 2020 2020 2020 2020 7479 7065 0a20 2020          type.   
+000009f0: 2020 2020 2020 2020 2054 7970 6573 206f           Types o
+00000a00: 6620 6c61 7965 7273 2e0a 2020 2020 2020  f layers..      
+00000a10: 2020 2222 220a 2020 2020 2020 2020 7265    """.        re
+00000a20: 7475 726e 2073 656c 662e 5f70 6564 622e  turn self._pedb.
+00000a30: 6564 625f 6170 692e 6365 6c6c 2e6c 6179  edb_api.cell.lay
+00000a40: 6572 5f74 7970 650a 0a20 2020 2040 7072  er_type..    @pr
+00000a50: 6f70 6572 7479 0a20 2020 2064 6566 2074  operty.    def t
+00000a60: 6869 636b 6e65 7373 2873 656c 6629 3a0a  hickness(self):.
+00000a70: 2020 2020 2020 2020 2222 2252 6574 7269          """Retri
+00000a80: 6576 6520 5374 6163 6b75 7020 7468 6963  eve Stackup thic
+00000a90: 6b6e 6573 732e 0a0a 2020 2020 2020 2020  kness...        
+00000aa0: 5265 7475 726e 730a 2020 2020 2020 2020  Returns.        
+00000ab0: 2d2d 2d2d 2d2d 2d0a 2020 2020 2020 2020  -------.        
+00000ac0: 666c 6f61 740a 2020 2020 2020 2020 2020  float.          
+00000ad0: 2020 4c61 796f 7574 2073 7461 636b 7570    Layout stackup
+00000ae0: 2074 6869 636b 6e65 7373 2e0a 0a20 2020   thickness...   
+00000af0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00000b00: 2072 6574 7572 6e20 7365 6c66 2e67 6574   return self.get
+00000b10: 5f6c 6179 6f75 745f 7468 6963 6b6e 6573  _layout_thicknes
+00000b20: 7328 290a 0a20 2020 2040 7072 6f70 6572  s()..    @proper
+00000b30: 7479 0a20 2020 2064 6566 206e 756d 5f6c  ty.    def num_l
+00000b40: 6179 6572 7328 7365 6c66 293a 0a20 2020  ayers(self):.   
+00000b50: 2020 2020 2022 2222 5265 7472 6965 7665       """Retrieve
+00000b60: 2074 6865 2073 7461 636b 7570 206c 6179   the stackup lay
+00000b70: 6572 206e 756d 6265 722e 0a0a 2020 2020  er number...    
+00000b80: 2020 2020 5265 7475 726e 730a 2020 2020      Returns.    
+00000b90: 2020 2020 2d2d 2d2d 2d2d 2d0a 2020 2020      -------.    
+00000ba0: 2020 2020 696e 740a 2020 2020 2020 2020      int.        
+00000bb0: 2020 2020 6c61 7965 7220 6e75 6d62 6572      layer number
+00000bc0: 2e0a 0a20 2020 2020 2020 2022 2222 0a20  ...        """. 
+00000bd0: 2020 2020 2020 2072 6574 7572 6e20 6c65         return le
+00000be0: 6e28 6c69 7374 2873 656c 662e 7374 6163  n(list(self.stac
+00000bf0: 6b75 705f 6c61 7965 7273 2e6b 6579 7328  kup_layers.keys(
+00000c00: 2929 290a 0a20 2020 2040 7079 6564 625f  )))..    @pyedb_
+00000c10: 6675 6e63 7469 6f6e 5f68 616e 646c 6572  function_handler
+00000c20: 2829 0a20 2020 2064 6566 205f 696e 745f  ().    def _int_
+00000c30: 746f 5f6c 6179 6572 5f74 7970 6573 2873  to_layer_types(s
+00000c40: 656c 662c 2076 616c 293a 0a20 2020 2020  elf, val):.     
+00000c50: 2020 2069 6620 696e 7428 7661 6c29 203d     if int(val) =
+00000c60: 3d20 303a 0a20 2020 2020 2020 2020 2020  = 0:.           
+00000c70: 2072 6574 7572 6e20 7365 6c66 2e6c 6179   return self.lay
+00000c80: 6572 5f74 7970 6573 2e53 6967 6e61 6c4c  er_types.SignalL
+00000c90: 6179 6572 0a20 2020 2020 2020 2065 6c69  ayer.        eli
+00000ca0: 6620 696e 7428 7661 6c29 203d 3d20 313a  f int(val) == 1:
+00000cb0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00000cc0: 7572 6e20 7365 6c66 2e6c 6179 6572 5f74  urn self.layer_t
+00000cd0: 7970 6573 2e44 6965 6c65 6374 7269 634c  ypes.DielectricL
+00000ce0: 6179 6572 0a20 2020 2020 2020 2065 6c69  ayer.        eli
+00000cf0: 6620 696e 7428 7661 6c29 203d 3d20 323a  f int(val) == 2:
+00000d00: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00000d10: 7572 6e20 7365 6c66 2e6c 6179 6572 5f74  urn self.layer_t
+00000d20: 7970 6573 2e43 6f6e 6475 6374 696e 674c  ypes.ConductingL
+00000d30: 6179 6572 0a20 2020 2020 2020 2065 6c69  ayer.        eli
+00000d40: 6620 696e 7428 7661 6c29 203d 3d20 333a  f int(val) == 3:
+00000d50: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00000d60: 7572 6e20 7365 6c66 2e6c 6179 6572 5f74  urn self.layer_t
+00000d70: 7970 6573 2e41 6972 6c69 6e65 734c 6179  ypes.AirlinesLay
+00000d80: 6572 0a20 2020 2020 2020 2065 6c69 6620  er.        elif 
+00000d90: 696e 7428 7661 6c29 203d 3d20 343a 0a20  int(val) == 4:. 
+00000da0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00000db0: 6e20 7365 6c66 2e6c 6179 6572 5f74 7970  n self.layer_typ
+00000dc0: 6573 2e45 7272 6f72 734c 6179 6572 0a20  es.ErrorsLayer. 
+00000dd0: 2020 2020 2020 2065 6c69 6620 696e 7428         elif int(
+00000de0: 7661 6c29 203d 3d20 353a 0a20 2020 2020  val) == 5:.     
+00000df0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00000e00: 6c66 2e6c 6179 6572 5f74 7970 6573 2e53  lf.layer_types.S
+00000e10: 796d 626f 6c4c 6179 6572 0a20 2020 2020  ymbolLayer.     
+00000e20: 2020 2065 6c69 6620 696e 7428 7661 6c29     elif int(val)
+00000e30: 203d 3d20 363a 0a20 2020 2020 2020 2020   == 6:.         
+00000e40: 2020 2072 6574 7572 6e20 7365 6c66 2e6c     return self.l
+00000e50: 6179 6572 5f74 7970 6573 2e4d 6561 7375  ayer_types.Measu
+00000e60: 7265 4c61 7965 720a 2020 2020 2020 2020  reLayer.        
+00000e70: 656c 6966 2069 6e74 2876 616c 2920 3d3d  elif int(val) ==
+00000e80: 2038 3a0a 2020 2020 2020 2020 2020 2020   8:.            
+00000e90: 7265 7475 726e 2073 656c 662e 6c61 7965  return self.laye
+00000ea0: 725f 7479 7065 732e 4173 7365 6d62 6c79  r_types.Assembly
+00000eb0: 4c61 7965 720a 2020 2020 2020 2020 656c  Layer.        el
+00000ec0: 6966 2069 6e74 2876 616c 2920 3d3d 2039  if int(val) == 9
+00000ed0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00000ee0: 7475 726e 2073 656c 662e 6c61 7965 725f  turn self.layer_
+00000ef0: 7479 7065 732e 5369 6c6b 7363 7265 656e  types.Silkscreen
+00000f00: 4c61 7965 720a 2020 2020 2020 2020 656c  Layer.        el
+00000f10: 6966 2069 6e74 2876 616c 2920 3d3d 2031  if int(val) == 1
+00000f20: 303a 0a20 2020 2020 2020 2020 2020 2072  0:.            r
+00000f30: 6574 7572 6e20 7365 6c66 2e6c 6179 6572  eturn self.layer
+00000f40: 5f74 7970 6573 2e53 6f6c 6465 724d 6173  _types.SolderMas
+00000f50: 6b4c 6179 6572 0a20 2020 2020 2020 2065  kLayer.        e
+00000f60: 6c69 6620 696e 7428 7661 6c29 203d 3d20  lif int(val) == 
+00000f70: 3131 3a0a 2020 2020 2020 2020 2020 2020  11:.            
+00000f80: 7265 7475 726e 2073 656c 662e 6c61 7965  return self.laye
+00000f90: 725f 7479 7065 732e 536f 6c64 6572 5061  r_types.SolderPa
+00000fa0: 7374 654c 6179 6572 0a20 2020 2020 2020  steLayer.       
+00000fb0: 2065 6c69 6620 696e 7428 7661 6c29 203d   elif int(val) =
+00000fc0: 3d20 3132 3a0a 2020 2020 2020 2020 2020  = 12:.          
+00000fd0: 2020 7265 7475 726e 2073 656c 662e 6c61    return self.la
+00000fe0: 7965 725f 7479 7065 732e 476c 7565 4c61  yer_types.GlueLa
+00000ff0: 7965 720a 2020 2020 2020 2020 656c 6966  yer.        elif
+00001000: 2069 6e74 2876 616c 2920 3d3d 2031 333a   int(val) == 13:
+00001010: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00001020: 7572 6e20 7365 6c66 2e6c 6179 6572 5f74  urn self.layer_t
+00001030: 7970 6573 2e57 6972 6562 6f6e 644c 6179  ypes.WirebondLay
+00001040: 6572 0a20 2020 2020 2020 2065 6c69 6620  er.        elif 
+00001050: 696e 7428 7661 6c29 203d 3d20 3134 3a0a  int(val) == 14:.
+00001060: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00001070: 726e 2073 656c 662e 6c61 7965 725f 7479  rn self.layer_ty
+00001080: 7065 732e 5573 6572 4c61 7965 720a 2020  pes.UserLayer.  
+00001090: 2020 2020 2020 656c 6966 2069 6e74 2876        elif int(v
+000010a0: 616c 2920 3d3d 2031 363a 0a20 2020 2020  al) == 16:.     
+000010b0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+000010c0: 6c66 2e6c 6179 6572 5f74 7970 6573 2e53  lf.layer_types.S
+000010d0: 4977 6176 6548 4653 5353 6f6c 7665 7252  IwaveHFSSSolverR
+000010e0: 6567 696f 6e73 0a20 2020 2020 2020 2065  egions.        e
+000010f0: 6c69 6620 696e 7428 7661 6c29 203d 3d20  lif int(val) == 
+00001100: 3137 3a0a 2020 2020 2020 2020 2020 2020  17:.            
+00001110: 7265 7475 726e 2073 656c 662e 6c61 7965  return self.laye
+00001120: 725f 7479 7065 732e 506f 7374 7072 6f63  r_types.Postproc
+00001130: 6573 7369 6e67 4c61 7965 720a 2020 2020  essingLayer.    
+00001140: 2020 2020 656c 6966 2069 6e74 2876 616c      elif int(val
+00001150: 2920 3d3d 2031 383a 0a20 2020 2020 2020  ) == 18:.       
+00001160: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00001170: 2e6c 6179 6572 5f74 7970 6573 2e4f 7574  .layer_types.Out
+00001180: 6c69 6e65 4c61 7965 720a 2020 2020 2020  lineLayer.      
+00001190: 2020 656c 6966 2069 6e74 2876 616c 2920    elif int(val) 
+000011a0: 3d3d 2031 363a 0a20 2020 2020 2020 2020  == 16:.         
+000011b0: 2020 2072 6574 7572 6e20 7365 6c66 2e6c     return self.l
+000011c0: 6179 6572 5f74 7970 6573 2e4c 6179 6572  ayer_types.Layer
+000011d0: 5479 7065 7343 6f75 6e74 0a20 2020 2020  TypesCount.     
+000011e0: 2020 2065 6c69 6620 696e 7428 7661 6c29     elif int(val)
+000011f0: 203d 3d20 2d31 3a0a 2020 2020 2020 2020   == -1:.        
+00001200: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00001210: 6c61 7965 725f 7479 7065 732e 556e 6465  layer_types.Unde
+00001220: 6669 6e65 644c 6179 6572 5479 7065 0a0a  finedLayerType..
+00001230: 2020 2020 4070 7965 6462 5f66 756e 6374      @pyedb_funct
+00001240: 696f 6e5f 6861 6e64 6c65 7228 290a 2020  ion_handler().  
+00001250: 2020 6465 6620 5f6c 6179 6572 5f74 7970    def _layer_typ
+00001260: 6573 5f74 6f5f 696e 7428 7365 6c66 2c20  es_to_int(self, 
+00001270: 6c61 7965 725f 7479 7065 293a 0a20 2020  layer_type):.   
+00001280: 2020 2020 2069 6620 6e6f 7420 6973 696e       if not isin
+00001290: 7374 616e 6365 286c 6179 6572 5f74 7970  stance(layer_typ
+000012a0: 652c 2069 6e74 293a 0a20 2020 2020 2020  e, int):.       
+000012b0: 2020 2020 2069 6620 6c61 7965 725f 7479       if layer_ty
+000012c0: 7065 203d 3d20 7365 6c66 2e6c 6179 6572  pe == self.layer
+000012d0: 5f74 7970 6573 2e53 6967 6e61 6c4c 6179  _types.SignalLay
+000012e0: 6572 3a0a 2020 2020 2020 2020 2020 2020  er:.            
+000012f0: 2020 2020 7265 7475 726e 2030 0a20 2020      return 0.   
+00001300: 2020 2020 2020 2020 2065 6c69 6620 6c61           elif la
+00001310: 7965 725f 7479 7065 203d 3d20 7365 6c66  yer_type == self
+00001320: 2e6c 6179 6572 5f74 7970 6573 2e44 6965  .layer_types.Die
+00001330: 6c65 6374 7269 634c 6179 6572 3a0a 2020  lectricLayer:.  
+00001340: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00001350: 7475 726e 2031 0a20 2020 2020 2020 2020  turn 1.         
+00001360: 2020 2065 6c69 6620 6c61 7965 725f 7479     elif layer_ty
+00001370: 7065 203d 3d20 7365 6c66 2e6c 6179 6572  pe == self.layer
+00001380: 5f74 7970 6573 2e43 6f6e 6475 6374 696e  _types.Conductin
+00001390: 674c 6179 6572 3a0a 2020 2020 2020 2020  gLayer:.        
+000013a0: 2020 2020 2020 2020 7265 7475 726e 2032          return 2
+000013b0: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
+000013c0: 6620 6c61 7965 725f 7479 7065 203d 3d20  f layer_type == 
+000013d0: 7365 6c66 2e6c 6179 6572 5f74 7970 6573  self.layer_types
+000013e0: 2e41 6972 6c69 6e65 734c 6179 6572 3a0a  .AirlinesLayer:.
+000013f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001400: 7265 7475 726e 2033 0a20 2020 2020 2020  return 3.       
+00001410: 2020 2020 2065 6c69 6620 6c61 7965 725f       elif layer_
+00001420: 7479 7065 203d 3d20 7365 6c66 2e6c 6179  type == self.lay
+00001430: 6572 5f74 7970 6573 2e45 7272 6f72 734c  er_types.ErrorsL
+00001440: 6179 6572 3a0a 2020 2020 2020 2020 2020  ayer:.          
+00001450: 2020 2020 2020 7265 7475 726e 2034 0a20        return 4. 
+00001460: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+00001470: 6c61 7965 725f 7479 7065 203d 3d20 7365  layer_type == se
+00001480: 6c66 2e6c 6179 6572 5f74 7970 6573 2e53  lf.layer_types.S
+00001490: 796d 626f 6c4c 6179 6572 3a0a 2020 2020  ymbolLayer:.    
 000014a0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-000014b0: 726e 2036 0a20 2020 2020 2020 2020 2020  rn 6.           
+000014b0: 726e 2035 0a20 2020 2020 2020 2020 2020  rn 5.           
 000014c0: 2065 6c69 6620 6c61 7965 725f 7479 7065   elif layer_type
 000014d0: 203d 3d20 7365 6c66 2e6c 6179 6572 5f74   == self.layer_t
-000014e0: 7970 6573 2e41 7373 656d 626c 794c 6179  ypes.AssemblyLay
-000014f0: 6572 3a0a 2020 2020 2020 2020 2020 2020  er:.            
-00001500: 2020 2020 7265 7475 726e 2038 0a20 2020      return 8.   
-00001510: 2020 2020 2020 2020 2065 6c69 6620 6c61           elif la
-00001520: 7965 725f 7479 7065 203d 3d20 7365 6c66  yer_type == self
-00001530: 2e6c 6179 6572 5f74 7970 6573 2e53 696c  .layer_types.Sil
-00001540: 6b73 6372 6565 6e4c 6179 6572 3a0a 2020  kscreenLayer:.  
-00001550: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00001560: 7475 726e 2039 0a20 2020 2020 2020 2020  turn 9.         
-00001570: 2020 2065 6c69 6620 6c61 7965 725f 7479     elif layer_ty
-00001580: 7065 203d 3d20 7365 6c66 2e6c 6179 6572  pe == self.layer
-00001590: 5f74 7970 6573 2e53 6f6c 6465 724d 6173  _types.SolderMas
-000015a0: 6b4c 6179 6572 3a0a 2020 2020 2020 2020  kLayer:.        
-000015b0: 2020 2020 2020 2020 7265 7475 726e 2031          return 1
-000015c0: 300a 2020 2020 2020 2020 2020 2020 656c  0.            el
-000015d0: 6966 206c 6179 6572 5f74 7970 6520 3d3d  if layer_type ==
-000015e0: 2073 656c 662e 6c61 7965 725f 7479 7065   self.layer_type
-000015f0: 732e 536f 6c64 6572 5061 7374 654c 6179  s.SolderPasteLay
-00001600: 6572 3a0a 2020 2020 2020 2020 2020 2020  er:.            
-00001610: 2020 2020 7265 7475 726e 2031 310a 2020      return 11.  
-00001620: 2020 2020 2020 2020 2020 656c 6966 206c            elif l
-00001630: 6179 6572 5f74 7970 6520 3d3d 2073 656c  ayer_type == sel
-00001640: 662e 6c61 7965 725f 7479 7065 732e 476c  f.layer_types.Gl
-00001650: 7565 4c61 7965 723a 0a20 2020 2020 2020  ueLayer:.       
-00001660: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00001670: 3132 0a20 2020 2020 2020 2020 2020 2065  12.            e
-00001680: 6c69 6620 6c61 7965 725f 7479 7065 203d  lif layer_type =
-00001690: 3d20 7365 6c66 2e6c 6179 6572 5f74 7970  = self.layer_typ
-000016a0: 6573 2e57 6972 6562 6f6e 644c 6179 6572  es.WirebondLayer
-000016b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000016c0: 2020 7265 7475 726e 2031 330a 2020 2020    return 13.    
-000016d0: 2020 2020 2020 2020 656c 6966 206c 6179          elif lay
-000016e0: 6572 5f74 7970 6520 3d3d 2073 656c 662e  er_type == self.
-000016f0: 6c61 7965 725f 7479 7065 732e 5573 6572  layer_types.User
-00001700: 4c61 7965 723a 0a20 2020 2020 2020 2020  Layer:.         
-00001710: 2020 2020 2020 2072 6574 7572 6e20 3134         return 14
-00001720: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
-00001730: 6620 6c61 7965 725f 7479 7065 203d 3d20  f layer_type == 
-00001740: 7365 6c66 2e6c 6179 6572 5f74 7970 6573  self.layer_types
-00001750: 2e53 4977 6176 6548 4653 5353 6f6c 7665  .SIwaveHFSSSolve
-00001760: 7252 6567 696f 6e73 3a0a 2020 2020 2020  rRegions:.      
-00001770: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00001780: 2031 360a 2020 2020 2020 2020 2020 2020   16.            
-00001790: 656c 6966 206c 6179 6572 5f74 7970 6520  elif layer_type 
-000017a0: 3d3d 2073 656c 662e 6c61 7965 725f 7479  == self.layer_ty
-000017b0: 7065 732e 4f75 746c 696e 654c 6179 6572  pes.OutlineLayer
-000017c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000017d0: 2020 7265 7475 726e 2031 380a 2020 2020    return 18.    
-000017e0: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
-000017f0: 6e63 6528 6c61 7965 725f 7479 7065 2c20  nce(layer_type, 
-00001800: 696e 7429 3a0a 2020 2020 2020 2020 2020  int):.          
-00001810: 2020 7265 7475 726e 0a0a 2020 2020 4070    return..    @p
-00001820: 7965 6462 5f66 756e 6374 696f 6e5f 6861  yedb_function_ha
-00001830: 6e64 6c65 7228 290a 2020 2020 6465 6620  ndler().    def 
-00001840: 6372 6561 7465 5f73 796d 6d65 7472 6963  create_symmetric
-00001850: 5f73 7461 636b 7570 280a 2020 2020 2020  _stackup(.      
-00001860: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
-00001870: 6c61 7965 725f 636f 756e 742c 0a20 2020  layer_count,.   
-00001880: 2020 2020 2069 6e6e 6572 5f6c 6179 6572       inner_layer
-00001890: 5f74 6869 636b 6e65 7373 3d22 3137 756d  _thickness="17um
-000018a0: 222c 0a20 2020 2020 2020 206f 7574 6572  ",.        outer
-000018b0: 5f6c 6179 6572 5f74 6869 636b 6e65 7373  _layer_thickness
-000018c0: 3d22 3530 756d 222c 0a20 2020 2020 2020  ="50um",.       
-000018d0: 2064 6965 6c65 6374 7269 635f 7468 6963   dielectric_thic
-000018e0: 6b6e 6573 733d 2231 3030 756d 222c 0a20  kness="100um",. 
-000018f0: 2020 2020 2020 2064 6965 6c65 6374 7269         dielectri
-00001900: 635f 6d61 7465 7269 616c 3d22 6672 345f  c_material="fr4_
-00001910: 6570 6f78 7922 2c0a 2020 2020 2020 2020  epoxy",.        
-00001920: 736f 6c64 6572 6d61 736b 3d54 7275 652c  soldermask=True,
-00001930: 0a20 2020 2020 2020 2073 6f6c 6465 726d  .        solderm
-00001940: 6173 6b5f 7468 6963 6b6e 6573 733d 2232  ask_thickness="2
-00001950: 3075 6d22 2c0a 2020 2020 293a 2020 2320  0um",.    ):  # 
-00001960: 7072 6167 6d61 3a20 6e6f 2063 6f76 6572  pragma: no cover
-00001970: 0a20 2020 2020 2020 2022 2222 4372 6561  .        """Crea
-00001980: 7465 2061 2073 796d 6d65 7472 6963 2073  te a symmetric s
-00001990: 7461 636b 7570 2e0a 0a20 2020 2020 2020  tackup...       
-000019a0: 2050 6172 616d 6574 6572 730a 2020 2020   Parameters.    
-000019b0: 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0a20      ----------. 
-000019c0: 2020 2020 2020 206c 6179 6572 5f63 6f75         layer_cou
-000019d0: 6e74 203a 2069 6e74 0a20 2020 2020 2020  nt : int.       
-000019e0: 2020 2020 204e 756d 6265 7220 6f66 206c       Number of l
-000019f0: 6179 6572 2063 6f75 6e74 2e0a 2020 2020  ayer count..    
-00001a00: 2020 2020 696e 6e65 725f 6c61 7965 725f      inner_layer_
-00001a10: 7468 6963 6b6e 6573 7320 3a20 7374 722c  thickness : str,
-00001a20: 2066 6c6f 6174 2c20 6f70 7469 6f6e 616c   float, optional
-00001a30: 0a20 2020 2020 2020 2020 2020 2054 6869  .            Thi
-00001a40: 636b 6e65 7373 206f 6620 696e 6e65 7220  ckness of inner 
-00001a50: 636f 6e64 7563 746f 7220 6c61 7965 722e  conductor layer.
-00001a60: 0a20 2020 2020 2020 206f 7574 6572 5f6c  .        outer_l
-00001a70: 6179 6572 5f74 6869 636b 6e65 7373 203a  ayer_thickness :
-00001a80: 2073 7472 2c20 666c 6f61 742c 206f 7074   str, float, opt
-00001a90: 696f 6e61 6c0a 2020 2020 2020 2020 2020  ional.          
-00001aa0: 2020 5468 6963 6b6e 6573 7320 6f66 206f    Thickness of o
-00001ab0: 7574 6572 2063 6f6e 6475 6374 6f72 206c  uter conductor l
-00001ac0: 6179 6572 2e0a 2020 2020 2020 2020 6469  ayer..        di
-00001ad0: 656c 6563 7472 6963 5f74 6869 636b 6e65  electric_thickne
-00001ae0: 7373 203a 2073 7472 2c20 666c 6f61 742c  ss : str, float,
-00001af0: 206f 7074 696f 6e61 6c0a 2020 2020 2020   optional.      
-00001b00: 2020 2020 2020 5468 6963 6b6e 6573 7320        Thickness 
-00001b10: 6f66 2064 6965 6c65 6374 7269 6320 6c61  of dielectric la
-00001b20: 7965 722e 0a20 2020 2020 2020 2064 6965  yer..        die
-00001b30: 6c65 6374 7269 635f 6d61 7465 7269 616c  lectric_material
-00001b40: 203a 2073 7472 2c20 6f70 7469 6f6e 616c   : str, optional
-00001b50: 0a20 2020 2020 2020 2020 2020 204d 6174  .            Mat
-00001b60: 6572 6961 6c20 6f66 2064 6965 6c65 6374  erial of dielect
-00001b70: 7269 6320 6c61 7965 722e 0a20 2020 2020  ric layer..     
-00001b80: 2020 2073 6f6c 6465 726d 6173 6b20 3a20     soldermask : 
-00001b90: 626f 6f6c 2c20 6f70 7469 6f6e 616c 0a20  bool, optional. 
-00001ba0: 2020 2020 2020 2020 2020 2057 6865 7468             Wheth
-00001bb0: 6572 2074 6f20 6372 6561 7465 2073 6f6c  er to create sol
-00001bc0: 6465 726d 6173 6b20 6c61 7965 7273 2e20  dermask layers. 
-00001bd0: 5468 6520 6465 6661 756c 7420 6973 6060  The default is``
-00001be0: 5472 7565 6060 2e0a 2020 2020 2020 2020  True``..        
-00001bf0: 736f 6c64 6572 6d61 736b 5f74 6869 636b  soldermask_thick
-00001c00: 6e65 7373 203a 2073 7472 2c20 6f70 7469  ness : str, opti
-00001c10: 6f6e 616c 0a20 2020 2020 2020 2020 2020  onal.           
-00001c20: 2054 6869 636b 6e65 7373 206f 6620 736f   Thickness of so
-00001c30: 6c64 6572 6d61 736b 206c 6179 6572 2e0a  ldermask layer..
-00001c40: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
-00001c50: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-00001c60: 0a20 2020 2020 2020 2062 6f6f 6c0a 2020  .        bool.  
-00001c70: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00001c80: 2020 6966 206e 6f74 206e 703a 0a20 2020    if not np:.   
-00001c90: 2020 2020 2020 2020 2073 656c 662e 5f70           self._p
-00001ca0: 6564 622e 6c6f 6767 6572 2e65 7272 6f72  edb.logger.error
-00001cb0: 2822 4e75 6d70 7920 6973 206e 6565 6465  ("Numpy is neede
-00001cc0: 642e 2050 6c65 6173 652c 2069 6e73 7461  d. Please, insta
-00001cd0: 6c6c 2069 7420 6669 7273 742e 2229 0a20  ll it first."). 
-00001ce0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00001cf0: 6e20 4661 6c73 650a 2020 2020 2020 2020  n False.        
-00001d00: 6966 206e 6f74 206c 6179 6572 5f63 6f75  if not layer_cou
-00001d10: 6e74 2025 2032 203d 3d20 303a 0a20 2020  nt % 2 == 0:.   
-00001d20: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00001d30: 4661 6c73 650a 0a20 2020 2020 2020 2073  False..        s
-00001d40: 656c 662e 6164 645f 6c61 7965 7228 0a20  elf.add_layer(. 
-00001d50: 2020 2020 2020 2020 2020 2022 424f 5422             "BOT"
-00001d60: 2c0a 2020 2020 2020 2020 2020 2020 4e6f  ,.            No
-00001d70: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
-00001d80: 6d61 7465 7269 616c 3d22 636f 7070 6572  material="copper
-00001d90: 222c 0a20 2020 2020 2020 2020 2020 2074  ",.            t
-00001da0: 6869 636b 6e65 7373 3d6f 7574 6572 5f6c  hickness=outer_l
-00001db0: 6179 6572 5f74 6869 636b 6e65 7373 2c0a  ayer_thickness,.
-00001dc0: 2020 2020 2020 2020 2020 2020 6669 6c6c              fill
-00001dd0: 4d61 7465 7269 616c 3d64 6965 6c65 6374  Material=dielect
-00001de0: 7269 635f 6d61 7465 7269 616c 2c0a 2020  ric_material,.  
-00001df0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00001e00: 7365 6c66 2e61 6464 5f6c 6179 6572 280a  self.add_layer(.
-00001e10: 2020 2020 2020 2020 2020 2020 2244 2220              "D" 
-00001e20: 2b20 7374 7228 696e 7428 6c61 7965 725f  + str(int(layer_
-00001e30: 636f 756e 7420 2f20 3229 292c 0a20 2020  count / 2)),.   
-00001e40: 2020 2020 2020 2020 204e 6f6e 652c 0a20           None,. 
-00001e50: 2020 2020 2020 2020 2020 206d 6174 6572             mater
-00001e60: 6961 6c3d 2266 7234 5f65 706f 7879 222c  ial="fr4_epoxy",
-00001e70: 0a20 2020 2020 2020 2020 2020 2074 6869  .            thi
-00001e80: 636b 6e65 7373 3d64 6965 6c65 6374 7269  ckness=dielectri
-00001e90: 635f 7468 6963 6b6e 6573 732c 0a20 2020  c_thickness,.   
-00001ea0: 2020 2020 2020 2020 206c 6179 6572 5f74           layer_t
-00001eb0: 7970 653d 2264 6965 6c65 6374 7269 6322  ype="dielectric"
-00001ec0: 2c0a 2020 2020 2020 2020 2020 2020 6669  ,.            fi
-00001ed0: 6c6c 4d61 7465 7269 616c 3d64 6965 6c65  llMaterial=diele
-00001ee0: 6374 7269 635f 6d61 7465 7269 616c 2c0a  ctric_material,.
-00001ef0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-00001f00: 2020 7365 6c66 2e61 6464 5f6c 6179 6572    self.add_layer
-00001f10: 280a 2020 2020 2020 2020 2020 2020 2254  (.            "T
-00001f20: 4f50 222c 0a20 2020 2020 2020 2020 2020  OP",.           
-00001f30: 204e 6f6e 652c 0a20 2020 2020 2020 2020   None,.         
-00001f40: 2020 206d 6174 6572 6961 6c3d 2263 6f70     material="cop
-00001f50: 7065 7222 2c0a 2020 2020 2020 2020 2020  per",.          
-00001f60: 2020 7468 6963 6b6e 6573 733d 6f75 7465    thickness=oute
-00001f70: 725f 6c61 7965 725f 7468 6963 6b6e 6573  r_layer_thicknes
-00001f80: 732c 0a20 2020 2020 2020 2020 2020 2066  s,.            f
-00001f90: 696c 6c4d 6174 6572 6961 6c3d 6469 656c  illMaterial=diel
-00001fa0: 6563 7472 6963 5f6d 6174 6572 6961 6c2c  ectric_material,
-00001fb0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-00001fc0: 2020 2069 6620 736f 6c64 6572 6d61 736b     if soldermask
-00001fd0: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
-00001fe0: 6c66 2e61 6464 5f6c 6179 6572 280a 2020  lf.add_layer(.  
-00001ff0: 2020 2020 2020 2020 2020 2020 2020 2253                "S
-00002000: 4d54 222c 0a20 2020 2020 2020 2020 2020  MT",.           
-00002010: 2020 2020 204e 6f6e 652c 0a20 2020 2020       None,.     
-00002020: 2020 2020 2020 2020 2020 206d 6174 6572             mater
-00002030: 6961 6c3d 2273 6f6c 6465 725f 6d61 736b  ial="solder_mask
-00002040: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
-00002050: 2020 2074 6869 636b 6e65 7373 3d73 6f6c     thickness=sol
-00002060: 6465 726d 6173 6b5f 7468 6963 6b6e 6573  dermask_thicknes
-00002070: 732c 0a20 2020 2020 2020 2020 2020 2020  s,.             
-00002080: 2020 206c 6179 6572 5f74 7970 653d 2264     layer_type="d
-00002090: 6965 6c65 6374 7269 6322 2c0a 2020 2020  ielectric",.    
-000020a0: 2020 2020 2020 2020 2020 2020 6669 6c6c              fill
-000020b0: 4d61 7465 7269 616c 3d64 6965 6c65 6374  Material=dielect
-000020c0: 7269 635f 6d61 7465 7269 616c 2c0a 2020  ric_material,.  
-000020d0: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-000020e0: 2020 2020 2020 2020 7365 6c66 2e61 6464          self.add
-000020f0: 5f6c 6179 6572 280a 2020 2020 2020 2020  _layer(.        
-00002100: 2020 2020 2020 2020 2253 4d42 222c 0a20          "SMB",. 
-00002110: 2020 2020 2020 2020 2020 2020 2020 204e                 N
-00002120: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
-00002130: 2020 2020 206d 6174 6572 6961 6c3d 2273       material="s
-00002140: 6f6c 6465 725f 6d61 736b 222c 0a20 2020  older_mask",.   
-00002150: 2020 2020 2020 2020 2020 2020 2074 6869               thi
-00002160: 636b 6e65 7373 3d73 6f6c 6465 726d 6173  ckness=soldermas
-00002170: 6b5f 7468 6963 6b6e 6573 732c 0a20 2020  k_thickness,.   
-00002180: 2020 2020 2020 2020 2020 2020 206c 6179               lay
-00002190: 6572 5f74 7970 653d 2264 6965 6c65 6374  er_type="dielect
-000021a0: 7269 6322 2c0a 2020 2020 2020 2020 2020  ric",.          
-000021b0: 2020 2020 2020 6669 6c6c 4d61 7465 7269        fillMateri
-000021c0: 616c 3d64 6965 6c65 6374 7269 635f 6d61  al=dielectric_ma
-000021d0: 7465 7269 616c 2c0a 2020 2020 2020 2020  terial,.        
-000021e0: 2020 2020 2020 2020 6d65 7468 6f64 3d22          method="
-000021f0: 6164 645f 6f6e 5f62 6f74 746f 6d22 2c0a  add_on_bottom",.
-00002200: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-00002210: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
-00002220: 7461 636b 7570 5f6c 6179 6572 735b 2254  tackup_layers["T
-00002230: 4f50 225d 2e64 6965 6c65 6374 7269 635f  OP"].dielectric_
-00002240: 6669 6c6c 203d 2022 736f 6c64 6572 5f6d  fill = "solder_m
-00002250: 6173 6b22 0a20 2020 2020 2020 2020 2020  ask".           
-00002260: 2073 656c 662e 7374 6163 6b75 705f 6c61   self.stackup_la
-00002270: 7965 7273 5b22 424f 5422 5d2e 6469 656c  yers["BOT"].diel
-00002280: 6563 7472 6963 5f66 696c 6c20 3d20 2273  ectric_fill = "s
-00002290: 6f6c 6465 725f 6d61 736b 220a 0a20 2020  older_mask"..   
-000022a0: 2020 2020 2066 6f72 206c 6179 6572 5f6e       for layer_n
-000022b0: 756d 2069 6e20 6e70 2e61 7261 6e67 6528  um in np.arange(
-000022c0: 696e 7428 6c61 7965 725f 636f 756e 7420  int(layer_count 
-000022d0: 2f20 3229 2c20 312c 202d 3129 3a0a 2020  / 2), 1, -1):.  
-000022e0: 2020 2020 2020 2020 2020 2320 4765 6e65            # Gene
-000022f0: 7261 7465 2075 7070 6572 2068 616c 660a  rate upper half.
-00002300: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00002310: 2e61 6464 5f6c 6179 6572 280a 2020 2020  .add_layer(.    
-00002320: 2020 2020 2020 2020 2020 2020 224c 2220              "L" 
-00002330: 2b20 7374 7228 6c61 7965 725f 6e75 6d29  + str(layer_num)
-00002340: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00002350: 2020 2254 4f50 222c 0a20 2020 2020 2020    "TOP",.       
-00002360: 2020 2020 2020 2020 206d 6174 6572 6961           materia
-00002370: 6c3d 2263 6f70 7065 7222 2c0a 2020 2020  l="copper",.    
-00002380: 2020 2020 2020 2020 2020 2020 7468 6963              thic
-00002390: 6b6e 6573 733d 696e 6e65 725f 6c61 7965  kness=inner_laye
-000023a0: 725f 7468 6963 6b6e 6573 732c 0a20 2020  r_thickness,.   
-000023b0: 2020 2020 2020 2020 2020 2020 2066 696c               fil
-000023c0: 6c4d 6174 6572 6961 6c3d 6469 656c 6563  lMaterial=dielec
-000023d0: 7472 6963 5f6d 6174 6572 6961 6c2c 0a20  tric_material,. 
-000023e0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-000023f0: 6574 686f 643d 2269 6e73 6572 745f 6265  ethod="insert_be
-00002400: 6c6f 7722 2c0a 2020 2020 2020 2020 2020  low",.          
-00002410: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
-00002420: 7365 6c66 2e61 6464 5f6c 6179 6572 280a  self.add_layer(.
-00002430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002440: 2244 2220 2b20 7374 7228 6c61 7965 725f  "D" + str(layer_
-00002450: 6e75 6d20 2d20 3129 2c0a 2020 2020 2020  num - 1),.      
-00002460: 2020 2020 2020 2020 2020 2254 4f50 222c            "TOP",
-00002470: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00002480: 206d 6174 6572 6961 6c3d 6469 656c 6563   material=dielec
-00002490: 7472 6963 5f6d 6174 6572 6961 6c2c 0a20  tric_material,. 
-000024a0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-000024b0: 6869 636b 6e65 7373 3d64 6965 6c65 6374  hickness=dielect
-000024c0: 7269 635f 7468 6963 6b6e 6573 732c 0a20  ric_thickness,. 
-000024d0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-000024e0: 6179 6572 5f74 7970 653d 2264 6965 6c65  ayer_type="diele
-000024f0: 6374 7269 6322 2c0a 2020 2020 2020 2020  ctric",.        
-00002500: 2020 2020 2020 2020 6669 6c6c 4d61 7465          fillMate
-00002510: 7269 616c 3d64 6965 6c65 6374 7269 635f  rial=dielectric_
-00002520: 6d61 7465 7269 616c 2c0a 2020 2020 2020  material,.      
-00002530: 2020 2020 2020 2020 2020 6d65 7468 6f64            method
-00002540: 3d22 696e 7365 7274 5f62 656c 6f77 222c  ="insert_below",
-00002550: 0a20 2020 2020 2020 2020 2020 2029 0a0a  .            )..
-00002560: 2020 2020 2020 2020 2020 2020 2320 4765              # Ge
-00002570: 6e65 7261 7465 206c 6f77 6572 2068 616c  nerate lower hal
-00002580: 660a 2020 2020 2020 2020 2020 2020 7365  f.            se
-00002590: 6c66 2e61 6464 5f6c 6179 6572 280a 2020  lf.add_layer(.  
-000025a0: 2020 2020 2020 2020 2020 2020 2020 224c                "L
-000025b0: 2220 2b20 7374 7228 6c61 7965 725f 636f  " + str(layer_co
-000025c0: 756e 7420 2d20 6c61 7965 725f 6e75 6d20  unt - layer_num 
-000025d0: 2b20 3129 2c0a 2020 2020 2020 2020 2020  + 1),.          
-000025e0: 2020 2020 2020 2242 4f54 222c 0a20 2020        "BOT",.   
-000025f0: 2020 2020 2020 2020 2020 2020 206d 6174               mat
-00002600: 6572 6961 6c3d 2263 6f70 7065 7222 2c0a  erial="copper",.
-00002610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002620: 7468 6963 6b6e 6573 733d 696e 6e65 725f  thickness=inner_
-00002630: 6c61 7965 725f 7468 6963 6b6e 6573 732c  layer_thickness,
-00002640: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00002650: 2066 696c 6c4d 6174 6572 6961 6c3d 6469   fillMaterial=di
-00002660: 656c 6563 7472 6963 5f6d 6174 6572 6961  electric_materia
-00002670: 6c2c 0a20 2020 2020 2020 2020 2020 2020  l,.             
-00002680: 2020 206d 6574 686f 643d 2269 6e73 6572     method="inser
-00002690: 745f 6162 6f76 6522 2c0a 2020 2020 2020  t_above",.      
-000026a0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-000026b0: 2020 2020 7365 6c66 2e61 6464 5f6c 6179      self.add_lay
-000026c0: 6572 280a 2020 2020 2020 2020 2020 2020  er(.            
-000026d0: 2020 2020 2244 2220 2b20 7374 7228 6c61      "D" + str(la
-000026e0: 7965 725f 636f 756e 7420 2d20 6c61 7965  yer_count - laye
-000026f0: 725f 6e75 6d20 2b20 3129 2c0a 2020 2020  r_num + 1),.    
-00002700: 2020 2020 2020 2020 2020 2020 2242 4f54              "BOT
-00002710: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
-00002720: 2020 206d 6174 6572 6961 6c3d 6469 656c     material=diel
-00002730: 6563 7472 6963 5f6d 6174 6572 6961 6c2c  ectric_material,
-00002740: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00002750: 2074 6869 636b 6e65 7373 3d64 6965 6c65   thickness=diele
-00002760: 6374 7269 635f 7468 6963 6b6e 6573 732c  ctric_thickness,
-00002770: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00002780: 206c 6179 6572 5f74 7970 653d 2264 6965   layer_type="die
-00002790: 6c65 6374 7269 6322 2c0a 2020 2020 2020  lectric",.      
-000027a0: 2020 2020 2020 2020 2020 6669 6c6c 4d61            fillMa
-000027b0: 7465 7269 616c 3d64 6965 6c65 6374 7269  terial=dielectri
-000027c0: 635f 6d61 7465 7269 616c 2c0a 2020 2020  c_material,.    
-000027d0: 2020 2020 2020 2020 2020 2020 6d65 7468              meth
-000027e0: 6f64 3d22 696e 7365 7274 5f61 626f 7665  od="insert_above
-000027f0: 222c 0a20 2020 2020 2020 2020 2020 2029  ",.            )
-00002800: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00002810: 5472 7565 0a0a 2020 2020 4070 7965 6462  True..    @pyedb
-00002820: 5f66 756e 6374 696f 6e5f 6861 6e64 6c65  _function_handle
-00002830: 7228 290a 2020 2020 6465 6620 7265 6672  r().    def refr
-00002840: 6573 685f 6c61 7965 725f 636f 6c6c 6563  esh_layer_collec
-00002850: 7469 6f6e 2873 656c 6629 3a0a 2020 2020  tion(self):.    
-00002860: 2020 2020 2222 2252 6566 7265 7368 206c      """Refresh l
-00002870: 6179 6572 2063 6f6c 6c65 6374 696f 6e20  ayer collection 
-00002880: 6672 6f6d 2045 6462 2e20 5468 6973 206d  from Edb. This m
-00002890: 6574 686f 6420 6973 2072 756e 206f 6e20  ethod is run on 
-000028a0: 6465 6d61 6e64 2061 6674 6572 2061 6c6c  demand after all
-000028b0: 2065 6469 7420 6f70 6572 6174 696f 6e73   edit operations
-000028c0: 206f 6e20 7374 6163 6b75 702e 2222 220a   on stackup.""".
-000028d0: 2020 2020 2020 2020 6c63 5f72 6561 646f          lc_reado
-000028e0: 6e6c 7920 3d20 7365 6c66 2e5f 7065 6462  nly = self._pedb
-000028f0: 2e6c 6179 6f75 742e 6c61 7965 725f 636f  .layout.layer_co
-00002900: 6c6c 6563 7469 6f6e 0a20 2020 2020 2020  llection.       
-00002910: 206c 6179 6572 7320 3d20 5b0a 2020 2020   layers = [.    
-00002920: 2020 2020 2020 2020 692e 436c 6f6e 6528          i.Clone(
-00002930: 2920 666f 7220 6920 696e 206c 6973 7428  ) for i in list(
-00002940: 6c69 7374 286c 635f 7265 6164 6f6e 6c79  list(lc_readonly
-00002950: 2e4c 6179 6572 7328 7365 6c66 2e5f 7065  .Layers(self._pe
-00002960: 6462 2e65 6462 5f61 7069 2e63 656c 6c2e  db.edb_api.cell.
-00002970: 6c61 7965 725f 7479 7065 5f73 6574 2e53  layer_type_set.S
-00002980: 7461 636b 7570 4c61 7965 7253 6574 2929  tackupLayerSet))
-00002990: 290a 2020 2020 2020 2020 5d0a 2020 2020  ).        ].    
-000029a0: 2020 2020 6e6f 6e5f 7374 6163 6b75 7020      non_stackup 
-000029b0: 3d20 5b0a 2020 2020 2020 2020 2020 2020  = [.            
-000029c0: 692e 436c 6f6e 6528 2920 666f 7220 6920  i.Clone() for i 
-000029d0: 696e 206c 6973 7428 6c69 7374 286c 635f  in list(list(lc_
-000029e0: 7265 6164 6f6e 6c79 2e4c 6179 6572 7328  readonly.Layers(
-000029f0: 7365 6c66 2e5f 7065 6462 2e65 6462 5f61  self._pedb.edb_a
-00002a00: 7069 2e63 656c 6c2e 6c61 7965 725f 7479  pi.cell.layer_ty
-00002a10: 7065 5f73 6574 2e4e 6f6e 5374 6163 6b75  pe_set.NonStacku
-00002a20: 704c 6179 6572 5365 7429 2929 0a20 2020  pLayerSet))).   
-00002a30: 2020 2020 205d 0a20 2020 2020 2020 2073       ].        s
-00002a40: 656c 662e 5f6c 6320 3d20 7365 6c66 2e5f  elf._lc = self._
-00002a50: 7065 6462 2e65 6462 5f61 7069 2e63 656c  pedb.edb_api.cel
-00002a60: 6c2e 5f63 656c 6c2e 4c61 7965 7243 6f6c  l._cell.LayerCol
-00002a70: 6c65 6374 696f 6e28 290a 2020 2020 2020  lection().      
-00002a80: 2020 6d6f 6465 203d 206c 635f 7265 6164    mode = lc_read
-00002a90: 6f6e 6c79 2e47 6574 4d6f 6465 2829 0a20  only.GetMode(). 
-00002aa0: 2020 2020 2020 2073 656c 662e 5f6c 632e         self._lc.
-00002ab0: 5365 744d 6f64 6528 6c63 5f72 6561 646f  SetMode(lc_reado
-00002ac0: 6e6c 792e 4765 744d 6f64 6528 2929 0a20  nly.GetMode()). 
-00002ad0: 2020 2020 2020 2069 6620 7374 7228 6d6f         if str(mo
-00002ae0: 6465 2920 3d3d 2022 4f76 6572 6c61 7070  de) == "Overlapp
-00002af0: 696e 6722 3a0a 2020 2020 2020 2020 2020  ing":.          
-00002b00: 2020 666f 7220 6c61 7965 7220 696e 206c    for layer in l
-00002b10: 6179 6572 733a 0a20 2020 2020 2020 2020  ayers:.         
-00002b20: 2020 2020 2020 2073 656c 662e 5f6c 632e         self._lc.
-00002b30: 4164 6453 7461 636b 7570 4c61 7965 7241  AddStackupLayerA
-00002b40: 7445 6c65 7661 7469 6f6e 286c 6179 6572  tElevation(layer
-00002b50: 290a 2020 2020 2020 2020 656c 6966 2073  ).        elif s
-00002b60: 7472 286d 6f64 6529 203d 3d20 224c 616d  tr(mode) == "Lam
-00002b70: 696e 6174 6522 3a0a 2020 2020 2020 2020  inate":.        
-00002b80: 2020 2020 666f 7220 6c61 7965 7220 696e      for layer in
-00002b90: 206c 6179 6572 733a 0a20 2020 2020 2020   layers:.       
-00002ba0: 2020 2020 2020 2020 2073 656c 662e 5f6c           self._l
-00002bb0: 632e 4164 644c 6179 6572 426f 7474 6f6d  c.AddLayerBottom
-00002bc0: 286c 6179 6572 290a 2020 2020 2020 2020  (layer).        
-00002bd0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00002be0: 2020 7365 6c66 2e5f 6c63 2e41 6464 4c61    self._lc.AddLa
-00002bf0: 7965 7273 2863 6f6e 7665 7274 5f70 795f  yers(convert_py_
-00002c00: 6c69 7374 5f74 6f5f 6e65 745f 6c69 7374  list_to_net_list
-00002c10: 286c 6179 6572 732c 2073 656c 662e 5f70  (layers, self._p
-00002c20: 6564 622e 6564 625f 6170 692e 6365 6c6c  edb.edb_api.cell
-00002c30: 2e6c 6179 6572 2929 0a20 2020 2020 2020  .layer)).       
-00002c40: 2066 6f72 206c 6179 6572 2069 6e20 6e6f   for layer in no
-00002c50: 6e5f 7374 6163 6b75 703a 0a20 2020 2020  n_stackup:.     
-00002c60: 2020 2020 2020 2073 656c 662e 5f6c 632e         self._lc.
-00002c70: 4164 644c 6179 6572 426f 7474 6f6d 286c  AddLayerBottom(l
-00002c80: 6179 6572 290a 2020 2020 2020 2020 7365  ayer).        se
-00002c90: 6c66 2e5f 6c63 2e53 6574 4d6f 6465 286c  lf._lc.SetMode(l
-00002ca0: 635f 7265 6164 6f6e 6c79 2e47 6574 4d6f  c_readonly.GetMo
-00002cb0: 6465 2829 290a 0a20 2020 2040 7072 6f70  de())..    @prop
-00002cc0: 6572 7479 0a20 2020 2064 6566 205f 6c61  erty.    def _la
-00002cd0: 7965 725f 636f 6c6c 6563 7469 6f6e 2873  yer_collection(s
-00002ce0: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
-00002cf0: 2243 6f70 7920 6f66 2045 4442 206c 6179  "Copy of EDB lay
-00002d00: 6572 2063 6f6c 6c65 6374 696f 6e2e 0a0a  er collection...
-00002d10: 2020 2020 2020 2020 5265 7475 726e 730a          Returns.
-00002d20: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0a          -------.
-00002d30: 2020 2020 2020 2020 3a63 6c61 7373 3a60          :class:`
-00002d40: 416e 7379 732e 416e 736f 6674 2e45 6462  Ansys.Ansoft.Edb
-00002d50: 2e43 656c 6c2e 4c61 7965 7243 6f6c 6c65  .Cell.LayerColle
-00002d60: 6374 696f 6e60 0a20 2020 2020 2020 2020  ction`.         
-00002d70: 2020 2043 6f6c 6c65 6374 696f 6e20 6f66     Collection of
-00002d80: 206c 6179 6572 732e 0a20 2020 2020 2020   layers..       
-00002d90: 2022 2222 0a20 2020 2020 2020 2069 6620   """.        if 
-00002da0: 6e6f 7420 7365 6c66 2e5f 6c63 3a0a 2020  not self._lc:.  
-00002db0: 2020 2020 2020 2020 2020 7365 6c66 2e72            self.r
-00002dc0: 6566 7265 7368 5f6c 6179 6572 5f63 6f6c  efresh_layer_col
-00002dd0: 6c65 6374 696f 6e28 290a 2020 2020 2020  lection().      
-00002de0: 2020 7265 7475 726e 2073 656c 662e 5f6c    return self._l
-00002df0: 630a 0a20 2020 2040 7072 6f70 6572 7479  c..    @property
-00002e00: 0a20 2020 2064 6566 206d 6f64 6528 7365  .    def mode(se
-00002e10: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
-00002e20: 5374 6163 6b75 7020 6d6f 6465 2e0a 0a20  Stackup mode... 
-00002e30: 2020 2020 2020 2052 6574 7572 6e73 0a20         Returns. 
-00002e40: 2020 2020 2020 202d 2d2d 2d2d 2d2d 0a20         -------. 
-00002e50: 2020 2020 2020 2069 6e74 2c20 7374 720a         int, str.
-00002e60: 2020 2020 2020 2020 2020 2020 5479 7065              Type
-00002e70: 206f 6620 7468 6520 7374 6163 6b75 7020   of the stackup 
-00002e80: 6d6f 6465 2c20 7768 6572 653a 0a0a 2020  mode, where:..  
-00002e90: 2020 2020 2020 2020 2020 2a20 3020 2d20            * 0 - 
-00002ea0: 4c61 6d69 6e61 7465 0a20 2020 2020 2020  Laminate.       
-00002eb0: 2020 2020 202a 2031 202d 204f 7665 726c       * 1 - Overl
-00002ec0: 6170 7069 6e67 0a20 2020 2020 2020 2020  apping.         
-00002ed0: 2020 202a 2032 202d 204d 756c 7469 5a6f     * 2 - MultiZo
-00002ee0: 6e65 0a20 2020 2020 2020 2022 2222 0a20  ne.        """. 
-00002ef0: 2020 2020 2020 2073 656c 662e 5f73 7461         self._sta
-00002f00: 636b 7570 5f6d 6f64 6520 3d20 7365 6c66  ckup_mode = self
-00002f10: 2e5f 6c61 7965 725f 636f 6c6c 6563 7469  ._layer_collecti
-00002f20: 6f6e 2e47 6574 4d6f 6465 2829 0a20 2020  on.GetMode().   
-00002f30: 2020 2020 2072 6574 7572 6e20 7374 7228       return str(
-00002f40: 7365 6c66 2e5f 7374 6163 6b75 705f 6d6f  self._stackup_mo
-00002f50: 6465 290a 0a20 2020 2040 6d6f 6465 2e73  de)..    @mode.s
-00002f60: 6574 7465 720a 2020 2020 6465 6620 6d6f  etter.    def mo
-00002f70: 6465 2873 656c 662c 2076 616c 7565 293a  de(self, value):
-00002f80: 0a20 2020 2020 2020 206d 6f64 6520 3d20  .        mode = 
-00002f90: 7365 6c66 2e5f 7065 6462 2e65 6462 5f61  self._pedb.edb_a
-00002fa0: 7069 2e43 656c 6c2e 4c61 7965 7243 6f6c  pi.Cell.LayerCol
-00002fb0: 6c65 6374 696f 6e4d 6f64 650a 2020 2020  lectionMode.    
-00002fc0: 2020 2020 6966 2076 616c 7565 203d 3d20      if value == 
-00002fd0: 3020 6f72 2076 616c 7565 203d 3d20 6d6f  0 or value == mo
-00002fe0: 6465 2e4c 616d 696e 6174 6520 6f72 2076  de.Laminate or v
-00002ff0: 616c 7565 203d 3d20 224c 616d 696e 6174  alue == "Laminat
-00003000: 6522 3a0a 2020 2020 2020 2020 2020 2020  e":.            
-00003010: 7365 6c66 2e5f 6c61 7965 725f 636f 6c6c  self._layer_coll
-00003020: 6563 7469 6f6e 2e53 6574 4d6f 6465 286d  ection.SetMode(m
-00003030: 6f64 652e 4c61 6d69 6e61 7465 290a 2020  ode.Laminate).  
-00003040: 2020 2020 2020 656c 6966 2076 616c 7565        elif value
-00003050: 203d 3d20 3120 6f72 2076 616c 7565 203d   == 1 or value =
-00003060: 3d20 6d6f 6465 2e4f 7665 726c 6170 7069  = mode.Overlappi
-00003070: 6e67 206f 7220 7661 6c75 6520 3d3d 2022  ng or value == "
-00003080: 4f76 6572 6c61 7070 696e 6722 3a0a 2020  Overlapping":.  
-00003090: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
-000030a0: 6c61 7965 725f 636f 6c6c 6563 7469 6f6e  layer_collection
-000030b0: 2e53 6574 4d6f 6465 286d 6f64 652e 4f76  .SetMode(mode.Ov
-000030c0: 6572 6c61 7070 696e 6729 0a20 2020 2020  erlapping).     
-000030d0: 2020 2065 6c69 6620 7661 6c75 6520 3d3d     elif value ==
-000030e0: 2032 206f 7220 7661 6c75 6520 3d3d 206d   2 or value == m
-000030f0: 6f64 652e 4d75 6c74 695a 6f6e 6520 6f72  ode.MultiZone or
-00003100: 2076 616c 7565 203d 3d20 224d 756c 7469   value == "Multi
-00003110: 5a6f 6e65 223a 0a20 2020 2020 2020 2020  Zone":.         
-00003120: 2020 2073 656c 662e 5f6c 6179 6572 5f63     self._layer_c
-00003130: 6f6c 6c65 6374 696f 6e2e 5365 744d 6f64  ollection.SetMod
-00003140: 6528 6d6f 6465 2e4d 756c 7469 5a6f 6e65  e(mode.MultiZone
-00003150: 290a 2020 2020 2020 2020 7365 6c66 2e5f  ).        self._
-00003160: 7065 6462 2e6c 6179 6f75 742e 6c61 7965  pedb.layout.laye
-00003170: 725f 636f 6c6c 6563 7469 6f6e 203d 2073  r_collection = s
-00003180: 656c 662e 5f6c 6179 6572 5f63 6f6c 6c65  elf._layer_colle
-00003190: 6374 696f 6e0a 0a20 2020 2040 7072 6f70  ction..    @prop
-000031a0: 6572 7479 0a20 2020 2064 6566 2073 7461  erty.    def sta
-000031b0: 636b 7570 5f6d 6f64 6528 7365 6c66 293a  ckup_mode(self):
-000031c0: 0a20 2020 2020 2020 2022 2222 5374 6163  .        """Stac
-000031d0: 6b75 7020 6d6f 6465 2e0a 0a20 2020 2020  kup mode...     
-000031e0: 2020 202e 2e20 6465 7072 6563 6174 6564     .. deprecated
-000031f0: 3a3a 2030 2e36 2e35 320a 2020 2020 2020  :: 0.6.52.      
-00003200: 2020 2020 2055 7365 203a 6675 6e63 3a60       Use :func:`
-00003210: 6d6f 6465 6020 6d65 7468 6f64 2069 6e73  mode` method ins
-00003220: 7465 6164 2e0a 0a20 2020 2020 2020 2052  tead...        R
-00003230: 6574 7572 6e73 0a20 2020 2020 2020 202d  eturns.        -
-00003240: 2d2d 2d2d 2d2d 0a20 2020 2020 2020 2069  ------.        i
-00003250: 6e74 2c20 7374 720a 2020 2020 2020 2020  nt, str.        
-00003260: 2020 2020 5479 7065 206f 6620 7468 6520      Type of the 
-00003270: 7374 6163 6b75 7020 6d6f 6465 2c20 7768  stackup mode, wh
-00003280: 6572 653a 0a0a 2020 2020 2020 2020 2020  ere:..          
-00003290: 2020 2a20 3020 2d20 4c61 6d69 6e61 7465    * 0 - Laminate
-000032a0: 0a20 2020 2020 2020 2020 2020 202a 2031  .            * 1
-000032b0: 202d 204f 7665 726c 6170 7069 6e67 0a20   - Overlapping. 
-000032c0: 2020 2020 2020 2020 2020 202a 2032 202d             * 2 -
-000032d0: 204d 756c 7469 5a6f 6e65 0a20 2020 2020   MultiZone.     
-000032e0: 2020 2022 2222 0a20 2020 2020 2020 2077     """.        w
-000032f0: 6172 6e69 6e67 732e 7761 726e 2822 6073  arnings.warn("`s
-00003300: 7461 636b 7570 5f6d 6f64 6560 2069 7320  tackup_mode` is 
-00003310: 6465 7072 6563 6174 6564 2e20 5573 6520  deprecated. Use 
-00003320: 606d 6f64 6560 206d 6574 686f 6420 696e  `mode` method in
-00003330: 7374 6561 642e 222c 2044 6570 7265 6361  stead.", Depreca
-00003340: 7469 6f6e 5761 726e 696e 6729 0a20 2020  tionWarning).   
-00003350: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00003360: 2e6d 6f64 650a 0a20 2020 2040 7374 6163  .mode..    @stac
-00003370: 6b75 705f 6d6f 6465 2e73 6574 7465 720a  kup_mode.setter.
-00003380: 2020 2020 6465 6620 7374 6163 6b75 705f      def stackup_
-00003390: 6d6f 6465 2873 656c 662c 2076 616c 7565  mode(self, value
-000033a0: 293a 0a20 2020 2020 2020 2077 6172 6e69  ):.        warni
-000033b0: 6e67 732e 7761 726e 2822 6073 7461 636b  ngs.warn("`stack
-000033c0: 7570 5f6d 6f64 6560 2069 7320 6465 7072  up_mode` is depr
-000033d0: 6563 6174 6564 2e20 5573 6520 606d 6f64  ecated. Use `mod
-000033e0: 6560 206d 6574 686f 6420 696e 7374 6561  e` method instea
-000033f0: 642e 222c 2044 6570 7265 6361 7469 6f6e  d.", Deprecation
-00003400: 5761 726e 696e 6729 0a20 2020 2020 2020  Warning).       
-00003410: 2073 656c 662e 6d6f 6465 203d 2076 616c   self.mode = val
-00003420: 7565 0a0a 2020 2020 4070 726f 7065 7274  ue..    @propert
-00003430: 790a 2020 2020 6465 6620 5f65 6462 5f6c  y.    def _edb_l
-00003440: 6179 6572 5f6c 6973 7428 7365 6c66 293a  ayer_list(self):
-00003450: 0a20 2020 2020 2020 206c 6179 6572 5f6c  .        layer_l
-00003460: 6973 7420 3d20 6c69 7374 2873 656c 662e  ist = list(self.
-00003470: 5f6c 6179 6572 5f63 6f6c 6c65 6374 696f  _layer_collectio
-00003480: 6e2e 4c61 7965 7273 2873 656c 662e 5f70  n.Layers(self._p
-00003490: 6564 622e 6564 625f 6170 692e 6365 6c6c  edb.edb_api.cell
-000034a0: 2e6c 6179 6572 5f74 7970 655f 7365 742e  .layer_type_set.
-000034b0: 416c 6c4c 6179 6572 5365 7429 290a 2020  AllLayerSet)).  
-000034c0: 2020 2020 2020 7265 7475 726e 205b 692e        return [i.
-000034d0: 436c 6f6e 6528 2920 666f 7220 6920 696e  Clone() for i in
-000034e0: 206c 6179 6572 5f6c 6973 745d 0a0a 2020   layer_list]..  
-000034f0: 2020 4070 726f 7065 7274 790a 2020 2020    @property.    
-00003500: 6465 6620 5f65 6462 5f6c 6179 6572 5f6c  def _edb_layer_l
-00003510: 6973 745f 6e6f 6e73 7461 636b 7570 2873  ist_nonstackup(s
-00003520: 656c 6629 3a0a 2020 2020 2020 2020 6c61  elf):.        la
-00003530: 7965 725f 6c69 7374 203d 206c 6973 7428  yer_list = list(
-00003540: 7365 6c66 2e5f 6c61 7965 725f 636f 6c6c  self._layer_coll
-00003550: 6563 7469 6f6e 2e4c 6179 6572 7328 7365  ection.Layers(se
-00003560: 6c66 2e5f 7065 6462 2e65 6462 5f61 7069  lf._pedb.edb_api
-00003570: 2e63 656c 6c2e 6c61 7965 725f 7479 7065  .cell.layer_type
-00003580: 5f73 6574 2e4e 6f6e 5374 6163 6b75 704c  _set.NonStackupL
-00003590: 6179 6572 5365 7429 290a 2020 2020 2020  ayerSet)).      
-000035a0: 2020 7265 7475 726e 205b 692e 436c 6f6e    return [i.Clon
-000035b0: 6528 2920 666f 7220 6920 696e 206c 6179  e() for i in lay
-000035c0: 6572 5f6c 6973 745d 0a0a 2020 2020 4070  er_list]..    @p
-000035d0: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
-000035e0: 6c61 7965 7273 2873 656c 6629 3a0a 2020  layers(self):.  
-000035f0: 2020 2020 2020 2222 2252 6574 7269 6576        """Retriev
-00003600: 6520 7468 6520 6469 6374 696f 6e61 7279  e the dictionary
-00003610: 206f 6620 6c61 7965 7273 2e0a 0a20 2020   of layers...   
-00003620: 2020 2020 2052 6574 7572 6e73 0a20 2020       Returns.   
-00003630: 2020 2020 202d 2d2d 2d2d 2d2d 0a20 2020       -------.   
-00003640: 2020 2020 2044 6963 745b 7374 722c 203a       Dict[str, :
-00003650: 636c 6173 733a 6070 7965 6462 2e64 6f74  class:`pyedb.dot
-00003660: 6e65 742e 6564 625f 636f 7265 2e65 6462  net.edb_core.edb
-00003670: 5f64 6174 612e 6c61 7965 725f 6461 7461  _data.layer_data
-00003680: 2e4c 6179 6572 4564 6243 6c61 7373 605d  .LayerEdbClass`]
-00003690: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-000036a0: 2020 2020 205f 6c61 7973 203d 204f 7264       _lays = Ord
-000036b0: 6572 6564 4469 6374 2829 0a20 2020 2020  eredDict().     
-000036c0: 2020 2066 6f72 206c 2069 6e20 7365 6c66     for l in self
-000036d0: 2e5f 6564 625f 6c61 7965 725f 6c69 7374  ._edb_layer_list
-000036e0: 3a0a 2020 2020 2020 2020 2020 2020 6e61  :.            na
-000036f0: 6d65 203d 206c 2e47 6574 4e61 6d65 2829  me = l.GetName()
-00003700: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00003710: 6e6f 7420 6c2e 4973 5374 6163 6b75 704c  not l.IsStackupL
-00003720: 6179 6572 2829 3a0a 2020 2020 2020 2020  ayer():.        
-00003730: 2020 2020 2020 2020 5f6c 6179 735b 6e61          _lays[na
-00003740: 6d65 5d20 3d20 4c61 7965 7245 6462 436c  me] = LayerEdbCl
-00003750: 6173 7328 7365 6c66 2c20 6e61 6d65 290a  ass(self, name).
-00003760: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00003770: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00003780: 2020 5f6c 6179 735b 6e61 6d65 5d20 3d20    _lays[name] = 
-00003790: 5374 6163 6b75 704c 6179 6572 4564 6243  StackupLayerEdbC
-000037a0: 6c61 7373 2873 656c 662c 206e 616d 6529  lass(self, name)
-000037b0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000037c0: 5f6c 6179 730a 0a20 2020 2040 7072 6f70  _lays..    @prop
-000037d0: 6572 7479 0a20 2020 2064 6566 2073 6967  erty.    def sig
-000037e0: 6e61 6c5f 6c61 7965 7273 2873 656c 6629  nal_layers(self)
-000037f0: 3a0a 2020 2020 2020 2020 2222 2252 6574  :.        """Ret
-00003800: 7269 6576 6520 7468 6520 6469 6374 696f  rieve the dictio
-00003810: 6e61 7279 206f 6620 7369 676e 616c 206c  nary of signal l
-00003820: 6179 6572 732e 0a0a 2020 2020 2020 2020  ayers...        
-00003830: 5265 7475 726e 730a 2020 2020 2020 2020  Returns.        
-00003840: 2d2d 2d2d 2d2d 2d0a 2020 2020 2020 2020  -------.        
-00003850: 4469 6374 5b73 7472 2c20 3a63 6c61 7373  Dict[str, :class
-00003860: 3a60 7079 6564 622e 646f 746e 6574 2e65  :`pyedb.dotnet.e
-00003870: 6462 5f63 6f72 652e 6564 625f 6461 7461  db_core.edb_data
-00003880: 2e6c 6179 6572 5f64 6174 612e 4c61 7965  .layer_data.Laye
-00003890: 7245 6462 436c 6173 7360 5d0a 2020 2020  rEdbClass`].    
-000038a0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-000038b0: 6c61 7965 725f 7479 7065 203d 2073 656c  layer_type = sel
-000038c0: 662e 5f70 6564 622e 6564 625f 6170 692e  f._pedb.edb_api.
-000038d0: 6365 6c6c 2e6c 6179 6572 5f74 7970 652e  cell.layer_type.
-000038e0: 5369 676e 616c 4c61 7965 720a 2020 2020  SignalLayer.    
-000038f0: 2020 2020 5f6c 6179 7320 3d20 4f72 6465      _lays = Orde
-00003900: 7265 6444 6963 7428 290a 2020 2020 2020  redDict().      
-00003910: 2020 666f 7220 6e61 6d65 2c20 6f62 6a20    for name, obj 
-00003920: 696e 2073 656c 662e 6c61 7965 7273 2e69  in self.layers.i
-00003930: 7465 6d73 2829 3a0a 2020 2020 2020 2020  tems():.        
-00003940: 2020 2020 6966 206f 626a 2e5f 6564 625f      if obj._edb_
-00003950: 6c61 7965 722e 4765 744c 6179 6572 5479  layer.GetLayerTy
-00003960: 7065 2829 203d 3d20 6c61 7965 725f 7479  pe() == layer_ty
-00003970: 7065 3a0a 2020 2020 2020 2020 2020 2020  pe:.            
-00003980: 2020 2020 5f6c 6179 735b 6e61 6d65 5d20      _lays[name] 
-00003990: 3d20 6f62 6a0a 2020 2020 2020 2020 7265  = obj.        re
-000039a0: 7475 726e 205f 6c61 7973 0a0a 2020 2020  turn _lays..    
-000039b0: 4070 726f 7065 7274 790a 2020 2020 6465  @property.    de
-000039c0: 6620 7374 6163 6b75 705f 6c61 7965 7273  f stackup_layers
-000039d0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-000039e0: 2222 2252 6574 7269 6576 6520 7468 6520  """Retrieve the 
-000039f0: 6469 6374 696f 6e61 7279 206f 6620 7369  dictionary of si
-00003a00: 676e 616c 2061 6e64 2064 6965 6c65 6374  gnal and dielect
-00003a10: 7269 6320 6c61 7965 7273 2e0a 0a20 2020  ric layers...   
-00003a20: 2020 2020 2052 6574 7572 6e73 0a20 2020       Returns.   
-00003a30: 2020 2020 202d 2d2d 2d2d 2d2d 0a20 2020       -------.   
-00003a40: 2020 2020 2044 6963 745b 7374 722c 203a       Dict[str, :
-00003a50: 636c 6173 733a 6064 6f74 6e65 742e 6564  class:`dotnet.ed
-00003a60: 625f 636f 7265 2e65 6462 5f64 6174 612e  b_core.edb_data.
-00003a70: 6c61 7965 725f 6461 7461 2e4c 6179 6572  layer_data.Layer
-00003a80: 4564 6243 6c61 7373 605d 0a20 2020 2020  EdbClass`].     
-00003a90: 2020 2022 2222 0a20 2020 2020 2020 206c     """.        l
-00003aa0: 6179 6572 5f74 7970 6520 3d20 5b0a 2020  ayer_type = [.  
-00003ab0: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
-00003ac0: 7065 6462 2e65 6462 5f61 7069 2e63 656c  pedb.edb_api.cel
-00003ad0: 6c2e 6c61 7965 725f 7479 7065 2e53 6967  l.layer_type.Sig
-00003ae0: 6e61 6c4c 6179 6572 2c0a 2020 2020 2020  nalLayer,.      
-00003af0: 2020 2020 2020 7365 6c66 2e5f 7065 6462        self._pedb
-00003b00: 2e65 6462 5f61 7069 2e63 656c 6c2e 6c61  .edb_api.cell.la
-00003b10: 7965 725f 7479 7065 2e44 6965 6c65 6374  yer_type.Dielect
-00003b20: 7269 634c 6179 6572 2c0a 2020 2020 2020  ricLayer,.      
-00003b30: 2020 5d0a 2020 2020 2020 2020 5f6c 6179    ].        _lay
-00003b40: 7320 3d20 4f72 6465 7265 6444 6963 7428  s = OrderedDict(
-00003b50: 290a 2020 2020 2020 2020 666f 7220 6e61  ).        for na
-00003b60: 6d65 2c20 6f62 6a20 696e 2073 656c 662e  me, obj in self.
-00003b70: 6c61 7965 7273 2e69 7465 6d73 2829 3a0a  layers.items():.
-00003b80: 2020 2020 2020 2020 2020 2020 6966 206f              if o
-00003b90: 626a 2e5f 6564 625f 6c61 7965 722e 4765  bj._edb_layer.Ge
-00003ba0: 744c 6179 6572 5479 7065 2829 2069 6e20  tLayerType() in 
-00003bb0: 6c61 7965 725f 7479 7065 3a0a 2020 2020  layer_type:.    
-00003bc0: 2020 2020 2020 2020 2020 2020 5f6c 6179              _lay
-00003bd0: 735b 6e61 6d65 5d20 3d20 6f62 6a0a 2020  s[name] = obj.  
-00003be0: 2020 2020 2020 7265 7475 726e 205f 6c61        return _la
-00003bf0: 7973 0a0a 2020 2020 4070 726f 7065 7274  ys..    @propert
-00003c00: 790a 2020 2020 6465 6620 6469 656c 6563  y.    def dielec
-00003c10: 7472 6963 5f6c 6179 6572 7328 7365 6c66  tric_layers(self
-00003c20: 293a 0a20 2020 2020 2020 2022 2222 4469  ):.        """Di
-00003c30: 656c 6563 7472 6963 206c 6179 6572 732e  electric layers.
-00003c40: 0a0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-00003c50: 730a 2020 2020 2020 2020 2d2d 2d2d 2d2d  s.        ------
-00003c60: 2d0a 2020 2020 2020 2020 6469 6374 5b73  -.        dict[s
-00003c70: 7472 2c20 3a63 6c61 7373 3a60 646f 746e  tr, :class:`dotn
-00003c80: 6574 2e65 6462 5f63 6f72 652e 6564 625f  et.edb_core.edb_
-00003c90: 6461 7461 2e6c 6179 6572 5f64 6174 612e  data.layer_data.
-00003ca0: 4544 424c 6179 6572 605d 0a20 2020 2020  EDBLayer`].     
-00003cb0: 2020 2020 2020 2044 6963 7469 6f6e 6172         Dictionar
-00003cc0: 7920 6f66 2064 6965 6c65 6374 7269 6320  y of dielectric 
-00003cd0: 6c61 7965 7273 2e0a 2020 2020 2020 2020  layers..        
-00003ce0: 2222 220a 2020 2020 2020 2020 6c61 7965  """.        laye
-00003cf0: 725f 7479 7065 203d 2073 656c 662e 5f70  r_type = self._p
-00003d00: 6564 622e 6564 625f 6170 692e 6365 6c6c  edb.edb_api.cell
-00003d10: 2e6c 6179 6572 5f74 7970 652e 4469 656c  .layer_type.Diel
-00003d20: 6563 7472 6963 4c61 7965 720a 2020 2020  ectricLayer.    
-00003d30: 2020 2020 5f6c 6179 7320 3d20 4f72 6465      _lays = Orde
-00003d40: 7265 6444 6963 7428 290a 2020 2020 2020  redDict().      
-00003d50: 2020 666f 7220 6e61 6d65 2c20 6f62 6a20    for name, obj 
-00003d60: 696e 2073 656c 662e 6c61 7965 7273 2e69  in self.layers.i
-00003d70: 7465 6d73 2829 3a0a 2020 2020 2020 2020  tems():.        
-00003d80: 2020 2020 6966 206f 626a 2e5f 6564 625f      if obj._edb_
-00003d90: 6c61 7965 722e 4765 744c 6179 6572 5479  layer.GetLayerTy
-00003da0: 7065 2829 203d 3d20 6c61 7965 725f 7479  pe() == layer_ty
-00003db0: 7065 3a0a 2020 2020 2020 2020 2020 2020  pe:.            
-00003dc0: 2020 2020 5f6c 6179 735b 6e61 6d65 5d20      _lays[name] 
-00003dd0: 3d20 6f62 6a0a 2020 2020 2020 2020 7265  = obj.        re
-00003de0: 7475 726e 205f 6c61 7973 0a0a 2020 2020  turn _lays..    
-00003df0: 4070 726f 7065 7274 790a 2020 2020 6465  @property.    de
-00003e00: 6620 6e6f 6e5f 7374 6163 6b75 705f 6c61  f non_stackup_la
-00003e10: 7965 7273 2873 656c 6629 3a0a 2020 2020  yers(self):.    
-00003e20: 2020 2020 2222 2252 6574 7269 6576 6520      """Retrieve 
-00003e30: 7468 6520 6469 6374 696f 6e61 7279 206f  the dictionary o
-00003e40: 6620 7369 676e 616c 206c 6179 6572 732e  f signal layers.
-00003e50: 0a0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-00003e60: 730a 2020 2020 2020 2020 2d2d 2d2d 2d2d  s.        ------
-00003e70: 2d0a 2020 2020 2020 2020 4469 6374 5b73  -.        Dict[s
-00003e80: 7472 2c20 3a63 6c61 7373 3a60 646f 746e  tr, :class:`dotn
-00003e90: 6574 2e65 6462 5f63 6f72 652e 6564 625f  et.edb_core.edb_
-00003ea0: 6461 7461 2e6c 6179 6572 5f64 6174 612e  data.layer_data.
-00003eb0: 4c61 7965 7245 6462 436c 6173 7360 5d0a  LayerEdbClass`].
-00003ec0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00003ed0: 2020 2020 7265 7475 726e 207b 6c2e 4765      return {l.Ge
-00003ee0: 744e 616d 6528 293a 204c 6179 6572 4564  tName(): LayerEd
-00003ef0: 6243 6c61 7373 2873 656c 662c 206c 2e47  bClass(self, l.G
-00003f00: 6574 4e61 6d65 2829 2920 666f 7220 6c20  etName()) for l 
-00003f10: 696e 2073 656c 662e 5f65 6462 5f6c 6179  in self._edb_lay
-00003f20: 6572 5f6c 6973 745f 6e6f 6e73 7461 636b  er_list_nonstack
-00003f30: 7570 7d0a 0a20 2020 2040 7079 6564 625f  up}..    @pyedb_
-00003f40: 6675 6e63 7469 6f6e 5f68 616e 646c 6572  function_handler
-00003f50: 2829 0a20 2020 2064 6566 205f 6564 625f  ().    def _edb_
-00003f60: 7661 6c75 6528 7365 6c66 2c20 7661 6c75  value(self, valu
-00003f70: 6529 3a0a 2020 2020 2020 2020 7265 7475  e):.        retu
-00003f80: 726e 2073 656c 662e 5f70 6564 622e 6564  rn self._pedb.ed
-00003f90: 625f 7661 6c75 6528 7661 6c75 6529 0a0a  b_value(value)..
-00003fa0: 2020 2020 4070 7965 6462 5f66 756e 6374      @pyedb_funct
-00003fb0: 696f 6e5f 6861 6e64 6c65 7228 290a 2020  ion_handler().  
-00003fc0: 2020 6465 6620 5f73 6574 5f6c 6179 6f75    def _set_layou
-00003fd0: 745f 7374 6163 6b75 7028 7365 6c66 2c20  t_stackup(self, 
-00003fe0: 6c61 7965 725f 636c 6f6e 652c 206f 7065  layer_clone, ope
-00003ff0: 7261 7469 6f6e 2c20 6261 7365 5f6c 6179  ration, base_lay
-00004000: 6572 3d4e 6f6e 652c 206d 6574 686f 643d  er=None, method=
-00004010: 3129 3a0a 2020 2020 2020 2020 2222 2249  1):.        """I
-00004020: 6e74 6572 6e61 6c20 6d65 7468 6f64 2e20  nternal method. 
-00004030: 4170 706c 7920 7374 6163 6b75 7020 6368  Apply stackup ch
-00004040: 616e 6765 2069 6e74 6f20 4544 422e 0a0a  ange into EDB...
-00004050: 2020 2020 2020 2020 5061 7261 6d65 7465          Paramete
-00004060: 7273 0a20 2020 2020 2020 202d 2d2d 2d2d  rs.        -----
-00004070: 2d2d 2d2d 2d0a 2020 2020 2020 2020 6c61  -----.        la
-00004080: 7965 725f 636c 6f6e 6520 3a20 3a63 6c61  yer_clone : :cla
-00004090: 7373 3a60 646f 746e 6574 2e65 6462 5f63  ss:`dotnet.edb_c
-000040a0: 6f72 652e 4544 425f 4461 7461 2e45 4442  ore.EDB_Data.EDB
-000040b0: 4c61 7965 7260 0a20 2020 2020 2020 206f  Layer`.        o
-000040c0: 7065 7261 7469 6f6e 203a 2073 7472 0a20  peration : str. 
-000040d0: 2020 2020 2020 2020 2020 204f 7074 696f             Optio
-000040e0: 6e73 2061 7265 2060 6022 6368 616e 6765  ns are ``"change
-000040f0: 5f61 7474 7269 6275 7465 2260 602c 2060  _attribute"``, `
-00004100: 6022 6368 616e 6765 5f6e 616d 6522 6060  `"change_name"``
-00004110: 2c60 6022 6368 616e 6765 5f70 6f73 6974  ,``"change_posit
-00004120: 696f 6e22 6060 2c20 6060 2269 6e73 6572  ion"``, ``"inser
-00004130: 745f 6265 6c6f 7722 6060 2c0a 2020 2020  t_below"``,.    
-00004140: 2020 2020 2020 2020 2060 6022 696e 7365           ``"inse
-00004150: 7274 5f61 626f 7665 2260 602c 2060 6022  rt_above"``, ``"
-00004160: 6164 645f 6f6e 5f74 6f70 2260 602c 2060  add_on_top"``, `
-00004170: 6022 6164 645f 6f6e 5f62 6f74 746f 6d22  `"add_on_bottom"
-00004180: 6060 2c20 6060 226e 6f6e 5f73 7461 636b  ``, ``"non_stack
-00004190: 7570 2260 602c 2020 6060 2261 6464 5f61  up"``,  ``"add_a
-000041a0: 745f 656c 6576 6174 696f 6e22 6060 2e0a  t_elevation"``..
-000041b0: 2020 2020 2020 2020 6261 7365 5f6c 6179          base_lay
-000041c0: 6572 203a 2073 7472 2c20 6f70 7469 6f6e  er : str, option
-000041d0: 616c 0a20 2020 2020 2020 2020 2020 204e  al.            N
-000041e0: 616d 6520 6f66 2074 6865 2062 6173 6520  ame of the base 
-000041f0: 6c61 7965 722e 2054 6865 2064 6566 6175  layer. The defau
-00004200: 6c74 2076 616c 7565 2069 7320 6060 4e6f  lt value is ``No
-00004210: 6e65 6060 2e0a 0a20 2020 2020 2020 2052  ne``...        R
-00004220: 6574 7572 6e73 0a20 2020 2020 2020 202d  eturns.        -
-00004230: 2d2d 2d2d 2d2d 0a0a 2020 2020 2020 2020  ------..        
-00004240: 2222 220a 2020 2020 2020 2020 5f6c 6320  """.        _lc 
-00004250: 3d20 7365 6c66 2e5f 6c61 7965 725f 636f  = self._layer_co
-00004260: 6c6c 6563 7469 6f6e 0a20 2020 2020 2020  llection.       
-00004270: 2069 6620 6f70 6572 6174 696f 6e20 696e   if operation in
-00004280: 205b 2263 6861 6e67 655f 706f 7369 7469   ["change_positi
-00004290: 6f6e 222c 2022 6368 616e 6765 5f61 7474  on", "change_att
-000042a0: 7269 6275 7465 222c 2022 6368 616e 6765  ribute", "change
-000042b0: 5f6e 616d 6522 5d3a 0a20 2020 2020 2020  _name"]:.       
-000042c0: 2020 2020 206c 635f 7265 6164 6f6e 6c79       lc_readonly
-000042d0: 203d 2073 656c 662e 5f70 6564 622e 6c61   = self._pedb.la
-000042e0: 796f 7574 2e6c 6179 6572 5f63 6f6c 6c65  yout.layer_colle
-000042f0: 6374 696f 6e0a 2020 2020 2020 2020 2020  ction.          
-00004300: 2020 6c61 7965 7273 203d 205b 0a20 2020    layers = [.   
-00004310: 2020 2020 2020 2020 2020 2020 2069 2e43               i.C
-00004320: 6c6f 6e65 2829 0a20 2020 2020 2020 2020  lone().         
-00004330: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-00004340: 6c69 7374 286c 6973 7428 6c63 5f72 6561  list(list(lc_rea
-00004350: 646f 6e6c 792e 4c61 7965 7273 2873 656c  donly.Layers(sel
-00004360: 662e 5f70 6564 622e 6564 625f 6170 692e  f._pedb.edb_api.
-00004370: 6365 6c6c 2e6c 6179 6572 5f74 7970 655f  cell.layer_type_
-00004380: 7365 742e 5374 6163 6b75 704c 6179 6572  set.StackupLayer
-00004390: 5365 7429 2929 0a20 2020 2020 2020 2020  Set))).         
-000043a0: 2020 205d 0a20 2020 2020 2020 2020 2020     ].           
-000043b0: 206e 6f6e 5f73 7461 636b 7570 203d 205b   non_stackup = [
-000043c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000043d0: 2069 2e43 6c6f 6e65 2829 0a20 2020 2020   i.Clone().     
-000043e0: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
-000043f0: 2069 6e20 6c69 7374 286c 6973 7428 6c63   in list(list(lc
-00004400: 5f72 6561 646f 6e6c 792e 4c61 7965 7273  _readonly.Layers
-00004410: 2873 656c 662e 5f70 6564 622e 6564 625f  (self._pedb.edb_
-00004420: 6170 692e 6365 6c6c 2e6c 6179 6572 5f74  api.cell.layer_t
-00004430: 7970 655f 7365 742e 4e6f 6e53 7461 636b  ype_set.NonStack
-00004440: 7570 4c61 7965 7253 6574 2929 290a 2020  upLayerSet))).  
-00004450: 2020 2020 2020 2020 2020 5d0a 2020 2020            ].    
-00004460: 2020 2020 2020 2020 5f6c 6320 3d20 7365          _lc = se
-00004470: 6c66 2e5f 7065 6462 2e65 6462 5f61 7069  lf._pedb.edb_api
-00004480: 2e63 656c 6c2e 5f63 656c 6c2e 4c61 7965  .cell._cell.Laye
-00004490: 7243 6f6c 6c65 6374 696f 6e28 290a 2020  rCollection().  
-000044a0: 2020 2020 2020 2020 2020 6d6f 6465 203d            mode =
-000044b0: 206c 635f 7265 6164 6f6e 6c79 2e47 6574   lc_readonly.Get
-000044c0: 4d6f 6465 2829 0a20 2020 2020 2020 2020  Mode().         
-000044d0: 2020 205f 6c63 2e53 6574 4d6f 6465 286c     _lc.SetMode(l
-000044e0: 635f 7265 6164 6f6e 6c79 2e47 6574 4d6f  c_readonly.GetMo
-000044f0: 6465 2829 290a 2020 2020 2020 2020 2020  de()).          
-00004500: 2020 6966 2073 7472 286d 6f64 6529 203d    if str(mode) =
-00004510: 3d20 224f 7665 726c 6170 7069 6e67 223a  = "Overlapping":
-00004520: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00004530: 2066 6f72 206c 6179 6572 2069 6e20 6c61   for layer in la
-00004540: 7965 7273 3a0a 2020 2020 2020 2020 2020  yers:.          
-00004550: 2020 2020 2020 2020 2020 6966 206c 6179            if lay
-00004560: 6572 2e47 6574 4e61 6d65 2829 203d 3d20  er.GetName() == 
-00004570: 6c61 7965 725f 636c 6f6e 652e 4765 744e  layer_clone.GetN
-00004580: 616d 6528 2920 6f72 206c 6179 6572 2e47  ame() or layer.G
-00004590: 6574 4e61 6d65 2829 203d 3d20 6261 7365  etName() == base
-000045a0: 5f6c 6179 6572 3a0a 2020 2020 2020 2020  _layer:.        
-000045b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000045c0: 5f6c 632e 4164 6453 7461 636b 7570 4c61  _lc.AddStackupLa
-000045d0: 7965 7241 7445 6c65 7661 7469 6f6e 286c  yerAtElevation(l
-000045e0: 6179 6572 5f63 6c6f 6e65 290a 2020 2020  ayer_clone).    
-000045f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004600: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00004610: 2020 2020 2020 2020 2020 2020 2020 5f6c                _l
-00004620: 632e 4164 6453 7461 636b 7570 4c61 7965  c.AddStackupLaye
-00004630: 7241 7445 6c65 7661 7469 6f6e 286c 6179  rAtElevation(lay
-00004640: 6572 290a 2020 2020 2020 2020 2020 2020  er).            
-00004650: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00004660: 2020 2020 2020 666f 7220 6c61 7965 7220        for layer 
-00004670: 696e 206c 6179 6572 733a 0a20 2020 2020  in layers:.     
-00004680: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00004690: 6620 6c61 7965 722e 4765 744e 616d 6528  f layer.GetName(
-000046a0: 2920 3d3d 206c 6179 6572 5f63 6c6f 6e65  ) == layer_clone
-000046b0: 2e47 6574 4e61 6d65 2829 206f 7220 6c61  .GetName() or la
-000046c0: 7965 722e 4765 744e 616d 6528 2920 3d3d  yer.GetName() ==
-000046d0: 2062 6173 655f 6c61 7965 723a 0a20 2020   base_layer:.   
-000046e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000046f0: 2020 2020 205f 6c63 2e41 6464 4c61 7965       _lc.AddLaye
-00004700: 7242 6f74 746f 6d28 6c61 7965 725f 636c  rBottom(layer_cl
-00004710: 6f6e 6529 0a20 2020 2020 2020 2020 2020  one).           
-00004720: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+000014e0: 7970 6573 2e4d 6561 7375 7265 4c61 7965  ypes.MeasureLaye
+000014f0: 723a 0a20 2020 2020 2020 2020 2020 2020  r:.             
+00001500: 2020 2072 6574 7572 6e20 360a 2020 2020     return 6.    
+00001510: 2020 2020 2020 2020 656c 6966 206c 6179          elif lay
+00001520: 6572 5f74 7970 6520 3d3d 2073 656c 662e  er_type == self.
+00001530: 6c61 7965 725f 7479 7065 732e 4173 7365  layer_types.Asse
+00001540: 6d62 6c79 4c61 7965 723a 0a20 2020 2020  mblyLayer:.     
+00001550: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00001560: 6e20 380a 2020 2020 2020 2020 2020 2020  n 8.            
+00001570: 656c 6966 206c 6179 6572 5f74 7970 6520  elif layer_type 
+00001580: 3d3d 2073 656c 662e 6c61 7965 725f 7479  == self.layer_ty
+00001590: 7065 732e 5369 6c6b 7363 7265 656e 4c61  pes.SilkscreenLa
+000015a0: 7965 723a 0a20 2020 2020 2020 2020 2020  yer:.           
+000015b0: 2020 2020 2072 6574 7572 6e20 390a 2020       return 9.  
+000015c0: 2020 2020 2020 2020 2020 656c 6966 206c            elif l
+000015d0: 6179 6572 5f74 7970 6520 3d3d 2073 656c  ayer_type == sel
+000015e0: 662e 6c61 7965 725f 7479 7065 732e 536f  f.layer_types.So
+000015f0: 6c64 6572 4d61 736b 4c61 7965 723a 0a20  lderMaskLayer:. 
+00001600: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00001610: 6574 7572 6e20 3130 0a20 2020 2020 2020  eturn 10.       
+00001620: 2020 2020 2065 6c69 6620 6c61 7965 725f       elif layer_
+00001630: 7479 7065 203d 3d20 7365 6c66 2e6c 6179  type == self.lay
+00001640: 6572 5f74 7970 6573 2e53 6f6c 6465 7250  er_types.SolderP
+00001650: 6173 7465 4c61 7965 723a 0a20 2020 2020  asteLayer:.     
+00001660: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00001670: 6e20 3131 0a20 2020 2020 2020 2020 2020  n 11.           
+00001680: 2065 6c69 6620 6c61 7965 725f 7479 7065   elif layer_type
+00001690: 203d 3d20 7365 6c66 2e6c 6179 6572 5f74   == self.layer_t
+000016a0: 7970 6573 2e47 6c75 654c 6179 6572 3a0a  ypes.GlueLayer:.
+000016b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000016c0: 7265 7475 726e 2031 320a 2020 2020 2020  return 12.      
+000016d0: 2020 2020 2020 656c 6966 206c 6179 6572        elif layer
+000016e0: 5f74 7970 6520 3d3d 2073 656c 662e 6c61  _type == self.la
+000016f0: 7965 725f 7479 7065 732e 5769 7265 626f  yer_types.Wirebo
+00001700: 6e64 4c61 7965 723a 0a20 2020 2020 2020  ndLayer:.       
+00001710: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00001720: 3133 0a20 2020 2020 2020 2020 2020 2065  13.            e
+00001730: 6c69 6620 6c61 7965 725f 7479 7065 203d  lif layer_type =
+00001740: 3d20 7365 6c66 2e6c 6179 6572 5f74 7970  = self.layer_typ
+00001750: 6573 2e55 7365 724c 6179 6572 3a0a 2020  es.UserLayer:.  
+00001760: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00001770: 7475 726e 2031 340a 2020 2020 2020 2020  turn 14.        
+00001780: 2020 2020 656c 6966 206c 6179 6572 5f74      elif layer_t
+00001790: 7970 6520 3d3d 2073 656c 662e 6c61 7965  ype == self.laye
+000017a0: 725f 7479 7065 732e 5349 7761 7665 4846  r_types.SIwaveHF
+000017b0: 5353 536f 6c76 6572 5265 6769 6f6e 733a  SSSolverRegions:
+000017c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000017d0: 2072 6574 7572 6e20 3136 0a20 2020 2020   return 16.     
+000017e0: 2020 2020 2020 2065 6c69 6620 6c61 7965         elif laye
+000017f0: 725f 7479 7065 203d 3d20 7365 6c66 2e6c  r_type == self.l
+00001800: 6179 6572 5f74 7970 6573 2e4f 7574 6c69  ayer_types.Outli
+00001810: 6e65 4c61 7965 723a 0a20 2020 2020 2020  neLayer:.       
+00001820: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00001830: 3138 0a20 2020 2020 2020 2065 6c69 6620  18.        elif 
+00001840: 6973 696e 7374 616e 6365 286c 6179 6572  isinstance(layer
+00001850: 5f74 7970 652c 2069 6e74 293a 0a20 2020  _type, int):.   
+00001860: 2020 2020 2020 2020 2072 6574 7572 6e0a           return.
+00001870: 0a20 2020 2040 7079 6564 625f 6675 6e63  .    @pyedb_func
+00001880: 7469 6f6e 5f68 616e 646c 6572 2829 0a20  tion_handler(). 
+00001890: 2020 2064 6566 2063 7265 6174 655f 7379     def create_sy
+000018a0: 6d6d 6574 7269 635f 7374 6163 6b75 7028  mmetric_stackup(
+000018b0: 0a20 2020 2020 2020 2073 656c 662c 0a20  .        self,. 
+000018c0: 2020 2020 2020 206c 6179 6572 5f63 6f75         layer_cou
+000018d0: 6e74 2c0a 2020 2020 2020 2020 696e 6e65  nt,.        inne
+000018e0: 725f 6c61 7965 725f 7468 6963 6b6e 6573  r_layer_thicknes
+000018f0: 733d 2231 3775 6d22 2c0a 2020 2020 2020  s="17um",.      
+00001900: 2020 6f75 7465 725f 6c61 7965 725f 7468    outer_layer_th
+00001910: 6963 6b6e 6573 733d 2235 3075 6d22 2c0a  ickness="50um",.
+00001920: 2020 2020 2020 2020 6469 656c 6563 7472          dielectr
+00001930: 6963 5f74 6869 636b 6e65 7373 3d22 3130  ic_thickness="10
+00001940: 3075 6d22 2c0a 2020 2020 2020 2020 6469  0um",.        di
+00001950: 656c 6563 7472 6963 5f6d 6174 6572 6961  electric_materia
+00001960: 6c3d 2246 5234 5f65 706f 7879 222c 0a20  l="FR4_epoxy",. 
+00001970: 2020 2020 2020 2073 6f6c 6465 726d 6173         soldermas
+00001980: 6b3d 5472 7565 2c0a 2020 2020 2020 2020  k=True,.        
+00001990: 736f 6c64 6572 6d61 736b 5f74 6869 636b  soldermask_thick
+000019a0: 6e65 7373 3d22 3230 756d 222c 0a20 2020  ness="20um",.   
+000019b0: 2029 3a20 2023 2070 7261 676d 613a 206e   ):  # pragma: n
+000019c0: 6f20 636f 7665 720a 2020 2020 2020 2020  o cover.        
+000019d0: 2222 2243 7265 6174 6520 6120 7379 6d6d  """Create a symm
+000019e0: 6574 7269 6320 7374 6163 6b75 702e 0a0a  etric stackup...
+000019f0: 2020 2020 2020 2020 5061 7261 6d65 7465          Paramete
+00001a00: 7273 0a20 2020 2020 2020 202d 2d2d 2d2d  rs.        -----
+00001a10: 2d2d 2d2d 2d0a 2020 2020 2020 2020 6c61  -----.        la
+00001a20: 7965 725f 636f 756e 7420 3a20 696e 740a  yer_count : int.
+00001a30: 2020 2020 2020 2020 2020 2020 4e75 6d62              Numb
+00001a40: 6572 206f 6620 6c61 7965 7220 636f 756e  er of layer coun
+00001a50: 742e 0a20 2020 2020 2020 2069 6e6e 6572  t..        inner
+00001a60: 5f6c 6179 6572 5f74 6869 636b 6e65 7373  _layer_thickness
+00001a70: 203a 2073 7472 2c20 666c 6f61 742c 206f   : str, float, o
+00001a80: 7074 696f 6e61 6c0a 2020 2020 2020 2020  ptional.        
+00001a90: 2020 2020 5468 6963 6b6e 6573 7320 6f66      Thickness of
+00001aa0: 2069 6e6e 6572 2063 6f6e 6475 6374 6f72   inner conductor
+00001ab0: 206c 6179 6572 2e0a 2020 2020 2020 2020   layer..        
+00001ac0: 6f75 7465 725f 6c61 7965 725f 7468 6963  outer_layer_thic
+00001ad0: 6b6e 6573 7320 3a20 7374 722c 2066 6c6f  kness : str, flo
+00001ae0: 6174 2c20 6f70 7469 6f6e 616c 0a20 2020  at, optional.   
+00001af0: 2020 2020 2020 2020 2054 6869 636b 6e65           Thickne
+00001b00: 7373 206f 6620 6f75 7465 7220 636f 6e64  ss of outer cond
+00001b10: 7563 746f 7220 6c61 7965 722e 0a20 2020  uctor layer..   
+00001b20: 2020 2020 2064 6965 6c65 6374 7269 635f       dielectric_
+00001b30: 7468 6963 6b6e 6573 7320 3a20 7374 722c  thickness : str,
+00001b40: 2066 6c6f 6174 2c20 6f70 7469 6f6e 616c   float, optional
+00001b50: 0a20 2020 2020 2020 2020 2020 2054 6869  .            Thi
+00001b60: 636b 6e65 7373 206f 6620 6469 656c 6563  ckness of dielec
+00001b70: 7472 6963 206c 6179 6572 2e0a 2020 2020  tric layer..    
+00001b80: 2020 2020 6469 656c 6563 7472 6963 5f6d      dielectric_m
+00001b90: 6174 6572 6961 6c20 3a20 7374 722c 206f  aterial : str, o
+00001ba0: 7074 696f 6e61 6c0a 2020 2020 2020 2020  ptional.        
+00001bb0: 2020 2020 4d61 7465 7269 616c 206f 6620      Material of 
+00001bc0: 6469 656c 6563 7472 6963 206c 6179 6572  dielectric layer
+00001bd0: 2e0a 2020 2020 2020 2020 736f 6c64 6572  ..        solder
+00001be0: 6d61 736b 203a 2062 6f6f 6c2c 206f 7074  mask : bool, opt
+00001bf0: 696f 6e61 6c0a 2020 2020 2020 2020 2020  ional.          
+00001c00: 2020 5768 6574 6865 7220 746f 2063 7265    Whether to cre
+00001c10: 6174 6520 736f 6c64 6572 6d61 736b 206c  ate soldermask l
+00001c20: 6179 6572 732e 2054 6865 2064 6566 6175  ayers. The defau
+00001c30: 6c74 2069 7360 6054 7275 6560 602e 0a20  lt is``True``.. 
+00001c40: 2020 2020 2020 2073 6f6c 6465 726d 6173         soldermas
+00001c50: 6b5f 7468 6963 6b6e 6573 7320 3a20 7374  k_thickness : st
+00001c60: 722c 206f 7074 696f 6e61 6c0a 2020 2020  r, optional.    
+00001c70: 2020 2020 2020 2020 5468 6963 6b6e 6573          Thicknes
+00001c80: 7320 6f66 2073 6f6c 6465 726d 6173 6b20  s of soldermask 
+00001c90: 6c61 7965 722e 0a0a 2020 2020 2020 2020  layer...        
+00001ca0: 5265 7475 726e 730a 2020 2020 2020 2020  Returns.        
+00001cb0: 2d2d 2d2d 2d2d 2d0a 2020 2020 2020 2020  -------.        
+00001cc0: 626f 6f6c 0a20 2020 2020 2020 2022 2222  bool.        """
+00001cd0: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+00001ce0: 6e70 3a0a 2020 2020 2020 2020 2020 2020  np:.            
+00001cf0: 7365 6c66 2e5f 7065 6462 2e6c 6f67 6765  self._pedb.logge
+00001d00: 722e 6572 726f 7228 224e 756d 7079 2069  r.error("Numpy i
+00001d10: 7320 6e65 6564 6564 2e20 506c 6561 7365  s needed. Please
+00001d20: 2c20 696e 7374 616c 6c20 6974 2066 6972  , install it fir
+00001d30: 7374 2e22 290a 2020 2020 2020 2020 2020  st.").          
+00001d40: 2020 7265 7475 726e 2046 616c 7365 0a20    return False. 
+00001d50: 2020 2020 2020 2069 6620 6e6f 7420 6c61         if not la
+00001d60: 7965 725f 636f 756e 7420 2520 3220 3d3d  yer_count % 2 ==
+00001d70: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
+00001d80: 7265 7475 726e 2046 616c 7365 0a0a 2020  return False..  
+00001d90: 2020 2020 2020 7365 6c66 2e61 6464 5f6c        self.add_l
+00001da0: 6179 6572 280a 2020 2020 2020 2020 2020  ayer(.          
+00001db0: 2020 2242 4f54 222c 0a20 2020 2020 2020    "BOT",.       
+00001dc0: 2020 2020 204e 6f6e 652c 0a20 2020 2020       None,.     
+00001dd0: 2020 2020 2020 206d 6174 6572 6961 6c3d         material=
+00001de0: 2263 6f70 7065 7222 2c0a 2020 2020 2020  "copper",.      
+00001df0: 2020 2020 2020 7468 6963 6b6e 6573 733d        thickness=
+00001e00: 6f75 7465 725f 6c61 7965 725f 7468 6963  outer_layer_thic
+00001e10: 6b6e 6573 732c 0a20 2020 2020 2020 2020  kness,.         
+00001e20: 2020 2066 696c 6c4d 6174 6572 6961 6c3d     fillMaterial=
+00001e30: 6469 656c 6563 7472 6963 5f6d 6174 6572  dielectric_mater
+00001e40: 6961 6c2c 0a20 2020 2020 2020 2029 0a20  ial,.        ). 
+00001e50: 2020 2020 2020 2073 656c 662e 6164 645f         self.add_
+00001e60: 6c61 7965 7228 0a20 2020 2020 2020 2020  layer(.         
+00001e70: 2020 2022 4422 202b 2073 7472 2869 6e74     "D" + str(int
+00001e80: 286c 6179 6572 5f63 6f75 6e74 202f 2032  (layer_count / 2
+00001e90: 2929 2c0a 2020 2020 2020 2020 2020 2020  )),.            
+00001ea0: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
+00001eb0: 2020 6d61 7465 7269 616c 3d22 4652 345f    material="FR4_
+00001ec0: 6570 6f78 7922 2c0a 2020 2020 2020 2020  epoxy",.        
+00001ed0: 2020 2020 7468 6963 6b6e 6573 733d 6469      thickness=di
+00001ee0: 656c 6563 7472 6963 5f74 6869 636b 6e65  electric_thickne
+00001ef0: 7373 2c0a 2020 2020 2020 2020 2020 2020  ss,.            
+00001f00: 6c61 7965 725f 7479 7065 3d22 6469 656c  layer_type="diel
+00001f10: 6563 7472 6963 222c 0a20 2020 2020 2020  ectric",.       
+00001f20: 2020 2020 2066 696c 6c4d 6174 6572 6961       fillMateria
+00001f30: 6c3d 6469 656c 6563 7472 6963 5f6d 6174  l=dielectric_mat
+00001f40: 6572 6961 6c2c 0a20 2020 2020 2020 2029  erial,.        )
+00001f50: 0a20 2020 2020 2020 2073 656c 662e 6164  .        self.ad
+00001f60: 645f 6c61 7965 7228 0a20 2020 2020 2020  d_layer(.       
+00001f70: 2020 2020 2022 544f 5022 2c0a 2020 2020       "TOP",.    
+00001f80: 2020 2020 2020 2020 4e6f 6e65 2c0a 2020          None,.  
+00001f90: 2020 2020 2020 2020 2020 6d61 7465 7269            materi
+00001fa0: 616c 3d22 636f 7070 6572 222c 0a20 2020  al="copper",.   
+00001fb0: 2020 2020 2020 2020 2074 6869 636b 6e65           thickne
+00001fc0: 7373 3d6f 7574 6572 5f6c 6179 6572 5f74  ss=outer_layer_t
+00001fd0: 6869 636b 6e65 7373 2c0a 2020 2020 2020  hickness,.      
+00001fe0: 2020 2020 2020 6669 6c6c 4d61 7465 7269        fillMateri
+00001ff0: 616c 3d64 6965 6c65 6374 7269 635f 6d61  al=dielectric_ma
+00002000: 7465 7269 616c 2c0a 2020 2020 2020 2020  terial,.        
+00002010: 290a 2020 2020 2020 2020 6966 2073 6f6c  ).        if sol
+00002020: 6465 726d 6173 6b3a 0a20 2020 2020 2020  dermask:.       
+00002030: 2020 2020 2073 656c 662e 6164 645f 6c61       self.add_la
+00002040: 7965 7228 0a20 2020 2020 2020 2020 2020  yer(.           
+00002050: 2020 2020 2022 534d 5422 2c0a 2020 2020       "SMT",.    
+00002060: 2020 2020 2020 2020 2020 2020 4e6f 6e65              None
+00002070: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00002080: 2020 6d61 7465 7269 616c 3d22 536f 6c64    material="Sold
+00002090: 6572 4d61 736b 222c 0a20 2020 2020 2020  erMask",.       
+000020a0: 2020 2020 2020 2020 2074 6869 636b 6e65           thickne
+000020b0: 7373 3d73 6f6c 6465 726d 6173 6b5f 7468  ss=soldermask_th
+000020c0: 6963 6b6e 6573 732c 0a20 2020 2020 2020  ickness,.       
+000020d0: 2020 2020 2020 2020 206c 6179 6572 5f74           layer_t
+000020e0: 7970 653d 2264 6965 6c65 6374 7269 6322  ype="dielectric"
+000020f0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00002100: 2020 6669 6c6c 4d61 7465 7269 616c 3d64    fillMaterial=d
+00002110: 6965 6c65 6374 7269 635f 6d61 7465 7269  ielectric_materi
+00002120: 616c 2c0a 2020 2020 2020 2020 2020 2020  al,.            
+00002130: 290a 2020 2020 2020 2020 2020 2020 7365  ).            se
+00002140: 6c66 2e61 6464 5f6c 6179 6572 280a 2020  lf.add_layer(.  
+00002150: 2020 2020 2020 2020 2020 2020 2020 2253                "S
+00002160: 4d42 222c 0a20 2020 2020 2020 2020 2020  MB",.           
+00002170: 2020 2020 204e 6f6e 652c 0a20 2020 2020       None,.     
+00002180: 2020 2020 2020 2020 2020 206d 6174 6572             mater
+00002190: 6961 6c3d 2253 6f6c 6465 724d 6173 6b22  ial="SolderMask"
+000021a0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000021b0: 2020 7468 6963 6b6e 6573 733d 736f 6c64    thickness=sold
+000021c0: 6572 6d61 736b 5f74 6869 636b 6e65 7373  ermask_thickness
+000021d0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000021e0: 2020 6c61 7965 725f 7479 7065 3d22 6469    layer_type="di
+000021f0: 656c 6563 7472 6963 222c 0a20 2020 2020  electric",.     
+00002200: 2020 2020 2020 2020 2020 2066 696c 6c4d             fillM
+00002210: 6174 6572 6961 6c3d 6469 656c 6563 7472  aterial=dielectr
+00002220: 6963 5f6d 6174 6572 6961 6c2c 0a20 2020  ic_material,.   
+00002230: 2020 2020 2020 2020 2020 2020 206d 6574               met
+00002240: 686f 643d 2261 6464 5f6f 6e5f 626f 7474  hod="add_on_bott
+00002250: 6f6d 222c 0a20 2020 2020 2020 2020 2020  om",.           
+00002260: 2029 0a20 2020 2020 2020 2020 2020 2073   ).            s
+00002270: 656c 662e 7374 6163 6b75 705f 6c61 7965  elf.stackup_laye
+00002280: 7273 5b22 544f 5022 5d2e 6469 656c 6563  rs["TOP"].dielec
+00002290: 7472 6963 5f66 696c 6c20 3d20 2253 6f6c  tric_fill = "Sol
+000022a0: 6465 724d 6173 6b22 0a20 2020 2020 2020  derMask".       
+000022b0: 2020 2020 2073 656c 662e 7374 6163 6b75       self.stacku
+000022c0: 705f 6c61 7965 7273 5b22 424f 5422 5d2e  p_layers["BOT"].
+000022d0: 6469 656c 6563 7472 6963 5f66 696c 6c20  dielectric_fill 
+000022e0: 3d20 2253 6f6c 6465 724d 6173 6b22 0a0a  = "SolderMask"..
+000022f0: 2020 2020 2020 2020 666f 7220 6c61 7965          for laye
+00002300: 725f 6e75 6d20 696e 206e 702e 6172 616e  r_num in np.aran
+00002310: 6765 2869 6e74 286c 6179 6572 5f63 6f75  ge(int(layer_cou
+00002320: 6e74 202f 2032 292c 2031 2c20 2d31 293a  nt / 2), 1, -1):
+00002330: 0a20 2020 2020 2020 2020 2020 2023 2047  .            # G
+00002340: 656e 6572 6174 6520 7570 7065 7220 6861  enerate upper ha
+00002350: 6c66 0a20 2020 2020 2020 2020 2020 2073  lf.            s
+00002360: 656c 662e 6164 645f 6c61 7965 7228 0a20  elf.add_layer(. 
+00002370: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00002380: 4c22 202b 2073 7472 286c 6179 6572 5f6e  L" + str(layer_n
+00002390: 756d 292c 0a20 2020 2020 2020 2020 2020  um),.           
+000023a0: 2020 2020 2022 544f 5022 2c0a 2020 2020       "TOP",.    
+000023b0: 2020 2020 2020 2020 2020 2020 6d61 7465              mate
+000023c0: 7269 616c 3d22 636f 7070 6572 222c 0a20  rial="copper",. 
+000023d0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+000023e0: 6869 636b 6e65 7373 3d69 6e6e 6572 5f6c  hickness=inner_l
+000023f0: 6179 6572 5f74 6869 636b 6e65 7373 2c0a  ayer_thickness,.
+00002400: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002410: 6669 6c6c 4d61 7465 7269 616c 3d64 6965  fillMaterial=die
+00002420: 6c65 6374 7269 635f 6d61 7465 7269 616c  lectric_material
+00002430: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00002440: 2020 6d65 7468 6f64 3d22 696e 7365 7274    method="insert
+00002450: 5f62 656c 6f77 222c 0a20 2020 2020 2020  _below",.       
+00002460: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+00002470: 2020 2073 656c 662e 6164 645f 6c61 7965     self.add_laye
+00002480: 7228 0a20 2020 2020 2020 2020 2020 2020  r(.             
+00002490: 2020 2022 4422 202b 2073 7472 286c 6179     "D" + str(lay
+000024a0: 6572 5f6e 756d 202d 2031 292c 0a20 2020  er_num - 1),.   
+000024b0: 2020 2020 2020 2020 2020 2020 2022 544f               "TO
+000024c0: 5022 2c0a 2020 2020 2020 2020 2020 2020  P",.            
+000024d0: 2020 2020 6d61 7465 7269 616c 3d64 6965      material=die
+000024e0: 6c65 6374 7269 635f 6d61 7465 7269 616c  lectric_material
+000024f0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00002500: 2020 7468 6963 6b6e 6573 733d 6469 656c    thickness=diel
+00002510: 6563 7472 6963 5f74 6869 636b 6e65 7373  ectric_thickness
+00002520: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00002530: 2020 6c61 7965 725f 7479 7065 3d22 6469    layer_type="di
+00002540: 656c 6563 7472 6963 222c 0a20 2020 2020  electric",.     
+00002550: 2020 2020 2020 2020 2020 2066 696c 6c4d             fillM
+00002560: 6174 6572 6961 6c3d 6469 656c 6563 7472  aterial=dielectr
+00002570: 6963 5f6d 6174 6572 6961 6c2c 0a20 2020  ic_material,.   
+00002580: 2020 2020 2020 2020 2020 2020 206d 6574               met
+00002590: 686f 643d 2269 6e73 6572 745f 6265 6c6f  hod="insert_belo
+000025a0: 7722 2c0a 2020 2020 2020 2020 2020 2020  w",.            
+000025b0: 290a 0a20 2020 2020 2020 2020 2020 2023  )..            #
+000025c0: 2047 656e 6572 6174 6520 6c6f 7765 7220   Generate lower 
+000025d0: 6861 6c66 0a20 2020 2020 2020 2020 2020  half.           
+000025e0: 2073 656c 662e 6164 645f 6c61 7965 7228   self.add_layer(
+000025f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002600: 2022 4c22 202b 2073 7472 286c 6179 6572   "L" + str(layer
+00002610: 5f63 6f75 6e74 202d 206c 6179 6572 5f6e  _count - layer_n
+00002620: 756d 202b 2031 292c 0a20 2020 2020 2020  um + 1),.       
+00002630: 2020 2020 2020 2020 2022 424f 5422 2c0a           "BOT",.
+00002640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002650: 6d61 7465 7269 616c 3d22 636f 7070 6572  material="copper
+00002660: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
+00002670: 2020 2074 6869 636b 6e65 7373 3d69 6e6e     thickness=inn
+00002680: 6572 5f6c 6179 6572 5f74 6869 636b 6e65  er_layer_thickne
+00002690: 7373 2c0a 2020 2020 2020 2020 2020 2020  ss,.            
+000026a0: 2020 2020 6669 6c6c 4d61 7465 7269 616c      fillMaterial
+000026b0: 3d64 6965 6c65 6374 7269 635f 6d61 7465  =dielectric_mate
+000026c0: 7269 616c 2c0a 2020 2020 2020 2020 2020  rial,.          
+000026d0: 2020 2020 2020 6d65 7468 6f64 3d22 696e        method="in
+000026e0: 7365 7274 5f61 626f 7665 222c 0a20 2020  sert_above",.   
+000026f0: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+00002700: 2020 2020 2020 2073 656c 662e 6164 645f         self.add_
+00002710: 6c61 7965 7228 0a20 2020 2020 2020 2020  layer(.         
+00002720: 2020 2020 2020 2022 4422 202b 2073 7472         "D" + str
+00002730: 286c 6179 6572 5f63 6f75 6e74 202d 206c  (layer_count - l
+00002740: 6179 6572 5f6e 756d 202b 2031 292c 0a20  ayer_num + 1),. 
+00002750: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00002760: 424f 5422 2c0a 2020 2020 2020 2020 2020  BOT",.          
+00002770: 2020 2020 2020 6d61 7465 7269 616c 3d64        material=d
+00002780: 6965 6c65 6374 7269 635f 6d61 7465 7269  ielectric_materi
+00002790: 616c 2c0a 2020 2020 2020 2020 2020 2020  al,.            
+000027a0: 2020 2020 7468 6963 6b6e 6573 733d 6469      thickness=di
+000027b0: 656c 6563 7472 6963 5f74 6869 636b 6e65  electric_thickne
+000027c0: 7373 2c0a 2020 2020 2020 2020 2020 2020  ss,.            
+000027d0: 2020 2020 6c61 7965 725f 7479 7065 3d22      layer_type="
+000027e0: 6469 656c 6563 7472 6963 222c 0a20 2020  dielectric",.   
+000027f0: 2020 2020 2020 2020 2020 2020 2066 696c               fil
+00002800: 6c4d 6174 6572 6961 6c3d 6469 656c 6563  lMaterial=dielec
+00002810: 7472 6963 5f6d 6174 6572 6961 6c2c 0a20  tric_material,. 
+00002820: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+00002830: 6574 686f 643d 2269 6e73 6572 745f 6162  ethod="insert_ab
+00002840: 6f76 6522 2c0a 2020 2020 2020 2020 2020  ove",.          
+00002850: 2020 290a 2020 2020 2020 2020 7265 7475    ).        retu
+00002860: 726e 2054 7275 650a 0a20 2020 2040 7079  rn True..    @py
+00002870: 6564 625f 6675 6e63 7469 6f6e 5f68 616e  edb_function_han
+00002880: 646c 6572 2829 0a20 2020 2064 6566 2072  dler().    def r
+00002890: 6566 7265 7368 5f6c 6179 6572 5f63 6f6c  efresh_layer_col
+000028a0: 6c65 6374 696f 6e28 7365 6c66 293a 0a20  lection(self):. 
+000028b0: 2020 2020 2020 2022 2222 5265 6672 6573         """Refres
+000028c0: 6820 6c61 7965 7220 636f 6c6c 6563 7469  h layer collecti
+000028d0: 6f6e 2066 726f 6d20 4564 622e 2054 6869  on from Edb. Thi
+000028e0: 7320 6d65 7468 6f64 2069 7320 7275 6e20  s method is run 
+000028f0: 6f6e 2064 656d 616e 6420 6166 7465 7220  on demand after 
+00002900: 616c 6c20 6564 6974 206f 7065 7261 7469  all edit operati
+00002910: 6f6e 7320 6f6e 2073 7461 636b 7570 2e22  ons on stackup."
+00002920: 2222 0a20 2020 2020 2020 206c 635f 7265  "".        lc_re
+00002930: 6164 6f6e 6c79 203d 2073 656c 662e 5f70  adonly = self._p
+00002940: 6564 622e 6c61 796f 7574 2e6c 6179 6572  edb.layout.layer
+00002950: 5f63 6f6c 6c65 6374 696f 6e0a 2020 2020  _collection.    
+00002960: 2020 2020 6c61 7965 7273 203d 205b 0a20      layers = [. 
+00002970: 2020 2020 2020 2020 2020 2069 2e43 6c6f             i.Clo
+00002980: 6e65 2829 2066 6f72 2069 2069 6e20 6c69  ne() for i in li
+00002990: 7374 286c 6973 7428 6c63 5f72 6561 646f  st(list(lc_reado
+000029a0: 6e6c 792e 4c61 7965 7273 2873 656c 662e  nly.Layers(self.
+000029b0: 5f70 6564 622e 6564 625f 6170 692e 6365  _pedb.edb_api.ce
+000029c0: 6c6c 2e6c 6179 6572 5f74 7970 655f 7365  ll.layer_type_se
+000029d0: 742e 5374 6163 6b75 704c 6179 6572 5365  t.StackupLayerSe
+000029e0: 7429 2929 0a20 2020 2020 2020 205d 0a20  t))).        ]. 
+000029f0: 2020 2020 2020 206e 6f6e 5f73 7461 636b         non_stack
+00002a00: 7570 203d 205b 0a20 2020 2020 2020 2020  up = [.         
+00002a10: 2020 2069 2e43 6c6f 6e65 2829 2066 6f72     i.Clone() for
+00002a20: 2069 2069 6e20 6c69 7374 286c 6973 7428   i in list(list(
+00002a30: 6c63 5f72 6561 646f 6e6c 792e 4c61 7965  lc_readonly.Laye
+00002a40: 7273 2873 656c 662e 5f70 6564 622e 6564  rs(self._pedb.ed
+00002a50: 625f 6170 692e 6365 6c6c 2e6c 6179 6572  b_api.cell.layer
+00002a60: 5f74 7970 655f 7365 742e 4e6f 6e53 7461  _type_set.NonSta
+00002a70: 636b 7570 4c61 7965 7253 6574 2929 290a  ckupLayerSet))).
+00002a80: 2020 2020 2020 2020 5d0a 2020 2020 2020          ].      
+00002a90: 2020 7365 6c66 2e5f 6c63 203d 2073 656c    self._lc = sel
+00002aa0: 662e 5f70 6564 622e 6564 625f 6170 692e  f._pedb.edb_api.
+00002ab0: 6365 6c6c 2e5f 6365 6c6c 2e4c 6179 6572  cell._cell.Layer
+00002ac0: 436f 6c6c 6563 7469 6f6e 2829 0a20 2020  Collection().   
+00002ad0: 2020 2020 206d 6f64 6520 3d20 6c63 5f72       mode = lc_r
+00002ae0: 6561 646f 6e6c 792e 4765 744d 6f64 6528  eadonly.GetMode(
+00002af0: 290a 2020 2020 2020 2020 7365 6c66 2e5f  ).        self._
+00002b00: 6c63 2e53 6574 4d6f 6465 286c 635f 7265  lc.SetMode(lc_re
+00002b10: 6164 6f6e 6c79 2e47 6574 4d6f 6465 2829  adonly.GetMode()
+00002b20: 290a 2020 2020 2020 2020 6966 2073 7472  ).        if str
+00002b30: 286d 6f64 6529 203d 3d20 224f 7665 726c  (mode) == "Overl
+00002b40: 6170 7069 6e67 223a 0a20 2020 2020 2020  apping":.       
+00002b50: 2020 2020 2066 6f72 206c 6179 6572 2069       for layer i
+00002b60: 6e20 6c61 7965 7273 3a0a 2020 2020 2020  n layers:.      
+00002b70: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
+00002b80: 6c63 2e41 6464 5374 6163 6b75 704c 6179  lc.AddStackupLay
+00002b90: 6572 4174 456c 6576 6174 696f 6e28 6c61  erAtElevation(la
+00002ba0: 7965 7229 0a20 2020 2020 2020 2065 6c69  yer).        eli
+00002bb0: 6620 7374 7228 6d6f 6465 2920 3d3d 2022  f str(mode) == "
+00002bc0: 4c61 6d69 6e61 7465 223a 0a20 2020 2020  Laminate":.     
+00002bd0: 2020 2020 2020 2066 6f72 206c 6179 6572         for layer
+00002be0: 2069 6e20 6c61 7965 7273 3a0a 2020 2020   in layers:.    
+00002bf0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00002c00: 2e5f 6c63 2e41 6464 4c61 7965 7242 6f74  ._lc.AddLayerBot
+00002c10: 746f 6d28 6c61 7965 7229 0a20 2020 2020  tom(layer).     
+00002c20: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00002c30: 2020 2020 2073 656c 662e 5f6c 632e 4164       self._lc.Ad
+00002c40: 644c 6179 6572 7328 636f 6e76 6572 745f  dLayers(convert_
+00002c50: 7079 5f6c 6973 745f 746f 5f6e 6574 5f6c  py_list_to_net_l
+00002c60: 6973 7428 6c61 7965 7273 2c20 7365 6c66  ist(layers, self
+00002c70: 2e5f 7065 6462 2e65 6462 5f61 7069 2e63  ._pedb.edb_api.c
+00002c80: 656c 6c2e 6c61 7965 7229 290a 2020 2020  ell.layer)).    
+00002c90: 2020 2020 666f 7220 6c61 7965 7220 696e      for layer in
+00002ca0: 206e 6f6e 5f73 7461 636b 7570 3a0a 2020   non_stackup:.  
+00002cb0: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
+00002cc0: 6c63 2e41 6464 4c61 7965 7242 6f74 746f  lc.AddLayerBotto
+00002cd0: 6d28 6c61 7965 7229 0a20 2020 2020 2020  m(layer).       
+00002ce0: 2073 656c 662e 5f6c 632e 5365 744d 6f64   self._lc.SetMod
+00002cf0: 6528 6c63 5f72 6561 646f 6e6c 792e 4765  e(lc_readonly.Ge
+00002d00: 744d 6f64 6528 2929 0a0a 2020 2020 4070  tMode())..    @p
+00002d10: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
+00002d20: 5f6c 6179 6572 5f63 6f6c 6c65 6374 696f  _layer_collectio
+00002d30: 6e28 7365 6c66 293a 0a20 2020 2020 2020  n(self):.       
+00002d40: 2022 2222 436f 7079 206f 6620 4544 4220   """Copy of EDB 
+00002d50: 6c61 7965 7220 636f 6c6c 6563 7469 6f6e  layer collection
+00002d60: 2e0a 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
+00002d70: 6e73 0a20 2020 2020 2020 202d 2d2d 2d2d  ns.        -----
+00002d80: 2d2d 0a20 2020 2020 2020 203a 636c 6173  --.        :clas
+00002d90: 733a 6041 6e73 7973 2e41 6e73 6f66 742e  s:`Ansys.Ansoft.
+00002da0: 4564 622e 4365 6c6c 2e4c 6179 6572 436f  Edb.Cell.LayerCo
+00002db0: 6c6c 6563 7469 6f6e 600a 2020 2020 2020  llection`.      
+00002dc0: 2020 2020 2020 436f 6c6c 6563 7469 6f6e        Collection
+00002dd0: 206f 6620 6c61 7965 7273 2e0a 2020 2020   of layers..    
+00002de0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00002df0: 6966 206e 6f74 2073 656c 662e 5f6c 633a  if not self._lc:
+00002e00: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00002e10: 662e 7265 6672 6573 685f 6c61 7965 725f  f.refresh_layer_
+00002e20: 636f 6c6c 6563 7469 6f6e 2829 0a20 2020  collection().   
+00002e30: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00002e40: 2e5f 6c63 0a0a 2020 2020 4070 726f 7065  ._lc..    @prope
+00002e50: 7274 790a 2020 2020 6465 6620 6d6f 6465  rty.    def mode
+00002e60: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+00002e70: 2222 2253 7461 636b 7570 206d 6f64 652e  """Stackup mode.
+00002e80: 0a0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+00002e90: 730a 2020 2020 2020 2020 2d2d 2d2d 2d2d  s.        ------
+00002ea0: 2d0a 2020 2020 2020 2020 696e 742c 2073  -.        int, s
+00002eb0: 7472 0a20 2020 2020 2020 2020 2020 2054  tr.            T
+00002ec0: 7970 6520 6f66 2074 6865 2073 7461 636b  ype of the stack
+00002ed0: 7570 206d 6f64 652c 2077 6865 7265 3a0a  up mode, where:.
+00002ee0: 0a20 2020 2020 2020 2020 2020 202a 2030  .            * 0
+00002ef0: 202d 204c 616d 696e 6174 650a 2020 2020   - Laminate.    
+00002f00: 2020 2020 2020 2020 2a20 3120 2d20 4f76          * 1 - Ov
+00002f10: 6572 6c61 7070 696e 670a 2020 2020 2020  erlapping.      
+00002f20: 2020 2020 2020 2a20 3220 2d20 4d75 6c74        * 2 - Mult
+00002f30: 695a 6f6e 650a 2020 2020 2020 2020 2222  iZone.        ""
+00002f40: 220a 2020 2020 2020 2020 7365 6c66 2e5f  ".        self._
+00002f50: 7374 6163 6b75 705f 6d6f 6465 203d 2073  stackup_mode = s
+00002f60: 656c 662e 5f6c 6179 6572 5f63 6f6c 6c65  elf._layer_colle
+00002f70: 6374 696f 6e2e 4765 744d 6f64 6528 290a  ction.GetMode().
+00002f80: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00002f90: 7472 2873 656c 662e 5f73 7461 636b 7570  tr(self._stackup
+00002fa0: 5f6d 6f64 6529 0a0a 2020 2020 406d 6f64  _mode)..    @mod
+00002fb0: 652e 7365 7474 6572 0a20 2020 2064 6566  e.setter.    def
+00002fc0: 206d 6f64 6528 7365 6c66 2c20 7661 6c75   mode(self, valu
+00002fd0: 6529 3a0a 2020 2020 2020 2020 6d6f 6465  e):.        mode
+00002fe0: 203d 2073 656c 662e 5f70 6564 622e 6564   = self._pedb.ed
+00002ff0: 625f 6170 692e 4365 6c6c 2e4c 6179 6572  b_api.Cell.Layer
+00003000: 436f 6c6c 6563 7469 6f6e 4d6f 6465 0a20  CollectionMode. 
+00003010: 2020 2020 2020 2069 6620 7661 6c75 6520         if value 
+00003020: 3d3d 2030 206f 7220 7661 6c75 6520 3d3d  == 0 or value ==
+00003030: 206d 6f64 652e 4c61 6d69 6e61 7465 206f   mode.Laminate o
+00003040: 7220 7661 6c75 6520 3d3d 2022 4c61 6d69  r value == "Lami
+00003050: 6e61 7465 223a 0a20 2020 2020 2020 2020  nate":.         
+00003060: 2020 2073 656c 662e 5f6c 6179 6572 5f63     self._layer_c
+00003070: 6f6c 6c65 6374 696f 6e2e 5365 744d 6f64  ollection.SetMod
+00003080: 6528 6d6f 6465 2e4c 616d 696e 6174 6529  e(mode.Laminate)
+00003090: 0a20 2020 2020 2020 2065 6c69 6620 7661  .        elif va
+000030a0: 6c75 6520 3d3d 2031 206f 7220 7661 6c75  lue == 1 or valu
+000030b0: 6520 3d3d 206d 6f64 652e 4f76 6572 6c61  e == mode.Overla
+000030c0: 7070 696e 6720 6f72 2076 616c 7565 203d  pping or value =
+000030d0: 3d20 224f 7665 726c 6170 7069 6e67 223a  = "Overlapping":
+000030e0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+000030f0: 662e 5f6c 6179 6572 5f63 6f6c 6c65 6374  f._layer_collect
+00003100: 696f 6e2e 5365 744d 6f64 6528 6d6f 6465  ion.SetMode(mode
+00003110: 2e4f 7665 726c 6170 7069 6e67 290a 2020  .Overlapping).  
+00003120: 2020 2020 2020 656c 6966 2076 616c 7565        elif value
+00003130: 203d 3d20 3220 6f72 2076 616c 7565 203d   == 2 or value =
+00003140: 3d20 6d6f 6465 2e4d 756c 7469 5a6f 6e65  = mode.MultiZone
+00003150: 206f 7220 7661 6c75 6520 3d3d 2022 4d75   or value == "Mu
+00003160: 6c74 695a 6f6e 6522 3a0a 2020 2020 2020  ltiZone":.      
+00003170: 2020 2020 2020 7365 6c66 2e5f 6c61 7965        self._laye
+00003180: 725f 636f 6c6c 6563 7469 6f6e 2e53 6574  r_collection.Set
+00003190: 4d6f 6465 286d 6f64 652e 4d75 6c74 695a  Mode(mode.MultiZ
+000031a0: 6f6e 6529 0a20 2020 2020 2020 2073 656c  one).        sel
+000031b0: 662e 5f70 6564 622e 6c61 796f 7574 2e6c  f._pedb.layout.l
+000031c0: 6179 6572 5f63 6f6c 6c65 6374 696f 6e20  ayer_collection 
+000031d0: 3d20 7365 6c66 2e5f 6c61 7965 725f 636f  = self._layer_co
+000031e0: 6c6c 6563 7469 6f6e 0a0a 2020 2020 4070  llection..    @p
+000031f0: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
+00003200: 7374 6163 6b75 705f 6d6f 6465 2873 656c  stackup_mode(sel
+00003210: 6629 3a0a 2020 2020 2020 2020 2222 2253  f):.        """S
+00003220: 7461 636b 7570 206d 6f64 652e 0a0a 2020  tackup mode...  
+00003230: 2020 2020 2020 2e2e 2064 6570 7265 6361        .. depreca
+00003240: 7465 643a 3a20 302e 362e 3532 0a20 2020  ted:: 0.6.52.   
+00003250: 2020 2020 2020 2020 5573 6520 3a66 756e          Use :fun
+00003260: 633a 606d 6f64 6560 206d 6574 686f 6420  c:`mode` method 
+00003270: 696e 7374 6561 642e 0a0a 2020 2020 2020  instead...      
+00003280: 2020 5265 7475 726e 730a 2020 2020 2020    Returns.      
+00003290: 2020 2d2d 2d2d 2d2d 2d0a 2020 2020 2020    -------.      
+000032a0: 2020 696e 742c 2073 7472 0a20 2020 2020    int, str.     
+000032b0: 2020 2020 2020 2054 7970 6520 6f66 2074         Type of t
+000032c0: 6865 2073 7461 636b 7570 206d 6f64 652c  he stackup mode,
+000032d0: 2077 6865 7265 3a0a 0a20 2020 2020 2020   where:..       
+000032e0: 2020 2020 202a 2030 202d 204c 616d 696e       * 0 - Lamin
+000032f0: 6174 650a 2020 2020 2020 2020 2020 2020  ate.            
+00003300: 2a20 3120 2d20 4f76 6572 6c61 7070 696e  * 1 - Overlappin
+00003310: 670a 2020 2020 2020 2020 2020 2020 2a20  g.            * 
+00003320: 3220 2d20 4d75 6c74 695a 6f6e 650a 2020  2 - MultiZone.  
+00003330: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00003340: 2020 7761 726e 696e 6773 2e77 6172 6e28    warnings.warn(
+00003350: 2260 7374 6163 6b75 705f 6d6f 6465 6020  "`stackup_mode` 
+00003360: 6973 2064 6570 7265 6361 7465 642e 2055  is deprecated. U
+00003370: 7365 2060 6d6f 6465 6020 6d65 7468 6f64  se `mode` method
+00003380: 2069 6e73 7465 6164 2e22 2c20 4465 7072   instead.", Depr
+00003390: 6563 6174 696f 6e57 6172 6e69 6e67 290a  ecationWarning).
+000033a0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+000033b0: 656c 662e 6d6f 6465 0a0a 2020 2020 4073  elf.mode..    @s
+000033c0: 7461 636b 7570 5f6d 6f64 652e 7365 7474  tackup_mode.sett
+000033d0: 6572 0a20 2020 2064 6566 2073 7461 636b  er.    def stack
+000033e0: 7570 5f6d 6f64 6528 7365 6c66 2c20 7661  up_mode(self, va
+000033f0: 6c75 6529 3a0a 2020 2020 2020 2020 7761  lue):.        wa
+00003400: 726e 696e 6773 2e77 6172 6e28 2260 7374  rnings.warn("`st
+00003410: 6163 6b75 705f 6d6f 6465 6020 6973 2064  ackup_mode` is d
+00003420: 6570 7265 6361 7465 642e 2055 7365 2060  eprecated. Use `
+00003430: 6d6f 6465 6020 6d65 7468 6f64 2069 6e73  mode` method ins
+00003440: 7465 6164 2e22 2c20 4465 7072 6563 6174  tead.", Deprecat
+00003450: 696f 6e57 6172 6e69 6e67 290a 2020 2020  ionWarning).    
+00003460: 2020 2020 7365 6c66 2e6d 6f64 6520 3d20      self.mode = 
+00003470: 7661 6c75 650a 0a20 2020 2040 7072 6f70  value..    @prop
+00003480: 6572 7479 0a20 2020 2064 6566 205f 6564  erty.    def _ed
+00003490: 625f 6c61 7965 725f 6c69 7374 2873 656c  b_layer_list(sel
+000034a0: 6629 3a0a 2020 2020 2020 2020 6c61 7965  f):.        laye
+000034b0: 725f 6c69 7374 203d 206c 6973 7428 7365  r_list = list(se
+000034c0: 6c66 2e5f 6c61 7965 725f 636f 6c6c 6563  lf._layer_collec
+000034d0: 7469 6f6e 2e4c 6179 6572 7328 7365 6c66  tion.Layers(self
+000034e0: 2e5f 7065 6462 2e65 6462 5f61 7069 2e63  ._pedb.edb_api.c
+000034f0: 656c 6c2e 6c61 7965 725f 7479 7065 5f73  ell.layer_type_s
+00003500: 6574 2e41 6c6c 4c61 7965 7253 6574 2929  et.AllLayerSet))
+00003510: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00003520: 5b69 2e43 6c6f 6e65 2829 2066 6f72 2069  [i.Clone() for i
+00003530: 2069 6e20 6c61 7965 725f 6c69 7374 5d0a   in layer_list].
+00003540: 0a20 2020 2040 7072 6f70 6572 7479 0a20  .    @property. 
+00003550: 2020 2064 6566 205f 6564 625f 6c61 7965     def _edb_laye
+00003560: 725f 6c69 7374 5f6e 6f6e 7374 6163 6b75  r_list_nonstacku
+00003570: 7028 7365 6c66 293a 0a20 2020 2020 2020  p(self):.       
+00003580: 206c 6179 6572 5f6c 6973 7420 3d20 6c69   layer_list = li
+00003590: 7374 2873 656c 662e 5f6c 6179 6572 5f63  st(self._layer_c
+000035a0: 6f6c 6c65 6374 696f 6e2e 4c61 7965 7273  ollection.Layers
+000035b0: 2873 656c 662e 5f70 6564 622e 6564 625f  (self._pedb.edb_
+000035c0: 6170 692e 6365 6c6c 2e6c 6179 6572 5f74  api.cell.layer_t
+000035d0: 7970 655f 7365 742e 4e6f 6e53 7461 636b  ype_set.NonStack
+000035e0: 7570 4c61 7965 7253 6574 2929 0a20 2020  upLayerSet)).   
+000035f0: 2020 2020 2072 6574 7572 6e20 5b69 2e43       return [i.C
+00003600: 6c6f 6e65 2829 2066 6f72 2069 2069 6e20  lone() for i in 
+00003610: 6c61 7965 725f 6c69 7374 5d0a 0a20 2020  layer_list]..   
+00003620: 2040 7072 6f70 6572 7479 0a20 2020 2064   @property.    d
+00003630: 6566 206c 6179 6572 7328 7365 6c66 293a  ef layers(self):
+00003640: 0a20 2020 2020 2020 2022 2222 5265 7472  .        """Retr
+00003650: 6965 7665 2074 6865 2064 6963 7469 6f6e  ieve the diction
+00003660: 6172 7920 6f66 206c 6179 6572 732e 0a0a  ary of layers...
+00003670: 2020 2020 2020 2020 5265 7475 726e 730a          Returns.
+00003680: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0a          -------.
+00003690: 2020 2020 2020 2020 4469 6374 5b73 7472          Dict[str
+000036a0: 2c20 3a63 6c61 7373 3a60 7079 6564 622e  , :class:`pyedb.
+000036b0: 646f 746e 6574 2e65 6462 5f63 6f72 652e  dotnet.edb_core.
+000036c0: 6564 625f 6461 7461 2e6c 6179 6572 5f64  edb_data.layer_d
+000036d0: 6174 612e 4c61 7965 7245 6462 436c 6173  ata.LayerEdbClas
+000036e0: 7360 5d0a 2020 2020 2020 2020 2222 220a  s`].        """.
+000036f0: 2020 2020 2020 2020 5f6c 6179 7320 3d20          _lays = 
+00003700: 4f72 6465 7265 6444 6963 7428 290a 2020  OrderedDict().  
+00003710: 2020 2020 2020 666f 7220 6c20 696e 2073        for l in s
+00003720: 656c 662e 5f65 6462 5f6c 6179 6572 5f6c  elf._edb_layer_l
+00003730: 6973 743a 0a20 2020 2020 2020 2020 2020  ist:.           
+00003740: 206e 616d 6520 3d20 6c2e 4765 744e 616d   name = l.GetNam
+00003750: 6528 290a 2020 2020 2020 2020 2020 2020  e().            
+00003760: 6966 206e 6f74 206c 2e49 7353 7461 636b  if not l.IsStack
+00003770: 7570 4c61 7965 7228 293a 0a20 2020 2020  upLayer():.     
+00003780: 2020 2020 2020 2020 2020 205f 6c61 7973             _lays
+00003790: 5b6e 616d 655d 203d 204c 6179 6572 4564  [name] = LayerEd
+000037a0: 6243 6c61 7373 2873 656c 662c 206e 616d  bClass(self, nam
+000037b0: 6529 0a20 2020 2020 2020 2020 2020 2065  e).            e
+000037c0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+000037d0: 2020 2020 205f 6c61 7973 5b6e 616d 655d       _lays[name]
+000037e0: 203d 2053 7461 636b 7570 4c61 7965 7245   = StackupLayerE
+000037f0: 6462 436c 6173 7328 7365 6c66 2c20 6e61  dbClass(self, na
+00003800: 6d65 290a 2020 2020 2020 2020 7265 7475  me).        retu
+00003810: 726e 205f 6c61 7973 0a0a 2020 2020 4070  rn _lays..    @p
+00003820: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
+00003830: 7369 676e 616c 5f6c 6179 6572 7328 7365  signal_layers(se
+00003840: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
+00003850: 5265 7472 6965 7665 2074 6865 2064 6963  Retrieve the dic
+00003860: 7469 6f6e 6172 7920 6f66 2073 6967 6e61  tionary of signa
+00003870: 6c20 6c61 7965 7273 2e0a 0a20 2020 2020  l layers...     
+00003880: 2020 2052 6574 7572 6e73 0a20 2020 2020     Returns.     
+00003890: 2020 202d 2d2d 2d2d 2d2d 0a20 2020 2020     -------.     
+000038a0: 2020 2044 6963 745b 7374 722c 203a 636c     Dict[str, :cl
+000038b0: 6173 733a 6070 7965 6462 2e64 6f74 6e65  ass:`pyedb.dotne
+000038c0: 742e 6564 625f 636f 7265 2e65 6462 5f64  t.edb_core.edb_d
+000038d0: 6174 612e 6c61 7965 725f 6461 7461 2e4c  ata.layer_data.L
+000038e0: 6179 6572 4564 6243 6c61 7373 605d 0a20  ayerEdbClass`]. 
+000038f0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00003900: 2020 206c 6179 6572 5f74 7970 6520 3d20     layer_type = 
+00003910: 7365 6c66 2e5f 7065 6462 2e65 6462 5f61  self._pedb.edb_a
+00003920: 7069 2e63 656c 6c2e 6c61 7965 725f 7479  pi.cell.layer_ty
+00003930: 7065 2e53 6967 6e61 6c4c 6179 6572 0a20  pe.SignalLayer. 
+00003940: 2020 2020 2020 205f 6c61 7973 203d 204f         _lays = O
+00003950: 7264 6572 6564 4469 6374 2829 0a20 2020  rderedDict().   
+00003960: 2020 2020 2066 6f72 206e 616d 652c 206f       for name, o
+00003970: 626a 2069 6e20 7365 6c66 2e6c 6179 6572  bj in self.layer
+00003980: 732e 6974 656d 7328 293a 0a20 2020 2020  s.items():.     
+00003990: 2020 2020 2020 2069 6620 6f62 6a2e 5f65         if obj._e
+000039a0: 6462 5f6c 6179 6572 2e47 6574 4c61 7965  db_layer.GetLaye
+000039b0: 7254 7970 6528 2920 3d3d 206c 6179 6572  rType() == layer
+000039c0: 5f74 7970 653a 0a20 2020 2020 2020 2020  _type:.         
+000039d0: 2020 2020 2020 205f 6c61 7973 5b6e 616d         _lays[nam
+000039e0: 655d 203d 206f 626a 0a20 2020 2020 2020  e] = obj.       
+000039f0: 2072 6574 7572 6e20 5f6c 6179 730a 0a20   return _lays.. 
+00003a00: 2020 2040 7072 6f70 6572 7479 0a20 2020     @property.   
+00003a10: 2064 6566 2073 7461 636b 7570 5f6c 6179   def stackup_lay
+00003a20: 6572 7328 7365 6c66 293a 0a20 2020 2020  ers(self):.     
+00003a30: 2020 2022 2222 5265 7472 6965 7665 2074     """Retrieve t
+00003a40: 6865 2064 6963 7469 6f6e 6172 7920 6f66  he dictionary of
+00003a50: 2073 6967 6e61 6c20 616e 6420 6469 656c   signal and diel
+00003a60: 6563 7472 6963 206c 6179 6572 732e 0a0a  ectric layers...
+00003a70: 2020 2020 2020 2020 5265 7475 726e 730a          Returns.
+00003a80: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0a          -------.
+00003a90: 2020 2020 2020 2020 4469 6374 5b73 7472          Dict[str
+00003aa0: 2c20 3a63 6c61 7373 3a60 646f 746e 6574  , :class:`dotnet
+00003ab0: 2e65 6462 5f63 6f72 652e 6564 625f 6461  .edb_core.edb_da
+00003ac0: 7461 2e6c 6179 6572 5f64 6174 612e 4c61  ta.layer_data.La
+00003ad0: 7965 7245 6462 436c 6173 7360 5d0a 2020  yerEdbClass`].  
+00003ae0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00003af0: 2020 6c61 7965 725f 7479 7065 203d 205b    layer_type = [
+00003b00: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00003b10: 662e 5f70 6564 622e 6564 625f 6170 692e  f._pedb.edb_api.
+00003b20: 6365 6c6c 2e6c 6179 6572 5f74 7970 652e  cell.layer_type.
+00003b30: 5369 676e 616c 4c61 7965 722c 0a20 2020  SignalLayer,.   
+00003b40: 2020 2020 2020 2020 2073 656c 662e 5f70           self._p
+00003b50: 6564 622e 6564 625f 6170 692e 6365 6c6c  edb.edb_api.cell
+00003b60: 2e6c 6179 6572 5f74 7970 652e 4469 656c  .layer_type.Diel
+00003b70: 6563 7472 6963 4c61 7965 722c 0a20 2020  ectricLayer,.   
+00003b80: 2020 2020 205d 0a20 2020 2020 2020 205f       ].        _
+00003b90: 6c61 7973 203d 204f 7264 6572 6564 4469  lays = OrderedDi
+00003ba0: 6374 2829 0a20 2020 2020 2020 2066 6f72  ct().        for
+00003bb0: 206e 616d 652c 206f 626a 2069 6e20 7365   name, obj in se
+00003bc0: 6c66 2e6c 6179 6572 732e 6974 656d 7328  lf.layers.items(
+00003bd0: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
+00003be0: 6620 6f62 6a2e 5f65 6462 5f6c 6179 6572  f obj._edb_layer
+00003bf0: 2e47 6574 4c61 7965 7254 7970 6528 2920  .GetLayerType() 
+00003c00: 696e 206c 6179 6572 5f74 7970 653a 0a20  in layer_type:. 
+00003c10: 2020 2020 2020 2020 2020 2020 2020 205f                 _
+00003c20: 6c61 7973 5b6e 616d 655d 203d 206f 626a  lays[name] = obj
+00003c30: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00003c40: 5f6c 6179 730a 0a20 2020 2040 7072 6f70  _lays..    @prop
+00003c50: 6572 7479 0a20 2020 2064 6566 2064 6965  erty.    def die
+00003c60: 6c65 6374 7269 635f 6c61 7965 7273 2873  lectric_layers(s
+00003c70: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
+00003c80: 2244 6965 6c65 6374 7269 6320 6c61 7965  "Dielectric laye
+00003c90: 7273 2e0a 0a20 2020 2020 2020 2052 6574  rs...        Ret
+00003ca0: 7572 6e73 0a20 2020 2020 2020 202d 2d2d  urns.        ---
+00003cb0: 2d2d 2d2d 0a20 2020 2020 2020 2064 6963  ----.        dic
+00003cc0: 745b 7374 722c 203a 636c 6173 733a 6064  t[str, :class:`d
+00003cd0: 6f74 6e65 742e 6564 625f 636f 7265 2e65  otnet.edb_core.e
+00003ce0: 6462 5f64 6174 612e 6c61 7965 725f 6461  db_data.layer_da
+00003cf0: 7461 2e45 4442 4c61 7965 7260 5d0a 2020  ta.EDBLayer`].  
+00003d00: 2020 2020 2020 2020 2020 4469 6374 696f            Dictio
+00003d10: 6e61 7279 206f 6620 6469 656c 6563 7472  nary of dielectr
+00003d20: 6963 206c 6179 6572 732e 0a20 2020 2020  ic layers..     
+00003d30: 2020 2022 2222 0a20 2020 2020 2020 206c     """.        l
+00003d40: 6179 6572 5f74 7970 6520 3d20 7365 6c66  ayer_type = self
+00003d50: 2e5f 7065 6462 2e65 6462 5f61 7069 2e63  ._pedb.edb_api.c
+00003d60: 656c 6c2e 6c61 7965 725f 7479 7065 2e44  ell.layer_type.D
+00003d70: 6965 6c65 6374 7269 634c 6179 6572 0a20  ielectricLayer. 
+00003d80: 2020 2020 2020 205f 6c61 7973 203d 204f         _lays = O
+00003d90: 7264 6572 6564 4469 6374 2829 0a20 2020  rderedDict().   
+00003da0: 2020 2020 2066 6f72 206e 616d 652c 206f       for name, o
+00003db0: 626a 2069 6e20 7365 6c66 2e6c 6179 6572  bj in self.layer
+00003dc0: 732e 6974 656d 7328 293a 0a20 2020 2020  s.items():.     
+00003dd0: 2020 2020 2020 2069 6620 6f62 6a2e 5f65         if obj._e
+00003de0: 6462 5f6c 6179 6572 2e47 6574 4c61 7965  db_layer.GetLaye
+00003df0: 7254 7970 6528 2920 3d3d 206c 6179 6572  rType() == layer
+00003e00: 5f74 7970 653a 0a20 2020 2020 2020 2020  _type:.         
+00003e10: 2020 2020 2020 205f 6c61 7973 5b6e 616d         _lays[nam
+00003e20: 655d 203d 206f 626a 0a20 2020 2020 2020  e] = obj.       
+00003e30: 2072 6574 7572 6e20 5f6c 6179 730a 0a20   return _lays.. 
+00003e40: 2020 2040 7072 6f70 6572 7479 0a20 2020     @property.   
+00003e50: 2064 6566 206e 6f6e 5f73 7461 636b 7570   def non_stackup
+00003e60: 5f6c 6179 6572 7328 7365 6c66 293a 0a20  _layers(self):. 
+00003e70: 2020 2020 2020 2022 2222 5265 7472 6965         """Retrie
+00003e80: 7665 2074 6865 2064 6963 7469 6f6e 6172  ve the dictionar
+00003e90: 7920 6f66 2073 6967 6e61 6c20 6c61 7965  y of signal laye
+00003ea0: 7273 2e0a 0a20 2020 2020 2020 2052 6574  rs...        Ret
+00003eb0: 7572 6e73 0a20 2020 2020 2020 202d 2d2d  urns.        ---
+00003ec0: 2d2d 2d2d 0a20 2020 2020 2020 2044 6963  ----.        Dic
+00003ed0: 745b 7374 722c 203a 636c 6173 733a 6064  t[str, :class:`d
+00003ee0: 6f74 6e65 742e 6564 625f 636f 7265 2e65  otnet.edb_core.e
+00003ef0: 6462 5f64 6174 612e 6c61 7965 725f 6461  db_data.layer_da
+00003f00: 7461 2e4c 6179 6572 4564 6243 6c61 7373  ta.LayerEdbClass
+00003f10: 605d 0a20 2020 2020 2020 2022 2222 0a20  `].        """. 
+00003f20: 2020 2020 2020 2072 6574 7572 6e20 7b6c         return {l
+00003f30: 2e47 6574 4e61 6d65 2829 3a20 4c61 7965  .GetName(): Laye
+00003f40: 7245 6462 436c 6173 7328 7365 6c66 2c20  rEdbClass(self, 
+00003f50: 6c2e 4765 744e 616d 6528 2929 2066 6f72  l.GetName()) for
+00003f60: 206c 2069 6e20 7365 6c66 2e5f 6564 625f   l in self._edb_
+00003f70: 6c61 7965 725f 6c69 7374 5f6e 6f6e 7374  layer_list_nonst
+00003f80: 6163 6b75 707d 0a0a 2020 2020 4070 7965  ackup}..    @pye
+00003f90: 6462 5f66 756e 6374 696f 6e5f 6861 6e64  db_function_hand
+00003fa0: 6c65 7228 290a 2020 2020 6465 6620 5f65  ler().    def _e
+00003fb0: 6462 5f76 616c 7565 2873 656c 662c 2076  db_value(self, v
+00003fc0: 616c 7565 293a 0a20 2020 2020 2020 2072  alue):.        r
+00003fd0: 6574 7572 6e20 7365 6c66 2e5f 7065 6462  eturn self._pedb
+00003fe0: 2e65 6462 5f76 616c 7565 2876 616c 7565  .edb_value(value
+00003ff0: 290a 0a20 2020 2040 7079 6564 625f 6675  )..    @pyedb_fu
+00004000: 6e63 7469 6f6e 5f68 616e 646c 6572 2829  nction_handler()
+00004010: 0a20 2020 2064 6566 205f 7365 745f 6c61  .    def _set_la
+00004020: 796f 7574 5f73 7461 636b 7570 2873 656c  yout_stackup(sel
+00004030: 662c 206c 6179 6572 5f63 6c6f 6e65 2c20  f, layer_clone, 
+00004040: 6f70 6572 6174 696f 6e2c 2062 6173 655f  operation, base_
+00004050: 6c61 7965 723d 4e6f 6e65 2c20 6d65 7468  layer=None, meth
+00004060: 6f64 3d31 293a 0a20 2020 2020 2020 2022  od=1):.        "
+00004070: 2222 496e 7465 726e 616c 206d 6574 686f  ""Internal metho
+00004080: 642e 2041 7070 6c79 2073 7461 636b 7570  d. Apply stackup
+00004090: 2063 6861 6e67 6520 696e 746f 2045 4442   change into EDB
+000040a0: 2e0a 0a20 2020 2020 2020 2050 6172 616d  ...        Param
+000040b0: 6574 6572 730a 2020 2020 2020 2020 2d2d  eters.        --
+000040c0: 2d2d 2d2d 2d2d 2d2d 0a20 2020 2020 2020  --------.       
+000040d0: 206c 6179 6572 5f63 6c6f 6e65 203a 203a   layer_clone : :
+000040e0: 636c 6173 733a 6064 6f74 6e65 742e 6564  class:`dotnet.ed
+000040f0: 625f 636f 7265 2e45 4442 5f44 6174 612e  b_core.EDB_Data.
+00004100: 4544 424c 6179 6572 600a 2020 2020 2020  EDBLayer`.      
+00004110: 2020 6f70 6572 6174 696f 6e20 3a20 7374    operation : st
+00004120: 720a 2020 2020 2020 2020 2020 2020 4f70  r.            Op
+00004130: 7469 6f6e 7320 6172 6520 6060 2263 6861  tions are ``"cha
+00004140: 6e67 655f 6174 7472 6962 7574 6522 6060  nge_attribute"``
+00004150: 2c20 6060 2263 6861 6e67 655f 6e61 6d65  , ``"change_name
+00004160: 2260 602c 6060 2263 6861 6e67 655f 706f  "``,``"change_po
+00004170: 7369 7469 6f6e 2260 602c 2060 6022 696e  sition"``, ``"in
+00004180: 7365 7274 5f62 656c 6f77 2260 602c 0a20  sert_below"``,. 
+00004190: 2020 2020 2020 2020 2020 2020 6060 2269              ``"i
+000041a0: 6e73 6572 745f 6162 6f76 6522 6060 2c20  nsert_above"``, 
+000041b0: 6060 2261 6464 5f6f 6e5f 746f 7022 6060  ``"add_on_top"``
+000041c0: 2c20 6060 2261 6464 5f6f 6e5f 626f 7474  , ``"add_on_bott
+000041d0: 6f6d 2260 602c 2060 6022 6e6f 6e5f 7374  om"``, ``"non_st
+000041e0: 6163 6b75 7022 6060 2c20 2060 6022 6164  ackup"``,  ``"ad
+000041f0: 645f 6174 5f65 6c65 7661 7469 6f6e 2260  d_at_elevation"`
+00004200: 602e 0a20 2020 2020 2020 2062 6173 655f  `..        base_
+00004210: 6c61 7965 7220 3a20 7374 722c 206f 7074  layer : str, opt
+00004220: 696f 6e61 6c0a 2020 2020 2020 2020 2020  ional.          
+00004230: 2020 4e61 6d65 206f 6620 7468 6520 6261    Name of the ba
+00004240: 7365 206c 6179 6572 2e20 5468 6520 6465  se layer. The de
+00004250: 6661 756c 7420 7661 6c75 6520 6973 2060  fault value is `
+00004260: 604e 6f6e 6560 602e 0a0a 2020 2020 2020  `None``...      
+00004270: 2020 5265 7475 726e 730a 2020 2020 2020    Returns.      
+00004280: 2020 2d2d 2d2d 2d2d 2d0a 0a20 2020 2020    -------..     
+00004290: 2020 2022 2222 0a20 2020 2020 2020 205f     """.        _
+000042a0: 6c63 203d 2073 656c 662e 5f6c 6179 6572  lc = self._layer
+000042b0: 5f63 6f6c 6c65 6374 696f 6e0a 2020 2020  _collection.    
+000042c0: 2020 2020 6966 206f 7065 7261 7469 6f6e      if operation
+000042d0: 2069 6e20 5b22 6368 616e 6765 5f70 6f73   in ["change_pos
+000042e0: 6974 696f 6e22 2c20 2263 6861 6e67 655f  ition", "change_
+000042f0: 6174 7472 6962 7574 6522 2c20 2263 6861  attribute", "cha
+00004300: 6e67 655f 6e61 6d65 225d 3a0a 2020 2020  nge_name"]:.    
+00004310: 2020 2020 2020 2020 6c63 5f72 6561 646f          lc_reado
+00004320: 6e6c 7920 3d20 7365 6c66 2e5f 7065 6462  nly = self._pedb
+00004330: 2e6c 6179 6f75 742e 6c61 7965 725f 636f  .layout.layer_co
+00004340: 6c6c 6563 7469 6f6e 0a20 2020 2020 2020  llection.       
+00004350: 2020 2020 206c 6179 6572 7320 3d20 5b0a       layers = [.
+00004360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004370: 692e 436c 6f6e 6528 290a 2020 2020 2020  i.Clone().      
+00004380: 2020 2020 2020 2020 2020 666f 7220 6920            for i 
+00004390: 696e 206c 6973 7428 6c69 7374 286c 635f  in list(list(lc_
+000043a0: 7265 6164 6f6e 6c79 2e4c 6179 6572 7328  readonly.Layers(
+000043b0: 7365 6c66 2e5f 7065 6462 2e65 6462 5f61  self._pedb.edb_a
+000043c0: 7069 2e63 656c 6c2e 6c61 7965 725f 7479  pi.cell.layer_ty
+000043d0: 7065 5f73 6574 2e53 7461 636b 7570 4c61  pe_set.StackupLa
+000043e0: 7965 7253 6574 2929 290a 2020 2020 2020  yerSet))).      
+000043f0: 2020 2020 2020 5d0a 2020 2020 2020 2020        ].        
+00004400: 2020 2020 6e6f 6e5f 7374 6163 6b75 7020      non_stackup 
+00004410: 3d20 5b0a 2020 2020 2020 2020 2020 2020  = [.            
+00004420: 2020 2020 692e 436c 6f6e 6528 290a 2020      i.Clone().  
+00004430: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+00004440: 7220 6920 696e 206c 6973 7428 6c69 7374  r i in list(list
+00004450: 286c 635f 7265 6164 6f6e 6c79 2e4c 6179  (lc_readonly.Lay
+00004460: 6572 7328 7365 6c66 2e5f 7065 6462 2e65  ers(self._pedb.e
+00004470: 6462 5f61 7069 2e63 656c 6c2e 6c61 7965  db_api.cell.laye
+00004480: 725f 7479 7065 5f73 6574 2e4e 6f6e 5374  r_type_set.NonSt
+00004490: 6163 6b75 704c 6179 6572 5365 7429 2929  ackupLayerSet)))
+000044a0: 0a20 2020 2020 2020 2020 2020 205d 0a20  .            ]. 
+000044b0: 2020 2020 2020 2020 2020 205f 6c63 203d             _lc =
+000044c0: 2073 656c 662e 5f70 6564 622e 6564 625f   self._pedb.edb_
+000044d0: 6170 692e 6365 6c6c 2e5f 6365 6c6c 2e4c  api.cell._cell.L
+000044e0: 6179 6572 436f 6c6c 6563 7469 6f6e 2829  ayerCollection()
+000044f0: 0a20 2020 2020 2020 2020 2020 206d 6f64  .            mod
+00004500: 6520 3d20 6c63 5f72 6561 646f 6e6c 792e  e = lc_readonly.
+00004510: 4765 744d 6f64 6528 290a 2020 2020 2020  GetMode().      
+00004520: 2020 2020 2020 5f6c 632e 5365 744d 6f64        _lc.SetMod
+00004530: 6528 6c63 5f72 6561 646f 6e6c 792e 4765  e(lc_readonly.Ge
+00004540: 744d 6f64 6528 2929 0a20 2020 2020 2020  tMode()).       
+00004550: 2020 2020 2069 6620 7374 7228 6d6f 6465       if str(mode
+00004560: 2920 3d3d 2022 4f76 6572 6c61 7070 696e  ) == "Overlappin
+00004570: 6722 3a0a 2020 2020 2020 2020 2020 2020  g":.            
+00004580: 2020 2020 666f 7220 6c61 7965 7220 696e      for layer in
+00004590: 206c 6179 6572 733a 0a20 2020 2020 2020   layers:.       
+000045a0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+000045b0: 6c61 7965 722e 4765 744e 616d 6528 2920  layer.GetName() 
+000045c0: 3d3d 206c 6179 6572 5f63 6c6f 6e65 2e47  == layer_clone.G
+000045d0: 6574 4e61 6d65 2829 206f 7220 6c61 7965  etName() or laye
+000045e0: 722e 4765 744e 616d 6528 2920 3d3d 2062  r.GetName() == b
+000045f0: 6173 655f 6c61 7965 723a 0a20 2020 2020  ase_layer:.     
+00004600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004610: 2020 205f 6c63 2e41 6464 5374 6163 6b75     _lc.AddStacku
+00004620: 704c 6179 6572 4174 456c 6576 6174 696f  pLayerAtElevatio
+00004630: 6e28 6c61 7965 725f 636c 6f6e 6529 0a20  n(layer_clone). 
+00004640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004650: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00004660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004670: 205f 6c63 2e41 6464 5374 6163 6b75 704c   _lc.AddStackupL
+00004680: 6179 6572 4174 456c 6576 6174 696f 6e28  ayerAtElevation(
+00004690: 6c61 7965 7229 0a20 2020 2020 2020 2020  layer).         
+000046a0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+000046b0: 2020 2020 2020 2020 2066 6f72 206c 6179           for lay
+000046c0: 6572 2069 6e20 6c61 7965 7273 3a0a 2020  er in layers:.  
+000046d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000046e0: 2020 6966 206c 6179 6572 2e47 6574 4e61    if layer.GetNa
+000046f0: 6d65 2829 203d 3d20 6c61 7965 725f 636c  me() == layer_cl
+00004700: 6f6e 652e 4765 744e 616d 6528 2920 6f72  one.GetName() or
+00004710: 206c 6179 6572 2e47 6574 4e61 6d65 2829   layer.GetName()
+00004720: 203d 3d20 6261 7365 5f6c 6179 6572 3a0a   == base_layer:.
 00004730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004740: 2020 2020 2020 205f 6c63 2e41 6464 4c61         _lc.AddLa
-00004750: 7965 7242 6f74 746f 6d28 6c61 7965 7229  yerBottom(layer)
-00004760: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-00004770: 206c 6179 6572 2069 6e20 6e6f 6e5f 7374   layer in non_st
-00004780: 6163 6b75 703a 0a20 2020 2020 2020 2020  ackup:.         
-00004790: 2020 2020 2020 205f 6c63 2e41 6464 4c61         _lc.AddLa
-000047a0: 7965 7242 6f74 746f 6d28 6c61 7965 7229  yerBottom(layer)
-000047b0: 0a20 2020 2020 2020 2020 2020 205f 6c63  .            _lc
-000047c0: 2e53 6574 4d6f 6465 286c 635f 7265 6164  .SetMode(lc_read
-000047d0: 6f6e 6c79 2e47 6574 4d6f 6465 2829 290a  only.GetMode()).
-000047e0: 2020 2020 2020 2020 656c 6966 206f 7065          elif ope
-000047f0: 7261 7469 6f6e 203d 3d20 2269 6e73 6572  ration == "inser
-00004800: 745f 6265 6c6f 7722 3a0a 2020 2020 2020  t_below":.      
-00004810: 2020 2020 2020 5f6c 632e 4164 644c 6179        _lc.AddLay
-00004820: 6572 4265 6c6f 7728 6c61 7965 725f 636c  erBelow(layer_cl
-00004830: 6f6e 652c 2062 6173 655f 6c61 7965 7229  one, base_layer)
-00004840: 0a20 2020 2020 2020 2065 6c69 6620 6f70  .        elif op
-00004850: 6572 6174 696f 6e20 3d3d 2022 696e 7365  eration == "inse
-00004860: 7274 5f61 626f 7665 223a 0a20 2020 2020  rt_above":.     
-00004870: 2020 2020 2020 205f 6c63 2e41 6464 4c61         _lc.AddLa
-00004880: 7965 7241 626f 7665 286c 6179 6572 5f63  yerAbove(layer_c
-00004890: 6c6f 6e65 2c20 6261 7365 5f6c 6179 6572  lone, base_layer
-000048a0: 290a 2020 2020 2020 2020 656c 6966 206f  ).        elif o
-000048b0: 7065 7261 7469 6f6e 203d 3d20 2261 6464  peration == "add
-000048c0: 5f6f 6e5f 746f 7022 3a0a 2020 2020 2020  _on_top":.      
-000048d0: 2020 2020 2020 5f6c 632e 4164 644c 6179        _lc.AddLay
-000048e0: 6572 546f 7028 6c61 7965 725f 636c 6f6e  erTop(layer_clon
-000048f0: 6529 0a20 2020 2020 2020 2065 6c69 6620  e).        elif 
-00004900: 6f70 6572 6174 696f 6e20 3d3d 2022 6164  operation == "ad
-00004910: 645f 6f6e 5f62 6f74 746f 6d22 3a0a 2020  d_on_bottom":.  
-00004920: 2020 2020 2020 2020 2020 5f6c 632e 4164            _lc.Ad
-00004930: 644c 6179 6572 426f 7474 6f6d 286c 6179  dLayerBottom(lay
-00004940: 6572 5f63 6c6f 6e65 290a 2020 2020 2020  er_clone).      
-00004950: 2020 656c 6966 206f 7065 7261 7469 6f6e    elif operation
-00004960: 203d 3d20 2261 6464 5f61 745f 656c 6576   == "add_at_elev
-00004970: 6174 696f 6e22 3a0a 2020 2020 2020 2020  ation":.        
-00004980: 2020 2020 5f6c 632e 4164 6453 7461 636b      _lc.AddStack
-00004990: 7570 4c61 7965 7241 7445 6c65 7661 7469  upLayerAtElevati
-000049a0: 6f6e 286c 6179 6572 5f63 6c6f 6e65 290a  on(layer_clone).
-000049b0: 2020 2020 2020 2020 656c 6966 206f 7065          elif ope
-000049c0: 7261 7469 6f6e 203d 3d20 226e 6f6e 5f73  ration == "non_s
-000049d0: 7461 636b 7570 223a 0a20 2020 2020 2020  tackup":.       
-000049e0: 2020 2020 205f 6c63 2e41 6464 4c61 7965       _lc.AddLaye
-000049f0: 7242 6f74 746f 6d28 6c61 7965 725f 636c  rBottom(layer_cl
-00004a00: 6f6e 6529 0a20 2020 2020 2020 2073 656c  one).        sel
-00004a10: 662e 5f70 6564 622e 6c61 796f 7574 2e6c  f._pedb.layout.l
-00004a20: 6179 6572 5f63 6f6c 6c65 6374 696f 6e20  ayer_collection 
-00004a30: 3d20 5f6c 630a 2020 2020 2020 2020 7365  = _lc.        se
-00004a40: 6c66 2e72 6566 7265 7368 5f6c 6179 6572  lf.refresh_layer
-00004a50: 5f63 6f6c 6c65 6374 696f 6e28 290a 2020  _collection().  
-00004a60: 2020 2020 2020 7265 7475 726e 2054 7275        return Tru
-00004a70: 650a 0a20 2020 2040 7079 6564 625f 6675  e..    @pyedb_fu
-00004a80: 6e63 7469 6f6e 5f68 616e 646c 6572 2829  nction_handler()
-00004a90: 0a20 2020 2064 6566 205f 6372 6561 7465  .    def _create
-00004aa0: 5f73 7461 636b 7570 5f6c 6179 6572 2873  _stackup_layer(s
-00004ab0: 656c 662c 206c 6179 6572 5f6e 616d 652c  elf, layer_name,
-00004ac0: 2074 6869 636b 6e65 7373 2c20 6c61 7965   thickness, laye
-00004ad0: 725f 7479 7065 3d22 7369 676e 616c 2229  r_type="signal")
-00004ae0: 3a0a 2020 2020 2020 2020 6966 206c 6179  :.        if lay
-00004af0: 6572 5f74 7970 6520 3d3d 2022 7369 676e  er_type == "sign
-00004b00: 616c 223a 0a20 2020 2020 2020 2020 2020  al":.           
-00004b10: 205f 6c61 7965 725f 7479 7065 203d 2073   _layer_type = s
-00004b20: 656c 662e 5f70 6564 622e 6564 625f 6170  elf._pedb.edb_ap
-00004b30: 692e 6365 6c6c 2e6c 6179 6572 5f74 7970  i.cell.layer_typ
-00004b40: 652e 5369 676e 616c 4c61 7965 720a 2020  e.SignalLayer.  
-00004b50: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00004b60: 2020 2020 2020 2020 5f6c 6179 6572 5f74          _layer_t
-00004b70: 7970 6520 3d20 7365 6c66 2e5f 7065 6462  ype = self._pedb
-00004b80: 2e65 6462 5f61 7069 2e63 656c 6c2e 6c61  .edb_api.cell.la
-00004b90: 7965 725f 7479 7065 2e44 6965 6c65 6374  yer_type.Dielect
-00004ba0: 7269 634c 6179 6572 0a0a 2020 2020 2020  ricLayer..      
-00004bb0: 2020 7265 7375 6c74 203d 2073 656c 662e    result = self.
-00004bc0: 5f70 6564 622e 6564 625f 6170 692e 6365  _pedb.edb_api.ce
-00004bd0: 6c6c 2e5f 6365 6c6c 2e53 7461 636b 7570  ll._cell.Stackup
-00004be0: 4c61 7965 7228 0a20 2020 2020 2020 2020  Layer(.         
-00004bf0: 2020 206c 6179 6572 5f6e 616d 652c 0a20     layer_name,. 
-00004c00: 2020 2020 2020 2020 2020 205f 6c61 7965             _laye
-00004c10: 725f 7479 7065 2c0a 2020 2020 2020 2020  r_type,.        
-00004c20: 2020 2020 7365 6c66 2e5f 6564 625f 7661      self._edb_va
-00004c30: 6c75 6528 7468 6963 6b6e 6573 7329 2c0a  lue(thickness),.
-00004c40: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00004c50: 2e5f 6564 625f 7661 6c75 6528 3029 2c0a  ._edb_value(0),.
-00004c60: 2020 2020 2020 2020 2020 2020 2222 2c0a              "",.
-00004c70: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-00004c80: 2020 7365 6c66 2e72 6566 7265 7368 5f6c    self.refresh_l
-00004c90: 6179 6572 5f63 6f6c 6c65 6374 696f 6e28  ayer_collection(
-00004ca0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00004cb0: 2072 6573 756c 740a 0a20 2020 2040 7079   result..    @py
-00004cc0: 6564 625f 6675 6e63 7469 6f6e 5f68 616e  edb_function_han
-00004cd0: 646c 6572 2829 0a20 2020 2064 6566 205f  dler().    def _
-00004ce0: 6372 6561 7465 5f6e 6f6e 7374 6163 6b75  create_nonstacku
-00004cf0: 705f 6c61 7965 7228 7365 6c66 2c20 6c61  p_layer(self, la
-00004d00: 7965 725f 6e61 6d65 2c20 6c61 7965 725f  yer_name, layer_
-00004d10: 7479 7065 293a 0a20 2020 2020 2020 2069  type):.        i
-00004d20: 6620 6c61 7965 725f 7479 7065 203d 3d20  f layer_type == 
-00004d30: 2263 6f6e 6475 6374 696e 6722 3a20 2023  "conducting":  #
-00004d40: 2070 7261 676d 613a 206e 6f20 636f 7665   pragma: no cove
-00004d50: 720a 2020 2020 2020 2020 2020 2020 5f6c  r.            _l
-00004d60: 6179 6572 5f74 7970 6520 3d20 7365 6c66  ayer_type = self
-00004d70: 2e5f 7065 6462 2e65 6462 5f61 7069 2e63  ._pedb.edb_api.c
-00004d80: 656c 6c2e 6c61 7965 725f 7479 7065 2e43  ell.layer_type.C
-00004d90: 6f6e 6475 6374 696e 674c 6179 6572 0a20  onductingLayer. 
-00004da0: 2020 2020 2020 2065 6c69 6620 6c61 7965         elif laye
-00004db0: 725f 7479 7065 203d 3d20 2261 6972 6c69  r_type == "airli
-00004dc0: 6e65 7322 3a20 2023 2070 7261 676d 613a  nes":  # pragma:
-00004dd0: 206e 6f20 636f 7665 720a 2020 2020 2020   no cover.      
-00004de0: 2020 2020 2020 5f6c 6179 6572 5f74 7970        _layer_typ
-00004df0: 6520 3d20 7365 6c66 2e5f 7065 6462 2e65  e = self._pedb.e
-00004e00: 6462 5f61 7069 2e63 656c 6c2e 6c61 7965  db_api.cell.laye
-00004e10: 725f 7479 7065 2e41 6972 6c69 6e65 734c  r_type.AirlinesL
-00004e20: 6179 6572 0a20 2020 2020 2020 2065 6c69  ayer.        eli
-00004e30: 6620 6c61 7965 725f 7479 7065 203d 3d20  f layer_type == 
-00004e40: 2265 7272 6f72 223a 2020 2320 7072 6167  "error":  # prag
-00004e50: 6d61 3a20 6e6f 2063 6f76 6572 0a20 2020  ma: no cover.   
-00004e60: 2020 2020 2020 2020 205f 6c61 7965 725f           _layer_
-00004e70: 7479 7065 203d 2073 656c 662e 5f70 6564  type = self._ped
-00004e80: 622e 6564 625f 6170 692e 6365 6c6c 2e6c  b.edb_api.cell.l
-00004e90: 6179 6572 5f74 7970 652e 4572 726f 7273  ayer_type.Errors
-00004ea0: 4c61 7965 720a 2020 2020 2020 2020 656c  Layer.        el
-00004eb0: 6966 206c 6179 6572 5f74 7970 6520 3d3d  if layer_type ==
-00004ec0: 2022 7379 6d62 6f6c 223a 2020 2320 7072   "symbol":  # pr
-00004ed0: 6167 6d61 3a20 6e6f 2063 6f76 6572 0a20  agma: no cover. 
-00004ee0: 2020 2020 2020 2020 2020 205f 6c61 7965             _laye
-00004ef0: 725f 7479 7065 203d 2073 656c 662e 5f70  r_type = self._p
-00004f00: 6564 622e 6564 625f 6170 692e 6365 6c6c  edb.edb_api.cell
-00004f10: 2e6c 6179 6572 5f74 7970 652e 5379 6d62  .layer_type.Symb
-00004f20: 6f6c 4c61 7965 720a 2020 2020 2020 2020  olLayer.        
-00004f30: 656c 6966 206c 6179 6572 5f74 7970 6520  elif layer_type 
-00004f40: 3d3d 2022 6d65 6173 7572 6522 3a20 2023  == "measure":  #
-00004f50: 2070 7261 676d 613a 206e 6f20 636f 7665   pragma: no cove
-00004f60: 720a 2020 2020 2020 2020 2020 2020 5f6c  r.            _l
-00004f70: 6179 6572 5f74 7970 6520 3d20 7365 6c66  ayer_type = self
-00004f80: 2e5f 7065 6462 2e65 6462 5f61 7069 2e63  ._pedb.edb_api.c
-00004f90: 656c 6c2e 6c61 7965 725f 7479 7065 2e4d  ell.layer_type.M
-00004fa0: 6561 7375 7265 4c61 7965 720a 2020 2020  easureLayer.    
-00004fb0: 2020 2020 656c 6966 206c 6179 6572 5f74      elif layer_t
-00004fc0: 7970 6520 3d3d 2022 6173 7365 6d62 6c79  ype == "assembly
-00004fd0: 223a 2020 2320 7072 6167 6d61 3a20 6e6f  ":  # pragma: no
-00004fe0: 2063 6f76 6572 0a20 2020 2020 2020 2020   cover.         
-00004ff0: 2020 205f 6c61 7965 725f 7479 7065 203d     _layer_type =
-00005000: 2073 656c 662e 5f70 6564 622e 6564 625f   self._pedb.edb_
-00005010: 6170 692e 6365 6c6c 2e6c 6179 6572 5f74  api.cell.layer_t
-00005020: 7970 652e 4173 7365 6d62 6c79 4c61 7965  ype.AssemblyLaye
-00005030: 720a 2020 2020 2020 2020 656c 6966 206c  r.        elif l
-00005040: 6179 6572 5f74 7970 6520 3d3d 2022 7369  ayer_type == "si
-00005050: 6c6b 7363 7265 656e 223a 2020 2320 7072  lkscreen":  # pr
-00005060: 6167 6d61 3a20 6e6f 2063 6f76 6572 0a20  agma: no cover. 
-00005070: 2020 2020 2020 2020 2020 205f 6c61 7965             _laye
-00005080: 725f 7479 7065 203d 2073 656c 662e 5f70  r_type = self._p
-00005090: 6564 622e 6564 625f 6170 692e 6365 6c6c  edb.edb_api.cell
-000050a0: 2e6c 6179 6572 5f74 7970 652e 5369 6c6b  .layer_type.Silk
-000050b0: 7363 7265 656e 4c61 7965 720a 2020 2020  screenLayer.    
-000050c0: 2020 2020 656c 6966 206c 6179 6572 5f74      elif layer_t
-000050d0: 7970 6520 3d3d 2022 736f 6c64 6572 6d61  ype == "solderma
-000050e0: 736b 223a 2020 2320 7072 6167 6d61 3a20  sk":  # pragma: 
-000050f0: 6e6f 2063 6f76 6572 0a20 2020 2020 2020  no cover.       
-00005100: 2020 2020 205f 6c61 7965 725f 7479 7065       _layer_type
-00005110: 203d 2073 656c 662e 5f70 6564 622e 6564   = self._pedb.ed
-00005120: 625f 6170 692e 6365 6c6c 2e6c 6179 6572  b_api.cell.layer
-00005130: 5f74 7970 652e 536f 6c64 6572 4d61 736b  _type.SolderMask
-00005140: 4c61 7965 720a 2020 2020 2020 2020 656c  Layer.        el
-00005150: 6966 206c 6179 6572 5f74 7970 6520 3d3d  if layer_type ==
-00005160: 2022 736f 6c64 6572 7061 7374 6522 3a20   "solderpaste": 
-00005170: 2023 2070 7261 676d 613a 206e 6f20 636f   # pragma: no co
-00005180: 7665 720a 2020 2020 2020 2020 2020 2020  ver.            
-00005190: 5f6c 6179 6572 5f74 7970 6520 3d20 7365  _layer_type = se
-000051a0: 6c66 2e5f 7065 6462 2e65 6462 5f61 7069  lf._pedb.edb_api
-000051b0: 2e63 656c 6c2e 6c61 7965 725f 7479 7065  .cell.layer_type
-000051c0: 2e53 6f6c 6465 7250 6173 7465 4c61 7965  .SolderPasteLaye
-000051d0: 720a 2020 2020 2020 2020 656c 6966 206c  r.        elif l
-000051e0: 6179 6572 5f74 7970 6520 3d3d 2022 676c  ayer_type == "gl
-000051f0: 7565 223a 2020 2320 7072 6167 6d61 3a20  ue":  # pragma: 
-00005200: 6e6f 2063 6f76 6572 0a20 2020 2020 2020  no cover.       
-00005210: 2020 2020 205f 6c61 7965 725f 7479 7065       _layer_type
-00005220: 203d 2073 656c 662e 5f70 6564 622e 6564   = self._pedb.ed
-00005230: 625f 6170 692e 6365 6c6c 2e6c 6179 6572  b_api.cell.layer
-00005240: 5f74 7970 652e 476c 7565 4c61 7965 720a  _type.GlueLayer.
-00005250: 2020 2020 2020 2020 656c 6966 206c 6179          elif lay
-00005260: 6572 5f74 7970 6520 3d3d 2022 7769 7265  er_type == "wire
-00005270: 626f 6e64 223a 2020 2320 7072 6167 6d61  bond":  # pragma
-00005280: 3a20 6e6f 2063 6f76 6572 0a20 2020 2020  : no cover.     
-00005290: 2020 2020 2020 205f 6c61 7965 725f 7479         _layer_ty
-000052a0: 7065 203d 2073 656c 662e 5f70 6564 622e  pe = self._pedb.
-000052b0: 6564 625f 6170 692e 6365 6c6c 2e6c 6179  edb_api.cell.lay
-000052c0: 6572 5f74 7970 652e 5769 7265 626f 6e64  er_type.Wirebond
-000052d0: 4c61 7965 720a 2020 2020 2020 2020 656c  Layer.        el
-000052e0: 6966 206c 6179 6572 5f74 7970 6520 3d3d  if layer_type ==
-000052f0: 2022 7573 6572 223a 2020 2320 7072 6167   "user":  # prag
-00005300: 6d61 3a20 6e6f 2063 6f76 6572 0a20 2020  ma: no cover.   
-00005310: 2020 2020 2020 2020 205f 6c61 7965 725f           _layer_
-00005320: 7479 7065 203d 2073 656c 662e 5f70 6564  type = self._ped
-00005330: 622e 6564 625f 6170 692e 6365 6c6c 2e6c  b.edb_api.cell.l
-00005340: 6179 6572 5f74 7970 652e 5573 6572 4c61  ayer_type.UserLa
-00005350: 7965 720a 2020 2020 2020 2020 656c 6966  yer.        elif
-00005360: 206c 6179 6572 5f74 7970 6520 3d3d 2022   layer_type == "
-00005370: 7369 7761 7665 6866 7373 736f 6c76 6572  siwavehfsssolver
-00005380: 7265 6769 6f6e 7322 3a20 2023 2070 7261  regions":  # pra
-00005390: 676d 613a 206e 6f20 636f 7665 720a 2020  gma: no cover.  
-000053a0: 2020 2020 2020 2020 2020 5f6c 6179 6572            _layer
-000053b0: 5f74 7970 6520 3d20 7365 6c66 2e5f 7065  _type = self._pe
-000053c0: 6462 2e65 6462 5f61 7069 2e63 656c 6c2e  db.edb_api.cell.
-000053d0: 6c61 7965 725f 7479 7065 2e53 4977 6176  layer_type.SIwav
-000053e0: 6548 4653 5353 6f6c 7665 7252 6567 696f  eHFSSSolverRegio
-000053f0: 6e73 0a20 2020 2020 2020 2065 6c69 6620  ns.        elif 
-00005400: 6c61 7965 725f 7479 7065 203d 3d20 226f  layer_type == "o
-00005410: 7574 6c69 6e65 223a 2020 2320 7072 6167  utline":  # prag
-00005420: 6d61 3a20 6e6f 2063 6f76 6572 0a20 2020  ma: no cover.   
-00005430: 2020 2020 2020 2020 205f 6c61 7965 725f           _layer_
-00005440: 7479 7065 203d 2073 656c 662e 5f70 6564  type = self._ped
-00005450: 622e 6564 625f 6170 692e 6365 6c6c 2e6c  b.edb_api.cell.l
-00005460: 6179 6572 5f74 7970 652e 4f75 746c 696e  ayer_type.Outlin
-00005470: 654c 6179 6572 0a20 2020 2020 2020 2065  eLayer.        e
-00005480: 6c69 6620 6c61 7965 725f 7479 7065 203d  lif layer_type =
-00005490: 3d20 2270 6f73 7470 726f 6365 7373 696e  = "postprocessin
-000054a0: 6722 3a20 2023 2070 7261 676d 613a 206e  g":  # pragma: n
-000054b0: 6f20 636f 7665 720a 2020 2020 2020 2020  o cover.        
-000054c0: 2020 2020 5f6c 6179 6572 5f74 7970 6520      _layer_type 
-000054d0: 3d20 7365 6c66 2e5f 7065 6462 2e65 6462  = self._pedb.edb
-000054e0: 5f61 7069 2e63 656c 6c2e 6c61 7965 725f  _api.cell.layer_
-000054f0: 7479 7065 2e50 6f73 7470 726f 6365 7373  type.Postprocess
-00005500: 696e 674c 6179 6572 0a20 2020 2020 2020  ingLayer.       
-00005510: 2065 6c73 653a 2020 2320 7072 6167 6d61   else:  # pragma
-00005520: 3a20 6e6f 2063 6f76 6572 0a20 2020 2020  : no cover.     
-00005530: 2020 2020 2020 205f 6c61 7965 725f 7479         _layer_ty
-00005540: 7065 203d 2073 656c 662e 5f70 6564 622e  pe = self._pedb.
-00005550: 6564 625f 6170 692e 6365 6c6c 2e6c 6179  edb_api.cell.lay
-00005560: 6572 5f74 7970 652e 556e 6465 6669 6e65  er_type.Undefine
-00005570: 644c 6179 6572 5479 7065 0a0a 2020 2020  dLayerType..    
-00005580: 2020 2020 7265 7375 6c74 203d 2073 656c      result = sel
-00005590: 662e 5f70 6564 622e 6564 625f 6170 692e  f._pedb.edb_api.
-000055a0: 6365 6c6c 2e6c 6179 6572 286c 6179 6572  cell.layer(layer
-000055b0: 5f6e 616d 652c 205f 6c61 7965 725f 7479  _name, _layer_ty
-000055c0: 7065 290a 2020 2020 2020 2020 7365 6c66  pe).        self
-000055d0: 2e72 6566 7265 7368 5f6c 6179 6572 5f63  .refresh_layer_c
-000055e0: 6f6c 6c65 6374 696f 6e28 290a 2020 2020  ollection().    
-000055f0: 2020 2020 7265 7475 726e 2072 6573 756c      return resul
-00005600: 740a 0a20 2020 2040 7079 6564 625f 6675  t..    @pyedb_fu
-00005610: 6e63 7469 6f6e 5f68 616e 646c 6572 2829  nction_handler()
-00005620: 0a20 2020 2064 6566 2061 6464 5f6f 7574  .    def add_out
-00005630: 6c69 6e65 5f6c 6179 6572 2873 656c 662c  line_layer(self,
-00005640: 206f 7574 6c69 6e65 5f6e 616d 653d 224f   outline_name="O
-00005650: 7574 6c69 6e65 2229 3a0a 2020 2020 2020  utline"):.      
-00005660: 2020 2222 2241 6464 2061 6e20 6f75 746c    """Add an outl
-00005670: 696e 6520 6c61 7965 7220 6e61 6d65 6420  ine layer named 
-00005680: 6060 224f 7574 6c69 6e65 2260 6020 6966  ``"Outline"`` if
-00005690: 2069 7420 6973 206e 6f74 2070 7265 7365   it is not prese
-000056a0: 6e74 2e0a 0a20 2020 2020 2020 2052 6574  nt...        Ret
-000056b0: 7572 6e73 0a20 2020 2020 2020 202d 2d2d  urns.        ---
-000056c0: 2d2d 2d2d 0a20 2020 2020 2020 2062 6f6f  ----.        boo
-000056d0: 6c0a 2020 2020 2020 2020 2020 2020 2254  l.            "T
-000056e0: 7275 6522 2069 6620 7375 6363 6573 7366  rue" if successf
-000056f0: 756c 2c20 6060 4661 6c73 6560 6020 6966  ul, ``False`` if
-00005700: 2066 6169 6c65 642e 0a20 2020 2020 2020   failed..       
-00005710: 2022 2222 0a20 2020 2020 2020 206f 7574   """.        out
-00005720: 6c69 6e65 4c61 7965 7220 3d20 7365 6c66  lineLayer = self
-00005730: 2e5f 7065 6462 2e65 6462 5f61 7069 2e63  ._pedb.edb_api.c
-00005740: 656c 6c2e 6c61 7965 722e 4669 6e64 4279  ell.layer.FindBy
-00005750: 4e61 6d65 2873 656c 662e 5f70 6564 622e  Name(self._pedb.
-00005760: 6c61 796f 7574 2e6c 6179 6572 5f63 6f6c  layout.layer_col
-00005770: 6c65 6374 696f 6e2c 206f 7574 6c69 6e65  lection, outline
-00005780: 5f6e 616d 6529 0a20 2020 2020 2020 2069  _name).        i
-00005790: 6620 6f75 746c 696e 654c 6179 6572 2e49  f outlineLayer.I
-000057a0: 734e 756c 6c28 293a 0a20 2020 2020 2020  sNull():.       
-000057b0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-000057c0: 2e61 6464 5f6c 6179 6572 280a 2020 2020  .add_layer(.    
-000057d0: 2020 2020 2020 2020 2020 2020 6f75 746c              outl
-000057e0: 696e 655f 6e61 6d65 2c0a 2020 2020 2020  ine_name,.      
-000057f0: 2020 2020 2020 2020 2020 6c61 7965 725f            layer_
-00005800: 7479 7065 3d22 6f75 746c 696e 6522 2c0a  type="outline",.
-00005810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005820: 6d61 7465 7269 616c 3d22 222c 0a20 2020  material="",.   
-00005830: 2020 2020 2020 2020 2020 2020 2066 696c               fil
-00005840: 6c4d 6174 6572 6961 6c3d 2222 2c0a 2020  lMaterial="",.  
-00005850: 2020 2020 2020 2020 2020 2020 2020 7468                th
-00005860: 6963 6b6e 6573 733d 2222 2c0a 2020 2020  ickness="",.    
-00005870: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-00005880: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00005890: 2020 2020 7265 7475 726e 2046 616c 7365      return False
-000058a0: 0a0a 2020 2020 4070 7965 6462 5f66 756e  ..    @pyedb_fun
-000058b0: 6374 696f 6e5f 6861 6e64 6c65 7228 290a  ction_handler().
-000058c0: 2020 2020 6465 6620 6164 645f 6c61 7965      def add_laye
-000058d0: 7228 0a20 2020 2020 2020 2073 656c 662c  r(.        self,
-000058e0: 0a20 2020 2020 2020 206c 6179 6572 5f6e  .        layer_n
-000058f0: 616d 652c 0a20 2020 2020 2020 2062 6173  ame,.        bas
-00005900: 655f 6c61 7965 723d 4e6f 6e65 2c0a 2020  e_layer=None,.  
-00005910: 2020 2020 2020 6d65 7468 6f64 3d22 6164        method="ad
-00005920: 645f 6f6e 5f74 6f70 222c 0a20 2020 2020  d_on_top",.     
-00005930: 2020 206c 6179 6572 5f74 7970 653d 2273     layer_type="s
-00005940: 6967 6e61 6c22 2c0a 2020 2020 2020 2020  ignal",.        
-00005950: 6d61 7465 7269 616c 3d22 636f 7070 6572  material="copper
-00005960: 222c 0a20 2020 2020 2020 2066 696c 6c4d  ",.        fillM
-00005970: 6174 6572 6961 6c3d 2266 7234 5f65 706f  aterial="fr4_epo
-00005980: 7879 222c 0a20 2020 2020 2020 2074 6869  xy",.        thi
-00005990: 636b 6e65 7373 3d22 3335 756d 222c 0a20  ckness="35um",. 
-000059a0: 2020 2020 2020 2065 7463 685f 6661 6374         etch_fact
-000059b0: 6f72 3d4e 6f6e 652c 0a20 2020 2020 2020  or=None,.       
-000059c0: 2069 735f 6e65 6761 7469 7665 3d46 616c   is_negative=Fal
-000059d0: 7365 2c0a 2020 2020 2020 2020 656e 6162  se,.        enab
-000059e0: 6c65 5f72 6f75 6768 6e65 7373 3d46 616c  le_roughness=Fal
-000059f0: 7365 2c0a 2020 2020 2020 2020 656c 6576  se,.        elev
-00005a00: 6174 696f 6e3d 4e6f 6e65 2c0a 2020 2020  ation=None,.    
-00005a10: 293a 0a20 2020 2020 2020 2022 2222 496e  ):.        """In
-00005a20: 7365 7274 2061 206c 6179 6572 2069 6e74  sert a layer int
-00005a30: 6f20 7374 6163 6b75 702e 0a0a 2020 2020  o stackup...    
-00005a40: 2020 2020 5061 7261 6d65 7465 7273 0a20      Parameters. 
-00005a50: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
-00005a60: 2d0a 2020 2020 2020 2020 6c61 7965 725f  -.        layer_
-00005a70: 6e61 6d65 203a 2073 7472 0a20 2020 2020  name : str.     
-00005a80: 2020 2020 2020 204e 616d 6520 6f66 2074         Name of t
-00005a90: 6865 206c 6179 6572 2e0a 2020 2020 2020  he layer..      
-00005aa0: 2020 6261 7365 5f6c 6179 6572 203a 2073    base_layer : s
-00005ab0: 7472 2c20 6f70 7469 6f6e 616c 0a20 2020  tr, optional.   
-00005ac0: 2020 2020 2020 2020 204e 616d 6520 6f66           Name of
-00005ad0: 2074 6865 2062 6173 6520 6c61 7965 722e   the base layer.
-00005ae0: 0a20 2020 2020 2020 206d 6574 686f 6420  .        method 
-00005af0: 3a20 7374 722c 206f 7074 696f 6e61 6c0a  : str, optional.
-00005b00: 2020 2020 2020 2020 2020 2020 5768 6572              Wher
-00005b10: 6520 746f 2069 6e73 6572 7420 7468 6520  e to insert the 
-00005b20: 6e65 7720 6c61 7965 722e 2054 6865 2064  new layer. The d
-00005b30: 6566 6175 6c74 2069 7320 6060 2261 6464  efault is ``"add
-00005b40: 5f6f 6e5f 746f 7022 6060 2e20 4f70 7469  _on_top"``. Opti
-00005b50: 6f6e 7320 6172 6520 6060 2261 6464 5f6f  ons are ``"add_o
-00005b60: 6e5f 746f 7022 6060 2c0a 2020 2020 2020  n_top"``,.      
-00005b70: 2020 2020 2020 6060 2261 6464 5f6f 6e5f        ``"add_on_
-00005b80: 626f 7474 6f6d 2260 602c 2060 6022 696e  bottom"``, ``"in
-00005b90: 7365 7274 5f61 626f 7665 2260 602c 2060  sert_above"``, `
-00005ba0: 6022 696e 7365 7274 5f62 656c 6f77 2260  `"insert_below"`
-00005bb0: 602c 2060 6022 6164 645f 6174 5f65 6c65  `, ``"add_at_ele
-00005bc0: 7661 7469 6f6e 2260 602c 2e0a 2020 2020  vation"``,..    
-00005bd0: 2020 2020 6c61 7965 725f 7479 7065 203a      layer_type :
-00005be0: 2073 7472 2c20 6f70 7469 6f6e 616c 0a20   str, optional. 
-00005bf0: 2020 2020 2020 2020 2020 2054 7970 6520             Type 
-00005c00: 6f66 206c 6179 6572 2e20 5468 6520 6465  of layer. The de
-00005c10: 6661 756c 7420 6973 2060 6022 7369 676e  fault is ``"sign
-00005c20: 616c 2260 602e 204f 7074 696f 6e73 2061  al"``. Options a
-00005c30: 7265 2060 6022 7369 676e 616c 2260 602c  re ``"signal"``,
-00005c40: 2060 6022 6469 656c 6563 7472 6963 2260   ``"dielectric"`
-00005c50: 602c 2060 6022 636f 6e64 7563 7469 6e67  `, ``"conducting
-00005c60: 2260 602c 0a20 2020 2020 2020 2020 2020  "``,.           
-00005c70: 2020 6060 2261 6972 5f6c 696e 6573 2260    ``"air_lines"`
-00005c80: 602c 2060 6022 6572 726f 7222 6060 2c20  `, ``"error"``, 
-00005c90: 6060 2273 796d 626f 6c22 6060 2c20 6060  ``"symbol"``, ``
-00005ca0: 226d 6561 7375 7265 2260 602c 2060 6022  "measure"``, ``"
-00005cb0: 6173 7365 6d62 6c79 2260 602c 2060 6022  assembly"``, ``"
-00005cc0: 7369 6c6b 7363 7265 656e 2260 602c 0a20  silkscreen"``,. 
-00005cd0: 2020 2020 2020 2020 2020 2020 6060 2273              ``"s
-00005ce0: 6f6c 6465 725f 6d61 736b 2260 602c 2060  older_mask"``, `
-00005cf0: 6022 736f 6c64 6572 5f70 6173 7465 2260  `"solder_paste"`
-00005d00: 602c 2060 6022 676c 7565 2260 602c 2060  `, ``"glue"``, `
-00005d10: 6022 7769 7265 626f 6e64 2260 602c 2060  `"wirebond"``, `
-00005d20: 6022 6866 7373 5f72 6567 696f 6e22 6060  `"hfss_region"``
-00005d30: 2c20 6060 2275 7365 7222 6060 2e0a 2020  , ``"user"``..  
-00005d40: 2020 2020 2020 6d61 7465 7269 616c 203a        material :
-00005d50: 2073 7472 2c20 6f70 7469 6f6e 616c 0a20   str, optional. 
-00005d60: 2020 2020 2020 2020 2020 204d 6174 6572             Mater
-00005d70: 6961 6c20 6f66 2074 6865 206c 6179 6572  ial of the layer
-00005d80: 2e0a 2020 2020 2020 2020 6669 6c6c 4d61  ..        fillMa
-00005d90: 7465 7269 616c 203a 2073 7472 2c20 6f70  terial : str, op
-00005da0: 7469 6f6e 616c 0a20 2020 2020 2020 2020  tional.         
-00005db0: 2020 2046 696c 6c20 6d61 7465 7269 616c     Fill material
-00005dc0: 206f 6620 7468 6520 6c61 7965 722e 0a20   of the layer.. 
-00005dd0: 2020 2020 2020 2074 6869 636b 6e65 7373         thickness
-00005de0: 203a 2073 7472 2c20 666c 6f61 742c 206f   : str, float, o
-00005df0: 7074 696f 6e61 6c0a 2020 2020 2020 2020  ptional.        
-00005e00: 2020 2020 5468 6963 6b6e 6573 7320 6f66      Thickness of
-00005e10: 2074 6865 206c 6179 6572 2e0a 2020 2020   the layer..    
-00005e20: 2020 2020 6574 6368 5f66 6163 746f 7220      etch_factor 
-00005e30: 3a20 696e 742c 2066 6c6f 6174 2c20 6f70  : int, float, op
-00005e40: 7469 6f6e 616c 0a20 2020 2020 2020 2020  tional.         
-00005e50: 2020 2045 7463 6820 6661 6374 6f72 206f     Etch factor o
-00005e60: 6620 7468 6520 6c61 7965 722e 0a20 2020  f the layer..   
-00005e70: 2020 2020 2069 735f 6e65 6761 7469 7665       is_negative
-00005e80: 203a 2062 6f6f 6c2c 206f 7074 696f 6e61   : bool, optiona
-00005e90: 6c0a 2020 2020 2020 2020 2020 2020 5768  l.            Wh
-00005ea0: 6574 6865 7220 7468 6520 6c61 7965 7220  ether the layer 
-00005eb0: 6973 206e 6567 6174 6976 652e 0a20 2020  is negative..   
-00005ec0: 2020 2020 2065 6e61 626c 655f 726f 7567       enable_roug
-00005ed0: 686e 6573 7320 3a20 626f 6f6c 2c20 6f70  hness : bool, op
-00005ee0: 7469 6f6e 616c 0a20 2020 2020 2020 2020  tional.         
-00005ef0: 2020 2057 6865 7468 6572 2072 6f75 6768     Whether rough
-00005f00: 6e65 7373 2069 7320 656e 6162 6c65 642e  ness is enabled.
-00005f10: 0a20 2020 2020 2020 2065 6c65 7661 7469  .        elevati
-00005f20: 6f6e 203a 2066 6c6f 6174 2c20 6f70 7469  on : float, opti
-00005f30: 6f6e 616c 0a20 2020 2020 2020 2020 2020  onal.           
-00005f40: 2045 6c65 7661 7469 6f6e 206f 6620 6e65   Elevation of ne
-00005f50: 7720 6c61 7965 722e 204f 6e6c 7920 7661  w layer. Only va
-00005f60: 6c69 6420 666f 7220 4f76 6572 6c61 7070  lid for Overlapp
-00005f70: 696e 6720 5374 6163 6b75 702e 0a0a 2020  ing Stackup...  
-00005f80: 2020 2020 2020 5265 7475 726e 730a 2020        Returns.  
-00005f90: 2020 2020 2020 2d2d 2d2d 2d2d 2d0a 2020        -------.  
-00005fa0: 2020 2020 2020 3a63 6c61 7373 3a60 7079        :class:`py
-00005fb0: 6564 622e 646f 746e 6574 2e65 6462 5f63  edb.dotnet.edb_c
-00005fc0: 6f72 652e 6564 625f 6461 7461 2e6c 6179  ore.edb_data.lay
-00005fd0: 6572 5f64 6174 612e 4c61 7965 7245 6462  er_data.LayerEdb
-00005fe0: 436c 6173 7360 0a20 2020 2020 2020 2022  Class`.        "
-00005ff0: 2222 0a20 2020 2020 2020 2069 6620 6c61  "".        if la
-00006000: 7965 725f 6e61 6d65 2069 6e20 7365 6c66  yer_name in self
-00006010: 2e6c 6179 6572 733a 0a20 2020 2020 2020  .layers:.       
-00006020: 2020 2020 206c 6f67 6765 722e 6572 726f       logger.erro
-00006030: 7228 226c 6179 6572 207b 7d20 6578 6973  r("layer {} exis
-00006040: 7473 2e22 2e66 6f72 6d61 7428 6c61 7965  ts.".format(laye
-00006050: 725f 6e61 6d65 2929 0a20 2020 2020 2020  r_name)).       
-00006060: 2020 2020 2072 6574 7572 6e20 4661 6c73       return Fals
-00006070: 650a 2020 2020 2020 2020 6d61 7465 7269  e.        materi
-00006080: 616c 735f 6c6f 7765 7220 3d20 7b6d 2e6c  als_lower = {m.l
-00006090: 6f77 6572 2829 3a20 6d20 666f 7220 6d20  ower(): m for m 
-000060a0: 696e 206c 6973 7428 7365 6c66 2e5f 7065  in list(self._pe
-000060b0: 6462 2e6d 6174 6572 6961 6c73 2e6d 6174  db.materials.mat
-000060c0: 6572 6961 6c73 2e6b 6579 7328 2929 7d0a  erials.keys())}.
-000060d0: 2020 2020 2020 2020 6966 206e 6f74 206d          if not m
-000060e0: 6174 6572 6961 6c3a 0a20 2020 2020 2020  aterial:.       
-000060f0: 2020 2020 2069 6620 6c61 7965 725f 7479       if layer_ty
-00006100: 7065 203d 3d20 2273 6967 6e61 6c22 3a0a  pe == "signal":.
-00006110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006120: 6d61 7465 7269 616c 203d 2022 636f 7070  material = "copp
-00006130: 6572 220a 2020 2020 2020 2020 2020 2020  er".            
-00006140: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00006150: 2020 2020 2020 6d61 7465 7269 616c 203d        material =
-00006160: 2022 6672 345f 6570 6f78 7922 0a20 2020   "fr4_epoxy".   
-00006170: 2020 2020 2069 6620 6e6f 7420 6669 6c6c       if not fill
-00006180: 4d61 7465 7269 616c 3a0a 2020 2020 2020  Material:.      
-00006190: 2020 2020 2020 6669 6c6c 4d61 7465 7269        fillMateri
-000061a0: 616c 203d 2022 6672 345f 6570 6f78 7922  al = "fr4_epoxy"
-000061b0: 0a0a 2020 2020 2020 2020 6966 206d 6174  ..        if mat
-000061c0: 6572 6961 6c2e 6c6f 7765 7228 2920 6e6f  erial.lower() no
-000061d0: 7420 696e 206d 6174 6572 6961 6c73 5f6c  t in materials_l
-000061e0: 6f77 6572 3a0a 2020 2020 2020 2020 2020  ower:.          
-000061f0: 2020 6c6f 6767 6572 2e65 7272 6f72 286d    logger.error(m
-00006200: 6174 6572 6961 6c20 2b20 2220 646f 6573  aterial + " does
-00006210: 206e 6f74 2065 7869 7374 2069 6e20 6d61   not exist in ma
-00006220: 7465 7269 616c 206c 6962 7261 7279 2229  terial library")
-00006230: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-00006240: 2020 2020 2020 2020 2020 206d 6174 6572             mater
-00006250: 6961 6c20 3d20 6d61 7465 7269 616c 735f  ial = materials_
-00006260: 6c6f 7765 725b 6d61 7465 7269 616c 2e6c  lower[material.l
-00006270: 6f77 6572 2829 5d0a 0a20 2020 2020 2020  ower()]..       
-00006280: 2069 6620 6c61 7965 725f 7479 7065 2021   if layer_type !
-00006290: 3d20 2264 6965 6c65 6374 7269 6322 3a0a  = "dielectric":.
-000062a0: 2020 2020 2020 2020 2020 2020 6966 2066              if f
-000062b0: 696c 6c4d 6174 6572 6961 6c2e 6c6f 7765  illMaterial.lowe
-000062c0: 7228 2920 6e6f 7420 696e 206d 6174 6572  r() not in mater
-000062d0: 6961 6c73 5f6c 6f77 6572 3a0a 2020 2020  ials_lower:.    
-000062e0: 2020 2020 2020 2020 2020 2020 6c6f 6767              logg
-000062f0: 6572 2e65 7272 6f72 2866 696c 6c4d 6174  er.error(fillMat
-00006300: 6572 6961 6c20 2b20 2220 646f 6573 206e  erial + " does n
-00006310: 6f74 2065 7869 7374 2069 6e20 6d61 7465  ot exist in mate
-00006320: 7269 616c 206c 6962 7261 7279 2229 0a20  rial library"). 
-00006330: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00006340: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00006350: 2066 696c 6c4d 6174 6572 6961 6c20 3d20   fillMaterial = 
-00006360: 6d61 7465 7269 616c 735f 6c6f 7765 725b  materials_lower[
-00006370: 6669 6c6c 4d61 7465 7269 616c 2e6c 6f77  fillMaterial.low
-00006380: 6572 2829 5d0a 0a20 2020 2020 2020 2069  er()]..        i
-00006390: 6620 6c61 7965 725f 7479 7065 2069 6e20  f layer_type in 
-000063a0: 5b22 7369 676e 616c 222c 2022 6469 656c  ["signal", "diel
-000063b0: 6563 7472 6963 225d 3a0a 2020 2020 2020  ectric"]:.      
-000063c0: 2020 2020 2020 6e65 775f 6c61 7965 7220        new_layer 
-000063d0: 3d20 7365 6c66 2e5f 6372 6561 7465 5f73  = self._create_s
-000063e0: 7461 636b 7570 5f6c 6179 6572 286c 6179  tackup_layer(lay
-000063f0: 6572 5f6e 616d 652c 2074 6869 636b 6e65  er_name, thickne
-00006400: 7373 2c20 6c61 7965 725f 7479 7065 290a  ss, layer_type).
-00006410: 2020 2020 2020 2020 2020 2020 6e65 775f              new_
-00006420: 6c61 7965 722e 5365 744d 6174 6572 6961  layer.SetMateria
-00006430: 6c28 6d61 7465 7269 616c 290a 2020 2020  l(material).    
-00006440: 2020 2020 2020 2020 6966 206c 6179 6572          if layer
-00006450: 5f74 7970 6520 213d 2022 6469 656c 6563  _type != "dielec
-00006460: 7472 6963 223a 0a20 2020 2020 2020 2020  tric":.         
-00006470: 2020 2020 2020 206e 6577 5f6c 6179 6572         new_layer
-00006480: 2e53 6574 4669 6c6c 4d61 7465 7269 616c  .SetFillMaterial
-00006490: 2866 696c 6c4d 6174 6572 6961 6c29 0a20  (fillMaterial). 
-000064a0: 2020 2020 2020 2020 2020 206e 6577 5f6c             new_l
-000064b0: 6179 6572 2e53 6574 4e65 6761 7469 7665  ayer.SetNegative
-000064c0: 2869 735f 6e65 6761 7469 7665 290a 2020  (is_negative).  
-000064d0: 2020 2020 2020 2020 2020 6c31 203d 206c            l1 = l
-000064e0: 656e 2873 656c 662e 6c61 7965 7273 290a  en(self.layers).
-000064f0: 2020 2020 2020 2020 2020 2020 6966 206d              if m
-00006500: 6574 686f 6420 3d3d 2022 6164 645f 6174  ethod == "add_at
-00006510: 5f65 6c65 7661 7469 6f6e 2220 616e 6420  _elevation" and 
-00006520: 656c 6576 6174 696f 6e3a 0a20 2020 2020  elevation:.     
-00006530: 2020 2020 2020 2020 2020 206e 6577 5f6c             new_l
-00006540: 6179 6572 2e53 6574 4c6f 7765 7245 6c65  ayer.SetLowerEle
-00006550: 7661 7469 6f6e 2873 656c 662e 5f70 6564  vation(self._ped
-00006560: 622e 6564 625f 7661 6c75 6528 656c 6576  b.edb_value(elev
-00006570: 6174 696f 6e29 290a 2020 2020 2020 2020  ation)).        
-00006580: 2020 2020 7365 6c66 2e5f 7365 745f 6c61      self._set_la
-00006590: 796f 7574 5f73 7461 636b 7570 286e 6577  yout_stackup(new
-000065a0: 5f6c 6179 6572 2c20 6d65 7468 6f64 2c20  _layer, method, 
-000065b0: 6261 7365 5f6c 6179 6572 290a 2020 2020  base_layer).    
-000065c0: 2020 2020 2020 2020 6966 206c 656e 2873          if len(s
-000065d0: 656c 662e 6c61 7965 7273 2920 3d3d 206c  elf.layers) == l
-000065e0: 313a 0a20 2020 2020 2020 2020 2020 2020  1:.             
-000065f0: 2020 2073 656c 662e 5f73 6574 5f6c 6179     self._set_lay
-00006600: 6f75 745f 7374 6163 6b75 7028 6e65 775f  out_stackup(new_
-00006610: 6c61 7965 722c 206d 6574 686f 642c 2062  layer, method, b
-00006620: 6173 655f 6c61 7965 722c 206d 6574 686f  ase_layer, metho
-00006630: 643d 3229 0a20 2020 2020 2020 2020 2020  d=2).           
-00006640: 2069 6620 6574 6368 5f66 6163 746f 723a   if etch_factor:
-00006650: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00006660: 206e 6577 5f6c 6179 6572 203d 2073 656c   new_layer = sel
-00006670: 662e 6c61 7965 7273 5b6c 6179 6572 5f6e  f.layers[layer_n
-00006680: 616d 655d 0a20 2020 2020 2020 2020 2020  ame].           
-00006690: 2020 2020 206e 6577 5f6c 6179 6572 2e65       new_layer.e
-000066a0: 7463 685f 6661 6374 6f72 203d 2065 7463  tch_factor = etc
-000066b0: 685f 6661 6374 6f72 0a20 2020 2020 2020  h_factor.       
-000066c0: 2020 2020 2069 6620 656e 6162 6c65 5f72       if enable_r
-000066d0: 6f75 6768 6e65 7373 3a0a 2020 2020 2020  oughness:.      
-000066e0: 2020 2020 2020 2020 2020 6e65 775f 6c61            new_la
-000066f0: 7965 7220 3d20 7365 6c66 2e6c 6179 6572  yer = self.layer
-00006700: 735b 6c61 7965 725f 6e61 6d65 5d0a 2020  s[layer_name].  
-00006710: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
-00006720: 775f 6c61 7965 722e 726f 7567 686e 6573  w_layer.roughnes
-00006730: 735f 656e 6162 6c65 6420 3d20 5472 7565  s_enabled = True
-00006740: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-00006750: 2020 2020 2020 2020 2020 206e 6577 5f6c             new_l
-00006760: 6179 6572 203d 2073 656c 662e 5f63 7265  ayer = self._cre
-00006770: 6174 655f 6e6f 6e73 7461 636b 7570 5f6c  ate_nonstackup_l
-00006780: 6179 6572 286c 6179 6572 5f6e 616d 652c  ayer(layer_name,
-00006790: 206c 6179 6572 5f74 7970 6529 0a20 2020   layer_type).   
-000067a0: 2020 2020 2020 2020 2073 656c 662e 5f73           self._s
-000067b0: 6574 5f6c 6179 6f75 745f 7374 6163 6b75  et_layout_stacku
-000067c0: 7028 6e65 775f 6c61 7965 722c 2022 6e6f  p(new_layer, "no
-000067d0: 6e5f 7374 6163 6b75 7022 290a 2020 2020  n_stackup").    
-000067e0: 2020 2020 7365 6c66 2e72 6566 7265 7368      self.refresh
-000067f0: 5f6c 6179 6572 5f63 6f6c 6c65 6374 696f  _layer_collectio
-00006800: 6e28 290a 2020 2020 2020 2020 7265 7475  n().        retu
-00006810: 726e 2073 656c 662e 6c61 7965 7273 5b6c  rn self.layers[l
-00006820: 6179 6572 5f6e 616d 655d 0a0a 2020 2020  ayer_name]..    
-00006830: 6465 6620 7265 6d6f 7665 5f6c 6179 6572  def remove_layer
-00006840: 2873 656c 662c 206e 616d 6529 3a0a 2020  (self, name):.  
-00006850: 2020 2020 2020 2222 2252 656d 6f76 6520        """Remove 
-00006860: 6120 6c61 7965 7220 6672 6f6d 2073 7461  a layer from sta
-00006870: 636b 7570 2e0a 0a20 2020 2020 2020 2050  ckup...        P
-00006880: 6172 616d 6574 6572 730a 2020 2020 2020  arameters.      
-00006890: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0a20 2020    ----------.   
-000068a0: 2020 2020 206e 616d 6520 3a20 7374 720a       name : str.
-000068b0: 2020 2020 2020 2020 2020 2020 4e61 6d65              Name
-000068c0: 206f 6620 7468 6520 6c61 7965 7220 746f   of the layer to
-000068d0: 2072 656d 6f76 652e 0a0a 2020 2020 2020   remove...      
-000068e0: 2020 5265 7475 726e 730a 2020 2020 2020    Returns.      
-000068f0: 2020 2d2d 2d2d 2d2d 2d0a 0a20 2020 2020    -------..     
-00006900: 2020 2022 2222 0a20 2020 2020 2020 206e     """.        n
-00006910: 6577 5f6c 6179 6572 5f63 6f6c 6c65 6374  ew_layer_collect
-00006920: 696f 6e20 3d20 7365 6c66 2e5f 7065 6462  ion = self._pedb
-00006930: 2e65 6462 5f61 7069 2e43 656c 6c2e 4c61  .edb_api.Cell.La
-00006940: 7965 7243 6f6c 6c65 6374 696f 6e28 290a  yerCollection().
-00006950: 2020 2020 2020 2020 666f 7220 6c79 7220          for lyr 
-00006960: 696e 2073 656c 662e 5f65 6462 5f6c 6179  in self._edb_lay
-00006970: 6572 5f6c 6973 743a 0a20 2020 2020 2020  er_list:.       
-00006980: 2020 2020 2069 6620 6e6f 7420 286c 7972       if not (lyr
-00006990: 2e47 6574 4e61 6d65 2829 203d 3d20 6e61  .GetName() == na
-000069a0: 6d65 293a 0a20 2020 2020 2020 2020 2020  me):.           
-000069b0: 2020 2020 206e 6577 5f6c 6179 6572 5f63       new_layer_c
-000069c0: 6f6c 6c65 6374 696f 6e2e 4164 644c 6179  ollection.AddLay
-000069d0: 6572 426f 7474 6f6d 286c 7972 290a 0a20  erBottom(lyr).. 
-000069e0: 2020 2020 2020 2073 656c 662e 5f70 6564         self._ped
-000069f0: 622e 6c61 796f 7574 2e6c 6179 6572 5f63  b.layout.layer_c
-00006a00: 6f6c 6c65 6374 696f 6e20 3d20 6e65 775f  ollection = new_
-00006a10: 6c61 7965 725f 636f 6c6c 6563 7469 6f6e  layer_collection
-00006a20: 0a20 2020 2020 2020 2073 656c 662e 7265  .        self.re
-00006a30: 6672 6573 685f 6c61 7965 725f 636f 6c6c  fresh_layer_coll
-00006a40: 6563 7469 6f6e 2829 0a20 2020 2020 2020  ection().       
-00006a50: 2072 6574 7572 6e20 5472 7565 0a0a 2020   return True..  
-00006a60: 2020 4070 7965 6462 5f66 756e 6374 696f    @pyedb_functio
-00006a70: 6e5f 6861 6e64 6c65 7228 290a 2020 2020  n_handler().    
-00006a80: 6465 6620 6578 706f 7274 2873 656c 662c  def export(self,
-00006a90: 2066 7061 7468 2c20 6669 6c65 5f66 6f72   fpath, file_for
-00006aa0: 6d61 743d 2278 6d6c 222c 2069 6e63 6c75  mat="xml", inclu
-00006ab0: 6465 5f6d 6174 6572 6961 6c5f 7769 7468  de_material_with
-00006ac0: 5f6c 6179 6572 3d46 616c 7365 293a 0a20  _layer=False):. 
-00006ad0: 2020 2020 2020 2022 2222 4578 706f 7274         """Export
-00006ae0: 2073 7461 636b 7570 2064 6566 696e 6974   stackup definit
-00006af0: 696f 6e20 746f 2061 2043 5356 206f 7220  ion to a CSV or 
-00006b00: 4a53 4f4e 2066 696c 652e 0a0a 2020 2020  JSON file...    
-00006b10: 2020 2020 5061 7261 6d65 7465 7273 0a20      Parameters. 
-00006b20: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
-00006b30: 2d0a 2020 2020 2020 2020 6670 6174 6820  -.        fpath 
-00006b40: 3a20 7374 720a 2020 2020 2020 2020 2020  : str.          
-00006b50: 2020 4669 6c65 2070 6174 6820 746f 2063    File path to c
-00006b60: 7376 206f 7220 6a73 6f6e 2066 696c 652e  sv or json file.
-00006b70: 0a20 2020 2020 2020 2066 696c 655f 666f  .        file_fo
-00006b80: 726d 6174 203a 2073 7472 2c20 6f70 7469  rmat : str, opti
-00006b90: 6f6e 616c 0a20 2020 2020 2020 2020 2020  onal.           
-00006ba0: 2046 6f72 6d61 7420 6f66 2074 6865 2066   Format of the f
-00006bb0: 696c 6520 746f 2065 7870 6f72 742e 2054  ile to export. T
-00006bc0: 6865 2064 6566 6175 6c74 2069 7320 6060  he default is ``
-00006bd0: 2263 7376 2260 602e 204f 7074 696f 6e73  "csv"``. Options
-00006be0: 2061 7265 2060 6022 6373 7622 6060 2c20   are ``"csv"``, 
-00006bf0: 6060 2278 6c73 7822 6060 2c0a 2020 2020  ``"xlsx"``,.    
-00006c00: 2020 2020 2020 2020 6060 226a 736f 6e22          ``"json"
-00006c10: 6060 2e0a 2020 2020 2020 2020 696e 636c  ``..        incl
-00006c20: 7564 655f 6d61 7465 7269 616c 5f77 6974  ude_material_wit
-00006c30: 685f 6c61 7965 7220 3a20 626f 6f6c 2c20  h_layer : bool, 
-00006c40: 6f70 7469 6f6e 616c 2e0a 2020 2020 2020  optional..      
-00006c50: 2020 2020 2020 5768 6574 6865 7220 746f        Whether to
-00006c60: 2069 6e63 6c75 6465 2074 6865 206d 6174   include the mat
-00006c70: 6572 6961 6c20 6465 6669 6e69 7469 6f6e  erial definition
-00006c80: 2069 6e73 6964 6520 6c61 7965 7220 6f6e   inside layer on
-00006c90: 6573 2e20 5468 6973 2070 6172 616d 6574  es. This paramet
-00006ca0: 6572 2069 7320 6f6e 6c79 2075 7365 640a  er is only used.
-00006cb0: 2020 2020 2020 2020 2020 2020 7768 656e              when
-00006cc0: 2061 204a 534f 4e20 6669 6c65 2069 7320   a JSON file is 
-00006cd0: 6578 706f 7274 6564 2e20 5468 6520 6465  exported. The de
-00006ce0: 6661 756c 7420 6973 2060 6046 616c 7365  fault is ``False
-00006cf0: 6060 2c20 7768 6963 6820 6b65 6570 7320  ``, which keeps 
-00006d00: 7468 6520 6d61 7465 7269 616c 2064 6566  the material def
-00006d10: 696e 6974 696f 6e0a 2020 2020 2020 2020  inition.        
-00006d20: 2020 2020 7365 6374 696f 6e20 696e 2074      section in t
-00006d30: 6865 204a 534f 4e20 6669 6c65 2e20 4966  he JSON file. If
-00006d40: 2060 6054 7275 6560 602c 2074 6865 206d   ``True``, the m
-00006d50: 6174 6572 6961 6c20 6465 6669 6e69 7469  aterial definiti
-00006d60: 6f6e 2069 7320 696e 636c 7564 6564 2069  on is included i
-00006d70: 6e73 6964 6520 7468 6520 6c61 7965 7220  nside the layer 
-00006d80: 6f6e 6573 2e0a 0a20 2020 2020 2020 2045  ones...        E
-00006d90: 7861 6d70 6c65 730a 2020 2020 2020 2020  xamples.        
-00006da0: 2d2d 2d2d 2d2d 2d2d 0a20 2020 2020 2020  --------.       
-00006db0: 203e 3e3e 2066 726f 6d20 7079 6564 6220   >>> from pyedb 
-00006dc0: 696d 706f 7274 2045 6462 0a20 2020 2020  import Edb.     
-00006dd0: 2020 203e 3e3e 2065 6462 203d 2045 6462     >>> edb = Edb
-00006de0: 2829 0a20 2020 2020 2020 203e 3e3e 2065  ().        >>> e
-00006df0: 6462 2e73 7461 636b 7570 2e65 7870 6f72  db.stackup.expor
-00006e00: 7428 2273 7461 636b 7570 2e78 6d6c 2229  t("stackup.xml")
-00006e10: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00006e20: 2020 2020 2069 6620 6c65 6e28 6670 6174       if len(fpat
-00006e30: 682e 7370 6c69 7428 222e 2229 2920 3d3d  h.split(".")) ==
-00006e40: 2031 3a0a 2020 2020 2020 2020 2020 2020   1:.            
-00006e50: 6670 6174 6820 3d20 227b 7d2e 7b7d 222e  fpath = "{}.{}".
-00006e60: 666f 726d 6174 2866 7061 7468 2c20 6669  format(fpath, fi
-00006e70: 6c65 5f66 6f72 6d61 7429 0a0a 2020 2020  le_format)..    
-00006e80: 2020 2020 6966 2066 7061 7468 2e65 6e64      if fpath.end
-00006e90: 7377 6974 6828 222e 6373 7622 293a 0a20  swith(".csv"):. 
-00006ea0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00006eb0: 6e20 7365 6c66 2e5f 6578 706f 7274 5f6c  n self._export_l
-00006ec0: 6179 6572 5f73 7461 636b 7570 5f74 6f5f  ayer_stackup_to_
-00006ed0: 6373 765f 786c 7378 2866 7061 7468 2c20  csv_xlsx(fpath, 
-00006ee0: 6669 6c65 5f66 6f72 6d61 743d 2263 7376  file_format="csv
-00006ef0: 2229 0a20 2020 2020 2020 2065 6c69 6620  ").        elif 
-00006f00: 6670 6174 682e 656e 6473 7769 7468 2822  fpath.endswith("
-00006f10: 2e78 6c73 7822 293a 0a20 2020 2020 2020  .xlsx"):.       
-00006f20: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00006f30: 2e5f 6578 706f 7274 5f6c 6179 6572 5f73  ._export_layer_s
-00006f40: 7461 636b 7570 5f74 6f5f 6373 765f 786c  tackup_to_csv_xl
-00006f50: 7378 2866 7061 7468 2c20 6669 6c65 5f66  sx(fpath, file_f
-00006f60: 6f72 6d61 743d 2278 6c73 7822 290a 2020  ormat="xlsx").  
-00006f70: 2020 2020 2020 656c 6966 2066 7061 7468        elif fpath
-00006f80: 2e65 6e64 7377 6974 6828 222e 6a73 6f6e  .endswith(".json
-00006f90: 2229 3a0a 2020 2020 2020 2020 2020 2020  "):.            
-00006fa0: 7265 7475 726e 2073 656c 662e 5f65 7870  return self._exp
-00006fb0: 6f72 745f 6c61 7965 725f 7374 6163 6b75  ort_layer_stacku
-00006fc0: 705f 746f 5f6a 736f 6e28 6670 6174 682c  p_to_json(fpath,
-00006fd0: 2069 6e63 6c75 6465 5f6d 6174 6572 6961   include_materia
-00006fe0: 6c5f 7769 7468 5f6c 6179 6572 290a 2020  l_with_layer).  
-00006ff0: 2020 2020 2020 656c 6966 2066 7061 7468        elif fpath
-00007000: 2e65 6e64 7377 6974 6828 222e 786d 6c22  .endswith(".xml"
-00007010: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-00007020: 6574 7572 6e20 7365 6c66 2e5f 6578 706f  eturn self._expo
-00007030: 7274 5f78 6d6c 2866 7061 7468 290a 2020  rt_xml(fpath).  
-00007040: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00007050: 2020 2020 2020 2020 7365 6c66 2e5f 6c6f          self._lo
-00007060: 6767 6572 2e77 6172 6e69 6e67 2822 4c61  gger.warning("La
-00007070: 7965 7220 7374 6163 6b75 7020 666f 726d  yer stackup form
-00007080: 6174 2069 7320 6e6f 7420 7375 7070 6f72  at is not suppor
-00007090: 7465 642e 2053 6b69 7070 696e 6720 696d  ted. Skipping im
-000070a0: 706f 7274 2e22 290a 2020 2020 2020 2020  port.").        
-000070b0: 2020 2020 7265 7475 726e 2046 616c 7365      return False
-000070c0: 0a0a 2020 2020 4070 7965 6462 5f66 756e  ..    @pyedb_fun
-000070d0: 6374 696f 6e5f 6861 6e64 6c65 7228 290a  ction_handler().
-000070e0: 2020 2020 6465 6620 6578 706f 7274 5f73      def export_s
-000070f0: 7461 636b 7570 2873 656c 662c 2066 7061  tackup(self, fpa
-00007100: 7468 2c20 6669 6c65 5f66 6f72 6d61 743d  th, file_format=
-00007110: 2278 6d6c 222c 2069 6e63 6c75 6465 5f6d  "xml", include_m
-00007120: 6174 6572 6961 6c5f 7769 7468 5f6c 6179  aterial_with_lay
-00007130: 6572 3d46 616c 7365 293a 0a20 2020 2020  er=False):.     
-00007140: 2020 2022 2222 4578 706f 7274 2073 7461     """Export sta
-00007150: 636b 7570 2064 6566 696e 6974 696f 6e20  ckup definition 
-00007160: 746f 2061 2043 5356 206f 7220 4a53 4f4e  to a CSV or JSON
-00007170: 2066 696c 652e 0a0a 2020 2020 2020 2020   file...        
-00007180: 2e2e 2064 6570 7265 6361 7465 643a 3a20  .. deprecated:: 
-00007190: 302e 362e 3631 0a20 2020 2020 2020 2020  0.6.61.         
-000071a0: 2020 5573 6520 3a66 756e 633a 6065 7870    Use :func:`exp
-000071b0: 6f72 7460 2069 6e73 7465 6164 2e0a 0a20  ort` instead... 
-000071c0: 2020 2020 2020 2050 6172 616d 6574 6572         Parameter
-000071d0: 730a 2020 2020 2020 2020 2d2d 2d2d 2d2d  s.        ------
-000071e0: 2d2d 2d2d 0a20 2020 2020 2020 2066 7061  ----.        fpa
-000071f0: 7468 203a 2073 7472 0a20 2020 2020 2020  th : str.       
-00007200: 2020 2020 2046 696c 6520 7061 7468 2074       File path t
-00007210: 6f20 4353 5620 6f72 204a 534f 4e20 6669  o CSV or JSON fi
-00007220: 6c65 2e0a 2020 2020 2020 2020 6669 6c65  le..        file
-00007230: 5f66 6f72 6d61 7420 3a20 7374 722c 206f  _format : str, o
-00007240: 7074 696f 6e61 6c0a 2020 2020 2020 2020  ptional.        
-00007250: 2020 2020 466f 726d 6174 206f 6620 7468      Format of th
-00007260: 6520 6669 6c65 2074 6f20 6578 706f 7274  e file to export
-00007270: 2e20 5468 6520 6465 6661 756c 7420 6973  . The default is
-00007280: 2060 6022 6373 7622 6060 2e20 4f70 7469   ``"csv"``. Opti
-00007290: 6f6e 7320 6172 6520 6060 2263 7376 2260  ons are ``"csv"`
-000072a0: 602c 2060 6022 786c 7378 2260 600a 2020  `, ``"xlsx"``.  
-000072b0: 2020 2020 2020 2020 2020 616e 6420 6060            and ``
-000072c0: 226a 736f 6e22 6060 2e0a 2020 2020 2020  "json"``..      
-000072d0: 2020 696e 636c 7564 655f 6d61 7465 7269    include_materi
-000072e0: 616c 5f77 6974 685f 6c61 7965 7220 3a20  al_with_layer : 
-000072f0: 626f 6f6c 2c20 6f70 7469 6f6e 616c 2e0a  bool, optional..
-00007300: 2020 2020 2020 2020 2020 2020 5768 6574              Whet
-00007310: 6865 7220 746f 2069 6e63 6c75 6465 2074  her to include t
-00007320: 6865 206d 6174 6572 6961 6c20 6465 6669  he material defi
-00007330: 6e69 7469 6f6e 2069 6e73 6964 6520 6c61  nition inside la
-00007340: 7965 7220 6f62 6a65 6374 732e 2054 6869  yer objects. Thi
-00007350: 7320 7061 7261 6d65 7465 7220 6973 206f  s parameter is o
-00007360: 6e6c 7920 7573 6564 0a20 2020 2020 2020  nly used.       
-00007370: 2020 2020 2077 6865 6e20 6120 4a53 4f4e       when a JSON
-00007380: 2066 696c 6520 6973 2065 7870 6f72 7465   file is exporte
-00007390: 642e 2054 6865 2064 6566 6175 6c74 2069  d. The default i
-000073a0: 7320 6060 4661 6c73 6560 602c 2077 6869  s ``False``, whi
-000073b0: 6368 206b 6565 7073 2074 6865 206d 6174  ch keeps the mat
-000073c0: 6572 6961 6c20 6465 6669 6e69 7469 6f6e  erial definition
-000073d0: 0a20 2020 2020 2020 2020 2020 2073 6563  .            sec
-000073e0: 7469 6f6e 2069 6e20 7468 6520 4a53 4f4e  tion in the JSON
-000073f0: 2066 696c 652e 2049 6620 6060 5472 7565   file. If ``True
-00007400: 6060 2c20 7468 6520 6d61 7465 7269 616c  ``, the material
-00007410: 2064 6566 696e 6974 696f 6e20 6973 2069   definition is i
-00007420: 6e63 6c75 6465 6420 696e 7369 6465 2074  ncluded inside t
-00007430: 6865 206c 6179 6572 206f 6e65 732e 0a0a  he layer ones...
-00007440: 2020 2020 2020 2020 4578 616d 706c 6573          Examples
-00007450: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-00007460: 2d0a 2020 2020 2020 2020 3e3e 3e20 6672  -.        >>> fr
-00007470: 6f6d 2070 7965 6462 2069 6d70 6f72 7420  om pyedb import 
-00007480: 4564 620a 2020 2020 2020 2020 3e3e 3e20  Edb.        >>> 
-00007490: 6564 6220 3d20 4564 6228 290a 2020 2020  edb = Edb().    
-000074a0: 2020 2020 3e3e 3e20 6564 622e 7374 6163      >>> edb.stac
-000074b0: 6b75 702e 6578 706f 7274 5f73 7461 636b  kup.export_stack
-000074c0: 7570 2822 7374 6163 6b75 702e 786d 6c22  up("stackup.xml"
-000074d0: 290a 2020 2020 2020 2020 2222 220a 0a20  ).        """.. 
-000074e0: 2020 2020 2020 2073 656c 662e 5f6c 6f67         self._log
-000074f0: 6765 722e 7761 726e 696e 6728 224d 6574  ger.warning("Met
-00007500: 686f 6420 6578 706f 7274 5f73 7461 636b  hod export_stack
-00007510: 7570 2069 7320 6465 7072 6563 6174 6564  up is deprecated
-00007520: 2e20 5573 6520 2e65 7870 6f72 742e 2229  . Use .export.")
-00007530: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00007540: 7365 6c66 2e65 7870 6f72 7428 6670 6174  self.export(fpat
-00007550: 682c 2066 696c 655f 666f 726d 6174 3d66  h, file_format=f
-00007560: 696c 655f 666f 726d 6174 2c20 696e 636c  ile_format, incl
-00007570: 7564 655f 6d61 7465 7269 616c 5f77 6974  ude_material_wit
-00007580: 685f 6c61 7965 723d 696e 636c 7564 655f  h_layer=include_
-00007590: 6d61 7465 7269 616c 5f77 6974 685f 6c61  material_with_la
-000075a0: 7965 7229 0a0a 2020 2020 4070 7965 6462  yer)..    @pyedb
-000075b0: 5f66 756e 6374 696f 6e5f 6861 6e64 6c65  _function_handle
-000075c0: 7228 290a 2020 2020 6465 6620 5f65 7870  r().    def _exp
-000075d0: 6f72 745f 6c61 7965 725f 7374 6163 6b75  ort_layer_stacku
-000075e0: 705f 746f 5f63 7376 5f78 6c73 7828 7365  p_to_csv_xlsx(se
-000075f0: 6c66 2c20 6670 6174 683d 4e6f 6e65 2c20  lf, fpath=None, 
-00007600: 6669 6c65 5f66 6f72 6d61 743d 4e6f 6e65  file_format=None
-00007610: 293a 0a20 2020 2020 2020 2069 6620 6e6f  ):.        if no
-00007620: 7420 7064 3a0a 2020 2020 2020 2020 2020  t pd:.          
-00007630: 2020 7365 6c66 2e5f 7065 6462 2e6c 6f67    self._pedb.log
-00007640: 6765 722e 6572 726f 7228 2250 616e 6461  ger.error("Panda
-00007650: 7320 6973 206e 6565 6465 642e 2050 6c65  s is needed. Ple
-00007660: 6173 652c 2069 6e73 7461 6c6c 2069 7420  ase, install it 
-00007670: 6669 7273 742e 2229 0a20 2020 2020 2020  first.").       
-00007680: 2020 2020 2072 6574 7572 6e20 4661 6c73       return Fals
-00007690: 650a 2020 2020 2020 2020 6966 2069 735f  e.        if is_
-000076a0: 6972 6f6e 7079 7468 6f6e 3a0a 2020 2020  ironpython:.    
-000076b0: 2020 2020 2020 2020 7265 7475 726e 0a20          return. 
-000076c0: 2020 2020 2020 2064 6174 6120 3d20 7b0a         data = {.
-000076d0: 2020 2020 2020 2020 2020 2020 2254 7970              "Typ
-000076e0: 6522 3a20 5b5d 2c0a 2020 2020 2020 2020  e": [],.        
-000076f0: 2020 2020 224d 6174 6572 6961 6c22 3a20      "Material": 
-00007700: 5b5d 2c0a 2020 2020 2020 2020 2020 2020  [],.            
-00007710: 2244 6965 6c65 6374 7269 635f 4669 6c6c  "Dielectric_Fill
-00007720: 223a 205b 5d2c 0a20 2020 2020 2020 2020  ": [],.         
-00007730: 2020 2022 5468 6963 6b6e 6573 7322 3a20     "Thickness": 
-00007740: 5b5d 2c0a 2020 2020 2020 2020 7d0a 2020  [],.        }.  
-00007750: 2020 2020 2020 6964 7820 3d20 5b5d 0a20        idx = []. 
-00007760: 2020 2020 2020 2066 6f72 206c 7972 2069         for lyr i
-00007770: 6e20 7365 6c66 2e73 7461 636b 7570 5f6c  n self.stackup_l
-00007780: 6179 6572 732e 7661 6c75 6573 2829 3a0a  ayers.values():.
-00007790: 2020 2020 2020 2020 2020 2020 6964 782e              idx.
-000077a0: 6170 7065 6e64 286c 7972 2e6e 616d 6529  append(lyr.name)
-000077b0: 0a20 2020 2020 2020 2020 2020 2064 6174  .            dat
-000077c0: 615b 2254 7970 6522 5d2e 6170 7065 6e64  a["Type"].append
-000077d0: 286c 7972 2e74 7970 6529 0a20 2020 2020  (lyr.type).     
-000077e0: 2020 2020 2020 2064 6174 615b 224d 6174         data["Mat
-000077f0: 6572 6961 6c22 5d2e 6170 7065 6e64 286c  erial"].append(l
-00007800: 7972 2e6d 6174 6572 6961 6c29 0a20 2020  yr.material).   
-00007810: 2020 2020 2020 2020 2064 6174 615b 2244           data["D
-00007820: 6965 6c65 6374 7269 635f 4669 6c6c 225d  ielectric_Fill"]
-00007830: 2e61 7070 656e 6428 6c79 722e 6469 656c  .append(lyr.diel
-00007840: 6563 7472 6963 5f66 696c 6c29 0a20 2020  ectric_fill).   
-00007850: 2020 2020 2020 2020 2064 6174 615b 2254           data["T
-00007860: 6869 636b 6e65 7373 225d 2e61 7070 656e  hickness"].appen
-00007870: 6428 6c79 722e 7468 6963 6b6e 6573 7329  d(lyr.thickness)
-00007880: 0a20 2020 2020 2020 2064 6620 3d20 7064  .        df = pd
-00007890: 2e44 6174 6146 7261 6d65 2864 6174 612c  .DataFrame(data,
-000078a0: 2069 6e64 6578 3d69 6478 2c20 636f 6c75   index=idx, colu
-000078b0: 6d6e 733d 5b22 5479 7065 222c 2022 4d61  mns=["Type", "Ma
-000078c0: 7465 7269 616c 222c 2022 4469 656c 6563  terial", "Dielec
-000078d0: 7472 6963 5f46 696c 6c22 2c20 2254 6869  tric_Fill", "Thi
-000078e0: 636b 6e65 7373 225d 290a 2020 2020 2020  ckness"]).      
-000078f0: 2020 6966 2066 696c 655f 666f 726d 6174    if file_format
-00007900: 203d 3d20 2263 7376 223a 2020 2320 7072   == "csv":  # pr
-00007910: 6167 6d61 3a20 6e6f 2063 6f76 6572 0a20  agma: no cover. 
-00007920: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
-00007930: 7420 6670 6174 682e 656e 6473 7769 7468  t fpath.endswith
-00007940: 2822 2e63 7376 2229 3a0a 2020 2020 2020  (".csv"):.      
-00007950: 2020 2020 2020 2020 2020 6670 6174 6820            fpath 
-00007960: 3d20 6670 6174 6820 2b20 222e 6373 7622  = fpath + ".csv"
-00007970: 0a20 2020 2020 2020 2020 2020 2064 662e  .            df.
-00007980: 746f 5f63 7376 2866 7061 7468 290a 2020  to_csv(fpath).  
-00007990: 2020 2020 2020 656c 7365 3a20 2023 2070        else:  # p
-000079a0: 7261 676d 613a 206e 6f20 636f 7665 720a  ragma: no cover.
-000079b0: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-000079c0: 6f74 2066 7061 7468 2e65 6e64 7377 6974  ot fpath.endswit
-000079d0: 6828 222e 786c 7378 2229 3a20 2023 2070  h(".xlsx"):  # p
-000079e0: 7261 676d 613a 206e 6f20 636f 7665 720a  ragma: no cover.
-000079f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007a00: 6670 6174 6820 3d20 6670 6174 6820 2b20  fpath = fpath + 
-00007a10: 222e 786c 7378 220a 2020 2020 2020 2020  ".xlsx".        
-00007a20: 2020 2020 6466 2e74 6f5f 6578 6365 6c28      df.to_excel(
-00007a30: 6670 6174 6829 0a20 2020 2020 2020 2072  fpath).        r
-00007a40: 6574 7572 6e20 5472 7565 0a0a 2020 2020  eturn True..    
-00007a50: 4070 7965 6462 5f66 756e 6374 696f 6e5f  @pyedb_function_
-00007a60: 6861 6e64 6c65 7228 290a 2020 2020 6465  handler().    de
-00007a70: 6620 5f65 7870 6f72 745f 6c61 7965 725f  f _export_layer_
-00007a80: 7374 6163 6b75 705f 746f 5f6a 736f 6e28  stackup_to_json(
-00007a90: 7365 6c66 2c20 6f75 7470 7574 5f66 696c  self, output_fil
-00007aa0: 653d 4e6f 6e65 2c20 696e 636c 7564 655f  e=None, include_
-00007ab0: 6d61 7465 7269 616c 5f77 6974 685f 6c61  material_with_la
-00007ac0: 7965 723d 4661 6c73 6529 3a0a 2020 2020  yer=False):.    
-00007ad0: 2020 2020 6966 206e 6f74 2069 6e63 6c75      if not inclu
-00007ae0: 6465 5f6d 6174 6572 6961 6c5f 7769 7468  de_material_with
-00007af0: 5f6c 6179 6572 3a0a 2020 2020 2020 2020  _layer:.        
-00007b00: 2020 2020 6d61 7465 7269 616c 5f6f 7574      material_out
-00007b10: 203d 207b 7d0a 2020 2020 2020 2020 2020   = {}.          
-00007b20: 2020 666f 7220 6b2c 2076 2069 6e20 7365    for k, v in se
-00007b30: 6c66 2e5f 7065 6462 2e6d 6174 6572 6961  lf._pedb.materia
-00007b40: 6c73 2e6d 6174 6572 6961 6c73 2e69 7465  ls.materials.ite
-00007b50: 6d73 2829 3a0a 2020 2020 2020 2020 2020  ms():.          
-00007b60: 2020 2020 2020 6d61 7465 7269 616c 5f6f        material_o
-00007b70: 7574 5b6b 5d20 3d20 762e 5f6a 736f 6e5f  ut[k] = v._json_
-00007b80: 666f 726d 6174 2829 0a20 2020 2020 2020  format().       
-00007b90: 206c 6179 6572 735f 6f75 7420 3d20 7b7d   layers_out = {}
-00007ba0: 0a20 2020 2020 2020 2066 6f72 206b 2c20  .        for k, 
-00007bb0: 7620 696e 2073 656c 662e 7374 6163 6b75  v in self.stacku
-00007bc0: 705f 6c61 7965 7273 2e69 7465 6d73 2829  p_layers.items()
-00007bd0: 3a0a 2020 2020 2020 2020 2020 2020 6c61  :.            la
-00007be0: 7965 7273 5f6f 7574 5b6b 5d20 3d20 762e  yers_out[k] = v.
-00007bf0: 5f6a 736f 6e5f 666f 726d 6174 2829 0a20  _json_format(). 
-00007c00: 2020 2020 2020 2020 2020 2069 6620 762e             if v.
-00007c10: 6d61 7465 7269 616c 2069 6e20 7365 6c66  material in self
-00007c20: 2e5f 7065 6462 2e6d 6174 6572 6961 6c73  ._pedb.materials
-00007c30: 2e6d 6174 6572 6961 6c73 3a0a 2020 2020  .materials:.    
-00007c40: 2020 2020 2020 2020 2020 2020 6c61 7965              laye
-00007c50: 725f 6d61 7465 7269 616c 203d 2073 656c  r_material = sel
-00007c60: 662e 5f70 6564 622e 6d61 7465 7269 616c  f._pedb.material
-00007c70: 732e 6d61 7465 7269 616c 735b 762e 6d61  s.materials[v.ma
-00007c80: 7465 7269 616c 5d0a 2020 2020 2020 2020  terial].        
-00007c90: 2020 2020 2020 2020 6966 206e 6f74 2076          if not v
-00007ca0: 2e64 6965 6c65 6374 7269 635f 6669 6c6c  .dielectric_fill
-00007cb0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00007cc0: 2020 2020 2020 6469 656c 6563 7472 6963        dielectric
-00007cd0: 5f66 696c 6c20 3d20 4661 6c73 650a 2020  _fill = False.  
-00007ce0: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00007cf0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00007d00: 2020 2020 2020 2020 6469 656c 6563 7472          dielectr
-00007d10: 6963 5f66 696c 6c20 3d20 7365 6c66 2e5f  ic_fill = self._
-00007d20: 7065 6462 2e6d 6174 6572 6961 6c73 2e6d  pedb.materials.m
-00007d30: 6174 6572 6961 6c73 5b76 2e64 6965 6c65  aterials[v.diele
-00007d40: 6374 7269 635f 6669 6c6c 5d0a 2020 2020  ctric_fill].    
-00007d50: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00007d60: 6e63 6c75 6465 5f6d 6174 6572 6961 6c5f  nclude_material_
-00007d70: 7769 7468 5f6c 6179 6572 3a0a 2020 2020  with_layer:.    
-00007d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007d90: 6c61 7965 7273 5f6f 7574 5b6b 5d5b 226d  layers_out[k]["m
-00007da0: 6174 6572 6961 6c22 5d20 3d20 6c61 7965  aterial"] = laye
-00007db0: 725f 6d61 7465 7269 616c 2e5f 6a73 6f6e  r_material._json
-00007dc0: 5f66 6f72 6d61 7428 290a 2020 2020 2020  _format().      
-00007dd0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00007de0: 2064 6965 6c65 6374 7269 635f 6669 6c6c   dielectric_fill
-00007df0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00007e00: 2020 2020 2020 2020 2020 6c61 7965 7273            layers
-00007e10: 5f6f 7574 5b6b 5d5b 2264 6965 6c65 6374  _out[k]["dielect
-00007e20: 7269 635f 6669 6c6c 225d 203d 2064 6965  ric_fill"] = die
-00007e30: 6c65 6374 7269 635f 6669 6c6c 2e5f 6a73  lectric_fill._js
-00007e40: 6f6e 5f66 6f72 6d61 7428 290a 2020 2020  on_format().    
-00007e50: 2020 2020 6966 206e 6f74 2069 6e63 6c75      if not inclu
-00007e60: 6465 5f6d 6174 6572 6961 6c5f 7769 7468  de_material_with
-00007e70: 5f6c 6179 6572 3a0a 2020 2020 2020 2020  _layer:.        
-00007e80: 2020 2020 7374 6163 6b75 705f 6f75 7420      stackup_out 
-00007e90: 3d20 7b22 6d61 7465 7269 616c 7322 3a20  = {"materials": 
-00007ea0: 6d61 7465 7269 616c 5f6f 7574 2c20 226c  material_out, "l
-00007eb0: 6179 6572 7322 3a20 6c61 7965 7273 5f6f  ayers": layers_o
-00007ec0: 7574 7d0a 2020 2020 2020 2020 656c 7365  ut}.        else
-00007ed0: 3a0a 2020 2020 2020 2020 2020 2020 7374  :.            st
-00007ee0: 6163 6b75 705f 6f75 7420 3d20 7b22 6c61  ackup_out = {"la
-00007ef0: 7965 7273 223a 206c 6179 6572 735f 6f75  yers": layers_ou
-00007f00: 747d 0a20 2020 2020 2020 2069 6620 6f75  t}.        if ou
-00007f10: 7470 7574 5f66 696c 653a 0a20 2020 2020  tput_file:.     
-00007f20: 2020 2020 2020 2077 6974 6820 6f70 656e         with open
-00007f30: 286f 7574 7075 745f 6669 6c65 2c20 2277  (output_file, "w
-00007f40: 2229 2061 7320 7772 6974 655f 6669 6c65  ") as write_file
-00007f50: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00007f60: 2020 6a73 6f6e 2e64 756d 7028 7374 6163    json.dump(stac
-00007f70: 6b75 705f 6f75 742c 2077 7269 7465 5f66  kup_out, write_f
-00007f80: 696c 652c 2069 6e64 656e 743d 3429 0a0a  ile, indent=4)..
-00007f90: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00007fa0: 726e 2054 7275 650a 2020 2020 2020 2020  rn True.        
-00007fb0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00007fc0: 2020 7265 7475 726e 2046 616c 7365 0a0a    return False..
-00007fd0: 2020 2020 2320 544f 444f 3a20 5468 6973      # TODO: This
-00007fe0: 206d 6574 686f 6420 6d69 6768 7420 6e65   method might ne
-00007ff0: 6564 2073 6f6d 6520 7265 6661 6374 6f72  ed some refactor
-00008000: 696e 670a 2020 2020 4070 7965 6462 5f66  ing.    @pyedb_f
-00008010: 756e 6374 696f 6e5f 6861 6e64 6c65 7228  unction_handler(
-00008020: 290a 2020 2020 6465 6620 5f69 6d70 6f72  ).    def _impor
-00008030: 745f 6c61 7965 725f 7374 6163 6b75 7028  t_layer_stackup(
-00008040: 7365 6c66 2c20 696e 7075 745f 6669 6c65  self, input_file
-00008050: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
-00008060: 6966 2069 6e70 7574 5f66 696c 653a 0a20  if input_file:. 
-00008070: 2020 2020 2020 2020 2020 2066 203d 206f             f = o
-00008080: 7065 6e28 696e 7075 745f 6669 6c65 290a  pen(input_file).
-00008090: 2020 2020 2020 2020 2020 2020 6a73 6f6e              json
-000080a0: 5f64 6963 7420 3d20 6a73 6f6e 2e6c 6f61  _dict = json.loa
-000080b0: 6428 6629 2020 2320 7072 6167 6d61 3a20  d(f)  # pragma: 
-000080c0: 6e6f 2063 6f76 6572 0a20 2020 2020 2020  no cover.       
-000080d0: 2020 2020 2066 6f72 206b 2c20 7620 696e       for k, v in
-000080e0: 206a 736f 6e5f 6469 6374 2e69 7465 6d73   json_dict.items
-000080f0: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
-00008100: 2020 2020 6966 206b 203d 3d20 226d 6174      if k == "mat
-00008110: 6572 6961 6c73 223a 0a20 2020 2020 2020  erials":.       
-00008120: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-00008130: 206d 6174 6572 6961 6c20 696e 2076 2e76   material in v.v
-00008140: 616c 7565 7328 293a 0a20 2020 2020 2020  alues():.       
-00008150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008160: 206d 6174 6572 6961 6c5f 6e61 6d65 203d   material_name =
-00008170: 206d 6174 6572 6961 6c5b 226e 616d 6522   material["name"
-00008180: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
-00008190: 2020 2020 2020 2020 2020 6465 6c20 6d61            del ma
-000081a0: 7465 7269 616c 5b22 6e61 6d65 225d 0a20  terial["name"]. 
-000081b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000081c0: 2020 2020 2020 2069 6620 6d61 7465 7269         if materi
-000081d0: 616c 5f6e 616d 6520 6e6f 7420 696e 2073  al_name not in s
-000081e0: 656c 662e 5f70 6564 622e 6d61 7465 7269  elf._pedb.materi
-000081f0: 616c 733a 0a20 2020 2020 2020 2020 2020  als:.           
-00008200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008210: 2073 656c 662e 5f70 6564 622e 6d61 7465   self._pedb.mate
-00008220: 7269 616c 732e 6164 645f 6d61 7465 7269  rials.add_materi
-00008230: 616c 286d 6174 6572 6961 6c5f 6e61 6d65  al(material_name
-00008240: 2c20 2a2a 6d61 7465 7269 616c 290a 2020  , **material).  
-00008250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008260: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00008270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008280: 2020 2020 2020 2020 7365 6c66 2e5f 7065          self._pe
-00008290: 6462 2e6d 6174 6572 6961 6c73 2e75 7064  db.materials.upd
-000082a0: 6174 655f 6d61 7465 7269 616c 286d 6174  ate_material(mat
-000082b0: 6572 6961 6c5f 6e61 6d65 2c20 6d61 7465  erial_name, mate
-000082c0: 7269 616c 290a 2020 2020 2020 2020 2020  rial).          
-000082d0: 2020 2020 2020 6966 206b 203d 3d20 226c        if k == "l
-000082e0: 6179 6572 7322 3a0a 2020 2020 2020 2020  ayers":.        
-000082f0: 2020 2020 2020 2020 2020 2020 6966 206c              if l
-00008300: 656e 286c 6973 7428 762e 7661 6c75 6573  en(list(v.values
-00008310: 2829 2929 203d 3d20 6c65 6e28 6c69 7374  ())) == len(list
-00008320: 2873 656c 662e 7374 6163 6b75 705f 6c61  (self.stackup_la
-00008330: 7965 7273 2e76 616c 7565 7328 2929 293a  yers.values())):
-00008340: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00008350: 2020 2020 2020 2020 2069 6d70 6f72 7465           importe
-00008360: 645f 6c61 7965 7273 5f6c 6973 7420 3d20  d_layers_list = 
-00008370: 5b6c 5f64 6963 745b 226e 616d 6522 5d20  [l_dict["name"] 
-00008380: 666f 7220 6c5f 6469 6374 2069 6e20 6c69  for l_dict in li
-00008390: 7374 2876 2e76 616c 7565 7328 2929 5d0a  st(v.values())].
-000083a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000083b0: 2020 2020 2020 2020 6c61 796f 7574 5f6c          layout_l
-000083c0: 6179 6572 5f6c 6973 7420 3d20 6c69 7374  ayer_list = list
-000083d0: 2873 656c 662e 7374 6163 6b75 705f 6c61  (self.stackup_la
-000083e0: 7965 7273 2e6b 6579 7328 2929 0a20 2020  yers.keys()).   
-000083f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008400: 2020 2020 2066 6f72 206c 6179 6572 5f6e       for layer_n
-00008410: 616d 6520 696e 2069 6d70 6f72 7465 645f  ame in imported_
-00008420: 6c61 7965 7273 5f6c 6973 743a 0a20 2020  layers_list:.   
-00008430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008440: 2020 2020 2020 2020 206c 6179 6572 5f69           layer_i
-00008450: 6e64 6578 203d 2069 6d70 6f72 7465 645f  ndex = imported_
-00008460: 6c61 7965 7273 5f6c 6973 742e 696e 6465  layers_list.inde
-00008470: 7828 6c61 7965 725f 6e61 6d65 290a 2020  x(layer_name).  
-00008480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008490: 2020 2020 2020 2020 2020 6966 206c 6179            if lay
-000084a0: 6f75 745f 6c61 7965 725f 6c69 7374 5b6c  out_layer_list[l
-000084b0: 6179 6572 5f69 6e64 6578 5d20 213d 206c  ayer_index] != l
-000084c0: 6179 6572 5f6e 616d 653a 0a20 2020 2020  ayer_name:.     
-000084d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000084e0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-000084f0: 7374 6163 6b75 705f 6c61 7965 7273 5b6c  stackup_layers[l
-00008500: 6179 6f75 745f 6c61 7965 725f 6c69 7374  ayout_layer_list
-00008510: 5b6c 6179 6572 5f69 6e64 6578 5d5d 2e6e  [layer_index]].n
-00008520: 616d 6520 3d20 6c61 7965 725f 6e61 6d65  ame = layer_name
-00008530: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00008540: 2020 2020 2070 7265 765f 6c61 7965 7220       prev_layer 
-00008550: 3d20 4e6f 6e65 0a20 2020 2020 2020 2020  = None.         
-00008560: 2020 2020 2020 2020 2020 2066 6f72 206c             for l
-00008570: 6179 6572 5f6e 616d 652c 206c 6179 6572  ayer_name, layer
-00008580: 2069 6e20 762e 6974 656d 7328 293a 0a20   in v.items():. 
+00004740: 2020 2020 2020 2020 5f6c 632e 4164 644c          _lc.AddL
+00004750: 6179 6572 426f 7474 6f6d 286c 6179 6572  ayerBottom(layer
+00004760: 5f63 6c6f 6e65 290a 2020 2020 2020 2020  _clone).        
+00004770: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00004780: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00004790: 2020 2020 2020 2020 2020 5f6c 632e 4164            _lc.Ad
+000047a0: 644c 6179 6572 426f 7474 6f6d 286c 6179  dLayerBottom(lay
+000047b0: 6572 290a 2020 2020 2020 2020 2020 2020  er).            
+000047c0: 666f 7220 6c61 7965 7220 696e 206e 6f6e  for layer in non
+000047d0: 5f73 7461 636b 7570 3a0a 2020 2020 2020  _stackup:.      
+000047e0: 2020 2020 2020 2020 2020 5f6c 632e 4164            _lc.Ad
+000047f0: 644c 6179 6572 426f 7474 6f6d 286c 6179  dLayerBottom(lay
+00004800: 6572 290a 2020 2020 2020 2020 2020 2020  er).            
+00004810: 5f6c 632e 5365 744d 6f64 6528 6c63 5f72  _lc.SetMode(lc_r
+00004820: 6561 646f 6e6c 792e 4765 744d 6f64 6528  eadonly.GetMode(
+00004830: 2929 0a20 2020 2020 2020 2065 6c69 6620  )).        elif 
+00004840: 6f70 6572 6174 696f 6e20 3d3d 2022 696e  operation == "in
+00004850: 7365 7274 5f62 656c 6f77 223a 0a20 2020  sert_below":.   
+00004860: 2020 2020 2020 2020 205f 6c63 2e41 6464           _lc.Add
+00004870: 4c61 7965 7242 656c 6f77 286c 6179 6572  LayerBelow(layer
+00004880: 5f63 6c6f 6e65 2c20 6261 7365 5f6c 6179  _clone, base_lay
+00004890: 6572 290a 2020 2020 2020 2020 656c 6966  er).        elif
+000048a0: 206f 7065 7261 7469 6f6e 203d 3d20 2269   operation == "i
+000048b0: 6e73 6572 745f 6162 6f76 6522 3a0a 2020  nsert_above":.  
+000048c0: 2020 2020 2020 2020 2020 5f6c 632e 4164            _lc.Ad
+000048d0: 644c 6179 6572 4162 6f76 6528 6c61 7965  dLayerAbove(laye
+000048e0: 725f 636c 6f6e 652c 2062 6173 655f 6c61  r_clone, base_la
+000048f0: 7965 7229 0a20 2020 2020 2020 2065 6c69  yer).        eli
+00004900: 6620 6f70 6572 6174 696f 6e20 3d3d 2022  f operation == "
+00004910: 6164 645f 6f6e 5f74 6f70 223a 0a20 2020  add_on_top":.   
+00004920: 2020 2020 2020 2020 205f 6c63 2e41 6464           _lc.Add
+00004930: 4c61 7965 7254 6f70 286c 6179 6572 5f63  LayerTop(layer_c
+00004940: 6c6f 6e65 290a 2020 2020 2020 2020 656c  lone).        el
+00004950: 6966 206f 7065 7261 7469 6f6e 203d 3d20  if operation == 
+00004960: 2261 6464 5f6f 6e5f 626f 7474 6f6d 223a  "add_on_bottom":
+00004970: 0a20 2020 2020 2020 2020 2020 205f 6c63  .            _lc
+00004980: 2e41 6464 4c61 7965 7242 6f74 746f 6d28  .AddLayerBottom(
+00004990: 6c61 7965 725f 636c 6f6e 6529 0a20 2020  layer_clone).   
+000049a0: 2020 2020 2065 6c69 6620 6f70 6572 6174       elif operat
+000049b0: 696f 6e20 3d3d 2022 6164 645f 6174 5f65  ion == "add_at_e
+000049c0: 6c65 7661 7469 6f6e 223a 0a20 2020 2020  levation":.     
+000049d0: 2020 2020 2020 205f 6c63 2e41 6464 5374         _lc.AddSt
+000049e0: 6163 6b75 704c 6179 6572 4174 456c 6576  ackupLayerAtElev
+000049f0: 6174 696f 6e28 6c61 7965 725f 636c 6f6e  ation(layer_clon
+00004a00: 6529 0a20 2020 2020 2020 2065 6c69 6620  e).        elif 
+00004a10: 6f70 6572 6174 696f 6e20 3d3d 2022 6e6f  operation == "no
+00004a20: 6e5f 7374 6163 6b75 7022 3a0a 2020 2020  n_stackup":.    
+00004a30: 2020 2020 2020 2020 5f6c 632e 4164 644c          _lc.AddL
+00004a40: 6179 6572 426f 7474 6f6d 286c 6179 6572  ayerBottom(layer
+00004a50: 5f63 6c6f 6e65 290a 2020 2020 2020 2020  _clone).        
+00004a60: 7365 6c66 2e5f 7065 6462 2e6c 6179 6f75  self._pedb.layou
+00004a70: 742e 6c61 7965 725f 636f 6c6c 6563 7469  t.layer_collecti
+00004a80: 6f6e 203d 205f 6c63 0a20 2020 2020 2020  on = _lc.       
+00004a90: 2073 656c 662e 7265 6672 6573 685f 6c61   self.refresh_la
+00004aa0: 7965 725f 636f 6c6c 6563 7469 6f6e 2829  yer_collection()
+00004ab0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00004ac0: 5472 7565 0a0a 2020 2020 4070 7965 6462  True..    @pyedb
+00004ad0: 5f66 756e 6374 696f 6e5f 6861 6e64 6c65  _function_handle
+00004ae0: 7228 290a 2020 2020 6465 6620 5f63 7265  r().    def _cre
+00004af0: 6174 655f 7374 6163 6b75 705f 6c61 7965  ate_stackup_laye
+00004b00: 7228 7365 6c66 2c20 6c61 7965 725f 6e61  r(self, layer_na
+00004b10: 6d65 2c20 7468 6963 6b6e 6573 732c 206c  me, thickness, l
+00004b20: 6179 6572 5f74 7970 653d 2273 6967 6e61  ayer_type="signa
+00004b30: 6c22 293a 0a20 2020 2020 2020 2069 6620  l"):.        if 
+00004b40: 6c61 7965 725f 7479 7065 203d 3d20 2273  layer_type == "s
+00004b50: 6967 6e61 6c22 3a0a 2020 2020 2020 2020  ignal":.        
+00004b60: 2020 2020 5f6c 6179 6572 5f74 7970 6520      _layer_type 
+00004b70: 3d20 7365 6c66 2e5f 7065 6462 2e65 6462  = self._pedb.edb
+00004b80: 5f61 7069 2e63 656c 6c2e 6c61 7965 725f  _api.cell.layer_
+00004b90: 7479 7065 2e53 6967 6e61 6c4c 6179 6572  type.SignalLayer
+00004ba0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00004bb0: 2020 2020 2020 2020 2020 205f 6c61 7965             _laye
+00004bc0: 725f 7479 7065 203d 2073 656c 662e 5f70  r_type = self._p
+00004bd0: 6564 622e 6564 625f 6170 692e 6365 6c6c  edb.edb_api.cell
+00004be0: 2e6c 6179 6572 5f74 7970 652e 4469 656c  .layer_type.Diel
+00004bf0: 6563 7472 6963 4c61 7965 720a 0a20 2020  ectricLayer..   
+00004c00: 2020 2020 2072 6573 756c 7420 3d20 7365       result = se
+00004c10: 6c66 2e5f 7065 6462 2e65 6462 5f61 7069  lf._pedb.edb_api
+00004c20: 2e63 656c 6c2e 5f63 656c 6c2e 5374 6163  .cell._cell.Stac
+00004c30: 6b75 704c 6179 6572 280a 2020 2020 2020  kupLayer(.      
+00004c40: 2020 2020 2020 6c61 7965 725f 6e61 6d65        layer_name
+00004c50: 2c0a 2020 2020 2020 2020 2020 2020 5f6c  ,.            _l
+00004c60: 6179 6572 5f74 7970 652c 0a20 2020 2020  ayer_type,.     
+00004c70: 2020 2020 2020 2073 656c 662e 5f65 6462         self._edb
+00004c80: 5f76 616c 7565 2874 6869 636b 6e65 7373  _value(thickness
+00004c90: 292c 0a20 2020 2020 2020 2020 2020 2073  ),.            s
+00004ca0: 656c 662e 5f65 6462 5f76 616c 7565 2830  elf._edb_value(0
+00004cb0: 292c 0a20 2020 2020 2020 2020 2020 2022  ),.            "
+00004cc0: 222c 0a20 2020 2020 2020 2029 0a20 2020  ",.        ).   
+00004cd0: 2020 2020 2073 656c 662e 7265 6672 6573       self.refres
+00004ce0: 685f 6c61 7965 725f 636f 6c6c 6563 7469  h_layer_collecti
+00004cf0: 6f6e 2829 0a20 2020 2020 2020 2072 6574  on().        ret
+00004d00: 7572 6e20 7265 7375 6c74 0a0a 2020 2020  urn result..    
+00004d10: 4070 7965 6462 5f66 756e 6374 696f 6e5f  @pyedb_function_
+00004d20: 6861 6e64 6c65 7228 290a 2020 2020 6465  handler().    de
+00004d30: 6620 5f63 7265 6174 655f 6e6f 6e73 7461  f _create_nonsta
+00004d40: 636b 7570 5f6c 6179 6572 2873 656c 662c  ckup_layer(self,
+00004d50: 206c 6179 6572 5f6e 616d 652c 206c 6179   layer_name, lay
+00004d60: 6572 5f74 7970 6529 3a0a 2020 2020 2020  er_type):.      
+00004d70: 2020 6966 206c 6179 6572 5f74 7970 6520    if layer_type 
+00004d80: 3d3d 2022 636f 6e64 7563 7469 6e67 223a  == "conducting":
+00004d90: 2020 2320 7072 6167 6d61 3a20 6e6f 2063    # pragma: no c
+00004da0: 6f76 6572 0a20 2020 2020 2020 2020 2020  over.           
+00004db0: 205f 6c61 7965 725f 7479 7065 203d 2073   _layer_type = s
+00004dc0: 656c 662e 5f70 6564 622e 6564 625f 6170  elf._pedb.edb_ap
+00004dd0: 692e 6365 6c6c 2e6c 6179 6572 5f74 7970  i.cell.layer_typ
+00004de0: 652e 436f 6e64 7563 7469 6e67 4c61 7965  e.ConductingLaye
+00004df0: 720a 2020 2020 2020 2020 656c 6966 206c  r.        elif l
+00004e00: 6179 6572 5f74 7970 6520 3d3d 2022 6169  ayer_type == "ai
+00004e10: 726c 696e 6573 223a 2020 2320 7072 6167  rlines":  # prag
+00004e20: 6d61 3a20 6e6f 2063 6f76 6572 0a20 2020  ma: no cover.   
+00004e30: 2020 2020 2020 2020 205f 6c61 7965 725f           _layer_
+00004e40: 7479 7065 203d 2073 656c 662e 5f70 6564  type = self._ped
+00004e50: 622e 6564 625f 6170 692e 6365 6c6c 2e6c  b.edb_api.cell.l
+00004e60: 6179 6572 5f74 7970 652e 4169 726c 696e  ayer_type.Airlin
+00004e70: 6573 4c61 7965 720a 2020 2020 2020 2020  esLayer.        
+00004e80: 656c 6966 206c 6179 6572 5f74 7970 6520  elif layer_type 
+00004e90: 3d3d 2022 6572 726f 7222 3a20 2023 2070  == "error":  # p
+00004ea0: 7261 676d 613a 206e 6f20 636f 7665 720a  ragma: no cover.
+00004eb0: 2020 2020 2020 2020 2020 2020 5f6c 6179              _lay
+00004ec0: 6572 5f74 7970 6520 3d20 7365 6c66 2e5f  er_type = self._
+00004ed0: 7065 6462 2e65 6462 5f61 7069 2e63 656c  pedb.edb_api.cel
+00004ee0: 6c2e 6c61 7965 725f 7479 7065 2e45 7272  l.layer_type.Err
+00004ef0: 6f72 734c 6179 6572 0a20 2020 2020 2020  orsLayer.       
+00004f00: 2065 6c69 6620 6c61 7965 725f 7479 7065   elif layer_type
+00004f10: 203d 3d20 2273 796d 626f 6c22 3a20 2023   == "symbol":  #
+00004f20: 2070 7261 676d 613a 206e 6f20 636f 7665   pragma: no cove
+00004f30: 720a 2020 2020 2020 2020 2020 2020 5f6c  r.            _l
+00004f40: 6179 6572 5f74 7970 6520 3d20 7365 6c66  ayer_type = self
+00004f50: 2e5f 7065 6462 2e65 6462 5f61 7069 2e63  ._pedb.edb_api.c
+00004f60: 656c 6c2e 6c61 7965 725f 7479 7065 2e53  ell.layer_type.S
+00004f70: 796d 626f 6c4c 6179 6572 0a20 2020 2020  ymbolLayer.     
+00004f80: 2020 2065 6c69 6620 6c61 7965 725f 7479     elif layer_ty
+00004f90: 7065 203d 3d20 226d 6561 7375 7265 223a  pe == "measure":
+00004fa0: 2020 2320 7072 6167 6d61 3a20 6e6f 2063    # pragma: no c
+00004fb0: 6f76 6572 0a20 2020 2020 2020 2020 2020  over.           
+00004fc0: 205f 6c61 7965 725f 7479 7065 203d 2073   _layer_type = s
+00004fd0: 656c 662e 5f70 6564 622e 6564 625f 6170  elf._pedb.edb_ap
+00004fe0: 692e 6365 6c6c 2e6c 6179 6572 5f74 7970  i.cell.layer_typ
+00004ff0: 652e 4d65 6173 7572 654c 6179 6572 0a20  e.MeasureLayer. 
+00005000: 2020 2020 2020 2065 6c69 6620 6c61 7965         elif laye
+00005010: 725f 7479 7065 203d 3d20 2261 7373 656d  r_type == "assem
+00005020: 626c 7922 3a20 2023 2070 7261 676d 613a  bly":  # pragma:
+00005030: 206e 6f20 636f 7665 720a 2020 2020 2020   no cover.      
+00005040: 2020 2020 2020 5f6c 6179 6572 5f74 7970        _layer_typ
+00005050: 6520 3d20 7365 6c66 2e5f 7065 6462 2e65  e = self._pedb.e
+00005060: 6462 5f61 7069 2e63 656c 6c2e 6c61 7965  db_api.cell.laye
+00005070: 725f 7479 7065 2e41 7373 656d 626c 794c  r_type.AssemblyL
+00005080: 6179 6572 0a20 2020 2020 2020 2065 6c69  ayer.        eli
+00005090: 6620 6c61 7965 725f 7479 7065 203d 3d20  f layer_type == 
+000050a0: 2273 696c 6b73 6372 6565 6e22 3a20 2023  "silkscreen":  #
+000050b0: 2070 7261 676d 613a 206e 6f20 636f 7665   pragma: no cove
+000050c0: 720a 2020 2020 2020 2020 2020 2020 5f6c  r.            _l
+000050d0: 6179 6572 5f74 7970 6520 3d20 7365 6c66  ayer_type = self
+000050e0: 2e5f 7065 6462 2e65 6462 5f61 7069 2e63  ._pedb.edb_api.c
+000050f0: 656c 6c2e 6c61 7965 725f 7479 7065 2e53  ell.layer_type.S
+00005100: 696c 6b73 6372 6565 6e4c 6179 6572 0a20  ilkscreenLayer. 
+00005110: 2020 2020 2020 2065 6c69 6620 6c61 7965         elif laye
+00005120: 725f 7479 7065 203d 3d20 2273 6f6c 6465  r_type == "solde
+00005130: 726d 6173 6b22 3a20 2023 2070 7261 676d  rmask":  # pragm
+00005140: 613a 206e 6f20 636f 7665 720a 2020 2020  a: no cover.    
+00005150: 2020 2020 2020 2020 5f6c 6179 6572 5f74          _layer_t
+00005160: 7970 6520 3d20 7365 6c66 2e5f 7065 6462  ype = self._pedb
+00005170: 2e65 6462 5f61 7069 2e63 656c 6c2e 6c61  .edb_api.cell.la
+00005180: 7965 725f 7479 7065 2e53 6f6c 6465 724d  yer_type.SolderM
+00005190: 6173 6b4c 6179 6572 0a20 2020 2020 2020  askLayer.       
+000051a0: 2065 6c69 6620 6c61 7965 725f 7479 7065   elif layer_type
+000051b0: 203d 3d20 2273 6f6c 6465 7270 6173 7465   == "solderpaste
+000051c0: 223a 2020 2320 7072 6167 6d61 3a20 6e6f  ":  # pragma: no
+000051d0: 2063 6f76 6572 0a20 2020 2020 2020 2020   cover.         
+000051e0: 2020 205f 6c61 7965 725f 7479 7065 203d     _layer_type =
+000051f0: 2073 656c 662e 5f70 6564 622e 6564 625f   self._pedb.edb_
+00005200: 6170 692e 6365 6c6c 2e6c 6179 6572 5f74  api.cell.layer_t
+00005210: 7970 652e 536f 6c64 6572 5061 7374 654c  ype.SolderPasteL
+00005220: 6179 6572 0a20 2020 2020 2020 2065 6c69  ayer.        eli
+00005230: 6620 6c61 7965 725f 7479 7065 203d 3d20  f layer_type == 
+00005240: 2267 6c75 6522 3a20 2023 2070 7261 676d  "glue":  # pragm
+00005250: 613a 206e 6f20 636f 7665 720a 2020 2020  a: no cover.    
+00005260: 2020 2020 2020 2020 5f6c 6179 6572 5f74          _layer_t
+00005270: 7970 6520 3d20 7365 6c66 2e5f 7065 6462  ype = self._pedb
+00005280: 2e65 6462 5f61 7069 2e63 656c 6c2e 6c61  .edb_api.cell.la
+00005290: 7965 725f 7479 7065 2e47 6c75 654c 6179  yer_type.GlueLay
+000052a0: 6572 0a20 2020 2020 2020 2065 6c69 6620  er.        elif 
+000052b0: 6c61 7965 725f 7479 7065 203d 3d20 2277  layer_type == "w
+000052c0: 6972 6562 6f6e 6422 3a20 2023 2070 7261  irebond":  # pra
+000052d0: 676d 613a 206e 6f20 636f 7665 720a 2020  gma: no cover.  
+000052e0: 2020 2020 2020 2020 2020 5f6c 6179 6572            _layer
+000052f0: 5f74 7970 6520 3d20 7365 6c66 2e5f 7065  _type = self._pe
+00005300: 6462 2e65 6462 5f61 7069 2e63 656c 6c2e  db.edb_api.cell.
+00005310: 6c61 7965 725f 7479 7065 2e57 6972 6562  layer_type.Wireb
+00005320: 6f6e 644c 6179 6572 0a20 2020 2020 2020  ondLayer.       
+00005330: 2065 6c69 6620 6c61 7965 725f 7479 7065   elif layer_type
+00005340: 203d 3d20 2275 7365 7222 3a20 2023 2070   == "user":  # p
+00005350: 7261 676d 613a 206e 6f20 636f 7665 720a  ragma: no cover.
+00005360: 2020 2020 2020 2020 2020 2020 5f6c 6179              _lay
+00005370: 6572 5f74 7970 6520 3d20 7365 6c66 2e5f  er_type = self._
+00005380: 7065 6462 2e65 6462 5f61 7069 2e63 656c  pedb.edb_api.cel
+00005390: 6c2e 6c61 7965 725f 7479 7065 2e55 7365  l.layer_type.Use
+000053a0: 724c 6179 6572 0a20 2020 2020 2020 2065  rLayer.        e
+000053b0: 6c69 6620 6c61 7965 725f 7479 7065 203d  lif layer_type =
+000053c0: 3d20 2273 6977 6176 6568 6673 7373 6f6c  = "siwavehfsssol
+000053d0: 7665 7272 6567 696f 6e73 223a 2020 2320  verregions":  # 
+000053e0: 7072 6167 6d61 3a20 6e6f 2063 6f76 6572  pragma: no cover
+000053f0: 0a20 2020 2020 2020 2020 2020 205f 6c61  .            _la
+00005400: 7965 725f 7479 7065 203d 2073 656c 662e  yer_type = self.
+00005410: 5f70 6564 622e 6564 625f 6170 692e 6365  _pedb.edb_api.ce
+00005420: 6c6c 2e6c 6179 6572 5f74 7970 652e 5349  ll.layer_type.SI
+00005430: 7761 7665 4846 5353 536f 6c76 6572 5265  waveHFSSSolverRe
+00005440: 6769 6f6e 730a 2020 2020 2020 2020 656c  gions.        el
+00005450: 6966 206c 6179 6572 5f74 7970 6520 3d3d  if layer_type ==
+00005460: 2022 6f75 746c 696e 6522 3a20 2023 2070   "outline":  # p
+00005470: 7261 676d 613a 206e 6f20 636f 7665 720a  ragma: no cover.
+00005480: 2020 2020 2020 2020 2020 2020 5f6c 6179              _lay
+00005490: 6572 5f74 7970 6520 3d20 7365 6c66 2e5f  er_type = self._
+000054a0: 7065 6462 2e65 6462 5f61 7069 2e63 656c  pedb.edb_api.cel
+000054b0: 6c2e 6c61 7965 725f 7479 7065 2e4f 7574  l.layer_type.Out
+000054c0: 6c69 6e65 4c61 7965 720a 2020 2020 2020  lineLayer.      
+000054d0: 2020 656c 6966 206c 6179 6572 5f74 7970    elif layer_typ
+000054e0: 6520 3d3d 2022 706f 7374 7072 6f63 6573  e == "postproces
+000054f0: 7369 6e67 223a 2020 2320 7072 6167 6d61  sing":  # pragma
+00005500: 3a20 6e6f 2063 6f76 6572 0a20 2020 2020  : no cover.     
+00005510: 2020 2020 2020 205f 6c61 7965 725f 7479         _layer_ty
+00005520: 7065 203d 2073 656c 662e 5f70 6564 622e  pe = self._pedb.
+00005530: 6564 625f 6170 692e 6365 6c6c 2e6c 6179  edb_api.cell.lay
+00005540: 6572 5f74 7970 652e 506f 7374 7072 6f63  er_type.Postproc
+00005550: 6573 7369 6e67 4c61 7965 720a 2020 2020  essingLayer.    
+00005560: 2020 2020 656c 7365 3a20 2023 2070 7261      else:  # pra
+00005570: 676d 613a 206e 6f20 636f 7665 720a 2020  gma: no cover.  
+00005580: 2020 2020 2020 2020 2020 5f6c 6179 6572            _layer
+00005590: 5f74 7970 6520 3d20 7365 6c66 2e5f 7065  _type = self._pe
+000055a0: 6462 2e65 6462 5f61 7069 2e63 656c 6c2e  db.edb_api.cell.
+000055b0: 6c61 7965 725f 7479 7065 2e55 6e64 6566  layer_type.Undef
+000055c0: 696e 6564 4c61 7965 7254 7970 650a 0a20  inedLayerType.. 
+000055d0: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
+000055e0: 7365 6c66 2e5f 7065 6462 2e65 6462 5f61  self._pedb.edb_a
+000055f0: 7069 2e63 656c 6c2e 6c61 7965 7228 6c61  pi.cell.layer(la
+00005600: 7965 725f 6e61 6d65 2c20 5f6c 6179 6572  yer_name, _layer
+00005610: 5f74 7970 6529 0a20 2020 2020 2020 2073  _type).        s
+00005620: 656c 662e 7265 6672 6573 685f 6c61 7965  elf.refresh_laye
+00005630: 725f 636f 6c6c 6563 7469 6f6e 2829 0a20  r_collection(). 
+00005640: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
+00005650: 7375 6c74 0a0a 2020 2020 4070 7965 6462  sult..    @pyedb
+00005660: 5f66 756e 6374 696f 6e5f 6861 6e64 6c65  _function_handle
+00005670: 7228 290a 2020 2020 6465 6620 6164 645f  r().    def add_
+00005680: 6f75 746c 696e 655f 6c61 7965 7228 7365  outline_layer(se
+00005690: 6c66 2c20 6f75 746c 696e 655f 6e61 6d65  lf, outline_name
+000056a0: 3d22 4f75 746c 696e 6522 293a 0a20 2020  ="Outline"):.   
+000056b0: 2020 2020 2022 2222 4164 6420 616e 206f       """Add an o
+000056c0: 7574 6c69 6e65 206c 6179 6572 206e 616d  utline layer nam
+000056d0: 6564 2060 6022 4f75 746c 696e 6522 6060  ed ``"Outline"``
+000056e0: 2069 6620 6974 2069 7320 6e6f 7420 7072   if it is not pr
+000056f0: 6573 656e 742e 0a0a 2020 2020 2020 2020  esent...        
+00005700: 5265 7475 726e 730a 2020 2020 2020 2020  Returns.        
+00005710: 2d2d 2d2d 2d2d 2d0a 2020 2020 2020 2020  -------.        
+00005720: 626f 6f6c 0a20 2020 2020 2020 2020 2020  bool.           
+00005730: 2022 5472 7565 2220 6966 2073 7563 6365   "True" if succe
+00005740: 7373 6675 6c2c 2060 6046 616c 7365 6060  ssful, ``False``
+00005750: 2069 6620 6661 696c 6564 2e0a 2020 2020   if failed..    
+00005760: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00005770: 6f75 746c 696e 654c 6179 6572 203d 2073  outlineLayer = s
+00005780: 656c 662e 5f70 6564 622e 6564 625f 6170  elf._pedb.edb_ap
+00005790: 692e 6365 6c6c 2e6c 6179 6572 2e46 696e  i.cell.layer.Fin
+000057a0: 6442 794e 616d 6528 7365 6c66 2e5f 7065  dByName(self._pe
+000057b0: 6462 2e6c 6179 6f75 742e 6c61 7965 725f  db.layout.layer_
+000057c0: 636f 6c6c 6563 7469 6f6e 2c20 6f75 746c  collection, outl
+000057d0: 696e 655f 6e61 6d65 290a 2020 2020 2020  ine_name).      
+000057e0: 2020 6966 206f 7574 6c69 6e65 4c61 7965    if outlineLaye
+000057f0: 722e 4973 4e75 6c6c 2829 3a0a 2020 2020  r.IsNull():.    
+00005800: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00005810: 656c 662e 6164 645f 6c61 7965 7228 0a20  elf.add_layer(. 
+00005820: 2020 2020 2020 2020 2020 2020 2020 206f                 o
+00005830: 7574 6c69 6e65 5f6e 616d 652c 0a20 2020  utline_name,.   
+00005840: 2020 2020 2020 2020 2020 2020 206c 6179               lay
+00005850: 6572 5f74 7970 653d 226f 7574 6c69 6e65  er_type="outline
+00005860: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
+00005870: 2020 206d 6174 6572 6961 6c3d 2222 2c0a     material="",.
+00005880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005890: 6669 6c6c 4d61 7465 7269 616c 3d22 222c  fillMaterial="",
+000058a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000058b0: 2074 6869 636b 6e65 7373 3d22 222c 0a20   thickness="",. 
+000058c0: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+000058d0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+000058e0: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
+000058f0: 6c73 650a 0a20 2020 2023 2054 4f44 4f3a  lse..    # TODO:
+00005900: 2055 7064 6174 6520 6f70 7469 6f6e 616c   Update optional
+00005910: 2061 7267 756d 656e 7420 6d61 7465 7269   argument materi
+00005920: 616c 2069 6e74 6f20 6d61 7465 7269 616c  al into material
+00005930: 5f6e 616d 6520 616e 6420 6669 6c6c 4d61  _name and fillMa
+00005940: 7465 7269 616c 2069 6e74 6f20 6669 6c6c  terial into fill
+00005950: 5f6d 6174 6572 6961 6c5f 6e61 6d65 0a20  _material_name. 
+00005960: 2020 2040 7079 6564 625f 6675 6e63 7469     @pyedb_functi
+00005970: 6f6e 5f68 616e 646c 6572 2829 0a20 2020  on_handler().   
+00005980: 2064 6566 2061 6464 5f6c 6179 6572 280a   def add_layer(.
+00005990: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
+000059a0: 2020 2020 2020 6c61 7965 725f 6e61 6d65        layer_name
+000059b0: 2c0a 2020 2020 2020 2020 6261 7365 5f6c  ,.        base_l
+000059c0: 6179 6572 3d4e 6f6e 652c 0a20 2020 2020  ayer=None,.     
+000059d0: 2020 206d 6574 686f 643d 2261 6464 5f6f     method="add_o
+000059e0: 6e5f 746f 7022 2c0a 2020 2020 2020 2020  n_top",.        
+000059f0: 6c61 7965 725f 7479 7065 3d22 7369 676e  layer_type="sign
+00005a00: 616c 222c 0a20 2020 2020 2020 206d 6174  al",.        mat
+00005a10: 6572 6961 6c3d 2263 6f70 7065 7222 2c0a  erial="copper",.
+00005a20: 2020 2020 2020 2020 6669 6c6c 4d61 7465          fillMate
+00005a30: 7269 616c 3d22 4652 345f 6570 6f78 7922  rial="FR4_epoxy"
+00005a40: 2c0a 2020 2020 2020 2020 7468 6963 6b6e  ,.        thickn
+00005a50: 6573 733d 2233 3575 6d22 2c0a 2020 2020  ess="35um",.    
+00005a60: 2020 2020 6574 6368 5f66 6163 746f 723d      etch_factor=
+00005a70: 4e6f 6e65 2c0a 2020 2020 2020 2020 6973  None,.        is
+00005a80: 5f6e 6567 6174 6976 653d 4661 6c73 652c  _negative=False,
+00005a90: 0a20 2020 2020 2020 2065 6e61 626c 655f  .        enable_
+00005aa0: 726f 7567 686e 6573 733d 4661 6c73 652c  roughness=False,
+00005ab0: 0a20 2020 2020 2020 2065 6c65 7661 7469  .        elevati
+00005ac0: 6f6e 3d4e 6f6e 652c 0a20 2020 2029 3a0a  on=None,.    ):.
+00005ad0: 2020 2020 2020 2020 2222 2249 6e73 6572          """Inser
+00005ae0: 7420 6120 6c61 7965 7220 696e 746f 2073  t a layer into s
+00005af0: 7461 636b 7570 2e0a 0a20 2020 2020 2020  tackup...       
+00005b00: 2050 6172 616d 6574 6572 730a 2020 2020   Parameters.    
+00005b10: 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0a20      ----------. 
+00005b20: 2020 2020 2020 206c 6179 6572 5f6e 616d         layer_nam
+00005b30: 6520 3a20 7374 720a 2020 2020 2020 2020  e : str.        
+00005b40: 2020 2020 4e61 6d65 206f 6620 7468 6520      Name of the 
+00005b50: 6c61 7965 722e 0a20 2020 2020 2020 2062  layer..        b
+00005b60: 6173 655f 6c61 7965 7220 3a20 7374 722c  ase_layer : str,
+00005b70: 206f 7074 696f 6e61 6c0a 2020 2020 2020   optional.      
+00005b80: 2020 2020 2020 4e61 6d65 206f 6620 7468        Name of th
+00005b90: 6520 6261 7365 206c 6179 6572 2e0a 2020  e base layer..  
+00005ba0: 2020 2020 2020 6d65 7468 6f64 203a 2073        method : s
+00005bb0: 7472 2c20 6f70 7469 6f6e 616c 0a20 2020  tr, optional.   
+00005bc0: 2020 2020 2020 2020 2057 6865 7265 2074           Where t
+00005bd0: 6f20 696e 7365 7274 2074 6865 206e 6577  o insert the new
+00005be0: 206c 6179 6572 2e20 5468 6520 6465 6661   layer. The defa
+00005bf0: 756c 7420 6973 2060 6022 6164 645f 6f6e  ult is ``"add_on
+00005c00: 5f74 6f70 2260 602e 204f 7074 696f 6e73  _top"``. Options
+00005c10: 2061 7265 2060 6022 6164 645f 6f6e 5f74   are ``"add_on_t
+00005c20: 6f70 2260 602c 0a20 2020 2020 2020 2020  op"``,.         
+00005c30: 2020 2060 6022 6164 645f 6f6e 5f62 6f74     ``"add_on_bot
+00005c40: 746f 6d22 6060 2c20 6060 2269 6e73 6572  tom"``, ``"inser
+00005c50: 745f 6162 6f76 6522 6060 2c20 6060 2269  t_above"``, ``"i
+00005c60: 6e73 6572 745f 6265 6c6f 7722 6060 2c20  nsert_below"``, 
+00005c70: 6060 2261 6464 5f61 745f 656c 6576 6174  ``"add_at_elevat
+00005c80: 696f 6e22 6060 2c2e 0a20 2020 2020 2020  ion"``,..       
+00005c90: 206c 6179 6572 5f74 7970 6520 3a20 7374   layer_type : st
+00005ca0: 722c 206f 7074 696f 6e61 6c0a 2020 2020  r, optional.    
+00005cb0: 2020 2020 2020 2020 5479 7065 206f 6620          Type of 
+00005cc0: 6c61 7965 722e 2054 6865 2064 6566 6175  layer. The defau
+00005cd0: 6c74 2069 7320 6060 2273 6967 6e61 6c22  lt is ``"signal"
+00005ce0: 6060 2e20 4f70 7469 6f6e 7320 6172 6520  ``. Options are 
+00005cf0: 6060 2273 6967 6e61 6c22 6060 2c20 6060  ``"signal"``, ``
+00005d00: 2264 6965 6c65 6374 7269 6322 6060 2c20  "dielectric"``, 
+00005d10: 6060 2263 6f6e 6475 6374 696e 6722 6060  ``"conducting"``
+00005d20: 2c0a 2020 2020 2020 2020 2020 2020 2060  ,.             `
+00005d30: 6022 6169 725f 6c69 6e65 7322 6060 2c20  `"air_lines"``, 
+00005d40: 6060 2265 7272 6f72 2260 602c 2060 6022  ``"error"``, ``"
+00005d50: 7379 6d62 6f6c 2260 602c 2060 6022 6d65  symbol"``, ``"me
+00005d60: 6173 7572 6522 6060 2c20 6060 2261 7373  asure"``, ``"ass
+00005d70: 656d 626c 7922 6060 2c20 6060 2273 696c  embly"``, ``"sil
+00005d80: 6b73 6372 6565 6e22 6060 2c0a 2020 2020  kscreen"``,.    
+00005d90: 2020 2020 2020 2020 2060 6022 736f 6c64           ``"sold
+00005da0: 6572 5f6d 6173 6b22 6060 2c20 6060 2273  er_mask"``, ``"s
+00005db0: 6f6c 6465 725f 7061 7374 6522 6060 2c20  older_paste"``, 
+00005dc0: 6060 2267 6c75 6522 6060 2c20 6060 2277  ``"glue"``, ``"w
+00005dd0: 6972 6562 6f6e 6422 6060 2c20 6060 2268  irebond"``, ``"h
+00005de0: 6673 735f 7265 6769 6f6e 2260 602c 2060  fss_region"``, `
+00005df0: 6022 7573 6572 2260 602e 0a20 2020 2020  `"user"``..     
+00005e00: 2020 206d 6174 6572 6961 6c20 3a20 7374     material : st
+00005e10: 722c 206f 7074 696f 6e61 6c0a 2020 2020  r, optional.    
+00005e20: 2020 2020 2020 2020 4d61 7465 7269 616c          Material
+00005e30: 206f 6620 7468 6520 6c61 7965 722e 0a20   of the layer.. 
+00005e40: 2020 2020 2020 2066 696c 6c4d 6174 6572         fillMater
+00005e50: 6961 6c20 3a20 7374 722c 206f 7074 696f  ial : str, optio
+00005e60: 6e61 6c0a 2020 2020 2020 2020 2020 2020  nal.            
+00005e70: 4669 6c6c 206d 6174 6572 6961 6c20 6f66  Fill material of
+00005e80: 2074 6865 206c 6179 6572 2e0a 2020 2020   the layer..    
+00005e90: 2020 2020 7468 6963 6b6e 6573 7320 3a20      thickness : 
+00005ea0: 7374 722c 2066 6c6f 6174 2c20 6f70 7469  str, float, opti
+00005eb0: 6f6e 616c 0a20 2020 2020 2020 2020 2020  onal.           
+00005ec0: 2054 6869 636b 6e65 7373 206f 6620 7468   Thickness of th
+00005ed0: 6520 6c61 7965 722e 0a20 2020 2020 2020  e layer..       
+00005ee0: 2065 7463 685f 6661 6374 6f72 203a 2069   etch_factor : i
+00005ef0: 6e74 2c20 666c 6f61 742c 206f 7074 696f  nt, float, optio
+00005f00: 6e61 6c0a 2020 2020 2020 2020 2020 2020  nal.            
+00005f10: 4574 6368 2066 6163 746f 7220 6f66 2074  Etch factor of t
+00005f20: 6865 206c 6179 6572 2e0a 2020 2020 2020  he layer..      
+00005f30: 2020 6973 5f6e 6567 6174 6976 6520 3a20    is_negative : 
+00005f40: 626f 6f6c 2c20 6f70 7469 6f6e 616c 0a20  bool, optional. 
+00005f50: 2020 2020 2020 2020 2020 2057 6865 7468             Wheth
+00005f60: 6572 2074 6865 206c 6179 6572 2069 7320  er the layer is 
+00005f70: 6e65 6761 7469 7665 2e0a 2020 2020 2020  negative..      
+00005f80: 2020 656e 6162 6c65 5f72 6f75 6768 6e65    enable_roughne
+00005f90: 7373 203a 2062 6f6f 6c2c 206f 7074 696f  ss : bool, optio
+00005fa0: 6e61 6c0a 2020 2020 2020 2020 2020 2020  nal.            
+00005fb0: 5768 6574 6865 7220 726f 7567 686e 6573  Whether roughnes
+00005fc0: 7320 6973 2065 6e61 626c 6564 2e0a 2020  s is enabled..  
+00005fd0: 2020 2020 2020 656c 6576 6174 696f 6e20        elevation 
+00005fe0: 3a20 666c 6f61 742c 206f 7074 696f 6e61  : float, optiona
+00005ff0: 6c0a 2020 2020 2020 2020 2020 2020 456c  l.            El
+00006000: 6576 6174 696f 6e20 6f66 206e 6577 206c  evation of new l
+00006010: 6179 6572 2e20 4f6e 6c79 2076 616c 6964  ayer. Only valid
+00006020: 2066 6f72 204f 7665 726c 6170 7069 6e67   for Overlapping
+00006030: 2053 7461 636b 7570 2e0a 0a20 2020 2020   Stackup...     
+00006040: 2020 2052 6574 7572 6e73 0a20 2020 2020     Returns.     
+00006050: 2020 202d 2d2d 2d2d 2d2d 0a20 2020 2020     -------.     
+00006060: 2020 203a 636c 6173 733a 6070 7965 6462     :class:`pyedb
+00006070: 2e64 6f74 6e65 742e 6564 625f 636f 7265  .dotnet.edb_core
+00006080: 2e65 6462 5f64 6174 612e 6c61 7965 725f  .edb_data.layer_
+00006090: 6461 7461 2e4c 6179 6572 4564 6243 6c61  data.LayerEdbCla
+000060a0: 7373 600a 2020 2020 2020 2020 2222 220a  ss`.        """.
+000060b0: 2020 2020 2020 2020 6966 206c 6179 6572          if layer
+000060c0: 5f6e 616d 6520 696e 2073 656c 662e 6c61  _name in self.la
+000060d0: 7965 7273 3a0a 2020 2020 2020 2020 2020  yers:.          
+000060e0: 2020 6c6f 6767 6572 2e65 7272 6f72 2822    logger.error("
+000060f0: 6c61 7965 7220 7b7d 2065 7869 7374 732e  layer {} exists.
+00006100: 222e 666f 726d 6174 286c 6179 6572 5f6e  ".format(layer_n
+00006110: 616d 6529 290a 2020 2020 2020 2020 2020  ame)).          
+00006120: 2020 7265 7475 726e 2046 616c 7365 0a20    return False. 
+00006130: 2020 2020 2020 2069 6620 6e6f 7420 6d61         if not ma
+00006140: 7465 7269 616c 3a0a 2020 2020 2020 2020  terial:.        
+00006150: 2020 2020 6d61 7465 7269 616c 203d 2022      material = "
+00006160: 636f 7070 6572 2220 6966 206c 6179 6572  copper" if layer
+00006170: 5f74 7970 6520 3d3d 2022 7369 676e 616c  _type == "signal
+00006180: 2220 656c 7365 2022 4652 345f 6570 6f78  " else "FR4_epox
+00006190: 7922 0a20 2020 2020 2020 2069 6620 6e6f  y".        if no
+000061a0: 7420 6669 6c6c 4d61 7465 7269 616c 3a0a  t fillMaterial:.
+000061b0: 2020 2020 2020 2020 2020 2020 6669 6c6c              fill
+000061c0: 4d61 7465 7269 616c 203d 2022 4652 345f  Material = "FR4_
+000061d0: 6570 6f78 7922 0a0a 2020 2020 2020 2020  epoxy"..        
+000061e0: 6d61 7465 7269 616c 7320 3d20 7365 6c66  materials = self
+000061f0: 2e5f 7065 6462 2e6d 6174 6572 6961 6c73  ._pedb.materials
+00006200: 0a20 2020 2020 2020 2069 6620 6d61 7465  .        if mate
+00006210: 7269 616c 206e 6f74 2069 6e20 6d61 7465  rial not in mate
+00006220: 7269 616c 733a 0a20 2020 2020 2020 2020  rials:.         
+00006230: 2020 206c 6f67 6765 722e 7761 726e 696e     logger.warnin
+00006240: 6728 0a20 2020 2020 2020 2020 2020 2020  g(.             
+00006250: 2020 2066 224d 6174 6572 6961 6c20 277b     f"Material '{
+00006260: 6d61 7465 7269 616c 7d27 2064 6f65 7320  material}' does 
+00006270: 6e6f 7420 6578 6973 7420 696e 206d 6174  not exist in mat
+00006280: 6572 6961 6c20 6c69 6272 6172 792e 2049  erial library. I
+00006290: 6e74 656d 7074 2074 6f20 6372 6561 7465  ntempt to create
+000062a0: 2069 7420 6672 6f6d 2073 7973 6c69 622e   it from syslib.
+000062b0: 220a 2020 2020 2020 2020 2020 2020 290a  ".            ).
+000062c0: 2020 2020 2020 2020 2020 2020 6d61 7465              mate
+000062d0: 7269 616c 5f70 726f 7065 7274 6965 7320  rial_properties 
+000062e0: 3d20 7365 6c66 2e5f 7065 6462 2e6d 6174  = self._pedb.mat
+000062f0: 6572 6961 6c73 2e72 6561 645f 7379 736c  erials.read_sysl
+00006300: 6962 5f6d 6174 6572 6961 6c28 6d61 7465  ib_material(mate
+00006310: 7269 616c 290a 2020 2020 2020 2020 2020  rial).          
+00006320: 2020 6d61 7465 7269 616c 732e 6164 645f    materials.add_
+00006330: 6d61 7465 7269 616c 286d 6174 6572 6961  material(materia
+00006340: 6c2c 202a 2a6d 6174 6572 6961 6c5f 7072  l, **material_pr
+00006350: 6f70 6572 7469 6573 290a 0a20 2020 2020  operties)..     
+00006360: 2020 2069 6620 6c61 7965 725f 7479 7065     if layer_type
+00006370: 2021 3d20 2264 6965 6c65 6374 7269 6322   != "dielectric"
+00006380: 2061 6e64 2066 696c 6c4d 6174 6572 6961   and fillMateria
+00006390: 6c20 6e6f 7420 696e 206d 6174 6572 6961  l not in materia
+000063a0: 6c73 3a0a 2020 2020 2020 2020 2020 2020  ls:.            
+000063b0: 6c6f 6767 6572 2e77 6172 6e69 6e67 280a  logger.warning(.
+000063c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000063d0: 6622 4d61 7465 7269 616c 2027 7b66 696c  f"Material '{fil
+000063e0: 6c4d 6174 6572 6961 6c7d 2720 646f 6573  lMaterial}' does
+000063f0: 206e 6f74 2065 7869 7374 2069 6e20 6d61   not exist in ma
+00006400: 7465 7269 616c 206c 6962 7261 7279 2e20  terial library. 
+00006410: 496e 7465 6d70 7420 746f 2063 7265 6174  Intempt to creat
+00006420: 6520 6974 2066 726f 6d20 7379 736c 6962  e it from syslib
+00006430: 2e22 0a20 2020 2020 2020 2020 2020 2029  .".            )
+00006440: 0a20 2020 2020 2020 2020 2020 206d 6174  .            mat
+00006450: 6572 6961 6c5f 7072 6f70 6572 7469 6573  erial_properties
+00006460: 203d 2073 656c 662e 5f70 6564 622e 6d61   = self._pedb.ma
+00006470: 7465 7269 616c 732e 7265 6164 5f73 7973  terials.read_sys
+00006480: 6c69 625f 6d61 7465 7269 616c 2866 696c  lib_material(fil
+00006490: 6c4d 6174 6572 6961 6c29 0a20 2020 2020  lMaterial).     
+000064a0: 2020 2020 2020 206d 6174 6572 6961 6c73         materials
+000064b0: 2e61 6464 5f6d 6174 6572 6961 6c28 6669  .add_material(fi
+000064c0: 6c6c 4d61 7465 7269 616c 2c20 2a2a 6d61  llMaterial, **ma
+000064d0: 7465 7269 616c 5f70 726f 7065 7274 6965  terial_propertie
+000064e0: 7329 0a0a 2020 2020 2020 2020 6966 206c  s)..        if l
+000064f0: 6179 6572 5f74 7970 6520 696e 205b 2273  ayer_type in ["s
+00006500: 6967 6e61 6c22 2c20 2264 6965 6c65 6374  ignal", "dielect
+00006510: 7269 6322 5d3a 0a20 2020 2020 2020 2020  ric"]:.         
+00006520: 2020 206e 6577 5f6c 6179 6572 203d 2073     new_layer = s
+00006530: 656c 662e 5f63 7265 6174 655f 7374 6163  elf._create_stac
+00006540: 6b75 705f 6c61 7965 7228 6c61 7965 725f  kup_layer(layer_
+00006550: 6e61 6d65 2c20 7468 6963 6b6e 6573 732c  name, thickness,
+00006560: 206c 6179 6572 5f74 7970 6529 0a20 2020   layer_type).   
+00006570: 2020 2020 2020 2020 206e 6577 5f6c 6179           new_lay
+00006580: 6572 2e53 6574 4d61 7465 7269 616c 286d  er.SetMaterial(m
+00006590: 6174 6572 6961 6c29 0a20 2020 2020 2020  aterial).       
+000065a0: 2020 2020 2069 6620 6c61 7965 725f 7479       if layer_ty
+000065b0: 7065 2021 3d20 2264 6965 6c65 6374 7269  pe != "dielectri
+000065c0: 6322 3a0a 2020 2020 2020 2020 2020 2020  c":.            
+000065d0: 2020 2020 6e65 775f 6c61 7965 722e 5365      new_layer.Se
+000065e0: 7446 696c 6c4d 6174 6572 6961 6c28 6669  tFillMaterial(fi
+000065f0: 6c6c 4d61 7465 7269 616c 290a 2020 2020  llMaterial).    
+00006600: 2020 2020 2020 2020 6e65 775f 6c61 7965          new_laye
+00006610: 722e 5365 744e 6567 6174 6976 6528 6973  r.SetNegative(is
+00006620: 5f6e 6567 6174 6976 6529 0a20 2020 2020  _negative).     
+00006630: 2020 2020 2020 206c 3120 3d20 6c65 6e28         l1 = len(
+00006640: 7365 6c66 2e6c 6179 6572 7329 0a20 2020  self.layers).   
+00006650: 2020 2020 2020 2020 2069 6620 6d65 7468           if meth
+00006660: 6f64 203d 3d20 2261 6464 5f61 745f 656c  od == "add_at_el
+00006670: 6576 6174 696f 6e22 2061 6e64 2065 6c65  evation" and ele
+00006680: 7661 7469 6f6e 3a0a 2020 2020 2020 2020  vation:.        
+00006690: 2020 2020 2020 2020 6e65 775f 6c61 7965          new_laye
+000066a0: 722e 5365 744c 6f77 6572 456c 6576 6174  r.SetLowerElevat
+000066b0: 696f 6e28 7365 6c66 2e5f 7065 6462 2e65  ion(self._pedb.e
+000066c0: 6462 5f76 616c 7565 2865 6c65 7661 7469  db_value(elevati
+000066d0: 6f6e 2929 0a20 2020 2020 2020 2020 2020  on)).           
+000066e0: 2073 656c 662e 5f73 6574 5f6c 6179 6f75   self._set_layou
+000066f0: 745f 7374 6163 6b75 7028 6e65 775f 6c61  t_stackup(new_la
+00006700: 7965 722c 206d 6574 686f 642c 2062 6173  yer, method, bas
+00006710: 655f 6c61 7965 7229 0a20 2020 2020 2020  e_layer).       
+00006720: 2020 2020 2069 6620 6c65 6e28 7365 6c66       if len(self
+00006730: 2e6c 6179 6572 7329 203d 3d20 6c31 3a0a  .layers) == l1:.
+00006740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006750: 7365 6c66 2e5f 7365 745f 6c61 796f 7574  self._set_layout
+00006760: 5f73 7461 636b 7570 286e 6577 5f6c 6179  _stackup(new_lay
+00006770: 6572 2c20 6d65 7468 6f64 2c20 6261 7365  er, method, base
+00006780: 5f6c 6179 6572 2c20 6d65 7468 6f64 3d32  _layer, method=2
+00006790: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+000067a0: 2065 7463 685f 6661 6374 6f72 3a0a 2020   etch_factor:.  
+000067b0: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
+000067c0: 775f 6c61 7965 7220 3d20 7365 6c66 2e6c  w_layer = self.l
+000067d0: 6179 6572 735b 6c61 7965 725f 6e61 6d65  ayers[layer_name
+000067e0: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+000067f0: 2020 6e65 775f 6c61 7965 722e 6574 6368    new_layer.etch
+00006800: 5f66 6163 746f 7220 3d20 6574 6368 5f66  _factor = etch_f
+00006810: 6163 746f 720a 2020 2020 2020 2020 2020  actor.          
+00006820: 2020 6966 2065 6e61 626c 655f 726f 7567    if enable_roug
+00006830: 686e 6573 733a 0a20 2020 2020 2020 2020  hness:.         
+00006840: 2020 2020 2020 206e 6577 5f6c 6179 6572         new_layer
+00006850: 203d 2073 656c 662e 6c61 7965 7273 5b6c   = self.layers[l
+00006860: 6179 6572 5f6e 616d 655d 0a20 2020 2020  ayer_name].     
+00006870: 2020 2020 2020 2020 2020 206e 6577 5f6c             new_l
+00006880: 6179 6572 2e72 6f75 6768 6e65 7373 5f65  ayer.roughness_e
+00006890: 6e61 626c 6564 203d 2054 7275 650a 2020  nabled = True.  
+000068a0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+000068b0: 2020 2020 2020 2020 6e65 775f 6c61 7965          new_laye
+000068c0: 7220 3d20 7365 6c66 2e5f 6372 6561 7465  r = self._create
+000068d0: 5f6e 6f6e 7374 6163 6b75 705f 6c61 7965  _nonstackup_laye
+000068e0: 7228 6c61 7965 725f 6e61 6d65 2c20 6c61  r(layer_name, la
+000068f0: 7965 725f 7479 7065 290a 2020 2020 2020  yer_type).      
+00006900: 2020 2020 2020 7365 6c66 2e5f 7365 745f        self._set_
+00006910: 6c61 796f 7574 5f73 7461 636b 7570 286e  layout_stackup(n
+00006920: 6577 5f6c 6179 6572 2c20 226e 6f6e 5f73  ew_layer, "non_s
+00006930: 7461 636b 7570 2229 0a20 2020 2020 2020  tackup").       
+00006940: 2073 656c 662e 7265 6672 6573 685f 6c61   self.refresh_la
+00006950: 7965 725f 636f 6c6c 6563 7469 6f6e 2829  yer_collection()
+00006960: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00006970: 7365 6c66 2e6c 6179 6572 735b 6c61 7965  self.layers[laye
+00006980: 725f 6e61 6d65 5d0a 0a20 2020 2064 6566  r_name]..    def
+00006990: 2072 656d 6f76 655f 6c61 7965 7228 7365   remove_layer(se
+000069a0: 6c66 2c20 6e61 6d65 293a 0a20 2020 2020  lf, name):.     
+000069b0: 2020 2022 2222 5265 6d6f 7665 2061 206c     """Remove a l
+000069c0: 6179 6572 2066 726f 6d20 7374 6163 6b75  ayer from stacku
+000069d0: 702e 0a0a 2020 2020 2020 2020 5061 7261  p...        Para
+000069e0: 6d65 7465 7273 0a20 2020 2020 2020 202d  meters.        -
+000069f0: 2d2d 2d2d 2d2d 2d2d 2d0a 2020 2020 2020  ---------.      
+00006a00: 2020 6e61 6d65 203a 2073 7472 0a20 2020    name : str.   
+00006a10: 2020 2020 2020 2020 204e 616d 6520 6f66           Name of
+00006a20: 2074 6865 206c 6179 6572 2074 6f20 7265   the layer to re
+00006a30: 6d6f 7665 2e0a 0a20 2020 2020 2020 2052  move...        R
+00006a40: 6574 7572 6e73 0a20 2020 2020 2020 202d  eturns.        -
+00006a50: 2d2d 2d2d 2d2d 0a0a 2020 2020 2020 2020  ------..        
+00006a60: 2222 220a 2020 2020 2020 2020 6e65 775f  """.        new_
+00006a70: 6c61 7965 725f 636f 6c6c 6563 7469 6f6e  layer_collection
+00006a80: 203d 2073 656c 662e 5f70 6564 622e 6564   = self._pedb.ed
+00006a90: 625f 6170 692e 4365 6c6c 2e4c 6179 6572  b_api.Cell.Layer
+00006aa0: 436f 6c6c 6563 7469 6f6e 2829 0a20 2020  Collection().   
+00006ab0: 2020 2020 2066 6f72 206c 7972 2069 6e20       for lyr in 
+00006ac0: 7365 6c66 2e5f 6564 625f 6c61 7965 725f  self._edb_layer_
+00006ad0: 6c69 7374 3a0a 2020 2020 2020 2020 2020  list:.          
+00006ae0: 2020 6966 206e 6f74 2028 6c79 722e 4765    if not (lyr.Ge
+00006af0: 744e 616d 6528 2920 3d3d 206e 616d 6529  tName() == name)
+00006b00: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00006b10: 2020 6e65 775f 6c61 7965 725f 636f 6c6c    new_layer_coll
+00006b20: 6563 7469 6f6e 2e41 6464 4c61 7965 7242  ection.AddLayerB
+00006b30: 6f74 746f 6d28 6c79 7229 0a0a 2020 2020  ottom(lyr)..    
+00006b40: 2020 2020 7365 6c66 2e5f 7065 6462 2e6c      self._pedb.l
+00006b50: 6179 6f75 742e 6c61 7965 725f 636f 6c6c  ayout.layer_coll
+00006b60: 6563 7469 6f6e 203d 206e 6577 5f6c 6179  ection = new_lay
+00006b70: 6572 5f63 6f6c 6c65 6374 696f 6e0a 2020  er_collection.  
+00006b80: 2020 2020 2020 7365 6c66 2e72 6566 7265        self.refre
+00006b90: 7368 5f6c 6179 6572 5f63 6f6c 6c65 6374  sh_layer_collect
+00006ba0: 696f 6e28 290a 2020 2020 2020 2020 7265  ion().        re
+00006bb0: 7475 726e 2054 7275 650a 0a20 2020 2040  turn True..    @
+00006bc0: 7079 6564 625f 6675 6e63 7469 6f6e 5f68  pyedb_function_h
+00006bd0: 616e 646c 6572 2829 0a20 2020 2064 6566  andler().    def
+00006be0: 2065 7870 6f72 7428 7365 6c66 2c20 6670   export(self, fp
+00006bf0: 6174 682c 2066 696c 655f 666f 726d 6174  ath, file_format
+00006c00: 3d22 786d 6c22 2c20 696e 636c 7564 655f  ="xml", include_
+00006c10: 6d61 7465 7269 616c 5f77 6974 685f 6c61  material_with_la
+00006c20: 7965 723d 4661 6c73 6529 3a0a 2020 2020  yer=False):.    
+00006c30: 2020 2020 2222 2245 7870 6f72 7420 7374      """Export st
+00006c40: 6163 6b75 7020 6465 6669 6e69 7469 6f6e  ackup definition
+00006c50: 2074 6f20 6120 4353 5620 6f72 204a 534f   to a CSV or JSO
+00006c60: 4e20 6669 6c65 2e0a 0a20 2020 2020 2020  N file...       
+00006c70: 2050 6172 616d 6574 6572 730a 2020 2020   Parameters.    
+00006c80: 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0a20      ----------. 
+00006c90: 2020 2020 2020 2066 7061 7468 203a 2073         fpath : s
+00006ca0: 7472 0a20 2020 2020 2020 2020 2020 2046  tr.            F
+00006cb0: 696c 6520 7061 7468 2074 6f20 6373 7620  ile path to csv 
+00006cc0: 6f72 206a 736f 6e20 6669 6c65 2e0a 2020  or json file..  
+00006cd0: 2020 2020 2020 6669 6c65 5f66 6f72 6d61        file_forma
+00006ce0: 7420 3a20 7374 722c 206f 7074 696f 6e61  t : str, optiona
+00006cf0: 6c0a 2020 2020 2020 2020 2020 2020 466f  l.            Fo
+00006d00: 726d 6174 206f 6620 7468 6520 6669 6c65  rmat of the file
+00006d10: 2074 6f20 6578 706f 7274 2e20 5468 6520   to export. The 
+00006d20: 6465 6661 756c 7420 6973 2060 6022 6373  default is ``"cs
+00006d30: 7622 6060 2e20 4f70 7469 6f6e 7320 6172  v"``. Options ar
+00006d40: 6520 6060 2263 7376 2260 602c 2060 6022  e ``"csv"``, ``"
+00006d50: 786c 7378 2260 602c 0a20 2020 2020 2020  xlsx"``,.       
+00006d60: 2020 2020 2060 6022 6a73 6f6e 2260 602e       ``"json"``.
+00006d70: 0a20 2020 2020 2020 2069 6e63 6c75 6465  .        include
+00006d80: 5f6d 6174 6572 6961 6c5f 7769 7468 5f6c  _material_with_l
+00006d90: 6179 6572 203a 2062 6f6f 6c2c 206f 7074  ayer : bool, opt
+00006da0: 696f 6e61 6c2e 0a20 2020 2020 2020 2020  ional..         
+00006db0: 2020 2057 6865 7468 6572 2074 6f20 696e     Whether to in
+00006dc0: 636c 7564 6520 7468 6520 6d61 7465 7269  clude the materi
+00006dd0: 616c 2064 6566 696e 6974 696f 6e20 696e  al definition in
+00006de0: 7369 6465 206c 6179 6572 206f 6e65 732e  side layer ones.
+00006df0: 2054 6869 7320 7061 7261 6d65 7465 7220   This parameter 
+00006e00: 6973 206f 6e6c 7920 7573 6564 0a20 2020  is only used.   
+00006e10: 2020 2020 2020 2020 2077 6865 6e20 6120           when a 
+00006e20: 4a53 4f4e 2066 696c 6520 6973 2065 7870  JSON file is exp
+00006e30: 6f72 7465 642e 2054 6865 2064 6566 6175  orted. The defau
+00006e40: 6c74 2069 7320 6060 4661 6c73 6560 602c  lt is ``False``,
+00006e50: 2077 6869 6368 206b 6565 7073 2074 6865   which keeps the
+00006e60: 206d 6174 6572 6961 6c20 6465 6669 6e69   material defini
+00006e70: 7469 6f6e 0a20 2020 2020 2020 2020 2020  tion.           
+00006e80: 2073 6563 7469 6f6e 2069 6e20 7468 6520   section in the 
+00006e90: 4a53 4f4e 2066 696c 652e 2049 6620 6060  JSON file. If ``
+00006ea0: 5472 7565 6060 2c20 7468 6520 6d61 7465  True``, the mate
+00006eb0: 7269 616c 2064 6566 696e 6974 696f 6e20  rial definition 
+00006ec0: 6973 2069 6e63 6c75 6465 6420 696e 7369  is included insi
+00006ed0: 6465 2074 6865 206c 6179 6572 206f 6e65  de the layer one
+00006ee0: 732e 0a0a 2020 2020 2020 2020 4578 616d  s...        Exam
+00006ef0: 706c 6573 0a20 2020 2020 2020 202d 2d2d  ples.        ---
+00006f00: 2d2d 2d2d 2d0a 2020 2020 2020 2020 3e3e  -----.        >>
+00006f10: 3e20 6672 6f6d 2070 7965 6462 2069 6d70  > from pyedb imp
+00006f20: 6f72 7420 4564 620a 2020 2020 2020 2020  ort Edb.        
+00006f30: 3e3e 3e20 6564 6220 3d20 4564 6228 290a  >>> edb = Edb().
+00006f40: 2020 2020 2020 2020 3e3e 3e20 6564 622e          >>> edb.
+00006f50: 7374 6163 6b75 702e 6578 706f 7274 2822  stackup.export("
+00006f60: 7374 6163 6b75 702e 786d 6c22 290a 2020  stackup.xml").  
+00006f70: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00006f80: 2020 6966 206c 656e 2866 7061 7468 2e73    if len(fpath.s
+00006f90: 706c 6974 2822 2e22 2929 203d 3d20 313a  plit(".")) == 1:
+00006fa0: 0a20 2020 2020 2020 2020 2020 2066 7061  .            fpa
+00006fb0: 7468 203d 2022 7b7d 2e7b 7d22 2e66 6f72  th = "{}.{}".for
+00006fc0: 6d61 7428 6670 6174 682c 2066 696c 655f  mat(fpath, file_
+00006fd0: 666f 726d 6174 290a 0a20 2020 2020 2020  format)..       
+00006fe0: 2069 6620 6670 6174 682e 656e 6473 7769   if fpath.endswi
+00006ff0: 7468 2822 2e63 7376 2229 3a0a 2020 2020  th(".csv"):.    
+00007000: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00007010: 656c 662e 5f65 7870 6f72 745f 6c61 7965  elf._export_laye
+00007020: 725f 7374 6163 6b75 705f 746f 5f63 7376  r_stackup_to_csv
+00007030: 5f78 6c73 7828 6670 6174 682c 2066 696c  _xlsx(fpath, fil
+00007040: 655f 666f 726d 6174 3d22 6373 7622 290a  e_format="csv").
+00007050: 2020 2020 2020 2020 656c 6966 2066 7061          elif fpa
+00007060: 7468 2e65 6e64 7377 6974 6828 222e 786c  th.endswith(".xl
+00007070: 7378 2229 3a0a 2020 2020 2020 2020 2020  sx"):.          
+00007080: 2020 7265 7475 726e 2073 656c 662e 5f65    return self._e
+00007090: 7870 6f72 745f 6c61 7965 725f 7374 6163  xport_layer_stac
+000070a0: 6b75 705f 746f 5f63 7376 5f78 6c73 7828  kup_to_csv_xlsx(
+000070b0: 6670 6174 682c 2066 696c 655f 666f 726d  fpath, file_form
+000070c0: 6174 3d22 786c 7378 2229 0a20 2020 2020  at="xlsx").     
+000070d0: 2020 2065 6c69 6620 6670 6174 682e 656e     elif fpath.en
+000070e0: 6473 7769 7468 2822 2e6a 736f 6e22 293a  dswith(".json"):
+000070f0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00007100: 7572 6e20 7365 6c66 2e5f 6578 706f 7274  urn self._export
+00007110: 5f6c 6179 6572 5f73 7461 636b 7570 5f74  _layer_stackup_t
+00007120: 6f5f 6a73 6f6e 2866 7061 7468 2c20 696e  o_json(fpath, in
+00007130: 636c 7564 655f 6d61 7465 7269 616c 5f77  clude_material_w
+00007140: 6974 685f 6c61 7965 7229 0a20 2020 2020  ith_layer).     
+00007150: 2020 2065 6c69 6620 6670 6174 682e 656e     elif fpath.en
+00007160: 6473 7769 7468 2822 2e78 6d6c 2229 3a0a  dswith(".xml"):.
+00007170: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00007180: 726e 2073 656c 662e 5f65 7870 6f72 745f  rn self._export_
+00007190: 786d 6c28 6670 6174 6829 0a20 2020 2020  xml(fpath).     
+000071a0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+000071b0: 2020 2020 2073 656c 662e 5f6c 6f67 6765       self._logge
+000071c0: 722e 7761 726e 696e 6728 224c 6179 6572  r.warning("Layer
+000071d0: 2073 7461 636b 7570 2066 6f72 6d61 7420   stackup format 
+000071e0: 6973 206e 6f74 2073 7570 706f 7274 6564  is not supported
+000071f0: 2e20 536b 6970 7069 6e67 2069 6d70 6f72  . Skipping impor
+00007200: 742e 2229 0a20 2020 2020 2020 2020 2020  t.").           
+00007210: 2072 6574 7572 6e20 4661 6c73 650a 0a20   return False.. 
+00007220: 2020 2040 7079 6564 625f 6675 6e63 7469     @pyedb_functi
+00007230: 6f6e 5f68 616e 646c 6572 2829 0a20 2020  on_handler().   
+00007240: 2064 6566 2065 7870 6f72 745f 7374 6163   def export_stac
+00007250: 6b75 7028 7365 6c66 2c20 6670 6174 682c  kup(self, fpath,
+00007260: 2066 696c 655f 666f 726d 6174 3d22 786d   file_format="xm
+00007270: 6c22 2c20 696e 636c 7564 655f 6d61 7465  l", include_mate
+00007280: 7269 616c 5f77 6974 685f 6c61 7965 723d  rial_with_layer=
+00007290: 4661 6c73 6529 3a0a 2020 2020 2020 2020  False):.        
+000072a0: 2222 2245 7870 6f72 7420 7374 6163 6b75  """Export stacku
+000072b0: 7020 6465 6669 6e69 7469 6f6e 2074 6f20  p definition to 
+000072c0: 6120 4353 5620 6f72 204a 534f 4e20 6669  a CSV or JSON fi
+000072d0: 6c65 2e0a 0a20 2020 2020 2020 202e 2e20  le...        .. 
+000072e0: 6465 7072 6563 6174 6564 3a3a 2030 2e36  deprecated:: 0.6
+000072f0: 2e36 310a 2020 2020 2020 2020 2020 2055  .61.           U
+00007300: 7365 203a 6675 6e63 3a60 6578 706f 7274  se :func:`export
+00007310: 6020 696e 7374 6561 642e 0a0a 2020 2020  ` instead...    
+00007320: 2020 2020 5061 7261 6d65 7465 7273 0a20      Parameters. 
+00007330: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
+00007340: 2d0a 2020 2020 2020 2020 6670 6174 6820  -.        fpath 
+00007350: 3a20 7374 720a 2020 2020 2020 2020 2020  : str.          
+00007360: 2020 4669 6c65 2070 6174 6820 746f 2043    File path to C
+00007370: 5356 206f 7220 4a53 4f4e 2066 696c 652e  SV or JSON file.
+00007380: 0a20 2020 2020 2020 2066 696c 655f 666f  .        file_fo
+00007390: 726d 6174 203a 2073 7472 2c20 6f70 7469  rmat : str, opti
+000073a0: 6f6e 616c 0a20 2020 2020 2020 2020 2020  onal.           
+000073b0: 2046 6f72 6d61 7420 6f66 2074 6865 2066   Format of the f
+000073c0: 696c 6520 746f 2065 7870 6f72 742e 2054  ile to export. T
+000073d0: 6865 2064 6566 6175 6c74 2069 7320 6060  he default is ``
+000073e0: 2263 7376 2260 602e 204f 7074 696f 6e73  "csv"``. Options
+000073f0: 2061 7265 2060 6022 6373 7622 6060 2c20   are ``"csv"``, 
+00007400: 6060 2278 6c73 7822 6060 0a20 2020 2020  ``"xlsx"``.     
+00007410: 2020 2020 2020 2061 6e64 2060 6022 6a73         and ``"js
+00007420: 6f6e 2260 602e 0a20 2020 2020 2020 2069  on"``..        i
+00007430: 6e63 6c75 6465 5f6d 6174 6572 6961 6c5f  nclude_material_
+00007440: 7769 7468 5f6c 6179 6572 203a 2062 6f6f  with_layer : boo
+00007450: 6c2c 206f 7074 696f 6e61 6c2e 0a20 2020  l, optional..   
+00007460: 2020 2020 2020 2020 2057 6865 7468 6572           Whether
+00007470: 2074 6f20 696e 636c 7564 6520 7468 6520   to include the 
+00007480: 6d61 7465 7269 616c 2064 6566 696e 6974  material definit
+00007490: 696f 6e20 696e 7369 6465 206c 6179 6572  ion inside layer
+000074a0: 206f 626a 6563 7473 2e20 5468 6973 2070   objects. This p
+000074b0: 6172 616d 6574 6572 2069 7320 6f6e 6c79  arameter is only
+000074c0: 2075 7365 640a 2020 2020 2020 2020 2020   used.          
+000074d0: 2020 7768 656e 2061 204a 534f 4e20 6669    when a JSON fi
+000074e0: 6c65 2069 7320 6578 706f 7274 6564 2e20  le is exported. 
+000074f0: 5468 6520 6465 6661 756c 7420 6973 2060  The default is `
+00007500: 6046 616c 7365 6060 2c20 7768 6963 6820  `False``, which 
+00007510: 6b65 6570 7320 7468 6520 6d61 7465 7269  keeps the materi
+00007520: 616c 2064 6566 696e 6974 696f 6e0a 2020  al definition.  
+00007530: 2020 2020 2020 2020 2020 7365 6374 696f            sectio
+00007540: 6e20 696e 2074 6865 204a 534f 4e20 6669  n in the JSON fi
+00007550: 6c65 2e20 4966 2060 6054 7275 6560 602c  le. If ``True``,
+00007560: 2074 6865 206d 6174 6572 6961 6c20 6465   the material de
+00007570: 6669 6e69 7469 6f6e 2069 7320 696e 636c  finition is incl
+00007580: 7564 6564 2069 6e73 6964 6520 7468 6520  uded inside the 
+00007590: 6c61 7965 7220 6f6e 6573 2e0a 0a20 2020  layer ones...   
+000075a0: 2020 2020 2045 7861 6d70 6c65 730a 2020       Examples.  
+000075b0: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0a20        --------. 
+000075c0: 2020 2020 2020 203e 3e3e 2066 726f 6d20         >>> from 
+000075d0: 7079 6564 6220 696d 706f 7274 2045 6462  pyedb import Edb
+000075e0: 0a20 2020 2020 2020 203e 3e3e 2065 6462  .        >>> edb
+000075f0: 203d 2045 6462 2829 0a20 2020 2020 2020   = Edb().       
+00007600: 203e 3e3e 2065 6462 2e73 7461 636b 7570   >>> edb.stackup
+00007610: 2e65 7870 6f72 745f 7374 6163 6b75 7028  .export_stackup(
+00007620: 2273 7461 636b 7570 2e78 6d6c 2229 0a20  "stackup.xml"). 
+00007630: 2020 2020 2020 2022 2222 0a0a 2020 2020         """..    
+00007640: 2020 2020 7365 6c66 2e5f 6c6f 6767 6572      self._logger
+00007650: 2e77 6172 6e69 6e67 2822 4d65 7468 6f64  .warning("Method
+00007660: 2065 7870 6f72 745f 7374 6163 6b75 7020   export_stackup 
+00007670: 6973 2064 6570 7265 6361 7465 642e 2055  is deprecated. U
+00007680: 7365 202e 6578 706f 7274 2e22 290a 2020  se .export.").  
+00007690: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+000076a0: 662e 6578 706f 7274 2866 7061 7468 2c20  f.export(fpath, 
+000076b0: 6669 6c65 5f66 6f72 6d61 743d 6669 6c65  file_format=file
+000076c0: 5f66 6f72 6d61 742c 2069 6e63 6c75 6465  _format, include
+000076d0: 5f6d 6174 6572 6961 6c5f 7769 7468 5f6c  _material_with_l
+000076e0: 6179 6572 3d69 6e63 6c75 6465 5f6d 6174  ayer=include_mat
+000076f0: 6572 6961 6c5f 7769 7468 5f6c 6179 6572  erial_with_layer
+00007700: 290a 0a20 2020 2040 7079 6564 625f 6675  )..    @pyedb_fu
+00007710: 6e63 7469 6f6e 5f68 616e 646c 6572 2829  nction_handler()
+00007720: 0a20 2020 2064 6566 205f 6578 706f 7274  .    def _export
+00007730: 5f6c 6179 6572 5f73 7461 636b 7570 5f74  _layer_stackup_t
+00007740: 6f5f 6373 765f 786c 7378 2873 656c 662c  o_csv_xlsx(self,
+00007750: 2066 7061 7468 3d4e 6f6e 652c 2066 696c   fpath=None, fil
+00007760: 655f 666f 726d 6174 3d4e 6f6e 6529 3a0a  e_format=None):.
+00007770: 2020 2020 2020 2020 6966 206e 6f74 2070          if not p
+00007780: 643a 0a20 2020 2020 2020 2020 2020 2073  d:.            s
+00007790: 656c 662e 5f70 6564 622e 6c6f 6767 6572  elf._pedb.logger
+000077a0: 2e65 7272 6f72 2822 5061 6e64 6173 2069  .error("Pandas i
+000077b0: 7320 6e65 6564 6564 2e20 506c 6561 7365  s needed. Please
+000077c0: 2c20 696e 7374 616c 6c20 6974 2066 6972  , install it fir
+000077d0: 7374 2e22 290a 2020 2020 2020 2020 2020  st.").          
+000077e0: 2020 7265 7475 726e 2046 616c 7365 0a20    return False. 
+000077f0: 2020 2020 2020 2069 6620 6973 5f69 726f         if is_iro
+00007800: 6e70 7974 686f 6e3a 0a20 2020 2020 2020  npython:.       
+00007810: 2020 2020 2072 6574 7572 6e0a 2020 2020       return.    
+00007820: 2020 2020 6461 7461 203d 207b 0a20 2020      data = {.   
+00007830: 2020 2020 2020 2020 2022 5479 7065 223a           "Type":
+00007840: 205b 5d2c 0a20 2020 2020 2020 2020 2020   [],.           
+00007850: 2022 4d61 7465 7269 616c 223a 205b 5d2c   "Material": [],
+00007860: 0a20 2020 2020 2020 2020 2020 2022 4469  .            "Di
+00007870: 656c 6563 7472 6963 5f46 696c 6c22 3a20  electric_Fill": 
+00007880: 5b5d 2c0a 2020 2020 2020 2020 2020 2020  [],.            
+00007890: 2254 6869 636b 6e65 7373 223a 205b 5d2c  "Thickness": [],
+000078a0: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
+000078b0: 2020 2069 6478 203d 205b 5d0a 2020 2020     idx = [].    
+000078c0: 2020 2020 666f 7220 6c79 7220 696e 2073      for lyr in s
+000078d0: 656c 662e 7374 6163 6b75 705f 6c61 7965  elf.stackup_laye
+000078e0: 7273 2e76 616c 7565 7328 293a 0a20 2020  rs.values():.   
+000078f0: 2020 2020 2020 2020 2069 6478 2e61 7070           idx.app
+00007900: 656e 6428 6c79 722e 6e61 6d65 290a 2020  end(lyr.name).  
+00007910: 2020 2020 2020 2020 2020 6461 7461 5b22            data["
+00007920: 5479 7065 225d 2e61 7070 656e 6428 6c79  Type"].append(ly
+00007930: 722e 7479 7065 290a 2020 2020 2020 2020  r.type).        
+00007940: 2020 2020 6461 7461 5b22 4d61 7465 7269      data["Materi
+00007950: 616c 225d 2e61 7070 656e 6428 6c79 722e  al"].append(lyr.
+00007960: 6d61 7465 7269 616c 290a 2020 2020 2020  material).      
+00007970: 2020 2020 2020 6461 7461 5b22 4469 656c        data["Diel
+00007980: 6563 7472 6963 5f46 696c 6c22 5d2e 6170  ectric_Fill"].ap
+00007990: 7065 6e64 286c 7972 2e64 6965 6c65 6374  pend(lyr.dielect
+000079a0: 7269 635f 6669 6c6c 290a 2020 2020 2020  ric_fill).      
+000079b0: 2020 2020 2020 6461 7461 5b22 5468 6963        data["Thic
+000079c0: 6b6e 6573 7322 5d2e 6170 7065 6e64 286c  kness"].append(l
+000079d0: 7972 2e74 6869 636b 6e65 7373 290a 2020  yr.thickness).  
+000079e0: 2020 2020 2020 6466 203d 2070 642e 4461        df = pd.Da
+000079f0: 7461 4672 616d 6528 6461 7461 2c20 696e  taFrame(data, in
+00007a00: 6465 783d 6964 782c 2063 6f6c 756d 6e73  dex=idx, columns
+00007a10: 3d5b 2254 7970 6522 2c20 224d 6174 6572  =["Type", "Mater
+00007a20: 6961 6c22 2c20 2244 6965 6c65 6374 7269  ial", "Dielectri
+00007a30: 635f 4669 6c6c 222c 2022 5468 6963 6b6e  c_Fill", "Thickn
+00007a40: 6573 7322 5d29 0a20 2020 2020 2020 2069  ess"]).        i
+00007a50: 6620 6669 6c65 5f66 6f72 6d61 7420 3d3d  f file_format ==
+00007a60: 2022 6373 7622 3a20 2023 2070 7261 676d   "csv":  # pragm
+00007a70: 613a 206e 6f20 636f 7665 720a 2020 2020  a: no cover.    
+00007a80: 2020 2020 2020 2020 6966 206e 6f74 2066          if not f
+00007a90: 7061 7468 2e65 6e64 7377 6974 6828 222e  path.endswith(".
+00007aa0: 6373 7622 293a 0a20 2020 2020 2020 2020  csv"):.         
+00007ab0: 2020 2020 2020 2066 7061 7468 203d 2066         fpath = f
+00007ac0: 7061 7468 202b 2022 2e63 7376 220a 2020  path + ".csv".  
+00007ad0: 2020 2020 2020 2020 2020 6466 2e74 6f5f            df.to_
+00007ae0: 6373 7628 6670 6174 6829 0a20 2020 2020  csv(fpath).     
+00007af0: 2020 2065 6c73 653a 2020 2320 7072 6167     else:  # prag
+00007b00: 6d61 3a20 6e6f 2063 6f76 6572 0a20 2020  ma: no cover.   
+00007b10: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+00007b20: 6670 6174 682e 656e 6473 7769 7468 2822  fpath.endswith("
+00007b30: 2e78 6c73 7822 293a 2020 2320 7072 6167  .xlsx"):  # prag
+00007b40: 6d61 3a20 6e6f 2063 6f76 6572 0a20 2020  ma: no cover.   
+00007b50: 2020 2020 2020 2020 2020 2020 2066 7061               fpa
+00007b60: 7468 203d 2066 7061 7468 202b 2022 2e78  th = fpath + ".x
+00007b70: 6c73 7822 0a20 2020 2020 2020 2020 2020  lsx".           
+00007b80: 2064 662e 746f 5f65 7863 656c 2866 7061   df.to_excel(fpa
+00007b90: 7468 290a 2020 2020 2020 2020 7265 7475  th).        retu
+00007ba0: 726e 2054 7275 650a 0a20 2020 2040 7079  rn True..    @py
+00007bb0: 6564 625f 6675 6e63 7469 6f6e 5f68 616e  edb_function_han
+00007bc0: 646c 6572 2829 0a20 2020 2064 6566 205f  dler().    def _
+00007bd0: 6578 706f 7274 5f6c 6179 6572 5f73 7461  export_layer_sta
+00007be0: 636b 7570 5f74 6f5f 6a73 6f6e 2873 656c  ckup_to_json(sel
+00007bf0: 662c 206f 7574 7075 745f 6669 6c65 3d4e  f, output_file=N
+00007c00: 6f6e 652c 2069 6e63 6c75 6465 5f6d 6174  one, include_mat
+00007c10: 6572 6961 6c5f 7769 7468 5f6c 6179 6572  erial_with_layer
+00007c20: 3d46 616c 7365 293a 0a20 2020 2020 2020  =False):.       
+00007c30: 2069 6620 6e6f 7420 696e 636c 7564 655f   if not include_
+00007c40: 6d61 7465 7269 616c 5f77 6974 685f 6c61  material_with_la
+00007c50: 7965 723a 0a20 2020 2020 2020 2020 2020  yer:.           
+00007c60: 206d 6174 6572 6961 6c5f 6f75 7420 3d20   material_out = 
+00007c70: 7b7d 0a20 2020 2020 2020 2020 2020 2066  {}.            f
+00007c80: 6f72 206b 2c20 7620 696e 2073 656c 662e  or k, v in self.
+00007c90: 5f70 6564 622e 6d61 7465 7269 616c 732e  _pedb.materials.
+00007ca0: 6d61 7465 7269 616c 732e 6974 656d 7328  materials.items(
+00007cb0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00007cc0: 2020 206d 6174 6572 6961 6c5f 6f75 745b     material_out[
+00007cd0: 6b5d 203d 2076 2e5f 6a73 6f6e 5f66 6f72  k] = v._json_for
+00007ce0: 6d61 7428 290a 2020 2020 2020 2020 6c61  mat().        la
+00007cf0: 7965 7273 5f6f 7574 203d 207b 7d0a 2020  yers_out = {}.  
+00007d00: 2020 2020 2020 666f 7220 6b2c 2076 2069        for k, v i
+00007d10: 6e20 7365 6c66 2e73 7461 636b 7570 5f6c  n self.stackup_l
+00007d20: 6179 6572 732e 6974 656d 7328 293a 0a20  ayers.items():. 
+00007d30: 2020 2020 2020 2020 2020 206c 6179 6572             layer
+00007d40: 735f 6f75 745b 6b5d 203d 2076 2e5f 6a73  s_out[k] = v._js
+00007d50: 6f6e 5f66 6f72 6d61 7428 290a 2020 2020  on_format().    
+00007d60: 2020 2020 2020 2020 6966 2076 2e6d 6174          if v.mat
+00007d70: 6572 6961 6c20 696e 2073 656c 662e 5f70  erial in self._p
+00007d80: 6564 622e 6d61 7465 7269 616c 732e 6d61  edb.materials.ma
+00007d90: 7465 7269 616c 733a 0a20 2020 2020 2020  terials:.       
+00007da0: 2020 2020 2020 2020 206c 6179 6572 5f6d           layer_m
+00007db0: 6174 6572 6961 6c20 3d20 7365 6c66 2e5f  aterial = self._
+00007dc0: 7065 6462 2e6d 6174 6572 6961 6c73 2e6d  pedb.materials.m
+00007dd0: 6174 6572 6961 6c73 5b76 2e6d 6174 6572  aterials[v.mater
+00007de0: 6961 6c5d 0a20 2020 2020 2020 2020 2020  ial].           
+00007df0: 2020 2020 2069 6620 6e6f 7420 762e 6469       if not v.di
+00007e00: 656c 6563 7472 6963 5f66 696c 6c3a 0a20  electric_fill:. 
+00007e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007e20: 2020 2064 6965 6c65 6374 7269 635f 6669     dielectric_fi
+00007e30: 6c6c 203d 2046 616c 7365 0a20 2020 2020  ll = False.     
+00007e40: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00007e50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007e60: 2020 2020 2064 6965 6c65 6374 7269 635f       dielectric_
+00007e70: 6669 6c6c 203d 2073 656c 662e 5f70 6564  fill = self._ped
+00007e80: 622e 6d61 7465 7269 616c 732e 6d61 7465  b.materials.mate
+00007e90: 7269 616c 735b 762e 6469 656c 6563 7472  rials[v.dielectr
+00007ea0: 6963 5f66 696c 6c5d 0a20 2020 2020 2020  ic_fill].       
+00007eb0: 2020 2020 2020 2020 2069 6620 696e 636c           if incl
+00007ec0: 7564 655f 6d61 7465 7269 616c 5f77 6974  ude_material_wit
+00007ed0: 685f 6c61 7965 723a 0a20 2020 2020 2020  h_layer:.       
+00007ee0: 2020 2020 2020 2020 2020 2020 206c 6179               lay
+00007ef0: 6572 735f 6f75 745b 6b5d 5b22 6d61 7465  ers_out[k]["mate
+00007f00: 7269 616c 225d 203d 206c 6179 6572 5f6d  rial"] = layer_m
+00007f10: 6174 6572 6961 6c2e 5f6a 736f 6e5f 666f  aterial._json_fo
+00007f20: 726d 6174 2829 0a20 2020 2020 2020 2020  rmat().         
+00007f30: 2020 2020 2020 2020 2020 2069 6620 6469             if di
+00007f40: 656c 6563 7472 6963 5f66 696c 6c3a 0a20  electric_fill:. 
+00007f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007f60: 2020 2020 2020 206c 6179 6572 735f 6f75         layers_ou
+00007f70: 745b 6b5d 5b22 6469 656c 6563 7472 6963  t[k]["dielectric
+00007f80: 5f66 696c 6c22 5d20 3d20 6469 656c 6563  _fill"] = dielec
+00007f90: 7472 6963 5f66 696c 6c2e 5f6a 736f 6e5f  tric_fill._json_
+00007fa0: 666f 726d 6174 2829 0a20 2020 2020 2020  format().       
+00007fb0: 2069 6620 6e6f 7420 696e 636c 7564 655f   if not include_
+00007fc0: 6d61 7465 7269 616c 5f77 6974 685f 6c61  material_with_la
+00007fd0: 7965 723a 0a20 2020 2020 2020 2020 2020  yer:.           
+00007fe0: 2073 7461 636b 7570 5f6f 7574 203d 207b   stackup_out = {
+00007ff0: 226d 6174 6572 6961 6c73 223a 206d 6174  "materials": mat
+00008000: 6572 6961 6c5f 6f75 742c 2022 6c61 7965  erial_out, "laye
+00008010: 7273 223a 206c 6179 6572 735f 6f75 747d  rs": layers_out}
+00008020: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00008030: 2020 2020 2020 2020 2020 2073 7461 636b             stack
+00008040: 7570 5f6f 7574 203d 207b 226c 6179 6572  up_out = {"layer
+00008050: 7322 3a20 6c61 7965 7273 5f6f 7574 7d0a  s": layers_out}.
+00008060: 2020 2020 2020 2020 6966 206f 7574 7075          if outpu
+00008070: 745f 6669 6c65 3a0a 2020 2020 2020 2020  t_file:.        
+00008080: 2020 2020 7769 7468 206f 7065 6e28 6f75      with open(ou
+00008090: 7470 7574 5f66 696c 652c 2022 7722 2920  tput_file, "w") 
+000080a0: 6173 2077 7269 7465 5f66 696c 653a 0a20  as write_file:. 
+000080b0: 2020 2020 2020 2020 2020 2020 2020 206a                 j
+000080c0: 736f 6e2e 6475 6d70 2873 7461 636b 7570  son.dump(stackup
+000080d0: 5f6f 7574 2c20 7772 6974 655f 6669 6c65  _out, write_file
+000080e0: 2c20 696e 6465 6e74 3d34 290a 0a20 2020  , indent=4)..   
+000080f0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00008100: 5472 7565 0a20 2020 2020 2020 2065 6c73  True.        els
+00008110: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+00008120: 6574 7572 6e20 4661 6c73 650a 0a20 2020  eturn False..   
+00008130: 2023 2054 4f44 4f3a 2054 6869 7320 6d65   # TODO: This me
+00008140: 7468 6f64 206d 6967 6874 206e 6565 6420  thod might need 
+00008150: 736f 6d65 2072 6566 6163 746f 7269 6e67  some refactoring
+00008160: 0a20 2020 2040 7079 6564 625f 6675 6e63  .    @pyedb_func
+00008170: 7469 6f6e 5f68 616e 646c 6572 2829 0a20  tion_handler(). 
+00008180: 2020 2064 6566 205f 696d 706f 7274 5f6c     def _import_l
+00008190: 6179 6572 5f73 7461 636b 7570 2873 656c  ayer_stackup(sel
+000081a0: 662c 2069 6e70 7574 5f66 696c 653d 4e6f  f, input_file=No
+000081b0: 6e65 293a 0a20 2020 2020 2020 2069 6620  ne):.        if 
+000081c0: 696e 7075 745f 6669 6c65 3a0a 2020 2020  input_file:.    
+000081d0: 2020 2020 2020 2020 6620 3d20 6f70 656e          f = open
+000081e0: 2869 6e70 7574 5f66 696c 6529 0a20 2020  (input_file).   
+000081f0: 2020 2020 2020 2020 206a 736f 6e5f 6469           json_di
+00008200: 6374 203d 206a 736f 6e2e 6c6f 6164 2866  ct = json.load(f
+00008210: 2920 2023 2070 7261 676d 613a 206e 6f20  )  # pragma: no 
+00008220: 636f 7665 720a 2020 2020 2020 2020 2020  cover.          
+00008230: 2020 666f 7220 6b2c 2076 2069 6e20 6a73    for k, v in js
+00008240: 6f6e 5f64 6963 742e 6974 656d 7328 293a  on_dict.items():
+00008250: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008260: 2069 6620 6b20 3d3d 2022 6d61 7465 7269   if k == "materi
+00008270: 616c 7322 3a0a 2020 2020 2020 2020 2020  als":.          
+00008280: 2020 2020 2020 2020 2020 666f 7220 6d61            for ma
+00008290: 7465 7269 616c 2069 6e20 762e 7661 6c75  terial in v.valu
+000082a0: 6573 2829 3a0a 2020 2020 2020 2020 2020  es():.          
+000082b0: 2020 2020 2020 2020 2020 2020 2020 6d61                ma
+000082c0: 7465 7269 616c 5f6e 616d 6520 3d20 6d61  terial_name = ma
+000082d0: 7465 7269 616c 5b22 6e61 6d65 225d 0a20  terial["name"]. 
+000082e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000082f0: 2020 2020 2020 2064 656c 206d 6174 6572         del mater
+00008300: 6961 6c5b 226e 616d 6522 5d0a 2020 2020  ial["name"].    
+00008310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008320: 2020 2020 6966 206d 6174 6572 6961 6c5f      if material_
+00008330: 6e61 6d65 206e 6f74 2069 6e20 7365 6c66  name not in self
+00008340: 2e5f 7065 6462 2e6d 6174 6572 6961 6c73  ._pedb.materials
+00008350: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00008360: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00008370: 6c66 2e5f 7065 6462 2e6d 6174 6572 6961  lf._pedb.materia
+00008380: 6c73 2e61 6464 5f6d 6174 6572 6961 6c28  ls.add_material(
+00008390: 6d61 7465 7269 616c 5f6e 616d 652c 202a  material_name, *
+000083a0: 2a6d 6174 6572 6961 6c29 0a20 2020 2020  *material).     
+000083b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000083c0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+000083d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000083e0: 2020 2020 2073 656c 662e 5f70 6564 622e       self._pedb.
+000083f0: 6d61 7465 7269 616c 732e 7570 6461 7465  materials.update
+00008400: 5f6d 6174 6572 6961 6c28 6d61 7465 7269  _material(materi
+00008410: 616c 5f6e 616d 652c 206d 6174 6572 6961  al_name, materia
+00008420: 6c29 0a20 2020 2020 2020 2020 2020 2020  l).             
+00008430: 2020 2069 6620 6b20 3d3d 2022 6c61 7965     if k == "laye
+00008440: 7273 223a 0a20 2020 2020 2020 2020 2020  rs":.           
+00008450: 2020 2020 2020 2020 2069 6620 6c65 6e28           if len(
+00008460: 6c69 7374 2876 2e76 616c 7565 7328 2929  list(v.values())
+00008470: 2920 3d3d 206c 656e 286c 6973 7428 7365  ) == len(list(se
+00008480: 6c66 2e73 7461 636b 7570 5f6c 6179 6572  lf.stackup_layer
+00008490: 732e 7661 6c75 6573 2829 2929 3a0a 2020  s.values())):.  
+000084a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000084b0: 2020 2020 2020 696d 706f 7274 6564 5f6c        imported_l
+000084c0: 6179 6572 735f 6c69 7374 203d 205b 6c5f  ayers_list = [l_
+000084d0: 6469 6374 5b22 6e61 6d65 225d 2066 6f72  dict["name"] for
+000084e0: 206c 5f64 6963 7420 696e 206c 6973 7428   l_dict in list(
+000084f0: 762e 7661 6c75 6573 2829 295d 0a20 2020  v.values())].   
+00008500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008510: 2020 2020 206c 6179 6f75 745f 6c61 7965       layout_laye
+00008520: 725f 6c69 7374 203d 206c 6973 7428 7365  r_list = list(se
+00008530: 6c66 2e73 7461 636b 7570 5f6c 6179 6572  lf.stackup_layer
+00008540: 732e 6b65 7973 2829 290a 2020 2020 2020  s.keys()).      
+00008550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008560: 2020 666f 7220 6c61 7965 725f 6e61 6d65    for layer_name
+00008570: 2069 6e20 696d 706f 7274 6564 5f6c 6179   in imported_lay
+00008580: 6572 735f 6c69 7374 3a0a 2020 2020 2020  ers_list:.      
 00008590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000085a0: 2020 2020 2020 2069 6620 6c61 7965 725b         if layer[
-000085b0: 226e 616d 6522 5d20 6e6f 7420 696e 2073  "name"] not in s
-000085c0: 656c 662e 7374 6163 6b75 705f 6c61 7965  elf.stackup_laye
-000085d0: 7273 3a0a 2020 2020 2020 2020 2020 2020  rs:.            
+000085a0: 2020 2020 2020 6c61 7965 725f 696e 6465        layer_inde
+000085b0: 7820 3d20 696d 706f 7274 6564 5f6c 6179  x = imported_lay
+000085c0: 6572 735f 6c69 7374 2e69 6e64 6578 286c  ers_list.index(l
+000085d0: 6179 6572 5f6e 616d 6529 0a20 2020 2020  ayer_name).     
 000085e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000085f0: 6966 206e 6f74 2070 7265 765f 6c61 7965  if not prev_laye
-00008600: 723a 0a20 2020 2020 2020 2020 2020 2020  r:.             
-00008610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008620: 2020 2073 656c 662e 6164 645f 6c61 7965     self.add_laye
-00008630: 7228 0a20 2020 2020 2020 2020 2020 2020  r(.             
-00008640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008650: 2020 2020 2020 206c 6179 6572 5f6e 616d         layer_nam
-00008660: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
-00008670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008680: 2020 2020 2020 206d 6574 686f 643d 2261         method="a
-00008690: 6464 5f6f 6e5f 746f 7022 2c0a 2020 2020  dd_on_top",.    
-000086a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000086b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000086c0: 6c61 7965 725f 7479 7065 3d6c 6179 6572  layer_type=layer
-000086d0: 5b22 7479 7065 225d 2c0a 2020 2020 2020  ["type"],.      
-000086e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000086f0: 2020 2020 2020 2020 2020 2020 2020 6d61                ma
-00008700: 7465 7269 616c 3d6c 6179 6572 5b22 6d61  terial=layer["ma
-00008710: 7465 7269 616c 225d 2c0a 2020 2020 2020  terial"],.      
-00008720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008730: 2020 2020 2020 2020 2020 2020 2020 6669                fi
-00008740: 6c6c 4d61 7465 7269 616c 3d6c 6179 6572  llMaterial=layer
-00008750: 5b22 6469 656c 6563 7472 6963 5f66 696c  ["dielectric_fil
-00008760: 6c22 5d2c 0a20 2020 2020 2020 2020 2020  l"],.           
+000085f0: 2020 2020 2020 2069 6620 6c61 796f 7574         if layout
+00008600: 5f6c 6179 6572 5f6c 6973 745b 6c61 7965  _layer_list[laye
+00008610: 725f 696e 6465 785d 2021 3d20 6c61 7965  r_index] != laye
+00008620: 725f 6e61 6d65 3a0a 2020 2020 2020 2020  r_name:.        
+00008630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008640: 2020 2020 2020 2020 7365 6c66 2e73 7461          self.sta
+00008650: 636b 7570 5f6c 6179 6572 735b 6c61 796f  ckup_layers[layo
+00008660: 7574 5f6c 6179 6572 5f6c 6973 745b 6c61  ut_layer_list[la
+00008670: 7965 725f 696e 6465 785d 5d2e 6e61 6d65  yer_index]].name
+00008680: 203d 206c 6179 6572 5f6e 616d 650a 2020   = layer_name.  
+00008690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000086a0: 2020 7072 6576 5f6c 6179 6572 203d 204e    prev_layer = N
+000086b0: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
+000086c0: 2020 2020 2020 2020 666f 7220 6c61 7965          for laye
+000086d0: 725f 6e61 6d65 2c20 6c61 7965 7220 696e  r_name, layer in
+000086e0: 2076 2e69 7465 6d73 2829 3a0a 2020 2020   v.items():.    
+000086f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008700: 2020 2020 6966 206c 6179 6572 5b22 6e61      if layer["na
+00008710: 6d65 225d 206e 6f74 2069 6e20 7365 6c66  me"] not in self
+00008720: 2e73 7461 636b 7570 5f6c 6179 6572 733a  .stackup_layers:
+00008730: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008740: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00008750: 6e6f 7420 7072 6576 5f6c 6179 6572 3a0a  not prev_layer:.
+00008760: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00008770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008780: 2020 2020 2020 2020 2074 6869 636b 6e65           thickne
-00008790: 7373 3d6c 6179 6572 5b22 7468 6963 6b6e  ss=layer["thickn
-000087a0: 6573 7322 5d2c 0a20 2020 2020 2020 2020  ess"],.         
-000087b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000087c0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00008780: 7365 6c66 2e61 6464 5f6c 6179 6572 280a  self.add_layer(.
+00008790: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000087a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000087b0: 2020 2020 6c61 7965 725f 6e61 6d65 2c0a      layer_name,.
+000087c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000087d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000087e0: 2020 2020 2020 2020 2070 7265 765f 6c61           prev_la
-000087f0: 7965 7220 3d20 6c61 7965 725f 6e61 6d65  yer = layer_name
-00008800: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00008810: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-00008820: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00008830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008840: 2020 2073 656c 662e 6164 645f 6c61 7965     self.add_laye
-00008850: 7228 0a20 2020 2020 2020 2020 2020 2020  r(.             
-00008860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008870: 2020 2020 2020 206c 6179 6572 5f6e 616d         layer_nam
-00008880: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
-00008890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000088a0: 2020 2020 2020 2062 6173 655f 6c61 7965         base_laye
-000088b0: 723d 6c61 7965 725f 6e61 6d65 2c0a 2020  r=layer_name,.  
-000088c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000087e0: 2020 2020 6d65 7468 6f64 3d22 6164 645f      method="add_
+000087f0: 6f6e 5f74 6f70 222c 0a20 2020 2020 2020  on_top",.       
+00008800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008810: 2020 2020 2020 2020 2020 2020 206c 6179               lay
+00008820: 6572 5f74 7970 653d 6c61 7965 725b 2274  er_type=layer["t
+00008830: 7970 6522 5d2c 0a20 2020 2020 2020 2020  ype"],.         
+00008840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008850: 2020 2020 2020 2020 2020 206d 6174 6572             mater
+00008860: 6961 6c3d 6c61 7965 725b 226d 6174 6572  ial=layer["mater
+00008870: 6961 6c22 5d2c 0a20 2020 2020 2020 2020  ial"],.         
+00008880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008890: 2020 2020 2020 2020 2020 2066 696c 6c4d             fillM
+000088a0: 6174 6572 6961 6c3d 6c61 7965 725b 2264  aterial=layer["d
+000088b0: 6965 6c65 6374 7269 635f 6669 6c6c 225d  ielectric_fill"]
+000088c0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
 000088d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000088e0: 2020 6d65 7468 6f64 3d22 696e 7365 7274    method="insert
-000088f0: 5f62 656c 6f77 222c 0a20 2020 2020 2020  _below",.       
-00008900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008910: 2020 2020 2020 2020 2020 2020 206c 6179               lay
-00008920: 6572 5f74 7970 653d 6c61 7965 725b 2274  er_type=layer["t
-00008930: 7970 6522 5d2c 0a20 2020 2020 2020 2020  ype"],.         
-00008940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008950: 2020 2020 2020 2020 2020 206d 6174 6572             mater
-00008960: 6961 6c3d 6c61 7965 725b 226d 6174 6572  ial=layer["mater
-00008970: 6961 6c22 5d2c 0a20 2020 2020 2020 2020  ial"],.         
+000088e0: 2020 2020 2020 7468 6963 6b6e 6573 733d        thickness=
+000088f0: 6c61 7965 725b 2274 6869 636b 6e65 7373  layer["thickness
+00008900: 225d 2c0a 2020 2020 2020 2020 2020 2020  "],.            
+00008910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008920: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
+00008930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008940: 2020 2020 2020 7072 6576 5f6c 6179 6572        prev_layer
+00008950: 203d 206c 6179 6572 5f6e 616d 650a 2020   = layer_name.  
+00008960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008970: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
 00008980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008990: 2020 2020 2020 2020 2020 2066 696c 6c4d             fillM
-000089a0: 6174 6572 6961 6c3d 6c61 7965 725b 2264  aterial=layer["d
-000089b0: 6965 6c65 6374 7269 635f 6669 6c6c 225d  ielectric_fill"]
-000089c0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-000089d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000089e0: 2020 2020 2020 7468 6963 6b6e 6573 733d        thickness=
-000089f0: 6c61 7965 725b 2274 6869 636b 6e65 7373  layer["thickness
-00008a00: 225d 2c0a 2020 2020 2020 2020 2020 2020  "],.            
-00008a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008a20: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
-00008a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008a40: 2020 2020 2020 7072 6576 5f6c 6179 6572        prev_layer
-00008a50: 203d 206c 6179 6572 5f6e 616d 650a 2020   = layer_name.  
+00008990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000089a0: 7365 6c66 2e61 6464 5f6c 6179 6572 280a  self.add_layer(.
+000089b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000089c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000089d0: 2020 2020 6c61 7965 725f 6e61 6d65 2c0a      layer_name,.
+000089e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000089f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008a00: 2020 2020 6261 7365 5f6c 6179 6572 3d6c      base_layer=l
+00008a10: 6179 6572 5f6e 616d 652c 0a20 2020 2020  ayer_name,.     
+00008a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008a30: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+00008a40: 6574 686f 643d 2269 6e73 6572 745f 6265  ethod="insert_be
+00008a50: 6c6f 7722 2c0a 2020 2020 2020 2020 2020  low",.          
 00008a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008a70: 2020 2020 2020 6966 206c 6179 6572 5f6e        if layer_n
-00008a80: 616d 6520 696e 2073 656c 662e 7374 6163  ame in self.stac
-00008a90: 6b75 705f 6c61 7965 7273 3a0a 2020 2020  kup_layers:.    
+00008a70: 2020 2020 2020 2020 2020 6c61 7965 725f            layer_
+00008a80: 7479 7065 3d6c 6179 6572 5b22 7479 7065  type=layer["type
+00008a90: 225d 2c0a 2020 2020 2020 2020 2020 2020  "],.            
 00008aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008ab0: 2020 2020 2020 2020 7365 6c66 2e73 7461          self.sta
-00008ac0: 636b 7570 5f6c 6179 6572 735b 6c61 7965  ckup_layers[laye
-00008ad0: 725b 226e 616d 6522 5d5d 2e5f 6c6f 6164  r["name"]]._load
-00008ae0: 5f6c 6179 6572 286c 6179 6572 290a 2020  _layer(layer).  
-00008af0: 2020 2020 2020 2020 2020 7365 6c66 2e72            self.r
-00008b00: 6566 7265 7368 5f6c 6179 6572 5f63 6f6c  efresh_layer_col
-00008b10: 6c65 6374 696f 6e28 290a 2020 2020 2020  lection().      
-00008b20: 2020 2020 2020 7265 7475 726e 2054 7275        return Tru
-00008b30: 650a 0a20 2020 2040 7079 6564 625f 6675  e..    @pyedb_fu
-00008b40: 6e63 7469 6f6e 5f68 616e 646c 6572 2829  nction_handler()
-00008b50: 0a20 2020 2064 6566 2073 7461 636b 7570  .    def stackup
-00008b60: 5f6c 696d 6974 7328 7365 6c66 2c20 6f6e  _limits(self, on
-00008b70: 6c79 5f6d 6574 616c 733d 4661 6c73 6529  ly_metals=False)
-00008b80: 3a0a 2020 2020 2020 2020 2222 2252 6574  :.        """Ret
-00008b90: 7269 6576 6520 7374 6163 6b75 7020 6c69  rieve stackup li
-00008ba0: 6d69 7473 2e0a 0a20 2020 2020 2020 202e  mits...        .
-00008bb0: 2e20 6465 7072 6563 6174 6564 3a3a 2030  . deprecated:: 0
-00008bc0: 2e36 2e36 320a 2020 2020 2020 2020 2020  .6.62.          
-00008bd0: 2055 7365 203a 6675 6e63 3a60 4564 622e   Use :func:`Edb.
-00008be0: 7374 6163 6b75 702e 6c69 6d69 7473 6020  stackup.limits` 
-00008bf0: 6675 6e63 7469 6f6e 2069 6e73 7465 6164  function instead
-00008c00: 2e0a 0a20 2020 2020 2020 2050 6172 616d  ...        Param
-00008c10: 6574 6572 730a 2020 2020 2020 2020 2d2d  eters.        --
-00008c20: 2d2d 2d2d 2d2d 2d2d 0a20 2020 2020 2020  --------.       
-00008c30: 206f 6e6c 795f 6d65 7461 6c73 203a 2062   only_metals : b
-00008c40: 6f6f 6c2c 206f 7074 696f 6e61 6c0a 2020  ool, optional.  
-00008c50: 2020 2020 2020 2020 2020 5768 6574 6865            Whethe
-00008c60: 7220 746f 2072 6574 7269 6576 6520 6f6e  r to retrieve on
-00008c70: 6c79 206d 6574 616c 732e 2054 6865 2064  ly metals. The d
-00008c80: 6566 6175 6c74 2069 7320 6060 4661 6c73  efault is ``Fals
-00008c90: 6560 602e 0a0a 2020 2020 2020 2020 5265  e``...        Re
-00008ca0: 7475 726e 730a 2020 2020 2020 2020 2d2d  turns.        --
-00008cb0: 2d2d 2d2d 2d0a 2020 2020 2020 2020 626f  -----.        bo
-00008cc0: 6f6c 0a20 2020 2020 2020 2020 2020 2060  ol.            `
-00008cd0: 6054 7275 6560 6020 7768 656e 2073 7563  `True`` when suc
-00008ce0: 6365 7373 6675 6c2c 2060 6046 616c 7365  cessful, ``False
-00008cf0: 6060 2077 6865 6e20 6661 696c 6564 2e0a  `` when failed..
-00008d00: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00008d10: 2020 2020 7761 726e 696e 6773 2e77 6172      warnings.war
-00008d20: 6e28 2260 7374 6163 6b75 705f 6c69 6d69  n("`stackup_limi
-00008d30: 7473 6020 6973 2064 6570 7265 6361 7465  ts` is deprecate
-00008d40: 642e 2055 7365 2060 6c69 6d69 7473 6020  d. Use `limits` 
-00008d50: 7072 6f70 6572 7479 2069 6e73 7465 6164  property instead
-00008d60: 2e22 2c20 4465 7072 6563 6174 696f 6e57  .", DeprecationW
-00008d70: 6172 6e69 6e67 290a 2020 2020 2020 2020  arning).        
-00008d80: 7265 7475 726e 2073 656c 662e 6c69 6d69  return self.limi
-00008d90: 7473 286f 6e6c 795f 6d65 7461 6c73 3d6f  ts(only_metals=o
-00008da0: 6e6c 795f 6d65 7461 6c73 290a 0a20 2020  nly_metals)..   
-00008db0: 2040 7079 6564 625f 6675 6e63 7469 6f6e   @pyedb_function
-00008dc0: 5f68 616e 646c 6572 2829 0a20 2020 2064  _handler().    d
-00008dd0: 6566 206c 696d 6974 7328 7365 6c66 2c20  ef limits(self, 
-00008de0: 6f6e 6c79 5f6d 6574 616c 733d 4661 6c73  only_metals=Fals
-00008df0: 6529 3a0a 2020 2020 2020 2020 2222 2252  e):.        """R
-00008e00: 6574 7269 6576 6520 7374 6163 6b75 7020  etrieve stackup 
-00008e10: 6c69 6d69 7473 2e0a 0a20 2020 2020 2020  limits...       
-00008e20: 2050 6172 616d 6574 6572 730a 2020 2020   Parameters.    
-00008e30: 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0a20      ----------. 
-00008e40: 2020 2020 2020 206f 6e6c 795f 6d65 7461         only_meta
-00008e50: 6c73 203a 2062 6f6f 6c2c 206f 7074 696f  ls : bool, optio
-00008e60: 6e61 6c0a 2020 2020 2020 2020 2020 2020  nal.            
-00008e70: 5768 6574 6865 7220 746f 2072 6574 7269  Whether to retri
-00008e80: 6576 6520 6f6e 6c79 206d 6574 616c 732e  eve only metals.
-00008e90: 2054 6865 2064 6566 6175 6c74 2069 7320   The default is 
-00008ea0: 6060 4661 6c73 6560 602e 0a0a 2020 2020  ``False``...    
-00008eb0: 2020 2020 5265 7475 726e 730a 2020 2020      Returns.    
-00008ec0: 2020 2020 2d2d 2d2d 2d2d 2d0a 2020 2020      -------.    
-00008ed0: 2020 2020 626f 6f6c 0a20 2020 2020 2020      bool.       
-00008ee0: 2020 2020 2060 6054 7275 6560 6020 7768       ``True`` wh
-00008ef0: 656e 2073 7563 6365 7373 6675 6c2c 2060  en successful, `
-00008f00: 6046 616c 7365 6060 2077 6865 6e20 6661  `False`` when fa
-00008f10: 696c 6564 2e0a 2020 2020 2020 2020 2222  iled..        ""
-00008f20: 220a 2020 2020 2020 2020 6966 206f 6e6c  ".        if onl
-00008f30: 795f 6d65 7461 6c73 3a0a 2020 2020 2020  y_metals:.      
-00008f40: 2020 2020 2020 696e 7075 745f 6c61 7965        input_laye
-00008f50: 7273 203d 2073 656c 662e 5f70 6564 622e  rs = self._pedb.
-00008f60: 6564 625f 6170 692e 6365 6c6c 2e6c 6179  edb_api.cell.lay
-00008f70: 6572 5f74 7970 655f 7365 742e 5369 676e  er_type_set.Sign
-00008f80: 616c 4c61 7965 7253 6574 0a20 2020 2020  alLayerSet.     
-00008f90: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00008fa0: 2020 2020 2069 6e70 7574 5f6c 6179 6572       input_layer
-00008fb0: 7320 3d20 7365 6c66 2e5f 7065 6462 2e65  s = self._pedb.e
-00008fc0: 6462 5f61 7069 2e63 656c 6c2e 6c61 7965  db_api.cell.laye
-00008fd0: 725f 7479 7065 5f73 6574 2e53 7461 636b  r_type_set.Stack
-00008fe0: 7570 4c61 7965 7253 6574 0a0a 2020 2020  upLayerSet..    
-00008ff0: 2020 2020 7265 732c 2074 6f70 6c2c 2074      res, topl, t
-00009000: 6f70 7a2c 2062 6f74 746f 6d6c 2c20 626f  opz, bottoml, bo
-00009010: 7474 6f6d 7a20 3d20 7365 6c66 2e5f 6c61  ttomz = self._la
-00009020: 7965 725f 636f 6c6c 6563 7469 6f6e 2e47  yer_collection.G
-00009030: 6574 546f 7042 6f74 746f 6d53 7461 636b  etTopBottomStack
-00009040: 7570 4c61 7965 7273 2869 6e70 7574 5f6c  upLayers(input_l
-00009050: 6179 6572 7329 0a20 2020 2020 2020 2072  ayers).        r
-00009060: 6574 7572 6e20 746f 706c 2e47 6574 4e61  eturn topl.GetNa
-00009070: 6d65 2829 2c20 746f 707a 2c20 626f 7474  me(), topz, bott
-00009080: 6f6d 6c2e 4765 744e 616d 6528 292c 2062  oml.GetName(), b
-00009090: 6f74 746f 6d7a 0a0a 2020 2020 4070 7965  ottomz..    @pye
-000090a0: 6462 5f66 756e 6374 696f 6e5f 6861 6e64  db_function_hand
-000090b0: 6c65 7228 290a 2020 2020 6465 6620 666c  ler().    def fl
-000090c0: 6970 5f64 6573 6967 6e28 7365 6c66 293a  ip_design(self):
-000090d0: 0a20 2020 2020 2020 2022 2222 466c 6970  .        """Flip
-000090e0: 2074 6865 2063 7572 7265 6e74 2064 6573   the current des
-000090f0: 6967 6e20 6f66 2061 206c 6179 6f75 742e  ign of a layout.
-00009100: 0a0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-00009110: 730a 2020 2020 2020 2020 2d2d 2d2d 2d2d  s.        ------
-00009120: 2d0a 2020 2020 2020 2020 626f 6f6c 0a20  -.        bool. 
-00009130: 2020 2020 2020 2020 2020 2060 6054 7275             ``Tru
-00009140: 6560 6020 7768 656e 2073 7563 6365 6564  e`` when succeed
-00009150: 2060 6046 616c 7365 6060 2069 6620 6e6f   ``False`` if no
-00009160: 742e 0a0a 2020 2020 2020 2020 4578 616d  t...        Exam
-00009170: 706c 6573 0a20 2020 2020 2020 202d 2d2d  ples.        ---
-00009180: 2d2d 2d2d 2d0a 2020 2020 2020 2020 3e3e  -----.        >>
-00009190: 3e20 6564 6220 3d20 4564 6228 6564 6270  > edb = Edb(edbp
-000091a0: 6174 683d 7461 7267 6574 6669 6c65 2c20  ath=targetfile, 
-000091b0: 2065 6462 7665 7273 696f 6e3d 2232 3032   edbversion="202
-000091c0: 312e 3222 290a 2020 2020 2020 2020 3e3e  1.2").        >>
-000091d0: 3e20 6564 622e 7374 6163 6b75 702e 666c  > edb.stackup.fl
-000091e0: 6970 5f64 6573 6967 6e28 290a 2020 2020  ip_design().    
-000091f0: 2020 2020 3e3e 3e20 6564 622e 7361 7665      >>> edb.save
-00009200: 2829 0a20 2020 2020 2020 203e 3e3e 2065  ().        >>> e
-00009210: 6462 2e63 6c6f 7365 5f65 6462 2829 0a20  db.close_edb(). 
-00009220: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00009230: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
-00009240: 2020 2020 6c63 203d 2073 656c 662e 5f6c      lc = self._l
-00009250: 6179 6572 5f63 6f6c 6c65 6374 696f 6e0a  ayer_collection.
-00009260: 2020 2020 2020 2020 2020 2020 6e65 775f              new_
-00009270: 6c63 203d 2073 656c 662e 5f70 6564 622e  lc = self._pedb.
-00009280: 6564 625f 6170 692e 4365 6c6c 2e4c 6179  edb_api.Cell.Lay
-00009290: 6572 436f 6c6c 6563 7469 6f6e 2829 0a20  erCollection(). 
-000092a0: 2020 2020 2020 2020 2020 206c 635f 6d6f             lc_mo
-000092b0: 6465 203d 206c 632e 4765 744d 6f64 6528  de = lc.GetMode(
-000092c0: 290a 2020 2020 2020 2020 2020 2020 6e65  ).            ne
-000092d0: 775f 6c63 2e53 6574 4d6f 6465 286c 635f  w_lc.SetMode(lc_
-000092e0: 6d6f 6465 290a 2020 2020 2020 2020 2020  mode).          
-000092f0: 2020 6d61 785f 656c 6576 6174 696f 6e20    max_elevation 
-00009300: 3d20 302e 300a 2020 2020 2020 2020 2020  = 0.0.          
-00009310: 2020 666f 7220 6c61 7965 7220 696e 206c    for layer in l
-00009320: 632e 4c61 7965 7273 2873 656c 662e 5f70  c.Layers(self._p
-00009330: 6564 622e 6564 625f 6170 692e 6365 6c6c  edb.edb_api.cell
-00009340: 2e6c 6179 6572 5f74 7970 655f 7365 742e  .layer_type_set.
-00009350: 5374 6163 6b75 704c 6179 6572 5365 7429  StackupLayerSet)
-00009360: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00009370: 2020 6966 2022 5261 6442 6f78 2220 6e6f    if "RadBox" no
-00009380: 7420 696e 206c 6179 6572 2e47 6574 4e61  t in layer.GetNa
-00009390: 6d65 2829 3a20 2023 2049 676e 6f72 6520  me():  # Ignore 
-000093a0: 5261 6442 6f78 0a20 2020 2020 2020 2020  RadBox.         
-000093b0: 2020 2020 2020 2020 2020 206c 6f77 6572             lower
-000093c0: 5f65 6c65 7661 7469 6f6e 203d 206c 6179  _elevation = lay
-000093d0: 6572 2e43 6c6f 6e65 2829 2e47 6574 4c6f  er.Clone().GetLo
-000093e0: 7765 7245 6c65 7661 7469 6f6e 2829 202a  werElevation() *
-000093f0: 2031 2e30 6536 0a20 2020 2020 2020 2020   1.0e6.         
-00009400: 2020 2020 2020 2020 2020 2075 7070 6572             upper
-00009410: 5f65 6c65 7661 7469 6f6e 203d 206c 6179  _elevation = lay
-00009420: 6572 2e43 6c6f 6e65 2829 2e47 6574 5570  er.Clone().GetUp
-00009430: 7065 7245 6c65 7661 7469 6f6e 2829 202a  perElevation() *
-00009440: 2031 2e30 6536 0a20 2020 2020 2020 2020   1.0e6.         
-00009450: 2020 2020 2020 2020 2020 206d 6178 5f65             max_e
-00009460: 6c65 7661 7469 6f6e 203d 206d 6178 285b  levation = max([
-00009470: 6d61 785f 656c 6576 6174 696f 6e2c 206c  max_elevation, l
-00009480: 6f77 6572 5f65 6c65 7661 7469 6f6e 2c20  ower_elevation, 
-00009490: 7570 7065 725f 656c 6576 6174 696f 6e5d  upper_elevation]
-000094a0: 290a 0a20 2020 2020 2020 2020 2020 206e  )..            n
-000094b0: 6f6e 5f73 7461 636b 7570 5f6c 6179 6572  on_stackup_layer
-000094c0: 7320 3d20 5b5d 0a20 2020 2020 2020 2020  s = [].         
-000094d0: 2020 2066 6f72 206c 6179 6572 2069 6e20     for layer in 
-000094e0: 6c63 2e4c 6179 6572 7328 7365 6c66 2e5f  lc.Layers(self._
-000094f0: 7065 6462 2e65 6462 5f61 7069 2e63 656c  pedb.edb_api.cel
-00009500: 6c2e 6c61 7965 725f 7479 7065 5f73 6574  l.layer_type_set
-00009510: 2e41 6c6c 4c61 7965 7253 6574 293a 0a20  .AllLayerSet):. 
-00009520: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00009530: 6c6f 6e65 645f 6c61 7965 7220 3d20 6c61  loned_layer = la
-00009540: 7965 722e 436c 6f6e 6528 290a 2020 2020  yer.Clone().    
-00009550: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-00009560: 6f74 2063 6c6f 6e65 645f 6c61 7965 722e  ot cloned_layer.
-00009570: 4973 5374 6163 6b75 704c 6179 6572 2829  IsStackupLayer()
-00009580: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00009590: 2020 2020 2020 6e6f 6e5f 7374 6163 6b75        non_stacku
-000095a0: 705f 6c61 7965 7273 2e61 7070 656e 6428  p_layers.append(
-000095b0: 636c 6f6e 6564 5f6c 6179 6572 290a 2020  cloned_layer).  
-000095c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000095d0: 2020 636f 6e74 696e 7565 0a20 2020 2020    continue.     
-000095e0: 2020 2020 2020 2020 2020 2069 6620 2252             if "R
-000095f0: 6164 426f 7822 206e 6f74 2069 6e20 636c  adBox" not in cl
-00009600: 6f6e 6564 5f6c 6179 6572 2e47 6574 4e61  oned_layer.GetNa
-00009610: 6d65 2829 2061 6e64 206e 6f74 2063 6c6f  me() and not clo
-00009620: 6e65 645f 6c61 7965 722e 4973 5669 614c  ned_layer.IsViaL
-00009630: 6179 6572 2829 3a0a 2020 2020 2020 2020  ayer():.        
-00009640: 2020 2020 2020 2020 2020 2020 7570 7065              uppe
-00009650: 725f 656c 6576 6174 696f 6e20 3d20 636c  r_elevation = cl
-00009660: 6f6e 6564 5f6c 6179 6572 2e47 6574 5570  oned_layer.GetUp
-00009670: 7065 7245 6c65 7661 7469 6f6e 2829 202a  perElevation() *
-00009680: 2031 2e30 6536 0a20 2020 2020 2020 2020   1.0e6.         
-00009690: 2020 2020 2020 2020 2020 2075 7064 6174             updat
-000096a0: 6564 5f6c 6f77 6572 5f65 6c20 3d20 6d61  ed_lower_el = ma
-000096b0: 785f 656c 6576 6174 696f 6e20 2d20 7570  x_elevation - up
-000096c0: 7065 725f 656c 6576 6174 696f 6e0a 2020  per_elevation.  
-000096d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000096e0: 2020 7661 6c20 3d20 7365 6c66 2e5f 6564    val = self._ed
-000096f0: 625f 7661 6c75 6528 227b 7d75 6d22 2e66  b_value("{}um".f
-00009700: 6f72 6d61 7428 7570 6461 7465 645f 6c6f  ormat(updated_lo
-00009710: 7765 725f 656c 2929 0a20 2020 2020 2020  wer_el)).       
-00009720: 2020 2020 2020 2020 2020 2020 2063 6c6f               clo
-00009730: 6e65 645f 6c61 7965 722e 5365 744c 6f77  ned_layer.SetLow
-00009740: 6572 456c 6576 6174 696f 6e28 7661 6c29  erElevation(val)
-00009750: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009760: 2020 2020 2069 6620 280a 2020 2020 2020       if (.      
-00009770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009780: 2020 636c 6f6e 6564 5f6c 6179 6572 2e47    cloned_layer.G
-00009790: 6574 546f 7042 6f74 746f 6d41 7373 6f63  etTopBottomAssoc
-000097a0: 6961 7469 6f6e 2829 0a20 2020 2020 2020  iation().       
-000097b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000097c0: 203d 3d20 7365 6c66 2e5f 7065 6462 2e65   == self._pedb.e
-000097d0: 6462 5f61 7069 2e43 656c 6c2e 546f 7042  db_api.Cell.TopB
-000097e0: 6f74 746f 6d41 7373 6f63 6961 7469 6f6e  ottomAssociation
-000097f0: 2e54 6f70 4173 736f 6369 6174 6564 0a20  .TopAssociated. 
-00009800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009810: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
-00009820: 2020 2020 2020 2020 2020 2020 2020 636c                cl
-00009830: 6f6e 6564 5f6c 6179 6572 2e53 6574 546f  oned_layer.SetTo
-00009840: 7042 6f74 746f 6d41 7373 6f63 6961 7469  pBottomAssociati
-00009850: 6f6e 280a 2020 2020 2020 2020 2020 2020  on(.            
-00009860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009870: 7365 6c66 2e5f 7065 6462 2e65 6462 5f61  self._pedb.edb_a
-00009880: 7069 2e43 656c 6c2e 546f 7042 6f74 746f  pi.Cell.TopBotto
-00009890: 6d41 7373 6f63 6961 7469 6f6e 2e42 6f74  mAssociation.Bot
-000098a0: 746f 6d41 7373 6f63 6961 7465 640a 2020  tomAssociated.  
+00008ab0: 2020 2020 2020 2020 6d61 7465 7269 616c          material
+00008ac0: 3d6c 6179 6572 5b22 6d61 7465 7269 616c  =layer["material
+00008ad0: 225d 2c0a 2020 2020 2020 2020 2020 2020  "],.            
+00008ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008af0: 2020 2020 2020 2020 6669 6c6c 4d61 7465          fillMate
+00008b00: 7269 616c 3d6c 6179 6572 5b22 6469 656c  rial=layer["diel
+00008b10: 6563 7472 6963 5f66 696c 6c22 5d2c 0a20  ectric_fill"],. 
+00008b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008b40: 2020 2074 6869 636b 6e65 7373 3d6c 6179     thickness=lay
+00008b50: 6572 5b22 7468 6963 6b6e 6573 7322 5d2c  er["thickness"],
+00008b60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008b80: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
+00008b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008ba0: 2020 2070 7265 765f 6c61 7965 7220 3d20     prev_layer = 
+00008bb0: 6c61 7965 725f 6e61 6d65 0a20 2020 2020  layer_name.     
+00008bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008bd0: 2020 2069 6620 6c61 7965 725f 6e61 6d65     if layer_name
+00008be0: 2069 6e20 7365 6c66 2e73 7461 636b 7570   in self.stackup
+00008bf0: 5f6c 6179 6572 733a 0a20 2020 2020 2020  _layers:.       
+00008c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008c10: 2020 2020 2073 656c 662e 7374 6163 6b75       self.stacku
+00008c20: 705f 6c61 7965 7273 5b6c 6179 6572 5b22  p_layers[layer["
+00008c30: 6e61 6d65 225d 5d2e 5f6c 6f61 645f 6c61  name"]]._load_la
+00008c40: 7965 7228 6c61 7965 7229 0a20 2020 2020  yer(layer).     
+00008c50: 2020 2020 2020 2073 656c 662e 7265 6672         self.refr
+00008c60: 6573 685f 6c61 7965 725f 636f 6c6c 6563  esh_layer_collec
+00008c70: 7469 6f6e 2829 0a20 2020 2020 2020 2020  tion().         
+00008c80: 2020 2072 6574 7572 6e20 5472 7565 0a0a     return True..
+00008c90: 2020 2020 4070 7965 6462 5f66 756e 6374      @pyedb_funct
+00008ca0: 696f 6e5f 6861 6e64 6c65 7228 290a 2020  ion_handler().  
+00008cb0: 2020 6465 6620 7374 6163 6b75 705f 6c69    def stackup_li
+00008cc0: 6d69 7473 2873 656c 662c 206f 6e6c 795f  mits(self, only_
+00008cd0: 6d65 7461 6c73 3d46 616c 7365 293a 0a20  metals=False):. 
+00008ce0: 2020 2020 2020 2022 2222 5265 7472 6965         """Retrie
+00008cf0: 7665 2073 7461 636b 7570 206c 696d 6974  ve stackup limit
+00008d00: 732e 0a0a 2020 2020 2020 2020 2e2e 2064  s...        .. d
+00008d10: 6570 7265 6361 7465 643a 3a20 302e 362e  eprecated:: 0.6.
+00008d20: 3632 0a20 2020 2020 2020 2020 2020 5573  62.           Us
+00008d30: 6520 3a66 756e 633a 6045 6462 2e73 7461  e :func:`Edb.sta
+00008d40: 636b 7570 2e6c 696d 6974 7360 2066 756e  ckup.limits` fun
+00008d50: 6374 696f 6e20 696e 7374 6561 642e 0a0a  ction instead...
+00008d60: 2020 2020 2020 2020 5061 7261 6d65 7465          Paramete
+00008d70: 7273 0a20 2020 2020 2020 202d 2d2d 2d2d  rs.        -----
+00008d80: 2d2d 2d2d 2d0a 2020 2020 2020 2020 6f6e  -----.        on
+00008d90: 6c79 5f6d 6574 616c 7320 3a20 626f 6f6c  ly_metals : bool
+00008da0: 2c20 6f70 7469 6f6e 616c 0a20 2020 2020  , optional.     
+00008db0: 2020 2020 2020 2057 6865 7468 6572 2074         Whether t
+00008dc0: 6f20 7265 7472 6965 7665 206f 6e6c 7920  o retrieve only 
+00008dd0: 6d65 7461 6c73 2e20 5468 6520 6465 6661  metals. The defa
+00008de0: 756c 7420 6973 2060 6046 616c 7365 6060  ult is ``False``
+00008df0: 2e0a 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
+00008e00: 6e73 0a20 2020 2020 2020 202d 2d2d 2d2d  ns.        -----
+00008e10: 2d2d 0a20 2020 2020 2020 2062 6f6f 6c0a  --.        bool.
+00008e20: 2020 2020 2020 2020 2020 2020 6060 5472              ``Tr
+00008e30: 7565 6060 2077 6865 6e20 7375 6363 6573  ue`` when succes
+00008e40: 7366 756c 2c20 6060 4661 6c73 6560 6020  sful, ``False`` 
+00008e50: 7768 656e 2066 6169 6c65 642e 0a20 2020  when failed..   
+00008e60: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00008e70: 2077 6172 6e69 6e67 732e 7761 726e 2822   warnings.warn("
+00008e80: 6073 7461 636b 7570 5f6c 696d 6974 7360  `stackup_limits`
+00008e90: 2069 7320 6465 7072 6563 6174 6564 2e20   is deprecated. 
+00008ea0: 5573 6520 606c 696d 6974 7360 2070 726f  Use `limits` pro
+00008eb0: 7065 7274 7920 696e 7374 6561 642e 222c  perty instead.",
+00008ec0: 2044 6570 7265 6361 7469 6f6e 5761 726e   DeprecationWarn
+00008ed0: 696e 6729 0a20 2020 2020 2020 2072 6574  ing).        ret
+00008ee0: 7572 6e20 7365 6c66 2e6c 696d 6974 7328  urn self.limits(
+00008ef0: 6f6e 6c79 5f6d 6574 616c 733d 6f6e 6c79  only_metals=only
+00008f00: 5f6d 6574 616c 7329 0a0a 2020 2020 4070  _metals)..    @p
+00008f10: 7965 6462 5f66 756e 6374 696f 6e5f 6861  yedb_function_ha
+00008f20: 6e64 6c65 7228 290a 2020 2020 6465 6620  ndler().    def 
+00008f30: 6c69 6d69 7473 2873 656c 662c 206f 6e6c  limits(self, onl
+00008f40: 795f 6d65 7461 6c73 3d46 616c 7365 293a  y_metals=False):
+00008f50: 0a20 2020 2020 2020 2022 2222 5265 7472  .        """Retr
+00008f60: 6965 7665 2073 7461 636b 7570 206c 696d  ieve stackup lim
+00008f70: 6974 732e 0a0a 2020 2020 2020 2020 5061  its...        Pa
+00008f80: 7261 6d65 7465 7273 0a20 2020 2020 2020  rameters.       
+00008f90: 202d 2d2d 2d2d 2d2d 2d2d 2d0a 2020 2020   ----------.    
+00008fa0: 2020 2020 6f6e 6c79 5f6d 6574 616c 7320      only_metals 
+00008fb0: 3a20 626f 6f6c 2c20 6f70 7469 6f6e 616c  : bool, optional
+00008fc0: 0a20 2020 2020 2020 2020 2020 2057 6865  .            Whe
+00008fd0: 7468 6572 2074 6f20 7265 7472 6965 7665  ther to retrieve
+00008fe0: 206f 6e6c 7920 6d65 7461 6c73 2e20 5468   only metals. Th
+00008ff0: 6520 6465 6661 756c 7420 6973 2060 6046  e default is ``F
+00009000: 616c 7365 6060 2e0a 0a20 2020 2020 2020  alse``...       
+00009010: 2052 6574 7572 6e73 0a20 2020 2020 2020   Returns.       
+00009020: 202d 2d2d 2d2d 2d2d 0a20 2020 2020 2020   -------.       
+00009030: 2062 6f6f 6c0a 2020 2020 2020 2020 2020   bool.          
+00009040: 2020 6060 5472 7565 6060 2077 6865 6e20    ``True`` when 
+00009050: 7375 6363 6573 7366 756c 2c20 6060 4661  successful, ``Fa
+00009060: 6c73 6560 6020 7768 656e 2066 6169 6c65  lse`` when faile
+00009070: 642e 0a20 2020 2020 2020 2022 2222 0a20  d..        """. 
+00009080: 2020 2020 2020 2069 6620 6f6e 6c79 5f6d         if only_m
+00009090: 6574 616c 733a 0a20 2020 2020 2020 2020  etals:.         
+000090a0: 2020 2069 6e70 7574 5f6c 6179 6572 7320     input_layers 
+000090b0: 3d20 7365 6c66 2e5f 7065 6462 2e65 6462  = self._pedb.edb
+000090c0: 5f61 7069 2e63 656c 6c2e 6c61 7965 725f  _api.cell.layer_
+000090d0: 7479 7065 5f73 6574 2e53 6967 6e61 6c4c  type_set.SignalL
+000090e0: 6179 6572 5365 740a 2020 2020 2020 2020  ayerSet.        
+000090f0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00009100: 2020 696e 7075 745f 6c61 7965 7273 203d    input_layers =
+00009110: 2073 656c 662e 5f70 6564 622e 6564 625f   self._pedb.edb_
+00009120: 6170 692e 6365 6c6c 2e6c 6179 6572 5f74  api.cell.layer_t
+00009130: 7970 655f 7365 742e 5374 6163 6b75 704c  ype_set.StackupL
+00009140: 6179 6572 5365 740a 0a20 2020 2020 2020  ayerSet..       
+00009150: 2072 6573 2c20 746f 706c 2c20 746f 707a   res, topl, topz
+00009160: 2c20 626f 7474 6f6d 6c2c 2062 6f74 746f  , bottoml, botto
+00009170: 6d7a 203d 2073 656c 662e 5f6c 6179 6572  mz = self._layer
+00009180: 5f63 6f6c 6c65 6374 696f 6e2e 4765 7454  _collection.GetT
+00009190: 6f70 426f 7474 6f6d 5374 6163 6b75 704c  opBottomStackupL
+000091a0: 6179 6572 7328 696e 7075 745f 6c61 7965  ayers(input_laye
+000091b0: 7273 290a 2020 2020 2020 2020 7265 7475  rs).        retu
+000091c0: 726e 2074 6f70 6c2e 4765 744e 616d 6528  rn topl.GetName(
+000091d0: 292c 2074 6f70 7a2c 2062 6f74 746f 6d6c  ), topz, bottoml
+000091e0: 2e47 6574 4e61 6d65 2829 2c20 626f 7474  .GetName(), bott
+000091f0: 6f6d 7a0a 0a20 2020 2040 7079 6564 625f  omz..    @pyedb_
+00009200: 6675 6e63 7469 6f6e 5f68 616e 646c 6572  function_handler
+00009210: 2829 0a20 2020 2064 6566 2066 6c69 705f  ().    def flip_
+00009220: 6465 7369 676e 2873 656c 6629 3a0a 2020  design(self):.  
+00009230: 2020 2020 2020 2222 2246 6c69 7020 7468        """Flip th
+00009240: 6520 6375 7272 656e 7420 6465 7369 676e  e current design
+00009250: 206f 6620 6120 6c61 796f 7574 2e0a 0a20   of a layout... 
+00009260: 2020 2020 2020 2052 6574 7572 6e73 0a20         Returns. 
+00009270: 2020 2020 2020 202d 2d2d 2d2d 2d2d 0a20         -------. 
+00009280: 2020 2020 2020 2062 6f6f 6c0a 2020 2020         bool.    
+00009290: 2020 2020 2020 2020 6060 5472 7565 6060          ``True``
+000092a0: 2077 6865 6e20 7375 6363 6565 6420 6060   when succeed ``
+000092b0: 4661 6c73 6560 6020 6966 206e 6f74 2e0a  False`` if not..
+000092c0: 0a20 2020 2020 2020 2045 7861 6d70 6c65  .        Example
+000092d0: 730a 2020 2020 2020 2020 2d2d 2d2d 2d2d  s.        ------
+000092e0: 2d2d 0a20 2020 2020 2020 203e 3e3e 2065  --.        >>> e
+000092f0: 6462 203d 2045 6462 2865 6462 7061 7468  db = Edb(edbpath
+00009300: 3d74 6172 6765 7466 696c 652c 2020 6564  =targetfile,  ed
+00009310: 6276 6572 7369 6f6e 3d22 3230 3231 2e32  bversion="2021.2
+00009320: 2229 0a20 2020 2020 2020 203e 3e3e 2065  ").        >>> e
+00009330: 6462 2e73 7461 636b 7570 2e66 6c69 705f  db.stackup.flip_
+00009340: 6465 7369 676e 2829 0a20 2020 2020 2020  design().       
+00009350: 203e 3e3e 2065 6462 2e73 6176 6528 290a   >>> edb.save().
+00009360: 2020 2020 2020 2020 3e3e 3e20 6564 622e          >>> edb.
+00009370: 636c 6f73 655f 6564 6228 290a 2020 2020  close_edb().    
+00009380: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00009390: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
+000093a0: 206c 6320 3d20 7365 6c66 2e5f 6c61 7965   lc = self._laye
+000093b0: 725f 636f 6c6c 6563 7469 6f6e 0a20 2020  r_collection.   
+000093c0: 2020 2020 2020 2020 206e 6577 5f6c 6320           new_lc 
+000093d0: 3d20 7365 6c66 2e5f 7065 6462 2e65 6462  = self._pedb.edb
+000093e0: 5f61 7069 2e43 656c 6c2e 4c61 7965 7243  _api.Cell.LayerC
+000093f0: 6f6c 6c65 6374 696f 6e28 290a 2020 2020  ollection().    
+00009400: 2020 2020 2020 2020 6c63 5f6d 6f64 6520          lc_mode 
+00009410: 3d20 6c63 2e47 6574 4d6f 6465 2829 0a20  = lc.GetMode(). 
+00009420: 2020 2020 2020 2020 2020 206e 6577 5f6c             new_l
+00009430: 632e 5365 744d 6f64 6528 6c63 5f6d 6f64  c.SetMode(lc_mod
+00009440: 6529 0a20 2020 2020 2020 2020 2020 206d  e).            m
+00009450: 6178 5f65 6c65 7661 7469 6f6e 203d 2030  ax_elevation = 0
+00009460: 2e30 0a20 2020 2020 2020 2020 2020 2066  .0.            f
+00009470: 6f72 206c 6179 6572 2069 6e20 6c63 2e4c  or layer in lc.L
+00009480: 6179 6572 7328 7365 6c66 2e5f 7065 6462  ayers(self._pedb
+00009490: 2e65 6462 5f61 7069 2e63 656c 6c2e 6c61  .edb_api.cell.la
+000094a0: 7965 725f 7479 7065 5f73 6574 2e53 7461  yer_type_set.Sta
+000094b0: 636b 7570 4c61 7965 7253 6574 293a 0a20  ckupLayerSet):. 
+000094c0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000094d0: 6620 2252 6164 426f 7822 206e 6f74 2069  f "RadBox" not i
+000094e0: 6e20 6c61 7965 722e 4765 744e 616d 6528  n layer.GetName(
+000094f0: 293a 2020 2320 4967 6e6f 7265 2052 6164  ):  # Ignore Rad
+00009500: 426f 780a 2020 2020 2020 2020 2020 2020  Box.            
+00009510: 2020 2020 2020 2020 6c6f 7765 725f 656c          lower_el
+00009520: 6576 6174 696f 6e20 3d20 6c61 7965 722e  evation = layer.
+00009530: 436c 6f6e 6528 292e 4765 744c 6f77 6572  Clone().GetLower
+00009540: 456c 6576 6174 696f 6e28 2920 2a20 312e  Elevation() * 1.
+00009550: 3065 360a 2020 2020 2020 2020 2020 2020  0e6.            
+00009560: 2020 2020 2020 2020 7570 7065 725f 656c          upper_el
+00009570: 6576 6174 696f 6e20 3d20 6c61 7965 722e  evation = layer.
+00009580: 436c 6f6e 6528 292e 4765 7455 7070 6572  Clone().GetUpper
+00009590: 456c 6576 6174 696f 6e28 2920 2a20 312e  Elevation() * 1.
+000095a0: 3065 360a 2020 2020 2020 2020 2020 2020  0e6.            
+000095b0: 2020 2020 2020 2020 6d61 785f 656c 6576          max_elev
+000095c0: 6174 696f 6e20 3d20 6d61 7828 5b6d 6178  ation = max([max
+000095d0: 5f65 6c65 7661 7469 6f6e 2c20 6c6f 7765  _elevation, lowe
+000095e0: 725f 656c 6576 6174 696f 6e2c 2075 7070  r_elevation, upp
+000095f0: 6572 5f65 6c65 7661 7469 6f6e 5d29 0a0a  er_elevation])..
+00009600: 2020 2020 2020 2020 2020 2020 6e6f 6e5f              non_
+00009610: 7374 6163 6b75 705f 6c61 7965 7273 203d  stackup_layers =
+00009620: 205b 5d0a 2020 2020 2020 2020 2020 2020   [].            
+00009630: 666f 7220 6c61 7965 7220 696e 206c 632e  for layer in lc.
+00009640: 4c61 7965 7273 2873 656c 662e 5f70 6564  Layers(self._ped
+00009650: 622e 6564 625f 6170 692e 6365 6c6c 2e6c  b.edb_api.cell.l
+00009660: 6179 6572 5f74 7970 655f 7365 742e 416c  ayer_type_set.Al
+00009670: 6c4c 6179 6572 5365 7429 3a0a 2020 2020  lLayerSet):.    
+00009680: 2020 2020 2020 2020 2020 2020 636c 6f6e              clon
+00009690: 6564 5f6c 6179 6572 203d 206c 6179 6572  ed_layer = layer
+000096a0: 2e43 6c6f 6e65 2829 0a20 2020 2020 2020  .Clone().       
+000096b0: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+000096c0: 636c 6f6e 6564 5f6c 6179 6572 2e49 7353  cloned_layer.IsS
+000096d0: 7461 636b 7570 4c61 7965 7228 293a 0a20  tackupLayer():. 
+000096e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000096f0: 2020 206e 6f6e 5f73 7461 636b 7570 5f6c     non_stackup_l
+00009700: 6179 6572 732e 6170 7065 6e64 2863 6c6f  ayers.append(clo
+00009710: 6e65 645f 6c61 7965 7229 0a20 2020 2020  ned_layer).     
+00009720: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00009730: 6f6e 7469 6e75 650a 2020 2020 2020 2020  ontinue.        
+00009740: 2020 2020 2020 2020 6966 2022 5261 6442          if "RadB
+00009750: 6f78 2220 6e6f 7420 696e 2063 6c6f 6e65  ox" not in clone
+00009760: 645f 6c61 7965 722e 4765 744e 616d 6528  d_layer.GetName(
+00009770: 2920 616e 6420 6e6f 7420 636c 6f6e 6564  ) and not cloned
+00009780: 5f6c 6179 6572 2e49 7356 6961 4c61 7965  _layer.IsViaLaye
+00009790: 7228 293a 0a20 2020 2020 2020 2020 2020  r():.           
+000097a0: 2020 2020 2020 2020 2075 7070 6572 5f65           upper_e
+000097b0: 6c65 7661 7469 6f6e 203d 2063 6c6f 6e65  levation = clone
+000097c0: 645f 6c61 7965 722e 4765 7455 7070 6572  d_layer.GetUpper
+000097d0: 456c 6576 6174 696f 6e28 2920 2a20 312e  Elevation() * 1.
+000097e0: 3065 360a 2020 2020 2020 2020 2020 2020  0e6.            
+000097f0: 2020 2020 2020 2020 7570 6461 7465 645f          updated_
+00009800: 6c6f 7765 725f 656c 203d 206d 6178 5f65  lower_el = max_e
+00009810: 6c65 7661 7469 6f6e 202d 2075 7070 6572  levation - upper
+00009820: 5f65 6c65 7661 7469 6f6e 0a20 2020 2020  _elevation.     
+00009830: 2020 2020 2020 2020 2020 2020 2020 2076                 v
+00009840: 616c 203d 2073 656c 662e 5f65 6462 5f76  al = self._edb_v
+00009850: 616c 7565 2822 7b7d 756d 222e 666f 726d  alue("{}um".form
+00009860: 6174 2875 7064 6174 6564 5f6c 6f77 6572  at(updated_lower
+00009870: 5f65 6c29 290a 2020 2020 2020 2020 2020  _el)).          
+00009880: 2020 2020 2020 2020 2020 636c 6f6e 6564            cloned
+00009890: 5f6c 6179 6572 2e53 6574 4c6f 7765 7245  _layer.SetLowerE
+000098a0: 6c65 7661 7469 6f6e 2876 616c 290a 2020  levation(val).  
 000098b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000098c0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-000098d0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-000098e0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000098f0: 2020 2020 2020 2020 2020 636c 6f6e 6564            cloned
-00009900: 5f6c 6179 6572 2e53 6574 546f 7042 6f74  _layer.SetTopBot
-00009910: 746f 6d41 7373 6f63 6961 7469 6f6e 2873  tomAssociation(s
-00009920: 656c 662e 5f70 6564 622e 6564 625f 6170  elf._pedb.edb_ap
-00009930: 692e 4365 6c6c 2e54 6f70 426f 7474 6f6d  i.Cell.TopBottom
-00009940: 4173 736f 6369 6174 696f 6e2e 546f 7041  Association.TopA
-00009950: 7373 6f63 6961 7465 6429 0a20 2020 2020  ssociated).     
-00009960: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-00009970: 6577 5f6c 632e 4164 6453 7461 636b 7570  ew_lc.AddStackup
-00009980: 4c61 7965 7241 7445 6c65 7661 7469 6f6e  LayerAtElevation
-00009990: 2863 6c6f 6e65 645f 6c61 7965 7229 0a0a  (cloned_layer)..
-000099a0: 2020 2020 2020 2020 2020 2020 7669 616c              vial
-000099b0: 6179 6572 7320 3d20 5b0a 2020 2020 2020  ayers = [.      
-000099c0: 2020 2020 2020 2020 2020 6c61 790a 2020            lay.  
-000099d0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-000099e0: 7220 6c61 7920 696e 206c 632e 4c61 7965  r lay in lc.Laye
-000099f0: 7273 2873 656c 662e 5f70 6564 622e 6564  rs(self._pedb.ed
-00009a00: 625f 6170 692e 6365 6c6c 2e6c 6179 6572  b_api.cell.layer
-00009a10: 5f74 7970 655f 7365 742e 5374 6163 6b75  _type_set.Stacku
-00009a20: 704c 6179 6572 5365 7429 0a20 2020 2020  pLayerSet).     
-00009a30: 2020 2020 2020 2020 2020 2069 6620 6c61             if la
-00009a40: 792e 436c 6f6e 6528 292e 4973 5669 614c  y.Clone().IsViaL
-00009a50: 6179 6572 2829 0a20 2020 2020 2020 2020  ayer().         
-00009a60: 2020 205d 0a20 2020 2020 2020 2020 2020     ].           
-00009a70: 2066 6f72 206c 6179 6572 2069 6e20 7669   for layer in vi
-00009a80: 616c 6179 6572 733a 0a20 2020 2020 2020  alayers:.       
-00009a90: 2020 2020 2020 2020 2063 6c6f 6e65 645f           cloned_
-00009aa0: 7669 615f 6c61 7965 7220 3d20 6c61 7965  via_layer = laye
-00009ab0: 722e 436c 6f6e 6528 290a 2020 2020 2020  r.Clone().      
-00009ac0: 2020 2020 2020 2020 2020 7570 7065 725f            upper_
-00009ad0: 7265 665f 6e61 6d65 203d 2063 6c6f 6e65  ref_name = clone
-00009ae0: 645f 7669 615f 6c61 7965 722e 4765 7452  d_via_layer.GetR
-00009af0: 6566 4c61 7965 724e 616d 6528 5472 7565  efLayerName(True
-00009b00: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00009b10: 2020 6c6f 7765 725f 7265 665f 6e61 6d65    lower_ref_name
-00009b20: 203d 2063 6c6f 6e65 645f 7669 615f 6c61   = cloned_via_la
-00009b30: 7965 722e 4765 7452 6566 4c61 7965 724e  yer.GetRefLayerN
-00009b40: 616d 6528 4661 6c73 6529 0a20 2020 2020  ame(False).     
-00009b50: 2020 2020 2020 2020 2020 2075 7070 6572             upper
-00009b60: 5f72 6566 203d 205b 0a20 2020 2020 2020  _ref = [.       
-00009b70: 2020 2020 2020 2020 2020 2020 206c 6179               lay
-00009b80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009b90: 2020 2020 2066 6f72 206c 6179 2069 6e20       for lay in 
-00009ba0: 6c63 2e4c 6179 6572 7328 7365 6c66 2e5f  lc.Layers(self._
-00009bb0: 7065 6462 2e65 6462 5f61 7069 2e63 656c  pedb.edb_api.cel
-00009bc0: 6c2e 6c61 7965 725f 7479 7065 5f73 6574  l.layer_type_set
-00009bd0: 2e41 6c6c 4c61 7965 7253 6574 290a 2020  .AllLayerSet).  
-00009be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009bf0: 2020 6966 206c 6179 2e47 6574 4e61 6d65    if lay.GetName
-00009c00: 2829 203d 3d20 7570 7065 725f 7265 665f  () == upper_ref_
-00009c10: 6e61 6d65 0a20 2020 2020 2020 2020 2020  name.           
-00009c20: 2020 2020 205d 5b30 5d0a 2020 2020 2020       ][0].      
-00009c30: 2020 2020 2020 2020 2020 6c6f 7765 725f            lower_
-00009c40: 7265 6620 3d20 5b0a 2020 2020 2020 2020  ref = [.        
-00009c50: 2020 2020 2020 2020 2020 2020 6c61 790a              lay.
-00009c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009c70: 2020 2020 666f 7220 6c61 7920 696e 206c      for lay in l
-00009c80: 632e 4c61 7965 7273 2873 656c 662e 5f70  c.Layers(self._p
-00009c90: 6564 622e 6564 625f 6170 692e 6365 6c6c  edb.edb_api.cell
-00009ca0: 2e6c 6179 6572 5f74 7970 655f 7365 742e  .layer_type_set.
-00009cb0: 416c 6c4c 6179 6572 5365 7429 0a20 2020  AllLayerSet).   
-00009cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009cd0: 2069 6620 6c61 792e 4765 744e 616d 6528   if lay.GetName(
-00009ce0: 2920 3d3d 206c 6f77 6572 5f72 6566 5f6e  ) == lower_ref_n
-00009cf0: 616d 650a 2020 2020 2020 2020 2020 2020  ame.            
-00009d00: 2020 2020 5d5b 305d 0a20 2020 2020 2020      ][0].       
-00009d10: 2020 2020 2020 2020 2063 6c6f 6e65 645f           cloned_
-00009d20: 7669 615f 6c61 7965 722e 5365 7452 6566  via_layer.SetRef
-00009d30: 4c61 7965 7228 6c6f 7765 725f 7265 662c  Layer(lower_ref,
-00009d40: 2054 7275 6529 0a20 2020 2020 2020 2020   True).         
-00009d50: 2020 2020 2020 2063 6c6f 6e65 645f 7669         cloned_vi
-00009d60: 615f 6c61 7965 722e 5365 7452 6566 4c61  a_layer.SetRefLa
-00009d70: 7965 7228 7570 7065 725f 7265 662c 2046  yer(upper_ref, F
-00009d80: 616c 7365 290a 2020 2020 2020 2020 2020  alse).          
-00009d90: 2020 2020 2020 7265 665f 6c61 7965 725f        ref_layer_
-00009da0: 696e 5f66 6c69 7070 6564 5f73 7461 636b  in_flipped_stack
-00009db0: 7570 203d 205b 0a20 2020 2020 2020 2020  up = [.         
-00009dc0: 2020 2020 2020 2020 2020 206c 6179 0a20             lay. 
-00009dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009de0: 2020 2066 6f72 206c 6179 2069 6e20 6e65     for lay in ne
-00009df0: 775f 6c63 2e4c 6179 6572 7328 7365 6c66  w_lc.Layers(self
-00009e00: 2e5f 7065 6462 2e65 6462 5f61 7069 2e63  ._pedb.edb_api.c
-00009e10: 656c 6c2e 6c61 7965 725f 7479 7065 5f73  ell.layer_type_s
-00009e20: 6574 2e41 6c6c 4c61 7965 7253 6574 290a  et.AllLayerSet).
-00009e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009e40: 2020 2020 6966 206c 6179 2e47 6574 4e61      if lay.GetNa
-00009e50: 6d65 2829 203d 3d20 7570 7065 725f 7265  me() == upper_re
-00009e60: 665f 6e61 6d65 0a20 2020 2020 2020 2020  f_name.         
-00009e70: 2020 2020 2020 205d 5b30 5d0a 2020 2020         ][0].    
-00009e80: 2020 2020 2020 2020 2020 2020 7669 615f              via_
-00009e90: 6c61 7965 725f 6c6f 7765 725f 656c 6576  layer_lower_elev
-00009ea0: 6174 696f 6e20 3d20 280a 2020 2020 2020  ation = (.      
-00009eb0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00009ec0: 665f 6c61 7965 725f 696e 5f66 6c69 7070  f_layer_in_flipp
-00009ed0: 6564 5f73 7461 636b 7570 2e47 6574 4c6f  ed_stackup.GetLo
-00009ee0: 7765 7245 6c65 7661 7469 6f6e 2829 202b  werElevation() +
-00009ef0: 2072 6566 5f6c 6179 6572 5f69 6e5f 666c   ref_layer_in_fl
-00009f00: 6970 7065 645f 7374 6163 6b75 702e 4765  ipped_stackup.Ge
-00009f10: 7454 6869 636b 6e65 7373 2829 0a20 2020  tThickness().   
-00009f20: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
-00009f30: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00009f40: 6c6f 6e65 645f 7669 615f 6c61 7965 722e  loned_via_layer.
-00009f50: 5365 744c 6f77 6572 456c 6576 6174 696f  SetLowerElevatio
-00009f60: 6e28 7365 6c66 2e5f 6564 625f 7661 6c75  n(self._edb_valu
-00009f70: 6528 7669 615f 6c61 7965 725f 6c6f 7765  e(via_layer_lowe
-00009f80: 725f 656c 6576 6174 696f 6e29 290a 2020  r_elevation)).  
-00009f90: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
-00009fa0: 775f 6c63 2e41 6464 5374 6163 6b75 704c  w_lc.AddStackupL
-00009fb0: 6179 6572 4174 456c 6576 6174 696f 6e28  ayerAtElevation(
-00009fc0: 636c 6f6e 6564 5f76 6961 5f6c 6179 6572  cloned_via_layer
-00009fd0: 290a 0a20 2020 2020 2020 2020 2020 206c  )..            l
-00009fe0: 6179 6572 5f6c 6973 7420 3d20 636f 6e76  ayer_list = conv
-00009ff0: 6572 745f 7079 5f6c 6973 745f 746f 5f6e  ert_py_list_to_n
-0000a000: 6574 5f6c 6973 7428 6e6f 6e5f 7374 6163  et_list(non_stac
-0000a010: 6b75 705f 6c61 7965 7273 290a 2020 2020  kup_layers).    
-0000a020: 2020 2020 2020 2020 6e65 775f 6c63 2e41          new_lc.A
-0000a030: 6464 4c61 7965 7273 286c 6179 6572 5f6c  ddLayers(layer_l
-0000a040: 6973 7429 0a20 2020 2020 2020 2020 2020  ist).           
-0000a050: 2073 656c 662e 5f70 6564 622e 6c61 796f   self._pedb.layo
-0000a060: 7574 2e6c 6179 6572 5f63 6f6c 6c65 6374  ut.layer_collect
-0000a070: 696f 6e20 3d20 6e65 775f 6c63 0a0a 2020  ion = new_lc..  
-0000a080: 2020 2020 2020 2020 2020 666f 7220 7079            for py
-0000a090: 6165 6474 5f63 6d70 2069 6e20 6c69 7374  aedt_cmp in list
-0000a0a0: 2873 656c 662e 5f70 6564 622e 636f 6d70  (self._pedb.comp
-0000a0b0: 6f6e 656e 7473 2e63 6f6d 706f 6e65 6e74  onents.component
-0000a0c0: 732e 7661 6c75 6573 2829 293a 0a20 2020  s.values()):.   
-0000a0d0: 2020 2020 2020 2020 2020 2020 2063 6d70               cmp
-0000a0e0: 203d 2070 7961 6564 745f 636d 702e 6564   = pyaedt_cmp.ed
-0000a0f0: 6263 6f6d 706f 6e65 6e74 0a20 2020 2020  bcomponent.     
-0000a100: 2020 2020 2020 2020 2020 2063 6d70 5f74             cmp_t
-0000a110: 7970 6520 3d20 636d 702e 4765 7443 6f6d  ype = cmp.GetCom
-0000a120: 706f 6e65 6e74 5479 7065 2829 0a20 2020  ponentType().   
-0000a130: 2020 2020 2020 2020 2020 2020 2063 6d70               cmp
-0000a140: 5f70 726f 7020 3d20 636d 702e 4765 7443  _prop = cmp.GetC
-0000a150: 6f6d 706f 6e65 6e74 5072 6f70 6572 7479  omponentProperty
-0000a160: 2829 2e43 6c6f 6e65 2829 0a20 2020 2020  ().Clone().     
-0000a170: 2020 2020 2020 2020 2020 2074 7279 3a0a             try:.
-0000a180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a190: 2020 2020 6966 2028 0a20 2020 2020 2020      if (.       
-0000a1a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a1b0: 2063 6d70 5f70 726f 702e 4765 7453 6f6c   cmp_prop.GetSol
-0000a1c0: 6465 7242 616c 6c50 726f 7065 7274 7928  derBallProperty(
-0000a1d0: 292e 4765 7450 6c61 6365 6d65 6e74 2829  ).GetPlacement()
-0000a1e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a1f0: 2020 2020 2020 2020 203d 3d20 7365 6c66           == self
-0000a200: 2e5f 7065 6462 2e64 6566 696e 6974 696f  ._pedb.definitio
-0000a210: 6e2e 536f 6c64 6572 6261 6c6c 506c 6163  n.SolderballPlac
-0000a220: 656d 656e 742e 4162 6f76 6550 6164 7374  ement.AbovePadst
-0000a230: 6163 6b0a 2020 2020 2020 2020 2020 2020  ack.            
-0000a240: 2020 2020 2020 2020 293a 0a20 2020 2020          ):.     
-0000a250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a260: 2020 2073 6261 6c6c 5f70 726f 7020 3d20     sball_prop = 
-0000a270: 636d 705f 7072 6f70 2e47 6574 536f 6c64  cmp_prop.GetSold
-0000a280: 6572 4261 6c6c 5072 6f70 6572 7479 2829  erBallProperty()
-0000a290: 2e43 6c6f 6e65 2829 0a20 2020 2020 2020  .Clone().       
-0000a2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a2b0: 2073 6261 6c6c 5f70 726f 702e 5365 7450   sball_prop.SetP
-0000a2c0: 6c61 6365 6d65 6e74 2873 656c 662e 5f70  lacement(self._p
-0000a2d0: 6564 622e 6465 6669 6e69 7469 6f6e 2e53  edb.definition.S
-0000a2e0: 6f6c 6465 7262 616c 6c50 6c61 6365 6d65  olderballPlaceme
-0000a2f0: 6e74 2e42 656c 6f77 5061 6473 7461 636b  nt.BelowPadstack
-0000a300: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0000a310: 2020 2020 2020 2020 2020 636d 705f 7072            cmp_pr
-0000a320: 6f70 2e53 6574 536f 6c64 6572 4261 6c6c  op.SetSolderBall
-0000a330: 5072 6f70 6572 7479 2873 6261 6c6c 5f70  Property(sball_p
-0000a340: 726f 7029 0a20 2020 2020 2020 2020 2020  rop).           
-0000a350: 2020 2020 2020 2020 2065 6c69 6620 280a           elif (.
-0000a360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a370: 2020 2020 2020 2020 636d 705f 7072 6f70          cmp_prop
-0000a380: 2e47 6574 536f 6c64 6572 4261 6c6c 5072  .GetSolderBallPr
-0000a390: 6f70 6572 7479 2829 2e47 6574 506c 6163  operty().GetPlac
-0000a3a0: 656d 656e 7428 290a 2020 2020 2020 2020  ement().        
+000098c0: 2020 6966 2028 0a20 2020 2020 2020 2020    if (.         
+000098d0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+000098e0: 6c6f 6e65 645f 6c61 7965 722e 4765 7454  loned_layer.GetT
+000098f0: 6f70 426f 7474 6f6d 4173 736f 6369 6174  opBottomAssociat
+00009900: 696f 6e28 290a 2020 2020 2020 2020 2020  ion().          
+00009910: 2020 2020 2020 2020 2020 2020 2020 3d3d                ==
+00009920: 2073 656c 662e 5f70 6564 622e 6564 625f   self._pedb.edb_
+00009930: 6170 692e 4365 6c6c 2e54 6f70 426f 7474  api.Cell.TopBott
+00009940: 6f6d 4173 736f 6369 6174 696f 6e2e 546f  omAssociation.To
+00009950: 7041 7373 6f63 6961 7465 640a 2020 2020  pAssociated.    
+00009960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009970: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00009980: 2020 2020 2020 2020 2020 2063 6c6f 6e65             clone
+00009990: 645f 6c61 7965 722e 5365 7454 6f70 426f  d_layer.SetTopBo
+000099a0: 7474 6f6d 4173 736f 6369 6174 696f 6e28  ttomAssociation(
+000099b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000099c0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+000099d0: 662e 5f70 6564 622e 6564 625f 6170 692e  f._pedb.edb_api.
+000099e0: 4365 6c6c 2e54 6f70 426f 7474 6f6d 4173  Cell.TopBottomAs
+000099f0: 736f 6369 6174 696f 6e2e 426f 7474 6f6d  sociation.Bottom
+00009a00: 4173 736f 6369 6174 6564 0a20 2020 2020  Associated.     
+00009a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009a20: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
+00009a30: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+00009a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009a50: 2020 2020 2020 2063 6c6f 6e65 645f 6c61         cloned_la
+00009a60: 7965 722e 5365 7454 6f70 426f 7474 6f6d  yer.SetTopBottom
+00009a70: 4173 736f 6369 6174 696f 6e28 7365 6c66  Association(self
+00009a80: 2e5f 7065 6462 2e65 6462 5f61 7069 2e43  ._pedb.edb_api.C
+00009a90: 656c 6c2e 546f 7042 6f74 746f 6d41 7373  ell.TopBottomAss
+00009aa0: 6f63 6961 7469 6f6e 2e54 6f70 4173 736f  ociation.TopAsso
+00009ab0: 6369 6174 6564 290a 2020 2020 2020 2020  ciated).        
+00009ac0: 2020 2020 2020 2020 2020 2020 6e65 775f              new_
+00009ad0: 6c63 2e41 6464 5374 6163 6b75 704c 6179  lc.AddStackupLay
+00009ae0: 6572 4174 456c 6576 6174 696f 6e28 636c  erAtElevation(cl
+00009af0: 6f6e 6564 5f6c 6179 6572 290a 0a20 2020  oned_layer)..   
+00009b00: 2020 2020 2020 2020 2076 6961 6c61 7965           vialaye
+00009b10: 7273 203d 205b 0a20 2020 2020 2020 2020  rs = [.         
+00009b20: 2020 2020 2020 206c 6179 0a20 2020 2020         lay.     
+00009b30: 2020 2020 2020 2020 2020 2066 6f72 206c             for l
+00009b40: 6179 2069 6e20 6c63 2e4c 6179 6572 7328  ay in lc.Layers(
+00009b50: 7365 6c66 2e5f 7065 6462 2e65 6462 5f61  self._pedb.edb_a
+00009b60: 7069 2e63 656c 6c2e 6c61 7965 725f 7479  pi.cell.layer_ty
+00009b70: 7065 5f73 6574 2e53 7461 636b 7570 4c61  pe_set.StackupLa
+00009b80: 7965 7253 6574 290a 2020 2020 2020 2020  yerSet).        
+00009b90: 2020 2020 2020 2020 6966 206c 6179 2e43          if lay.C
+00009ba0: 6c6f 6e65 2829 2e49 7356 6961 4c61 7965  lone().IsViaLaye
+00009bb0: 7228 290a 2020 2020 2020 2020 2020 2020  r().            
+00009bc0: 5d0a 2020 2020 2020 2020 2020 2020 666f  ].            fo
+00009bd0: 7220 6c61 7965 7220 696e 2076 6961 6c61  r layer in viala
+00009be0: 7965 7273 3a0a 2020 2020 2020 2020 2020  yers:.          
+00009bf0: 2020 2020 2020 636c 6f6e 6564 5f76 6961        cloned_via
+00009c00: 5f6c 6179 6572 203d 206c 6179 6572 2e43  _layer = layer.C
+00009c10: 6c6f 6e65 2829 0a20 2020 2020 2020 2020  lone().         
+00009c20: 2020 2020 2020 2075 7070 6572 5f72 6566         upper_ref
+00009c30: 5f6e 616d 6520 3d20 636c 6f6e 6564 5f76  _name = cloned_v
+00009c40: 6961 5f6c 6179 6572 2e47 6574 5265 664c  ia_layer.GetRefL
+00009c50: 6179 6572 4e61 6d65 2854 7275 6529 0a20  ayerName(True). 
+00009c60: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+00009c70: 6f77 6572 5f72 6566 5f6e 616d 6520 3d20  ower_ref_name = 
+00009c80: 636c 6f6e 6564 5f76 6961 5f6c 6179 6572  cloned_via_layer
+00009c90: 2e47 6574 5265 664c 6179 6572 4e61 6d65  .GetRefLayerName
+00009ca0: 2846 616c 7365 290a 2020 2020 2020 2020  (False).        
+00009cb0: 2020 2020 2020 2020 7570 7065 725f 7265          upper_re
+00009cc0: 6620 3d20 5b0a 2020 2020 2020 2020 2020  f = [.          
+00009cd0: 2020 2020 2020 2020 2020 6c61 790a 2020            lay.  
+00009ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009cf0: 2020 666f 7220 6c61 7920 696e 206c 632e    for lay in lc.
+00009d00: 4c61 7965 7273 2873 656c 662e 5f70 6564  Layers(self._ped
+00009d10: 622e 6564 625f 6170 692e 6365 6c6c 2e6c  b.edb_api.cell.l
+00009d20: 6179 6572 5f74 7970 655f 7365 742e 416c  ayer_type_set.Al
+00009d30: 6c4c 6179 6572 5365 7429 0a20 2020 2020  lLayerSet).     
+00009d40: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00009d50: 6620 6c61 792e 4765 744e 616d 6528 2920  f lay.GetName() 
+00009d60: 3d3d 2075 7070 6572 5f72 6566 5f6e 616d  == upper_ref_nam
+00009d70: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+00009d80: 2020 5d5b 305d 0a20 2020 2020 2020 2020    ][0].         
+00009d90: 2020 2020 2020 206c 6f77 6572 5f72 6566         lower_ref
+00009da0: 203d 205b 0a20 2020 2020 2020 2020 2020   = [.           
+00009db0: 2020 2020 2020 2020 206c 6179 0a20 2020           lay.   
+00009dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009dd0: 2066 6f72 206c 6179 2069 6e20 6c63 2e4c   for lay in lc.L
+00009de0: 6179 6572 7328 7365 6c66 2e5f 7065 6462  ayers(self._pedb
+00009df0: 2e65 6462 5f61 7069 2e63 656c 6c2e 6c61  .edb_api.cell.la
+00009e00: 7965 725f 7479 7065 5f73 6574 2e41 6c6c  yer_type_set.All
+00009e10: 4c61 7965 7253 6574 290a 2020 2020 2020  LayerSet).      
+00009e20: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00009e30: 206c 6179 2e47 6574 4e61 6d65 2829 203d   lay.GetName() =
+00009e40: 3d20 6c6f 7765 725f 7265 665f 6e61 6d65  = lower_ref_name
+00009e50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009e60: 205d 5b30 5d0a 2020 2020 2020 2020 2020   ][0].          
+00009e70: 2020 2020 2020 636c 6f6e 6564 5f76 6961        cloned_via
+00009e80: 5f6c 6179 6572 2e53 6574 5265 664c 6179  _layer.SetRefLay
+00009e90: 6572 286c 6f77 6572 5f72 6566 2c20 5472  er(lower_ref, Tr
+00009ea0: 7565 290a 2020 2020 2020 2020 2020 2020  ue).            
+00009eb0: 2020 2020 636c 6f6e 6564 5f76 6961 5f6c      cloned_via_l
+00009ec0: 6179 6572 2e53 6574 5265 664c 6179 6572  ayer.SetRefLayer
+00009ed0: 2875 7070 6572 5f72 6566 2c20 4661 6c73  (upper_ref, Fals
+00009ee0: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
+00009ef0: 2020 2072 6566 5f6c 6179 6572 5f69 6e5f     ref_layer_in_
+00009f00: 666c 6970 7065 645f 7374 6163 6b75 7020  flipped_stackup 
+00009f10: 3d20 5b0a 2020 2020 2020 2020 2020 2020  = [.            
+00009f20: 2020 2020 2020 2020 6c61 790a 2020 2020          lay.    
+00009f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009f40: 666f 7220 6c61 7920 696e 206e 6577 5f6c  for lay in new_l
+00009f50: 632e 4c61 7965 7273 2873 656c 662e 5f70  c.Layers(self._p
+00009f60: 6564 622e 6564 625f 6170 692e 6365 6c6c  edb.edb_api.cell
+00009f70: 2e6c 6179 6572 5f74 7970 655f 7365 742e  .layer_type_set.
+00009f80: 416c 6c4c 6179 6572 5365 7429 0a20 2020  AllLayerSet).   
+00009f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009fa0: 2069 6620 6c61 792e 4765 744e 616d 6528   if lay.GetName(
+00009fb0: 2920 3d3d 2075 7070 6572 5f72 6566 5f6e  ) == upper_ref_n
+00009fc0: 616d 650a 2020 2020 2020 2020 2020 2020  ame.            
+00009fd0: 2020 2020 5d5b 305d 0a20 2020 2020 2020      ][0].       
+00009fe0: 2020 2020 2020 2020 2076 6961 5f6c 6179           via_lay
+00009ff0: 6572 5f6c 6f77 6572 5f65 6c65 7661 7469  er_lower_elevati
+0000a000: 6f6e 203d 2028 0a20 2020 2020 2020 2020  on = (.         
+0000a010: 2020 2020 2020 2020 2020 2072 6566 5f6c             ref_l
+0000a020: 6179 6572 5f69 6e5f 666c 6970 7065 645f  ayer_in_flipped_
+0000a030: 7374 6163 6b75 702e 4765 744c 6f77 6572  stackup.GetLower
+0000a040: 456c 6576 6174 696f 6e28 2920 2b20 7265  Elevation() + re
+0000a050: 665f 6c61 7965 725f 696e 5f66 6c69 7070  f_layer_in_flipp
+0000a060: 6564 5f73 7461 636b 7570 2e47 6574 5468  ed_stackup.GetTh
+0000a070: 6963 6b6e 6573 7328 290a 2020 2020 2020  ickness().      
+0000a080: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+0000a090: 2020 2020 2020 2020 2020 2020 636c 6f6e              clon
+0000a0a0: 6564 5f76 6961 5f6c 6179 6572 2e53 6574  ed_via_layer.Set
+0000a0b0: 4c6f 7765 7245 6c65 7661 7469 6f6e 2873  LowerElevation(s
+0000a0c0: 656c 662e 5f65 6462 5f76 616c 7565 2876  elf._edb_value(v
+0000a0d0: 6961 5f6c 6179 6572 5f6c 6f77 6572 5f65  ia_layer_lower_e
+0000a0e0: 6c65 7661 7469 6f6e 2929 0a20 2020 2020  levation)).     
+0000a0f0: 2020 2020 2020 2020 2020 206e 6577 5f6c             new_l
+0000a100: 632e 4164 6453 7461 636b 7570 4c61 7965  c.AddStackupLaye
+0000a110: 7241 7445 6c65 7661 7469 6f6e 2863 6c6f  rAtElevation(clo
+0000a120: 6e65 645f 7669 615f 6c61 7965 7229 0a0a  ned_via_layer)..
+0000a130: 2020 2020 2020 2020 2020 2020 6c61 7965              laye
+0000a140: 725f 6c69 7374 203d 2063 6f6e 7665 7274  r_list = convert
+0000a150: 5f70 795f 6c69 7374 5f74 6f5f 6e65 745f  _py_list_to_net_
+0000a160: 6c69 7374 286e 6f6e 5f73 7461 636b 7570  list(non_stackup
+0000a170: 5f6c 6179 6572 7329 0a20 2020 2020 2020  _layers).       
+0000a180: 2020 2020 206e 6577 5f6c 632e 4164 644c       new_lc.AddL
+0000a190: 6179 6572 7328 6c61 7965 725f 6c69 7374  ayers(layer_list
+0000a1a0: 290a 2020 2020 2020 2020 2020 2020 7365  ).            se
+0000a1b0: 6c66 2e5f 7065 6462 2e6c 6179 6f75 742e  lf._pedb.layout.
+0000a1c0: 6c61 7965 725f 636f 6c6c 6563 7469 6f6e  layer_collection
+0000a1d0: 203d 206e 6577 5f6c 630a 0a20 2020 2020   = new_lc..     
+0000a1e0: 2020 2020 2020 2066 6f72 2070 7961 6564         for pyaed
+0000a1f0: 745f 636d 7020 696e 206c 6973 7428 7365  t_cmp in list(se
+0000a200: 6c66 2e5f 7065 6462 2e63 6f6d 706f 6e65  lf._pedb.compone
+0000a210: 6e74 732e 636f 6d70 6f6e 656e 7473 2e76  nts.components.v
+0000a220: 616c 7565 7328 2929 3a0a 2020 2020 2020  alues()):.      
+0000a230: 2020 2020 2020 2020 2020 636d 7020 3d20            cmp = 
+0000a240: 7079 6165 6474 5f63 6d70 2e65 6462 636f  pyaedt_cmp.edbco
+0000a250: 6d70 6f6e 656e 740a 2020 2020 2020 2020  mponent.        
+0000a260: 2020 2020 2020 2020 636d 705f 7479 7065          cmp_type
+0000a270: 203d 2063 6d70 2e47 6574 436f 6d70 6f6e   = cmp.GetCompon
+0000a280: 656e 7454 7970 6528 290a 2020 2020 2020  entType().      
+0000a290: 2020 2020 2020 2020 2020 636d 705f 7072            cmp_pr
+0000a2a0: 6f70 203d 2063 6d70 2e47 6574 436f 6d70  op = cmp.GetComp
+0000a2b0: 6f6e 656e 7450 726f 7065 7274 7928 292e  onentProperty().
+0000a2c0: 436c 6f6e 6528 290a 2020 2020 2020 2020  Clone().        
+0000a2d0: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
+0000a2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a2f0: 2069 6620 280a 2020 2020 2020 2020 2020   if (.          
+0000a300: 2020 2020 2020 2020 2020 2020 2020 636d                cm
+0000a310: 705f 7072 6f70 2e47 6574 536f 6c64 6572  p_prop.GetSolder
+0000a320: 4261 6c6c 5072 6f70 6572 7479 2829 2e47  BallProperty().G
+0000a330: 6574 506c 6163 656d 656e 7428 290a 2020  etPlacement().  
+0000a340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a350: 2020 2020 2020 3d3d 2073 656c 662e 5f70        == self._p
+0000a360: 6564 622e 6465 6669 6e69 7469 6f6e 2e53  edb.definition.S
+0000a370: 6f6c 6465 7262 616c 6c50 6c61 6365 6d65  olderballPlaceme
+0000a380: 6e74 2e41 626f 7665 5061 6473 7461 636b  nt.AbovePadstack
+0000a390: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a3a0: 2020 2020 2029 3a0a 2020 2020 2020 2020       ):.        
 0000a3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a3c0: 3d3d 2073 656c 662e 5f70 6564 622e 6465  == self._pedb.de
-0000a3d0: 6669 6e69 7469 6f6e 2e53 6f6c 6465 7262  finition.Solderb
-0000a3e0: 616c 6c50 6c61 6365 6d65 6e74 2e42 656c  allPlacement.Bel
-0000a3f0: 6f77 5061 6473 7461 636b 0a20 2020 2020  owPadstack.     
-0000a400: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-0000a410: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0000a420: 2020 2020 2020 2020 2020 7362 616c 6c5f            sball_
-0000a430: 7072 6f70 203d 2063 6d70 5f70 726f 702e  prop = cmp_prop.
-0000a440: 4765 7453 6f6c 6465 7242 616c 6c50 726f  GetSolderBallPro
-0000a450: 7065 7274 7928 292e 436c 6f6e 6528 290a  perty().Clone().
+0000a3c0: 7362 616c 6c5f 7072 6f70 203d 2063 6d70  sball_prop = cmp
+0000a3d0: 5f70 726f 702e 4765 7453 6f6c 6465 7242  _prop.GetSolderB
+0000a3e0: 616c 6c50 726f 7065 7274 7928 292e 436c  allProperty().Cl
+0000a3f0: 6f6e 6528 290a 2020 2020 2020 2020 2020  one().          
+0000a400: 2020 2020 2020 2020 2020 2020 2020 7362                sb
+0000a410: 616c 6c5f 7072 6f70 2e53 6574 506c 6163  all_prop.SetPlac
+0000a420: 656d 656e 7428 7365 6c66 2e5f 7065 6462  ement(self._pedb
+0000a430: 2e64 6566 696e 6974 696f 6e2e 536f 6c64  .definition.Sold
+0000a440: 6572 6261 6c6c 506c 6163 656d 656e 742e  erballPlacement.
+0000a450: 4265 6c6f 7750 6164 7374 6163 6b29 0a20  BelowPadstack). 
 0000a460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a470: 2020 2020 2020 2020 7362 616c 6c5f 7072          sball_pr
-0000a480: 6f70 2e53 6574 506c 6163 656d 656e 7428  op.SetPlacement(
-0000a490: 7365 6c66 2e5f 7065 6462 2e64 6566 696e  self._pedb.defin
-0000a4a0: 6974 696f 6e2e 536f 6c64 6572 6261 6c6c  ition.Solderball
-0000a4b0: 506c 6163 656d 656e 742e 4162 6f76 6550  Placement.AboveP
-0000a4c0: 6164 7374 6163 6b29 0a20 2020 2020 2020  adstack).       
-0000a4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a4e0: 2063 6d70 5f70 726f 702e 5365 7453 6f6c   cmp_prop.SetSol
-0000a4f0: 6465 7242 616c 6c50 726f 7065 7274 7928  derBallProperty(
-0000a500: 7362 616c 6c5f 7072 6f70 290a 2020 2020  sball_prop).    
-0000a510: 2020 2020 2020 2020 2020 2020 6578 6365              exce
-0000a520: 7074 3a0a 2020 2020 2020 2020 2020 2020  pt:.            
-0000a530: 2020 2020 2020 2020 7061 7373 0a20 2020          pass.   
-0000a540: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0000a550: 636d 705f 7479 7065 203d 3d20 7365 6c66  cmp_type == self
-0000a560: 2e5f 7065 6462 2e64 6566 696e 6974 696f  ._pedb.definitio
-0000a570: 6e2e 436f 6d70 6f6e 656e 7454 7970 652e  n.ComponentType.
-0000a580: 4943 3a0a 2020 2020 2020 2020 2020 2020  IC:.            
-0000a590: 2020 2020 2020 2020 6469 655f 7072 6f70          die_prop
-0000a5a0: 203d 2063 6d70 5f70 726f 702e 4765 7444   = cmp_prop.GetD
-0000a5b0: 6965 5072 6f70 6572 7479 2829 2e43 6c6f  ieProperty().Clo
-0000a5c0: 6e65 2829 0a20 2020 2020 2020 2020 2020  ne().           
-0000a5d0: 2020 2020 2020 2020 2063 6869 705f 6f72           chip_or
-0000a5e0: 6965 6e74 6174 696f 6e20 3d20 6469 655f  ientation = die_
-0000a5f0: 7072 6f70 2e47 6574 4f72 6965 6e74 6174  prop.GetOrientat
-0000a600: 696f 6e28 290a 2020 2020 2020 2020 2020  ion().          
-0000a610: 2020 2020 2020 2020 2020 6966 2063 6869            if chi
-0000a620: 705f 6f72 6965 6e74 6174 696f 6e20 3d3d  p_orientation ==
-0000a630: 2073 656c 662e 5f70 6564 622e 6465 6669   self._pedb.defi
-0000a640: 6e69 7469 6f6e 2e44 6965 4f72 6965 6e74  nition.DieOrient
-0000a650: 6174 696f 6e2e 4368 6970 446f 776e 3a0a  ation.ChipDown:.
-0000a660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a670: 2020 2020 2020 2020 6469 655f 7072 6f70          die_prop
-0000a680: 2e53 6574 4f72 6965 6e74 6174 696f 6e28  .SetOrientation(
-0000a690: 7365 6c66 2e5f 7065 6462 2e64 6566 696e  self._pedb.defin
-0000a6a0: 6974 696f 6e2e 4469 654f 7269 656e 7461  ition.DieOrienta
-0000a6b0: 7469 6f6e 2e43 6869 7055 7029 0a20 2020  tion.ChipUp).   
-0000a6c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a6d0: 2020 2020 2063 6d70 5f70 726f 702e 5365       cmp_prop.Se
-0000a6e0: 7444 6965 5072 6f70 6572 7479 2864 6965  tDieProperty(die
-0000a6f0: 5f70 726f 7029 0a20 2020 2020 2020 2020  _prop).         
-0000a700: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-0000a710: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a720: 2020 2020 2020 2020 2064 6965 5f70 726f           die_pro
-0000a730: 702e 5365 744f 7269 656e 7461 7469 6f6e  p.SetOrientation
-0000a740: 2873 656c 662e 5f70 6564 622e 6465 6669  (self._pedb.defi
-0000a750: 6e69 7469 6f6e 2e44 6965 4f72 6965 6e74  nition.DieOrient
-0000a760: 6174 696f 6e2e 4368 6970 446f 776e 290a  ation.ChipDown).
-0000a770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a780: 2020 2020 2020 2020 636d 705f 7072 6f70          cmp_prop
-0000a790: 2e53 6574 4469 6550 726f 7065 7274 7928  .SetDieProperty(
-0000a7a0: 6469 655f 7072 6f70 290a 2020 2020 2020  die_prop).      
-0000a7b0: 2020 2020 2020 2020 2020 636d 702e 5365            cmp.Se
-0000a7c0: 7443 6f6d 706f 6e65 6e74 5072 6f70 6572  tComponentProper
-0000a7d0: 7479 2863 6d70 5f70 726f 7029 0a0a 2020  ty(cmp_prop)..  
-0000a7e0: 2020 2020 2020 2020 2020 6c61 795f 6c69            lay_li
-0000a7f0: 7374 203d 206c 6973 7428 6e65 775f 6c63  st = list(new_lc
-0000a800: 2e4c 6179 6572 7328 7365 6c66 2e5f 7065  .Layers(self._pe
-0000a810: 6462 2e65 6462 5f61 7069 2e63 656c 6c2e  db.edb_api.cell.
-0000a820: 6c61 7965 725f 7479 7065 5f73 6574 2e53  layer_type_set.S
-0000a830: 6967 6e61 6c4c 6179 6572 5365 7429 290a  ignalLayerSet)).
-0000a840: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-0000a850: 7061 6473 7461 636b 2069 6e20 6c69 7374  padstack in list
-0000a860: 2873 656c 662e 5f70 6564 622e 7061 6473  (self._pedb.pads
-0000a870: 7461 636b 732e 696e 7374 616e 6365 732e  tacks.instances.
-0000a880: 7661 6c75 6573 2829 293a 0a20 2020 2020  values()):.     
-0000a890: 2020 2020 2020 2020 2020 2073 7461 7274             start
-0000a8a0: 5f6c 6179 6572 5f69 6420 3d20 5b6c 6179  _layer_id = [lay
-0000a8b0: 2e47 6574 4c61 7965 7249 6428 2920 666f  .GetLayerId() fo
-0000a8c0: 7220 6c61 7920 696e 206c 6973 7428 6c61  r lay in list(la
-0000a8d0: 795f 6c69 7374 2920 6966 206c 6179 2e47  y_list) if lay.G
-0000a8e0: 6574 4e61 6d65 2829 203d 3d20 7061 6473  etName() == pads
-0000a8f0: 7461 636b 2e73 7461 7274 5f6c 6179 6572  tack.start_layer
-0000a900: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
-0000a910: 2020 7374 6f70 5f6c 6179 6572 5f69 6420    stop_layer_id 
-0000a920: 3d20 5b6c 6179 2e47 6574 4c61 7965 7249  = [lay.GetLayerI
-0000a930: 6428 2920 666f 7220 6c61 7920 696e 206c  d() for lay in l
-0000a940: 6973 7428 6c61 795f 6c69 7374 2920 6966  ist(lay_list) if
-0000a950: 206c 6179 2e47 6574 4e61 6d65 2829 203d   lay.GetName() =
-0000a960: 3d20 7061 6473 7461 636b 2e73 746f 705f  = padstack.stop_
-0000a970: 6c61 7965 725d 0a20 2020 2020 2020 2020  layer].         
-0000a980: 2020 2020 2020 206c 6179 6572 5f6d 6170         layer_map
-0000a990: 203d 2070 6164 7374 6163 6b2e 5f65 6462   = padstack._edb
-0000a9a0: 5f70 6164 7374 6163 6b69 6e73 7461 6e63  _padstackinstanc
-0000a9b0: 652e 4765 744c 6179 6572 4d61 7028 290a  e.GetLayerMap().
-0000a9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a9d0: 6c61 7965 725f 6d61 702e 5365 744d 6170  layer_map.SetMap
-0000a9e0: 7069 6e67 2873 746f 705f 6c61 7965 725f  ping(stop_layer_
-0000a9f0: 6964 5b30 5d2c 2073 7461 7274 5f6c 6179  id[0], start_lay
-0000aa00: 6572 5f69 645b 305d 290a 2020 2020 2020  er_id[0]).      
-0000aa10: 2020 2020 2020 2020 2020 7061 6473 7461            padsta
-0000aa20: 636b 2e5f 6564 625f 7061 6473 7461 636b  ck._edb_padstack
-0000aa30: 696e 7374 616e 6365 2e53 6574 4c61 7965  instance.SetLaye
-0000aa40: 724d 6170 286c 6179 6572 5f6d 6170 290a  rMap(layer_map).
-0000aa50: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000aa60: 2e72 6566 7265 7368 5f6c 6179 6572 5f63  .refresh_layer_c
-0000aa70: 6f6c 6c65 6374 696f 6e28 290a 2020 2020  ollection().    
-0000aa80: 2020 2020 2020 2020 7265 7475 726e 2054          return T
-0000aa90: 7275 650a 2020 2020 2020 2020 6578 6365  rue.        exce
-0000aaa0: 7074 3a0a 2020 2020 2020 2020 2020 2020  pt:.            
-0000aab0: 7265 7475 726e 2046 616c 7365 0a0a 2020  return False..  
-0000aac0: 2020 4070 7965 6462 5f66 756e 6374 696f    @pyedb_functio
-0000aad0: 6e5f 6861 6e64 6c65 7228 290a 2020 2020  n_handler().    
-0000aae0: 6465 6620 6765 745f 6c61 796f 7574 5f74  def get_layout_t
-0000aaf0: 6869 636b 6e65 7373 2873 656c 6629 3a0a  hickness(self):.
-0000ab00: 2020 2020 2020 2020 2222 2252 6574 7572          """Retur
-0000ab10: 6e20 7468 6520 6c61 796f 7574 2074 6869  n the layout thi
-0000ab20: 636b 6e65 7373 2e0a 0a20 2020 2020 2020  ckness...       
-0000ab30: 2052 6574 7572 6e73 0a20 2020 2020 2020   Returns.       
-0000ab40: 202d 2d2d 2d2d 2d2d 0a20 2020 2020 2020   -------.       
-0000ab50: 2066 6c6f 6174 0a20 2020 2020 2020 2020   float.         
-0000ab60: 2020 2054 6865 2074 6869 636b 6e65 7373     The thickness
-0000ab70: 2076 616c 7565 2e0a 2020 2020 2020 2020   value..        
-0000ab80: 2222 220a 2020 2020 2020 2020 6c61 7965  """.        laye
-0000ab90: 7273 203d 206c 6973 7428 7365 6c66 2e73  rs = list(self.s
-0000aba0: 7461 636b 7570 5f6c 6179 6572 732e 7661  tackup_layers.va
-0000abb0: 6c75 6573 2829 290a 2020 2020 2020 2020  lues()).        
-0000abc0: 6c61 7965 7273 2e73 6f72 7428 6b65 793d  layers.sort(key=
-0000abd0: 6c61 6d62 6461 206c 6179 3a20 6c61 792e  lambda lay: lay.
-0000abe0: 6c6f 7765 725f 656c 6576 6174 696f 6e29  lower_elevation)
-0000abf0: 0a20 2020 2020 2020 2074 6869 636b 6e65  .        thickne
-0000ac00: 7373 203d 2030 0a20 2020 2020 2020 2069  ss = 0.        i
-0000ac10: 6620 6c61 7965 7273 3a0a 2020 2020 2020  f layers:.      
-0000ac20: 2020 2020 2020 746f 705f 6c61 7965 7220        top_layer 
-0000ac30: 3d20 6c61 7965 7273 5b2d 315d 0a20 2020  = layers[-1].   
-0000ac40: 2020 2020 2020 2020 2062 6f74 746f 6d5f           bottom_
-0000ac50: 6c61 7965 7220 3d20 6c61 7965 7273 5b30  layer = layers[0
-0000ac60: 5d0a 2020 2020 2020 2020 2020 2020 7468  ].            th
-0000ac70: 6963 6b6e 6573 7320 3d20 6162 7328 746f  ickness = abs(to
-0000ac80: 705f 6c61 7965 722e 7570 7065 725f 656c  p_layer.upper_el
-0000ac90: 6576 6174 696f 6e20 2d20 626f 7474 6f6d  evation - bottom
-0000aca0: 5f6c 6179 6572 2e6c 6f77 6572 5f65 6c65  _layer.lower_ele
-0000acb0: 7661 7469 6f6e 290a 2020 2020 2020 2020  vation).        
-0000acc0: 7265 7475 726e 2072 6f75 6e64 2874 6869  return round(thi
-0000acd0: 636b 6e65 7373 2c20 3729 0a0a 2020 2020  ckness, 7)..    
-0000ace0: 4070 7965 6462 5f66 756e 6374 696f 6e5f  @pyedb_function_
-0000acf0: 6861 6e64 6c65 7228 290a 2020 2020 6465  handler().    de
-0000ad00: 6620 5f67 6574 5f73 6f6c 6465 725f 6865  f _get_solder_he
-0000ad10: 6967 6874 2873 656c 662c 206c 6179 6572  ight(self, layer
-0000ad20: 5f6e 616d 6529 3a0a 2020 2020 2020 2020  _name):.        
-0000ad30: 666f 7220 5f2c 2076 616c 2069 6e20 7365  for _, val in se
-0000ad40: 6c66 2e5f 7065 6462 2e63 6f6d 706f 6e65  lf._pedb.compone
-0000ad50: 6e74 732e 636f 6d70 6f6e 656e 7473 2e69  nts.components.i
-0000ad60: 7465 6d73 2829 3a0a 2020 2020 2020 2020  tems():.        
-0000ad70: 2020 2020 6966 2076 616c 2e73 6f6c 6465      if val.solde
-0000ad80: 725f 6261 6c6c 5f68 6569 6768 7420 616e  r_ball_height an
-0000ad90: 6420 7661 6c2e 706c 6163 656d 656e 745f  d val.placement_
-0000ada0: 6c61 7965 7220 3d3d 206c 6179 6572 5f6e  layer == layer_n
-0000adb0: 616d 653a 0a20 2020 2020 2020 2020 2020  ame:.           
-0000adc0: 2020 2020 2072 6574 7572 6e20 7661 6c2e       return val.
-0000add0: 736f 6c64 6572 5f62 616c 6c5f 6865 6967  solder_ball_heig
-0000ade0: 6874 0a20 2020 2020 2020 2072 6574 7572  ht.        retur
-0000adf0: 6e20 300a 0a20 2020 2040 7079 6564 625f  n 0..    @pyedb_
-0000ae00: 6675 6e63 7469 6f6e 5f68 616e 646c 6572  function_handler
-0000ae10: 2829 0a20 2020 2064 6566 205f 7265 6d6f  ().    def _remo
-0000ae20: 7665 5f73 6f6c 6465 725f 7065 6328 7365  ve_solder_pec(se
-0000ae30: 6c66 2c20 6c61 7965 725f 6e61 6d65 293a  lf, layer_name):
-0000ae40: 0a20 2020 2020 2020 2066 6f72 205f 2c20  .        for _, 
-0000ae50: 7661 6c20 696e 2073 656c 662e 5f70 6564  val in self._ped
-0000ae60: 622e 636f 6d70 6f6e 656e 7473 2e63 6f6d  b.components.com
-0000ae70: 706f 6e65 6e74 732e 6974 656d 7328 293a  ponents.items():
-0000ae80: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0000ae90: 7661 6c2e 736f 6c64 6572 5f62 616c 6c5f  val.solder_ball_
-0000aea0: 6865 6967 6874 2061 6e64 2076 616c 2e70  height and val.p
-0000aeb0: 6c61 6365 6d65 6e74 5f6c 6179 6572 203d  lacement_layer =
-0000aec0: 3d20 6c61 7965 725f 6e61 6d65 3a0a 2020  = layer_name:.  
-0000aed0: 2020 2020 2020 2020 2020 2020 2020 636f                co
-0000aee0: 6d70 5f70 726f 7020 3d20 7661 6c2e 636f  mp_prop = val.co
-0000aef0: 6d70 6f6e 656e 745f 7072 6f70 6572 7479  mponent_property
-0000af00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000af10: 2070 6f72 745f 7072 6f70 6572 7479 203d   port_property =
-0000af20: 2063 6f6d 705f 7072 6f70 2e47 6574 506f   comp_prop.GetPo
-0000af30: 7274 5072 6f70 6572 7479 2829 2e43 6c6f  rtProperty().Clo
-0000af40: 6e65 2829 0a20 2020 2020 2020 2020 2020  ne().           
-0000af50: 2020 2020 2070 6f72 745f 7072 6f70 6572       port_proper
-0000af60: 7479 2e53 6574 5265 6665 7265 6e63 6553  ty.SetReferenceS
-0000af70: 697a 6541 7574 6f28 4661 6c73 6529 0a20  izeAuto(False). 
-0000af80: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-0000af90: 6f72 745f 7072 6f70 6572 7479 2e53 6574  ort_property.Set
-0000afa0: 5265 6665 7265 6e63 6553 697a 6528 7365  ReferenceSize(se
-0000afb0: 6c66 2e5f 6564 625f 7661 6c75 6528 302e  lf._edb_value(0.
-0000afc0: 3029 2c20 7365 6c66 2e5f 6564 625f 7661  0), self._edb_va
-0000afd0: 6c75 6528 302e 3029 290a 2020 2020 2020  lue(0.0)).      
-0000afe0: 2020 2020 2020 2020 2020 636f 6d70 5f70            comp_p
-0000aff0: 726f 702e 5365 7450 6f72 7450 726f 7065  rop.SetPortPrope
-0000b000: 7274 7928 706f 7274 5f70 726f 7065 7274  rty(port_propert
-0000b010: 7929 0a20 2020 2020 2020 2020 2020 2020  y).             
-0000b020: 2020 2076 616c 2e65 6462 636f 6d70 6f6e     val.edbcompon
-0000b030: 656e 742e 5365 7443 6f6d 706f 6e65 6e74  ent.SetComponent
-0000b040: 5072 6f70 6572 7479 2863 6f6d 705f 7072  Property(comp_pr
-0000b050: 6f70 290a 0a20 2020 2040 7079 6564 625f  op)..    @pyedb_
-0000b060: 6675 6e63 7469 6f6e 5f68 616e 646c 6572  function_handler
-0000b070: 2829 0a20 2020 2064 6566 2061 646a 7573  ().    def adjus
-0000b080: 745f 736f 6c64 6572 5f64 6965 6c65 6374  t_solder_dielect
-0000b090: 7269 6373 2873 656c 6629 3a0a 2020 2020  rics(self):.    
-0000b0a0: 2020 2020 2222 2241 646a 7573 7420 7468      """Adjust th
-0000b0b0: 6520 7374 6163 6b2d 7570 2062 7920 6164  e stack-up by ad
-0000b0c0: 6469 6e67 206f 7220 6d6f 6469 6679 696e  ding or modifyin
-0000b0d0: 6720 6469 656c 6563 7472 6963 206c 6179  g dielectric lay
-0000b0e0: 6572 7320 7468 6174 2063 6f6e 7461 696e  ers that contain
-0000b0f0: 7320 536f 6c64 6572 2042 616c 6c73 2e0a  s Solder Balls..
-0000b100: 2020 2020 2020 2020 5468 6973 206d 6574          This met
-0000b110: 686f 6420 6964 656e 7469 6669 6573 2074  hod identifies t
-0000b120: 6865 2073 6f6c 6465 722d 6261 6c6c 2068  he solder-ball h
-0000b130: 6569 6768 7420 616e 6420 6164 6a75 7374  eight and adjust
-0000b140: 2074 6865 2064 6965 6c65 6374 7269 6320   the dielectric 
-0000b150: 7468 6963 6b6e 6573 7320 6f6e 2074 6f70  thickness on top
-0000b160: 2028 6f72 2062 6f74 746f 6d29 2074 6f20   (or bottom) to 
-0000b170: 6669 740a 2020 2020 2020 2020 7468 6520  fit.        the 
-0000b180: 7468 6963 6b6e 6573 7320 696e 206f 7264  thickness in ord
-0000b190: 6572 2074 6f20 6d65 7267 6520 616e 6f74  er to merge anot
-0000b1a0: 6865 7220 6c61 796f 7574 2e0a 0a20 2020  her layout...   
-0000b1b0: 2020 2020 2052 6574 7572 6e73 0a20 2020       Returns.   
-0000b1c0: 2020 2020 202d 2d2d 2d2d 2d2d 0a20 2020       -------.   
-0000b1d0: 2020 2020 2062 6f6f 6c0a 2020 2020 2020       bool.      
-0000b1e0: 2020 2222 220a 2020 2020 2020 2020 666f    """.        fo
-0000b1f0: 7220 656c 2c20 7661 6c20 696e 2073 656c  r el, val in sel
-0000b200: 662e 5f70 6564 622e 636f 6d70 6f6e 656e  f._pedb.componen
-0000b210: 7473 2e63 6f6d 706f 6e65 6e74 732e 6974  ts.components.it
-0000b220: 656d 7328 293a 0a20 2020 2020 2020 2020  ems():.         
-0000b230: 2020 2069 6620 7661 6c2e 736f 6c64 6572     if val.solder
-0000b240: 5f62 616c 6c5f 6865 6967 6874 3a0a 2020  _ball_height:.  
-0000b250: 2020 2020 2020 2020 2020 2020 2020 6c61                la
-0000b260: 7965 7220 3d20 7661 6c2e 706c 6163 656d  yer = val.placem
-0000b270: 656e 745f 6c61 7965 720a 2020 2020 2020  ent_layer.      
-0000b280: 2020 2020 2020 2020 2020 6966 206c 6179            if lay
-0000b290: 6572 203d 3d20 6c69 7374 2873 656c 662e  er == list(self.
-0000b2a0: 7374 6163 6b75 705f 6c61 7965 7273 2e6b  stackup_layers.k
-0000b2b0: 6579 7328 2929 5b30 5d3a 0a20 2020 2020  eys())[0]:.     
-0000b2c0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0000b2d0: 656c 662e 6164 645f 6c61 7965 7228 0a20  elf.add_layer(. 
-0000b2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b2f0: 2020 2020 2020 2022 426f 7474 6f6d 5f61         "Bottom_a
-0000b300: 6972 222c 0a20 2020 2020 2020 2020 2020  ir",.           
-0000b310: 2020 2020 2020 2020 2020 2020 2062 6173               bas
-0000b320: 655f 6c61 7965 723d 6c69 7374 2873 656c  e_layer=list(sel
-0000b330: 662e 7374 6163 6b75 705f 6c61 7965 7273  f.stackup_layers
-0000b340: 2e6b 6579 7328 2929 5b2d 315d 2c0a 2020  .keys())[-1],.  
-0000b350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b360: 2020 2020 2020 6d65 7468 6f64 3d22 696e        method="in
-0000b370: 7365 7274 5f62 656c 6f77 222c 0a20 2020  sert_below",.   
-0000b380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b390: 2020 2020 206d 6174 6572 6961 6c3d 2261       material="a
-0000b3a0: 6972 222c 0a20 2020 2020 2020 2020 2020  ir",.           
-0000b3b0: 2020 2020 2020 2020 2020 2020 2074 6869               thi
-0000b3c0: 636b 6e65 7373 3d76 616c 2e73 6f6c 6465  ckness=val.solde
-0000b3d0: 725f 6261 6c6c 5f68 6569 6768 742c 0a20  r_ball_height,. 
-0000b3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b3f0: 2020 2020 2020 206c 6179 6572 5f74 7970         layer_typ
-0000b400: 653d 2264 6965 6c65 6374 7269 6322 2c0a  e="dielectric",.
-0000b410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b420: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
-0000b430: 2020 2020 2020 656c 6966 206c 6179 6572        elif layer
-0000b440: 203d 3d20 6c69 7374 2873 656c 662e 7374   == list(self.st
-0000b450: 6163 6b75 705f 6c61 7965 7273 2e6b 6579  ackup_layers.key
-0000b460: 7328 2929 5b2d 315d 3a0a 2020 2020 2020  s())[-1]:.      
-0000b470: 2020 2020 2020 2020 2020 2020 2020 7365                se
-0000b480: 6c66 2e61 6464 5f6c 6179 6572 280a 2020  lf.add_layer(.  
-0000b490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b4a0: 2020 2020 2020 2254 6f70 5f41 6972 222c        "Top_Air",
-0000b4b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000b4c0: 2020 2020 2020 2020 2062 6173 655f 6c61           base_la
-0000b4d0: 7965 723d 6c61 7965 722c 0a20 2020 2020  yer=layer,.     
+0000a470: 2020 2020 2020 2063 6d70 5f70 726f 702e         cmp_prop.
+0000a480: 5365 7453 6f6c 6465 7242 616c 6c50 726f  SetSolderBallPro
+0000a490: 7065 7274 7928 7362 616c 6c5f 7072 6f70  perty(sball_prop
+0000a4a0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0000a4b0: 2020 2020 2020 656c 6966 2028 0a20 2020        elif (.   
+0000a4c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a4d0: 2020 2020 2063 6d70 5f70 726f 702e 4765       cmp_prop.Ge
+0000a4e0: 7453 6f6c 6465 7242 616c 6c50 726f 7065  tSolderBallPrope
+0000a4f0: 7274 7928 292e 4765 7450 6c61 6365 6d65  rty().GetPlaceme
+0000a500: 6e74 2829 0a20 2020 2020 2020 2020 2020  nt().           
+0000a510: 2020 2020 2020 2020 2020 2020 203d 3d20               == 
+0000a520: 7365 6c66 2e5f 7065 6462 2e64 6566 696e  self._pedb.defin
+0000a530: 6974 696f 6e2e 536f 6c64 6572 6261 6c6c  ition.Solderball
+0000a540: 506c 6163 656d 656e 742e 4265 6c6f 7750  Placement.BelowP
+0000a550: 6164 7374 6163 6b0a 2020 2020 2020 2020  adstack.        
+0000a560: 2020 2020 2020 2020 2020 2020 293a 0a20              ):. 
+0000a570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a580: 2020 2020 2020 2073 6261 6c6c 5f70 726f         sball_pro
+0000a590: 7020 3d20 636d 705f 7072 6f70 2e47 6574  p = cmp_prop.Get
+0000a5a0: 536f 6c64 6572 4261 6c6c 5072 6f70 6572  SolderBallProper
+0000a5b0: 7479 2829 2e43 6c6f 6e65 2829 0a20 2020  ty().Clone().   
+0000a5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a5d0: 2020 2020 2073 6261 6c6c 5f70 726f 702e       sball_prop.
+0000a5e0: 5365 7450 6c61 6365 6d65 6e74 2873 656c  SetPlacement(sel
+0000a5f0: 662e 5f70 6564 622e 6465 6669 6e69 7469  f._pedb.definiti
+0000a600: 6f6e 2e53 6f6c 6465 7262 616c 6c50 6c61  on.SolderballPla
+0000a610: 6365 6d65 6e74 2e41 626f 7665 5061 6473  cement.AbovePads
+0000a620: 7461 636b 290a 2020 2020 2020 2020 2020  tack).          
+0000a630: 2020 2020 2020 2020 2020 2020 2020 636d                cm
+0000a640: 705f 7072 6f70 2e53 6574 536f 6c64 6572  p_prop.SetSolder
+0000a650: 4261 6c6c 5072 6f70 6572 7479 2873 6261  BallProperty(sba
+0000a660: 6c6c 5f70 726f 7029 0a20 2020 2020 2020  ll_prop).       
+0000a670: 2020 2020 2020 2020 2065 7863 6570 743a           except:
+0000a680: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a690: 2020 2020 2070 6173 730a 2020 2020 2020       pass.      
+0000a6a0: 2020 2020 2020 2020 2020 6966 2063 6d70            if cmp
+0000a6b0: 5f74 7970 6520 3d3d 2073 656c 662e 5f70  _type == self._p
+0000a6c0: 6564 622e 6465 6669 6e69 7469 6f6e 2e43  edb.definition.C
+0000a6d0: 6f6d 706f 6e65 6e74 5479 7065 2e49 433a  omponentType.IC:
+0000a6e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a6f0: 2020 2020 2064 6965 5f70 726f 7020 3d20       die_prop = 
+0000a700: 636d 705f 7072 6f70 2e47 6574 4469 6550  cmp_prop.GetDieP
+0000a710: 726f 7065 7274 7928 292e 436c 6f6e 6528  roperty().Clone(
+0000a720: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0000a730: 2020 2020 2020 6368 6970 5f6f 7269 656e        chip_orien
+0000a740: 7461 7469 6f6e 203d 2064 6965 5f70 726f  tation = die_pro
+0000a750: 702e 4765 744f 7269 656e 7461 7469 6f6e  p.GetOrientation
+0000a760: 2829 0a20 2020 2020 2020 2020 2020 2020  ().             
+0000a770: 2020 2020 2020 2069 6620 6368 6970 5f6f         if chip_o
+0000a780: 7269 656e 7461 7469 6f6e 203d 3d20 7365  rientation == se
+0000a790: 6c66 2e5f 7065 6462 2e64 6566 696e 6974  lf._pedb.definit
+0000a7a0: 696f 6e2e 4469 654f 7269 656e 7461 7469  ion.DieOrientati
+0000a7b0: 6f6e 2e43 6869 7044 6f77 6e3a 0a20 2020  on.ChipDown:.   
+0000a7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a7d0: 2020 2020 2064 6965 5f70 726f 702e 5365       die_prop.Se
+0000a7e0: 744f 7269 656e 7461 7469 6f6e 2873 656c  tOrientation(sel
+0000a7f0: 662e 5f70 6564 622e 6465 6669 6e69 7469  f._pedb.definiti
+0000a800: 6f6e 2e44 6965 4f72 6965 6e74 6174 696f  on.DieOrientatio
+0000a810: 6e2e 4368 6970 5570 290a 2020 2020 2020  n.ChipUp).      
+0000a820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a830: 2020 636d 705f 7072 6f70 2e53 6574 4469    cmp_prop.SetDi
+0000a840: 6550 726f 7065 7274 7928 6469 655f 7072  eProperty(die_pr
+0000a850: 6f70 290a 2020 2020 2020 2020 2020 2020  op).            
+0000a860: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0000a870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a880: 2020 2020 2020 6469 655f 7072 6f70 2e53        die_prop.S
+0000a890: 6574 4f72 6965 6e74 6174 696f 6e28 7365  etOrientation(se
+0000a8a0: 6c66 2e5f 7065 6462 2e64 6566 696e 6974  lf._pedb.definit
+0000a8b0: 696f 6e2e 4469 654f 7269 656e 7461 7469  ion.DieOrientati
+0000a8c0: 6f6e 2e43 6869 7044 6f77 6e29 0a20 2020  on.ChipDown).   
+0000a8d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a8e0: 2020 2020 2063 6d70 5f70 726f 702e 5365       cmp_prop.Se
+0000a8f0: 7444 6965 5072 6f70 6572 7479 2864 6965  tDieProperty(die
+0000a900: 5f70 726f 7029 0a20 2020 2020 2020 2020  _prop).         
+0000a910: 2020 2020 2020 2063 6d70 2e53 6574 436f         cmp.SetCo
+0000a920: 6d70 6f6e 656e 7450 726f 7065 7274 7928  mponentProperty(
+0000a930: 636d 705f 7072 6f70 290a 0a20 2020 2020  cmp_prop)..     
+0000a940: 2020 2020 2020 206c 6179 5f6c 6973 7420         lay_list 
+0000a950: 3d20 6c69 7374 286e 6577 5f6c 632e 4c61  = list(new_lc.La
+0000a960: 7965 7273 2873 656c 662e 5f70 6564 622e  yers(self._pedb.
+0000a970: 6564 625f 6170 692e 6365 6c6c 2e6c 6179  edb_api.cell.lay
+0000a980: 6572 5f74 7970 655f 7365 742e 5369 676e  er_type_set.Sign
+0000a990: 616c 4c61 7965 7253 6574 2929 0a20 2020  alLayerSet)).   
+0000a9a0: 2020 2020 2020 2020 2066 6f72 2070 6164           for pad
+0000a9b0: 7374 6163 6b20 696e 206c 6973 7428 7365  stack in list(se
+0000a9c0: 6c66 2e5f 7065 6462 2e70 6164 7374 6163  lf._pedb.padstac
+0000a9d0: 6b73 2e69 6e73 7461 6e63 6573 2e76 616c  ks.instances.val
+0000a9e0: 7565 7328 2929 3a0a 2020 2020 2020 2020  ues()):.        
+0000a9f0: 2020 2020 2020 2020 7374 6172 745f 6c61          start_la
+0000aa00: 7965 725f 6964 203d 205b 6c61 792e 4765  yer_id = [lay.Ge
+0000aa10: 744c 6179 6572 4964 2829 2066 6f72 206c  tLayerId() for l
+0000aa20: 6179 2069 6e20 6c69 7374 286c 6179 5f6c  ay in list(lay_l
+0000aa30: 6973 7429 2069 6620 6c61 792e 4765 744e  ist) if lay.GetN
+0000aa40: 616d 6528 2920 3d3d 2070 6164 7374 6163  ame() == padstac
+0000aa50: 6b2e 7374 6172 745f 6c61 7965 725d 0a20  k.start_layer]. 
+0000aa60: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0000aa70: 746f 705f 6c61 7965 725f 6964 203d 205b  top_layer_id = [
+0000aa80: 6c61 792e 4765 744c 6179 6572 4964 2829  lay.GetLayerId()
+0000aa90: 2066 6f72 206c 6179 2069 6e20 6c69 7374   for lay in list
+0000aaa0: 286c 6179 5f6c 6973 7429 2069 6620 6c61  (lay_list) if la
+0000aab0: 792e 4765 744e 616d 6528 2920 3d3d 2070  y.GetName() == p
+0000aac0: 6164 7374 6163 6b2e 7374 6f70 5f6c 6179  adstack.stop_lay
+0000aad0: 6572 5d0a 2020 2020 2020 2020 2020 2020  er].            
+0000aae0: 2020 2020 6c61 7965 725f 6d61 7020 3d20      layer_map = 
+0000aaf0: 7061 6473 7461 636b 2e5f 6564 625f 7061  padstack._edb_pa
+0000ab00: 6473 7461 636b 696e 7374 616e 6365 2e47  dstackinstance.G
+0000ab10: 6574 4c61 7965 724d 6170 2829 0a20 2020  etLayerMap().   
+0000ab20: 2020 2020 2020 2020 2020 2020 206c 6179               lay
+0000ab30: 6572 5f6d 6170 2e53 6574 4d61 7070 696e  er_map.SetMappin
+0000ab40: 6728 7374 6f70 5f6c 6179 6572 5f69 645b  g(stop_layer_id[
+0000ab50: 305d 2c20 7374 6172 745f 6c61 7965 725f  0], start_layer_
+0000ab60: 6964 5b30 5d29 0a20 2020 2020 2020 2020  id[0]).         
+0000ab70: 2020 2020 2020 2070 6164 7374 6163 6b2e         padstack.
+0000ab80: 5f65 6462 5f70 6164 7374 6163 6b69 6e73  _edb_padstackins
+0000ab90: 7461 6e63 652e 5365 744c 6179 6572 4d61  tance.SetLayerMa
+0000aba0: 7028 6c61 7965 725f 6d61 7029 0a20 2020  p(layer_map).   
+0000abb0: 2020 2020 2020 2020 2073 656c 662e 7265           self.re
+0000abc0: 6672 6573 685f 6c61 7965 725f 636f 6c6c  fresh_layer_coll
+0000abd0: 6563 7469 6f6e 2829 0a20 2020 2020 2020  ection().       
+0000abe0: 2020 2020 2072 6574 7572 6e20 5472 7565       return True
+0000abf0: 0a20 2020 2020 2020 2065 7863 6570 743a  .        except:
+0000ac00: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+0000ac10: 7572 6e20 4661 6c73 650a 0a20 2020 2040  urn False..    @
+0000ac20: 7079 6564 625f 6675 6e63 7469 6f6e 5f68  pyedb_function_h
+0000ac30: 616e 646c 6572 2829 0a20 2020 2064 6566  andler().    def
+0000ac40: 2067 6574 5f6c 6179 6f75 745f 7468 6963   get_layout_thic
+0000ac50: 6b6e 6573 7328 7365 6c66 293a 0a20 2020  kness(self):.   
+0000ac60: 2020 2020 2022 2222 5265 7475 726e 2074       """Return t
+0000ac70: 6865 206c 6179 6f75 7420 7468 6963 6b6e  he layout thickn
+0000ac80: 6573 732e 0a0a 2020 2020 2020 2020 5265  ess...        Re
+0000ac90: 7475 726e 730a 2020 2020 2020 2020 2d2d  turns.        --
+0000aca0: 2d2d 2d2d 2d0a 2020 2020 2020 2020 666c  -----.        fl
+0000acb0: 6f61 740a 2020 2020 2020 2020 2020 2020  oat.            
+0000acc0: 5468 6520 7468 6963 6b6e 6573 7320 7661  The thickness va
+0000acd0: 6c75 652e 0a20 2020 2020 2020 2022 2222  lue..        """
+0000ace0: 0a20 2020 2020 2020 206c 6179 6572 7320  .        layers 
+0000acf0: 3d20 6c69 7374 2873 656c 662e 7374 6163  = list(self.stac
+0000ad00: 6b75 705f 6c61 7965 7273 2e76 616c 7565  kup_layers.value
+0000ad10: 7328 2929 0a20 2020 2020 2020 206c 6179  s()).        lay
+0000ad20: 6572 732e 736f 7274 286b 6579 3d6c 616d  ers.sort(key=lam
+0000ad30: 6264 6120 6c61 793a 206c 6179 2e6c 6f77  bda lay: lay.low
+0000ad40: 6572 5f65 6c65 7661 7469 6f6e 290a 2020  er_elevation).  
+0000ad50: 2020 2020 2020 7468 6963 6b6e 6573 7320        thickness 
+0000ad60: 3d20 300a 2020 2020 2020 2020 6966 206c  = 0.        if l
+0000ad70: 6179 6572 733a 0a20 2020 2020 2020 2020  ayers:.         
+0000ad80: 2020 2074 6f70 5f6c 6179 6572 203d 206c     top_layer = l
+0000ad90: 6179 6572 735b 2d31 5d0a 2020 2020 2020  ayers[-1].      
+0000ada0: 2020 2020 2020 626f 7474 6f6d 5f6c 6179        bottom_lay
+0000adb0: 6572 203d 206c 6179 6572 735b 305d 0a20  er = layers[0]. 
+0000adc0: 2020 2020 2020 2020 2020 2074 6869 636b             thick
+0000add0: 6e65 7373 203d 2061 6273 2874 6f70 5f6c  ness = abs(top_l
+0000ade0: 6179 6572 2e75 7070 6572 5f65 6c65 7661  ayer.upper_eleva
+0000adf0: 7469 6f6e 202d 2062 6f74 746f 6d5f 6c61  tion - bottom_la
+0000ae00: 7965 722e 6c6f 7765 725f 656c 6576 6174  yer.lower_elevat
+0000ae10: 696f 6e29 0a20 2020 2020 2020 2072 6574  ion).        ret
+0000ae20: 7572 6e20 726f 756e 6428 7468 6963 6b6e  urn round(thickn
+0000ae30: 6573 732c 2037 290a 0a20 2020 2040 7079  ess, 7)..    @py
+0000ae40: 6564 625f 6675 6e63 7469 6f6e 5f68 616e  edb_function_han
+0000ae50: 646c 6572 2829 0a20 2020 2064 6566 205f  dler().    def _
+0000ae60: 6765 745f 736f 6c64 6572 5f68 6569 6768  get_solder_heigh
+0000ae70: 7428 7365 6c66 2c20 6c61 7965 725f 6e61  t(self, layer_na
+0000ae80: 6d65 293a 0a20 2020 2020 2020 2066 6f72  me):.        for
+0000ae90: 205f 2c20 7661 6c20 696e 2073 656c 662e   _, val in self.
+0000aea0: 5f70 6564 622e 636f 6d70 6f6e 656e 7473  _pedb.components
+0000aeb0: 2e63 6f6d 706f 6e65 6e74 732e 6974 656d  .components.item
+0000aec0: 7328 293a 0a20 2020 2020 2020 2020 2020  s():.           
+0000aed0: 2069 6620 7661 6c2e 736f 6c64 6572 5f62   if val.solder_b
+0000aee0: 616c 6c5f 6865 6967 6874 2061 6e64 2076  all_height and v
+0000aef0: 616c 2e70 6c61 6365 6d65 6e74 5f6c 6179  al.placement_lay
+0000af00: 6572 203d 3d20 6c61 7965 725f 6e61 6d65  er == layer_name
+0000af10: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0000af20: 2020 7265 7475 726e 2076 616c 2e73 6f6c    return val.sol
+0000af30: 6465 725f 6261 6c6c 5f68 6569 6768 740a  der_ball_height.
+0000af40: 2020 2020 2020 2020 7265 7475 726e 2030          return 0
+0000af50: 0a0a 2020 2020 4070 7965 6462 5f66 756e  ..    @pyedb_fun
+0000af60: 6374 696f 6e5f 6861 6e64 6c65 7228 290a  ction_handler().
+0000af70: 2020 2020 6465 6620 5f72 656d 6f76 655f      def _remove_
+0000af80: 736f 6c64 6572 5f70 6563 2873 656c 662c  solder_pec(self,
+0000af90: 206c 6179 6572 5f6e 616d 6529 3a0a 2020   layer_name):.  
+0000afa0: 2020 2020 2020 666f 7220 5f2c 2076 616c        for _, val
+0000afb0: 2069 6e20 7365 6c66 2e5f 7065 6462 2e63   in self._pedb.c
+0000afc0: 6f6d 706f 6e65 6e74 732e 636f 6d70 6f6e  omponents.compon
+0000afd0: 656e 7473 2e69 7465 6d73 2829 3a0a 2020  ents.items():.  
+0000afe0: 2020 2020 2020 2020 2020 6966 2076 616c            if val
+0000aff0: 2e73 6f6c 6465 725f 6261 6c6c 5f68 6569  .solder_ball_hei
+0000b000: 6768 7420 616e 6420 7661 6c2e 706c 6163  ght and val.plac
+0000b010: 656d 656e 745f 6c61 7965 7220 3d3d 206c  ement_layer == l
+0000b020: 6179 6572 5f6e 616d 653a 0a20 2020 2020  ayer_name:.     
+0000b030: 2020 2020 2020 2020 2020 2063 6f6d 705f             comp_
+0000b040: 7072 6f70 203d 2076 616c 2e63 6f6d 706f  prop = val.compo
+0000b050: 6e65 6e74 5f70 726f 7065 7274 790a 2020  nent_property.  
+0000b060: 2020 2020 2020 2020 2020 2020 2020 706f                po
+0000b070: 7274 5f70 726f 7065 7274 7920 3d20 636f  rt_property = co
+0000b080: 6d70 5f70 726f 702e 4765 7450 6f72 7450  mp_prop.GetPortP
+0000b090: 726f 7065 7274 7928 292e 436c 6f6e 6528  roperty().Clone(
+0000b0a0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0000b0b0: 2020 706f 7274 5f70 726f 7065 7274 792e    port_property.
+0000b0c0: 5365 7452 6566 6572 656e 6365 5369 7a65  SetReferenceSize
+0000b0d0: 4175 746f 2846 616c 7365 290a 2020 2020  Auto(False).    
+0000b0e0: 2020 2020 2020 2020 2020 2020 706f 7274              port
+0000b0f0: 5f70 726f 7065 7274 792e 5365 7452 6566  _property.SetRef
+0000b100: 6572 656e 6365 5369 7a65 2873 656c 662e  erenceSize(self.
+0000b110: 5f65 6462 5f76 616c 7565 2830 2e30 292c  _edb_value(0.0),
+0000b120: 2073 656c 662e 5f65 6462 5f76 616c 7565   self._edb_value
+0000b130: 2830 2e30 2929 0a20 2020 2020 2020 2020  (0.0)).         
+0000b140: 2020 2020 2020 2063 6f6d 705f 7072 6f70         comp_prop
+0000b150: 2e53 6574 506f 7274 5072 6f70 6572 7479  .SetPortProperty
+0000b160: 2870 6f72 745f 7072 6f70 6572 7479 290a  (port_property).
+0000b170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b180: 7661 6c2e 6564 6263 6f6d 706f 6e65 6e74  val.edbcomponent
+0000b190: 2e53 6574 436f 6d70 6f6e 656e 7450 726f  .SetComponentPro
+0000b1a0: 7065 7274 7928 636f 6d70 5f70 726f 7029  perty(comp_prop)
+0000b1b0: 0a0a 2020 2020 4070 7965 6462 5f66 756e  ..    @pyedb_fun
+0000b1c0: 6374 696f 6e5f 6861 6e64 6c65 7228 290a  ction_handler().
+0000b1d0: 2020 2020 6465 6620 6164 6a75 7374 5f73      def adjust_s
+0000b1e0: 6f6c 6465 725f 6469 656c 6563 7472 6963  older_dielectric
+0000b1f0: 7328 7365 6c66 293a 0a20 2020 2020 2020  s(self):.       
+0000b200: 2022 2222 4164 6a75 7374 2074 6865 2073   """Adjust the s
+0000b210: 7461 636b 2d75 7020 6279 2061 6464 696e  tack-up by addin
+0000b220: 6720 6f72 206d 6f64 6966 7969 6e67 2064  g or modifying d
+0000b230: 6965 6c65 6374 7269 6320 6c61 7965 7273  ielectric layers
+0000b240: 2074 6861 7420 636f 6e74 6169 6e73 2053   that contains S
+0000b250: 6f6c 6465 7220 4261 6c6c 732e 0a20 2020  older Balls..   
+0000b260: 2020 2020 2054 6869 7320 6d65 7468 6f64       This method
+0000b270: 2069 6465 6e74 6966 6965 7320 7468 6520   identifies the 
+0000b280: 736f 6c64 6572 2d62 616c 6c20 6865 6967  solder-ball heig
+0000b290: 6874 2061 6e64 2061 646a 7573 7420 7468  ht and adjust th
+0000b2a0: 6520 6469 656c 6563 7472 6963 2074 6869  e dielectric thi
+0000b2b0: 636b 6e65 7373 206f 6e20 746f 7020 286f  ckness on top (o
+0000b2c0: 7220 626f 7474 6f6d 2920 746f 2066 6974  r bottom) to fit
+0000b2d0: 0a20 2020 2020 2020 2074 6865 2074 6869  .        the thi
+0000b2e0: 636b 6e65 7373 2069 6e20 6f72 6465 7220  ckness in order 
+0000b2f0: 746f 206d 6572 6765 2061 6e6f 7468 6572  to merge another
+0000b300: 206c 6179 6f75 742e 0a0a 2020 2020 2020   layout...      
+0000b310: 2020 5265 7475 726e 730a 2020 2020 2020    Returns.      
+0000b320: 2020 2d2d 2d2d 2d2d 2d0a 2020 2020 2020    -------.      
+0000b330: 2020 626f 6f6c 0a20 2020 2020 2020 2022    bool.        "
+0000b340: 2222 0a20 2020 2020 2020 2066 6f72 2065  "".        for e
+0000b350: 6c2c 2076 616c 2069 6e20 7365 6c66 2e5f  l, val in self._
+0000b360: 7065 6462 2e63 6f6d 706f 6e65 6e74 732e  pedb.components.
+0000b370: 636f 6d70 6f6e 656e 7473 2e69 7465 6d73  components.items
+0000b380: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
+0000b390: 6966 2076 616c 2e73 6f6c 6465 725f 6261  if val.solder_ba
+0000b3a0: 6c6c 5f68 6569 6768 743a 0a20 2020 2020  ll_height:.     
+0000b3b0: 2020 2020 2020 2020 2020 206c 6179 6572             layer
+0000b3c0: 203d 2076 616c 2e70 6c61 6365 6d65 6e74   = val.placement
+0000b3d0: 5f6c 6179 6572 0a20 2020 2020 2020 2020  _layer.         
+0000b3e0: 2020 2020 2020 2069 6620 6c61 7965 7220         if layer 
+0000b3f0: 3d3d 206c 6973 7428 7365 6c66 2e73 7461  == list(self.sta
+0000b400: 636b 7570 5f6c 6179 6572 732e 6b65 7973  ckup_layers.keys
+0000b410: 2829 295b 305d 3a0a 2020 2020 2020 2020  ())[0]:.        
+0000b420: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000b430: 2e61 6464 5f6c 6179 6572 280a 2020 2020  .add_layer(.    
+0000b440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b450: 2020 2020 2242 6f74 746f 6d5f 6169 7222      "Bottom_air"
+0000b460: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0000b470: 2020 2020 2020 2020 2020 6261 7365 5f6c            base_l
+0000b480: 6179 6572 3d6c 6973 7428 7365 6c66 2e73  ayer=list(self.s
+0000b490: 7461 636b 7570 5f6c 6179 6572 732e 6b65  tackup_layers.ke
+0000b4a0: 7973 2829 295b 2d31 5d2c 0a20 2020 2020  ys())[-1],.     
+0000b4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b4c0: 2020 206d 6574 686f 643d 2269 6e73 6572     method="inser
+0000b4d0: 745f 6265 6c6f 7722 2c0a 2020 2020 2020  t_below",.      
 0000b4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b4f0: 2020 206d 6174 6572 6961 6c3d 2261 6972     material="air
-0000b500: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
-0000b510: 2020 2020 2020 2020 2020 2074 6869 636b             thick
-0000b520: 6e65 7373 3d76 616c 2e73 6f6c 6465 725f  ness=val.solder_
-0000b530: 6261 6c6c 5f68 6569 6768 742c 0a20 2020  ball_height,.   
+0000b4f0: 2020 6d61 7465 7269 616c 3d22 6169 7222    material="air"
+0000b500: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0000b510: 2020 2020 2020 2020 2020 7468 6963 6b6e            thickn
+0000b520: 6573 733d 7661 6c2e 736f 6c64 6572 5f62  ess=val.solder_b
+0000b530: 616c 6c5f 6865 6967 6874 2c0a 2020 2020  all_height,.    
 0000b540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b550: 2020 2020 206c 6179 6572 5f74 7970 653d       layer_type=
-0000b560: 2264 6965 6c65 6374 7269 6322 2c0a 2020  "dielectric",.  
+0000b550: 2020 2020 6c61 7965 725f 7479 7065 3d22      layer_type="
+0000b560: 6469 656c 6563 7472 6963 222c 0a20 2020  dielectric",.   
 0000b570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b580: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
-0000b590: 2020 2020 656c 6966 206c 6179 6572 203d      elif layer =
-0000b5a0: 3d20 6c69 7374 2873 656c 662e 7369 676e  = list(self.sign
-0000b5b0: 616c 5f6c 6179 6572 732e 6b65 7973 2829  al_layers.keys()
+0000b580: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
+0000b590: 2020 2065 6c69 6620 6c61 7965 7220 3d3d     elif layer ==
+0000b5a0: 206c 6973 7428 7365 6c66 2e73 7461 636b   list(self.stack
+0000b5b0: 7570 5f6c 6179 6572 732e 6b65 7973 2829  up_layers.keys()
 0000b5c0: 295b 2d31 5d3a 0a20 2020 2020 2020 2020  )[-1]:.         
-0000b5d0: 2020 2020 2020 2020 2020 206c 6973 7428             list(
-0000b5e0: 7365 6c66 2e73 7461 636b 7570 5f6c 6179  self.stackup_lay
-0000b5f0: 6572 732e 7661 6c75 6573 2829 295b 2d31  ers.values())[-1
-0000b600: 5d2e 7468 6963 6b6e 6573 7320 3d20 7661  ].thickness = va
-0000b610: 6c2e 736f 6c64 6572 5f62 616c 6c5f 6865  l.solder_ball_he
-0000b620: 6967 6874 0a0a 2020 2020 2020 2020 2020  ight..          
-0000b630: 2020 2020 2020 656c 6966 206c 6179 6572        elif layer
-0000b640: 203d 3d20 6c69 7374 2873 656c 662e 7369   == list(self.si
-0000b650: 676e 616c 5f6c 6179 6572 732e 6b65 7973  gnal_layers.keys
-0000b660: 2829 295b 305d 3a0a 2020 2020 2020 2020  ())[0]:.        
-0000b670: 2020 2020 2020 2020 2020 2020 6c69 7374              list
-0000b680: 2873 656c 662e 7374 6163 6b75 705f 6c61  (self.stackup_la
-0000b690: 7965 7273 2e76 616c 7565 7328 2929 5b30  yers.values())[0
-0000b6a0: 5d2e 7468 6963 6b6e 6573 7320 3d20 7661  ].thickness = va
-0000b6b0: 6c2e 736f 6c64 6572 5f62 616c 6c5f 6865  l.solder_ball_he
-0000b6c0: 6967 6874 0a20 2020 2020 2020 2072 6574  ight.        ret
-0000b6d0: 7572 6e20 5472 7565 0a0a 2020 2020 4070  urn True..    @p
-0000b6e0: 7965 6462 5f66 756e 6374 696f 6e5f 6861  yedb_function_ha
-0000b6f0: 6e64 6c65 7228 290a 2020 2020 6465 6620  ndler().    def 
-0000b700: 706c 6163 655f 696e 5f6c 6179 6f75 7428  place_in_layout(
-0000b710: 0a20 2020 2020 2020 2073 656c 662c 0a20  .        self,. 
-0000b720: 2020 2020 2020 2065 6462 2c0a 2020 2020         edb,.    
-0000b730: 2020 2020 616e 676c 653d 302e 302c 0a20      angle=0.0,. 
-0000b740: 2020 2020 2020 206f 6666 7365 745f 783d         offset_x=
-0000b750: 302e 302c 0a20 2020 2020 2020 206f 6666  0.0,.        off
-0000b760: 7365 745f 793d 302e 302c 0a20 2020 2020  set_y=0.0,.     
-0000b770: 2020 2066 6c69 7070 6564 5f73 7461 636b     flipped_stack
-0000b780: 7570 3d54 7275 652c 0a20 2020 2020 2020  up=True,.       
-0000b790: 2070 6c61 6365 5f6f 6e5f 746f 703d 5472   place_on_top=Tr
-0000b7a0: 7565 2c0a 2020 2020 293a 0a20 2020 2020  ue,.    ):.     
-0000b7b0: 2020 2022 2222 506c 6163 6520 6375 7272     """Place curr
-0000b7c0: 656e 7420 4365 6c6c 2069 6e74 6f20 616e  ent Cell into an
-0000b7d0: 6f74 6865 7220 6365 6c6c 2075 7369 6e67  other cell using
-0000b7e0: 206c 6179 6572 2070 6c61 6365 6d65 6e74   layer placement
-0000b7f0: 206d 6574 686f 642e 0a20 2020 2020 2020   method..       
-0000b800: 2046 6c69 7020 7468 6520 6375 7272 656e   Flip the curren
-0000b810: 7420 6c61 7965 7220 7374 6163 6b75 7020  t layer stackup 
-0000b820: 6f66 2061 206c 6179 6f75 7420 6966 2072  of a layout if r
-0000b830: 6571 7565 7374 6564 2e20 5472 616e 7366  equested. Transf
-0000b840: 6f72 6d20 7061 7261 6d65 7465 7273 2063  orm parameters c
-0000b850: 7572 7265 6e74 6c79 206e 6f74 2073 7570  urrently not sup
-0000b860: 706f 7274 6564 2e0a 0a20 2020 2020 2020  ported...       
-0000b870: 2050 6172 616d 6574 6572 730a 2020 2020   Parameters.    
-0000b880: 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0a20      ----------. 
-0000b890: 2020 2020 2020 2065 6462 203a 2045 6462         edb : Edb
-0000b8a0: 0a20 2020 2020 2020 2020 2020 2043 656c  .            Cel
-0000b8b0: 6c20 6f6e 2077 6869 6368 2074 6f20 706c  l on which to pl
-0000b8c0: 6163 6520 7468 6520 6375 7272 656e 7420  ace the current 
-0000b8d0: 6c61 796f 7574 2e20 4966 204e 6f6e 6520  layout. If None 
-0000b8e0: 7468 6520 4365 6c6c 2077 696c 6c20 6265  the Cell will be
-0000b8f0: 2061 7070 6c69 6564 206f 6e20 616e 2065   applied on an e
-0000b900: 6d70 7479 206e 6577 2043 656c 6c2e 0a20  mpty new Cell.. 
-0000b910: 2020 2020 2020 2061 6e67 6c65 203a 2064         angle : d
-0000b920: 6f75 626c 652c 206f 7074 696f 6e61 6c0a  ouble, optional.
-0000b930: 2020 2020 2020 2020 2020 2020 5468 6520              The 
-0000b940: 726f 7461 7469 6f6e 2061 6e67 6c65 2061  rotation angle a
-0000b950: 7070 6c69 6564 206f 6e20 7468 6520 6465  pplied on the de
-0000b960: 7369 676e 2e0a 2020 2020 2020 2020 6f66  sign..        of
-0000b970: 6673 6574 5f78 203a 2064 6f75 626c 652c  fset_x : double,
-0000b980: 206f 7074 696f 6e61 6c0a 2020 2020 2020   optional.      
-0000b990: 2020 2020 2020 5468 6520 7820 6f66 6673        The x offs
-0000b9a0: 6574 2076 616c 7565 2e0a 2020 2020 2020  et value..      
-0000b9b0: 2020 6f66 6673 6574 5f79 203a 2064 6f75    offset_y : dou
-0000b9c0: 626c 652c 206f 7074 696f 6e61 6c0a 2020  ble, optional.  
-0000b9d0: 2020 2020 2020 2020 2020 5468 6520 7920            The y 
-0000b9e0: 6f66 6673 6574 2076 616c 7565 2e0a 2020  offset value..  
-0000b9f0: 2020 2020 2020 666c 6970 7065 645f 7374        flipped_st
-0000ba00: 6163 6b75 7020 3a20 626f 6f6c 2c20 6f70  ackup : bool, op
-0000ba10: 7469 6f6e 616c 0a20 2020 2020 2020 2020  tional.         
-0000ba20: 2020 2045 6974 6865 7220 6966 2074 6865     Either if the
-0000ba30: 2063 7572 7265 6e74 206c 6179 6f75 7420   current layout 
-0000ba40: 6973 2069 6e76 6572 7465 642e 0a20 2020  is inverted..   
-0000ba50: 2020 2020 2020 2020 2049 6620 6054 7275           If `Tru
-0000ba60: 6560 2061 6e64 2070 6c61 6365 5f6f 6e5f  e` and place_on_
-0000ba70: 746f 7020 6973 2060 5472 7565 6020 7468  top is `True` th
-0000ba80: 6520 7374 6163 6b75 7020 7769 6c6c 2062  e stackup will b
-0000ba90: 6520 666c 6970 7065 6420 6265 666f 7265  e flipped before
-0000baa0: 2074 6865 206d 6572 6765 2e0a 2020 2020   the merge..    
-0000bab0: 2020 2020 706c 6163 655f 6f6e 5f74 6f70      place_on_top
-0000bac0: 203a 2062 6f6f 6c2c 206f 7074 696f 6e61   : bool, optiona
-0000bad0: 6c0a 2020 2020 2020 2020 2020 2020 4569  l.            Ei
-0000bae0: 7468 6572 2069 6620 706c 6163 6520 7468  ther if place th
-0000baf0: 6520 6375 7272 656e 7420 6c61 796f 7574  e current layout
-0000bb00: 206f 6e20 546f 7020 6f72 2042 6f74 746f   on Top or Botto
-0000bb10: 6d20 6f66 2064 6573 7469 6e61 7469 6f6e  m of destination
-0000bb20: 204c 6179 6f75 742e 0a0a 2020 2020 2020   Layout...      
-0000bb30: 2020 5265 7475 726e 730a 2020 2020 2020    Returns.      
-0000bb40: 2020 2d2d 2d2d 2d2d 2d0a 2020 2020 2020    -------.      
-0000bb50: 2020 626f 6f6c 0a20 2020 2020 2020 2020    bool.         
-0000bb60: 2020 2060 6054 7275 6560 6020 7768 656e     ``True`` when
-0000bb70: 2073 7563 6365 6564 2060 6046 616c 7365   succeed ``False
-0000bb80: 6060 2069 6620 6e6f 742e 0a0a 2020 2020  `` if not...    
-0000bb90: 2020 2020 4578 616d 706c 6573 0a20 2020      Examples.   
-0000bba0: 2020 2020 202d 2d2d 2d2d 2d2d 2d0a 2020       --------.  
-0000bbb0: 2020 2020 2020 3e3e 3e20 6564 6231 203d        >>> edb1 =
-0000bbc0: 2045 6462 2865 6462 7061 7468 3d74 6172   Edb(edbpath=tar
-0000bbd0: 6765 7466 696c 6531 2c20 2065 6462 7665  getfile1,  edbve
-0000bbe0: 7273 696f 6e3d 2232 3032 312e 3222 290a  rsion="2021.2").
-0000bbf0: 2020 2020 2020 2020 3e3e 3e20 6564 6232          >>> edb2
-0000bc00: 203d 2045 6462 2865 6462 7061 7468 3d74   = Edb(edbpath=t
-0000bc10: 6172 6765 7466 696c 6532 2c20 6564 6276  argetfile2, edbv
-0000bc20: 6572 7369 6f6e 3d22 3230 3231 2e32 2229  ersion="2021.2")
-0000bc30: 0a0a 2020 2020 2020 2020 3e3e 3e20 686f  ..        >>> ho
-0000bc40: 7374 696e 675f 636d 7020 3d20 6564 6231  sting_cmp = edb1
-0000bc50: 2e63 6f6d 706f 6e65 6e74 732e 6765 745f  .components.get_
-0000bc60: 636f 6d70 6f6e 656e 745f 6279 5f6e 616d  component_by_nam
-0000bc70: 6528 2255 3130 3022 290a 2020 2020 2020  e("U100").      
-0000bc80: 2020 3e3e 3e20 6d6f 756e 7465 645f 636d    >>> mounted_cm
-0000bc90: 7020 3d20 6564 6232 2e63 6f6d 706f 6e65  p = edb2.compone
-0000bca0: 6e74 732e 6765 745f 636f 6d70 6f6e 656e  nts.get_componen
-0000bcb0: 745f 6279 5f6e 616d 6528 2242 4741 2229  t_by_name("BGA")
-0000bcc0: 0a0a 2020 2020 2020 2020 3e3e 3e20 7665  ..        >>> ve
-0000bcd0: 6374 6f72 2c20 726f 7461 7469 6f6e 2c20  ctor, rotation, 
-0000bce0: 736f 6c64 6572 5f62 616c 6c5f 6865 6967  solder_ball_heig
-0000bcf0: 6874 203d 2065 6462 312e 636f 6d70 6f6e  ht = edb1.compon
-0000bd00: 656e 7473 2e67 6574 5f63 6f6d 706f 6e65  ents.get_compone
-0000bd10: 6e74 5f70 6c61 6365 6d65 6e74 5f76 6563  nt_placement_vec
-0000bd20: 746f 7228 0a20 2020 2020 2020 202e 2e2e  tor(.        ...
-0000bd30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bd40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bd60: 2020 2020 206d 6f75 6e74 6564 5f63 6f6d       mounted_com
-0000bd70: 706f 6e65 6e74 3d6d 6f75 6e74 6564 5f63  ponent=mounted_c
-0000bd80: 6d70 2c0a 2020 2020 2020 2020 2e2e 2e20  mp,.        ... 
-0000bd90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bda0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bdb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bdc0: 2020 2020 686f 7374 696e 675f 636f 6d70      hosting_comp
-0000bdd0: 6f6e 656e 743d 686f 7374 696e 675f 636d  onent=hosting_cm
-0000bde0: 702c 0a20 2020 2020 2020 202e 2e2e 2020  p,.        ...  
-0000bdf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000be00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000be10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000be20: 2020 206d 6f75 6e74 6564 5f63 6f6d 706f     mounted_compo
-0000be30: 6e65 6e74 5f70 696e 313d 2241 3132 222c  nent_pin1="A12",
-0000be40: 0a20 2020 2020 2020 202e 2e2e 2020 2020  .        ...    
-0000be50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000be60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000be70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000be80: 206d 6f75 6e74 6564 5f63 6f6d 706f 6e65   mounted_compone
-0000be90: 6e74 5f70 696e 323d 2241 3134 222c 0a20  nt_pin2="A14",. 
-0000bea0: 2020 2020 2020 202e 2e2e 2020 2020 2020         ...      
+0000b5d0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000b5e0: 6164 645f 6c61 7965 7228 0a20 2020 2020  add_layer(.     
+0000b5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b600: 2020 2022 546f 705f 4169 7222 2c0a 2020     "Top_Air",.  
+0000b610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b620: 2020 2020 2020 6261 7365 5f6c 6179 6572        base_layer
+0000b630: 3d6c 6179 6572 2c0a 2020 2020 2020 2020  =layer,.        
+0000b640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b650: 6d61 7465 7269 616c 3d22 6169 7222 2c0a  material="air",.
+0000b660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b670: 2020 2020 2020 2020 7468 6963 6b6e 6573          thicknes
+0000b680: 733d 7661 6c2e 736f 6c64 6572 5f62 616c  s=val.solder_bal
+0000b690: 6c5f 6865 6967 6874 2c0a 2020 2020 2020  l_height,.      
+0000b6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b6b0: 2020 6c61 7965 725f 7479 7065 3d22 6469    layer_type="di
+0000b6c0: 656c 6563 7472 6963 222c 0a20 2020 2020  electric",.     
+0000b6d0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+0000b6e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000b6f0: 2065 6c69 6620 6c61 7965 7220 3d3d 206c   elif layer == l
+0000b700: 6973 7428 7365 6c66 2e73 6967 6e61 6c5f  ist(self.signal_
+0000b710: 6c61 7965 7273 2e6b 6579 7328 2929 5b2d  layers.keys())[-
+0000b720: 315d 3a0a 2020 2020 2020 2020 2020 2020  1]:.            
+0000b730: 2020 2020 2020 2020 6c69 7374 2873 656c          list(sel
+0000b740: 662e 7374 6163 6b75 705f 6c61 7965 7273  f.stackup_layers
+0000b750: 2e76 616c 7565 7328 2929 5b2d 315d 2e74  .values())[-1].t
+0000b760: 6869 636b 6e65 7373 203d 2076 616c 2e73  hickness = val.s
+0000b770: 6f6c 6465 725f 6261 6c6c 5f68 6569 6768  older_ball_heigh
+0000b780: 740a 0a20 2020 2020 2020 2020 2020 2020  t..             
+0000b790: 2020 2065 6c69 6620 6c61 7965 7220 3d3d     elif layer ==
+0000b7a0: 206c 6973 7428 7365 6c66 2e73 6967 6e61   list(self.signa
+0000b7b0: 6c5f 6c61 7965 7273 2e6b 6579 7328 2929  l_layers.keys())
+0000b7c0: 5b30 5d3a 0a20 2020 2020 2020 2020 2020  [0]:.           
+0000b7d0: 2020 2020 2020 2020 206c 6973 7428 7365           list(se
+0000b7e0: 6c66 2e73 7461 636b 7570 5f6c 6179 6572  lf.stackup_layer
+0000b7f0: 732e 7661 6c75 6573 2829 295b 305d 2e74  s.values())[0].t
+0000b800: 6869 636b 6e65 7373 203d 2076 616c 2e73  hickness = val.s
+0000b810: 6f6c 6465 725f 6261 6c6c 5f68 6569 6768  older_ball_heigh
+0000b820: 740a 2020 2020 2020 2020 7265 7475 726e  t.        return
+0000b830: 2054 7275 650a 0a20 2020 2040 7079 6564   True..    @pyed
+0000b840: 625f 6675 6e63 7469 6f6e 5f68 616e 646c  b_function_handl
+0000b850: 6572 2829 0a20 2020 2064 6566 2070 6c61  er().    def pla
+0000b860: 6365 5f69 6e5f 6c61 796f 7574 280a 2020  ce_in_layout(.  
+0000b870: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
+0000b880: 2020 2020 6564 622c 0a20 2020 2020 2020      edb,.       
+0000b890: 2061 6e67 6c65 3d30 2e30 2c0a 2020 2020   angle=0.0,.    
+0000b8a0: 2020 2020 6f66 6673 6574 5f78 3d30 2e30      offset_x=0.0
+0000b8b0: 2c0a 2020 2020 2020 2020 6f66 6673 6574  ,.        offset
+0000b8c0: 5f79 3d30 2e30 2c0a 2020 2020 2020 2020  _y=0.0,.        
+0000b8d0: 666c 6970 7065 645f 7374 6163 6b75 703d  flipped_stackup=
+0000b8e0: 5472 7565 2c0a 2020 2020 2020 2020 706c  True,.        pl
+0000b8f0: 6163 655f 6f6e 5f74 6f70 3d54 7275 652c  ace_on_top=True,
+0000b900: 0a20 2020 2029 3a0a 2020 2020 2020 2020  .    ):.        
+0000b910: 2222 2250 6c61 6365 2063 7572 7265 6e74  """Place current
+0000b920: 2043 656c 6c20 696e 746f 2061 6e6f 7468   Cell into anoth
+0000b930: 6572 2063 656c 6c20 7573 696e 6720 6c61  er cell using la
+0000b940: 7965 7220 706c 6163 656d 656e 7420 6d65  yer placement me
+0000b950: 7468 6f64 2e0a 2020 2020 2020 2020 466c  thod..        Fl
+0000b960: 6970 2074 6865 2063 7572 7265 6e74 206c  ip the current l
+0000b970: 6179 6572 2073 7461 636b 7570 206f 6620  ayer stackup of 
+0000b980: 6120 6c61 796f 7574 2069 6620 7265 7175  a layout if requ
+0000b990: 6573 7465 642e 2054 7261 6e73 666f 726d  ested. Transform
+0000b9a0: 2070 6172 616d 6574 6572 7320 6375 7272   parameters curr
+0000b9b0: 656e 746c 7920 6e6f 7420 7375 7070 6f72  ently not suppor
+0000b9c0: 7465 642e 0a0a 2020 2020 2020 2020 5061  ted...        Pa
+0000b9d0: 7261 6d65 7465 7273 0a20 2020 2020 2020  rameters.       
+0000b9e0: 202d 2d2d 2d2d 2d2d 2d2d 2d0a 2020 2020   ----------.    
+0000b9f0: 2020 2020 6564 6220 3a20 4564 620a 2020      edb : Edb.  
+0000ba00: 2020 2020 2020 2020 2020 4365 6c6c 206f            Cell o
+0000ba10: 6e20 7768 6963 6820 746f 2070 6c61 6365  n which to place
+0000ba20: 2074 6865 2063 7572 7265 6e74 206c 6179   the current lay
+0000ba30: 6f75 742e 2049 6620 4e6f 6e65 2074 6865  out. If None the
+0000ba40: 2043 656c 6c20 7769 6c6c 2062 6520 6170   Cell will be ap
+0000ba50: 706c 6965 6420 6f6e 2061 6e20 656d 7074  plied on an empt
+0000ba60: 7920 6e65 7720 4365 6c6c 2e0a 2020 2020  y new Cell..    
+0000ba70: 2020 2020 616e 676c 6520 3a20 646f 7562      angle : doub
+0000ba80: 6c65 2c20 6f70 7469 6f6e 616c 0a20 2020  le, optional.   
+0000ba90: 2020 2020 2020 2020 2054 6865 2072 6f74           The rot
+0000baa0: 6174 696f 6e20 616e 676c 6520 6170 706c  ation angle appl
+0000bab0: 6965 6420 6f6e 2074 6865 2064 6573 6967  ied on the desig
+0000bac0: 6e2e 0a20 2020 2020 2020 206f 6666 7365  n..        offse
+0000bad0: 745f 7820 3a20 646f 7562 6c65 2c20 6f70  t_x : double, op
+0000bae0: 7469 6f6e 616c 0a20 2020 2020 2020 2020  tional.         
+0000baf0: 2020 2054 6865 2078 206f 6666 7365 7420     The x offset 
+0000bb00: 7661 6c75 652e 0a20 2020 2020 2020 206f  value..        o
+0000bb10: 6666 7365 745f 7920 3a20 646f 7562 6c65  ffset_y : double
+0000bb20: 2c20 6f70 7469 6f6e 616c 0a20 2020 2020  , optional.     
+0000bb30: 2020 2020 2020 2054 6865 2079 206f 6666         The y off
+0000bb40: 7365 7420 7661 6c75 652e 0a20 2020 2020  set value..     
+0000bb50: 2020 2066 6c69 7070 6564 5f73 7461 636b     flipped_stack
+0000bb60: 7570 203a 2062 6f6f 6c2c 206f 7074 696f  up : bool, optio
+0000bb70: 6e61 6c0a 2020 2020 2020 2020 2020 2020  nal.            
+0000bb80: 4569 7468 6572 2069 6620 7468 6520 6375  Either if the cu
+0000bb90: 7272 656e 7420 6c61 796f 7574 2069 7320  rrent layout is 
+0000bba0: 696e 7665 7274 6564 2e0a 2020 2020 2020  inverted..      
+0000bbb0: 2020 2020 2020 4966 2060 5472 7565 6020        If `True` 
+0000bbc0: 616e 6420 706c 6163 655f 6f6e 5f74 6f70  and place_on_top
+0000bbd0: 2069 7320 6054 7275 6560 2074 6865 2073   is `True` the s
+0000bbe0: 7461 636b 7570 2077 696c 6c20 6265 2066  tackup will be f
+0000bbf0: 6c69 7070 6564 2062 6566 6f72 6520 7468  lipped before th
+0000bc00: 6520 6d65 7267 652e 0a20 2020 2020 2020  e merge..       
+0000bc10: 2070 6c61 6365 5f6f 6e5f 746f 7020 3a20   place_on_top : 
+0000bc20: 626f 6f6c 2c20 6f70 7469 6f6e 616c 0a20  bool, optional. 
+0000bc30: 2020 2020 2020 2020 2020 2045 6974 6865             Eithe
+0000bc40: 7220 6966 2070 6c61 6365 2074 6865 2063  r if place the c
+0000bc50: 7572 7265 6e74 206c 6179 6f75 7420 6f6e  urrent layout on
+0000bc60: 2054 6f70 206f 7220 426f 7474 6f6d 206f   Top or Bottom o
+0000bc70: 6620 6465 7374 696e 6174 696f 6e20 4c61  f destination La
+0000bc80: 796f 7574 2e0a 0a20 2020 2020 2020 2052  yout...        R
+0000bc90: 6574 7572 6e73 0a20 2020 2020 2020 202d  eturns.        -
+0000bca0: 2d2d 2d2d 2d2d 0a20 2020 2020 2020 2062  ------.        b
+0000bcb0: 6f6f 6c0a 2020 2020 2020 2020 2020 2020  ool.            
+0000bcc0: 6060 5472 7565 6060 2077 6865 6e20 7375  ``True`` when su
+0000bcd0: 6363 6565 6420 6060 4661 6c73 6560 6020  cceed ``False`` 
+0000bce0: 6966 206e 6f74 2e0a 0a20 2020 2020 2020  if not...       
+0000bcf0: 2045 7861 6d70 6c65 730a 2020 2020 2020   Examples.      
+0000bd00: 2020 2d2d 2d2d 2d2d 2d2d 0a20 2020 2020    --------.     
+0000bd10: 2020 203e 3e3e 2065 6462 3120 3d20 4564     >>> edb1 = Ed
+0000bd20: 6228 6564 6270 6174 683d 7461 7267 6574  b(edbpath=target
+0000bd30: 6669 6c65 312c 2020 6564 6276 6572 7369  file1,  edbversi
+0000bd40: 6f6e 3d22 3230 3231 2e32 2229 0a20 2020  on="2021.2").   
+0000bd50: 2020 2020 203e 3e3e 2065 6462 3220 3d20       >>> edb2 = 
+0000bd60: 4564 6228 6564 6270 6174 683d 7461 7267  Edb(edbpath=targ
+0000bd70: 6574 6669 6c65 322c 2065 6462 7665 7273  etfile2, edbvers
+0000bd80: 696f 6e3d 2232 3032 312e 3222 290a 0a20  ion="2021.2").. 
+0000bd90: 2020 2020 2020 203e 3e3e 2068 6f73 7469         >>> hosti
+0000bda0: 6e67 5f63 6d70 203d 2065 6462 312e 636f  ng_cmp = edb1.co
+0000bdb0: 6d70 6f6e 656e 7473 2e67 6574 5f63 6f6d  mponents.get_com
+0000bdc0: 706f 6e65 6e74 5f62 795f 6e61 6d65 2822  ponent_by_name("
+0000bdd0: 5531 3030 2229 0a20 2020 2020 2020 203e  U100").        >
+0000bde0: 3e3e 206d 6f75 6e74 6564 5f63 6d70 203d  >> mounted_cmp =
+0000bdf0: 2065 6462 322e 636f 6d70 6f6e 656e 7473   edb2.components
+0000be00: 2e67 6574 5f63 6f6d 706f 6e65 6e74 5f62  .get_component_b
+0000be10: 795f 6e61 6d65 2822 4247 4122 290a 0a20  y_name("BGA").. 
+0000be20: 2020 2020 2020 203e 3e3e 2076 6563 746f         >>> vecto
+0000be30: 722c 2072 6f74 6174 696f 6e2c 2073 6f6c  r, rotation, sol
+0000be40: 6465 725f 6261 6c6c 5f68 6569 6768 7420  der_ball_height 
+0000be50: 3d20 6564 6231 2e63 6f6d 706f 6e65 6e74  = edb1.component
+0000be60: 732e 6765 745f 636f 6d70 6f6e 656e 745f  s.get_component_
+0000be70: 706c 6163 656d 656e 745f 7665 6374 6f72  placement_vector
+0000be80: 280a 2020 2020 2020 2020 2e2e 2e20 2020  (.        ...   
+0000be90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000beb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bed0: 2020 2020 2020 2020 2020 2020 2020 2068                 h
-0000bee0: 6f73 7469 6e67 5f63 6f6d 706f 6e65 6e74  osting_component
-0000bef0: 5f70 696e 313d 2241 3132 222c 0a20 2020  _pin1="A12",.   
-0000bf00: 2020 2020 202e 2e2e 2020 2020 2020 2020       ...        
+0000bec0: 2020 6d6f 756e 7465 645f 636f 6d70 6f6e    mounted_compon
+0000bed0: 656e 743d 6d6f 756e 7465 645f 636d 702c  ent=mounted_cmp,
+0000bee0: 0a20 2020 2020 2020 202e 2e2e 2020 2020  .        ...    
+0000bef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bf00: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bf10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bf20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bf30: 2020 2020 2020 2020 2020 2020 2068 6f73               hos
-0000bf40: 7469 6e67 5f63 6f6d 706f 6e65 6e74 5f70  ting_component_p
-0000bf50: 696e 323d 2241 3134 2229 0a20 2020 2020  in2="A14").     
-0000bf60: 2020 203e 3e3e 2065 6462 322e 7374 6163     >>> edb2.stac
-0000bf70: 6b75 702e 706c 6163 655f 696e 5f6c 6179  kup.place_in_lay
-0000bf80: 6f75 7428 6564 6231 2e61 6374 6976 655f  out(edb1.active_
-0000bf90: 6365 6c6c 2c20 616e 676c 653d 302e 302c  cell, angle=0.0,
-0000bfa0: 206f 6666 7365 745f 783d 7665 6374 6f72   offset_x=vector
-0000bfb0: 5b30 5d2c 0a20 2020 2020 2020 202e 2e2e  [0],.        ...
+0000bf20: 2068 6f73 7469 6e67 5f63 6f6d 706f 6e65   hosting_compone
+0000bf30: 6e74 3d68 6f73 7469 6e67 5f63 6d70 2c0a  nt=hosting_cmp,.
+0000bf40: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
+0000bf50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bf60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bf70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bf80: 6d6f 756e 7465 645f 636f 6d70 6f6e 656e  mounted_componen
+0000bf90: 745f 7069 6e31 3d22 4131 3222 2c0a 2020  t_pin1="A12",.  
+0000bfa0: 2020 2020 2020 2e2e 2e20 2020 2020 2020        ...       
+0000bfb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bfc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bfd0: 2020 2020 2020 2020 2020 2020 2020 6f66                of
-0000bfe0: 6673 6574 5f79 3d76 6563 746f 725b 315d  fset_y=vector[1]
-0000bff0: 2c20 666c 6970 7065 645f 7374 6163 6b75  , flipped_stacku
-0000c000: 703d 4661 6c73 652c 2070 6c61 6365 5f6f  p=False, place_o
-0000c010: 6e5f 746f 703d 5472 7565 2c0a 2020 2020  n_top=True,.    
-0000c020: 2020 2020 2e2e 2e20 2020 2020 2020 2020      ...         
-0000c030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c040: 2020 2020 2029 0a20 2020 2020 2020 2022       ).        "
-0000c050: 2222 0a20 2020 2020 2020 2023 2069 6620  "".        # if 
-0000c060: 666c 6970 7065 645f 7374 6163 6b75 7020  flipped_stackup 
-0000c070: 616e 6420 706c 6163 655f 6f6e 5f74 6f70  and place_on_top
-0000c080: 206f 7220 286e 6f74 2066 6c69 7070 6564   or (not flipped
-0000c090: 5f73 7461 636b 7570 2061 6e64 206e 6f74  _stackup and not
-0000c0a0: 2070 6c61 6365 5f6f 6e5f 746f 7029 3a0a   place_on_top):.
-0000c0b0: 2020 2020 2020 2020 7365 6c66 2e61 646a          self.adj
-0000c0c0: 7573 745f 736f 6c64 6572 5f64 6965 6c65  ust_solder_diele
-0000c0d0: 6374 7269 6373 2829 0a20 2020 2020 2020  ctrics().       
-0000c0e0: 2069 6620 6e6f 7420 706c 6163 655f 6f6e   if not place_on
-0000c0f0: 5f74 6f70 3a0a 2020 2020 2020 2020 2020  _top:.          
-0000c100: 2020 6564 622e 7374 6163 6b75 702e 666c    edb.stackup.fl
-0000c110: 6970 5f64 6573 6967 6e28 290a 2020 2020  ip_design().    
-0000c120: 2020 2020 2020 2020 706c 6163 655f 6f6e          place_on
-0000c130: 5f74 6f70 203d 2054 7275 650a 2020 2020  _top = True.    
-0000c140: 2020 2020 2020 2020 6966 206e 6f74 2066          if not f
-0000c150: 6c69 7070 6564 5f73 7461 636b 7570 3a0a  lipped_stackup:.
-0000c160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c170: 7365 6c66 2e66 6c69 705f 6465 7369 676e  self.flip_design
-0000c180: 2829 0a20 2020 2020 2020 2065 6c69 6620  ().        elif 
-0000c190: 666c 6970 7065 645f 7374 6163 6b75 703a  flipped_stackup:
-0000c1a0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-0000c1b0: 662e 666c 6970 5f64 6573 6967 6e28 290a  f.flip_design().
-0000c1c0: 2020 2020 2020 2020 6564 625f 6365 6c6c          edb_cell
-0000c1d0: 203d 2065 6462 2e61 6374 6976 655f 6365   = edb.active_ce
-0000c1e0: 6c6c 0a20 2020 2020 2020 205f 616e 676c  ll.        _angl
-0000c1f0: 6520 3d20 7365 6c66 2e5f 6564 625f 7661  e = self._edb_va
-0000c200: 6c75 6528 616e 676c 6520 2a20 6d61 7468  lue(angle * math
-0000c210: 2e70 6920 2f20 3138 302e 3029 0a20 2020  .pi / 180.0).   
-0000c220: 2020 2020 205f 6f66 6673 6574 5f78 203d       _offset_x =
-0000c230: 2073 656c 662e 5f65 6462 5f76 616c 7565   self._edb_value
-0000c240: 286f 6666 7365 745f 7829 0a20 2020 2020  (offset_x).     
-0000c250: 2020 205f 6f66 6673 6574 5f79 203d 2073     _offset_y = s
-0000c260: 656c 662e 5f65 6462 5f76 616c 7565 286f  elf._edb_value(o
-0000c270: 6666 7365 745f 7929 0a0a 2020 2020 2020  ffset_y)..      
-0000c280: 2020 6966 2065 6462 5f63 656c 6c2e 4765    if edb_cell.Ge
-0000c290: 744e 616d 6528 2920 6e6f 7420 696e 2073  tName() not in s
-0000c2a0: 656c 662e 5f70 6564 622e 6365 6c6c 5f6e  elf._pedb.cell_n
-0000c2b0: 616d 6573 3a0a 2020 2020 2020 2020 2020  ames:.          
-0000c2c0: 2020 6c69 7374 5f63 656c 6c73 203d 2073    list_cells = s
-0000c2d0: 656c 662e 5f70 6564 622e 636f 7079 5f63  elf._pedb.copy_c
-0000c2e0: 656c 6c73 285b 6564 625f 6365 6c6c 2e61  ells([edb_cell.a
-0000c2f0: 7069 5f6f 626a 6563 745d 290a 2020 2020  pi_object]).    
-0000c300: 2020 2020 2020 2020 6564 625f 6365 6c6c          edb_cell
-0000c310: 203d 206c 6973 745f 6365 6c6c 735b 305d   = list_cells[0]
-0000c320: 0a20 2020 2020 2020 2073 656c 662e 5f70  .        self._p
-0000c330: 6564 622e 6c61 796f 7574 2e63 656c 6c2e  edb.layout.cell.
-0000c340: 5365 7442 6c61 636b 426f 7828 5472 7565  SetBlackBox(True
-0000c350: 290a 2020 2020 2020 2020 6365 6c6c 5f69  ).        cell_i
-0000c360: 6e73 7432 203d 2073 656c 662e 5f70 6564  nst2 = self._ped
-0000c370: 622e 6564 625f 6170 692e 6365 6c6c 2e68  b.edb_api.cell.h
-0000c380: 6965 7261 7263 6879 2e63 656c 6c5f 696e  ierarchy.cell_in
-0000c390: 7374 616e 6365 2e43 7265 6174 6528 0a20  stance.Create(. 
-0000c3a0: 2020 2020 2020 2020 2020 2065 6462 5f63             edb_c
-0000c3b0: 656c 6c2e 4765 744c 6179 6f75 7428 292c  ell.GetLayout(),
-0000c3c0: 2073 656c 662e 5f70 6564 622e 6c61 796f   self._pedb.layo
-0000c3d0: 7574 2e63 656c 6c2e 4765 744e 616d 6528  ut.cell.GetName(
-0000c3e0: 292c 2073 656c 662e 5f70 6564 622e 6163  ), self._pedb.ac
-0000c3f0: 7469 7665 5f6c 6179 6f75 740a 2020 2020  tive_layout.    
-0000c400: 2020 2020 290a 2020 2020 2020 2020 6365      ).        ce
-0000c410: 6c6c 5f74 7261 6e73 203d 2063 656c 6c5f  ll_trans = cell_
-0000c420: 696e 7374 322e 4765 7454 7261 6e73 666f  inst2.GetTransfo
-0000c430: 726d 2829 0a20 2020 2020 2020 2063 656c  rm().        cel
-0000c440: 6c5f 7472 616e 732e 5365 7452 6f74 6174  l_trans.SetRotat
-0000c450: 696f 6e56 616c 7565 285f 616e 676c 6529  ionValue(_angle)
-0000c460: 0a20 2020 2020 2020 2063 656c 6c5f 7472  .        cell_tr
-0000c470: 616e 732e 5365 7458 4f66 6673 6574 5661  ans.SetXOffsetVa
-0000c480: 6c75 6528 5f6f 6666 7365 745f 7829 0a20  lue(_offset_x). 
-0000c490: 2020 2020 2020 2063 656c 6c5f 7472 616e         cell_tran
-0000c4a0: 732e 5365 7459 4f66 6673 6574 5661 6c75  s.SetYOffsetValu
-0000c4b0: 6528 5f6f 6666 7365 745f 7929 0a20 2020  e(_offset_y).   
-0000c4c0: 2020 2020 2063 656c 6c5f 7472 616e 732e       cell_trans.
-0000c4d0: 5365 744d 6972 726f 7228 666c 6970 7065  SetMirror(flippe
-0000c4e0: 645f 7374 6163 6b75 7029 0a20 2020 2020  d_stackup).     
-0000c4f0: 2020 2063 656c 6c5f 696e 7374 322e 5365     cell_inst2.Se
-0000c500: 7454 7261 6e73 666f 726d 2863 656c 6c5f  tTransform(cell_
-0000c510: 7472 616e 7329 0a20 2020 2020 2020 2063  trans).        c
-0000c520: 656c 6c5f 696e 7374 322e 5365 7453 6f6c  ell_inst2.SetSol
-0000c530: 7665 496e 6465 7065 6e64 656e 7450 7265  veIndependentPre
-0000c540: 6665 7265 6e63 6528 4661 6c73 6529 0a20  ference(False). 
-0000c550: 2020 2020 2020 2073 7461 636b 7570 5f74         stackup_t
-0000c560: 6172 6765 7420 3d20 6564 625f 6365 6c6c  arget = edb_cell
-0000c570: 2e47 6574 4c61 796f 7574 2829 2e47 6574  .GetLayout().Get
-0000c580: 4c61 7965 7243 6f6c 6c65 6374 696f 6e28  LayerCollection(
-0000c590: 290a 0a20 2020 2020 2020 2069 6620 706c  )..        if pl
-0000c5a0: 6163 655f 6f6e 5f74 6f70 3a0a 2020 2020  ace_on_top:.    
-0000c5b0: 2020 2020 2020 2020 6365 6c6c 5f69 6e73          cell_ins
-0000c5c0: 7432 2e53 6574 506c 6163 656d 656e 744c  t2.SetPlacementL
-0000c5d0: 6179 6572 280a 2020 2020 2020 2020 2020  ayer(.          
-0000c5e0: 2020 2020 2020 6c69 7374 2873 7461 636b        list(stack
-0000c5f0: 7570 5f74 6172 6765 742e 4c61 7965 7273  up_target.Layers
-0000c600: 2873 656c 662e 5f70 6564 622e 6564 625f  (self._pedb.edb_
-0000c610: 6170 692e 6365 6c6c 2e6c 6179 6572 5f74  api.cell.layer_t
-0000c620: 7970 655f 7365 742e 5369 676e 616c 4c61  ype_set.SignalLa
-0000c630: 7965 7253 6574 2929 5b30 5d0a 2020 2020  yerSet))[0].    
-0000c640: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-0000c650: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0000c660: 2020 2020 6365 6c6c 5f69 6e73 7432 2e53      cell_inst2.S
-0000c670: 6574 506c 6163 656d 656e 744c 6179 6572  etPlacementLayer
-0000c680: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-0000c690: 2020 6c69 7374 2873 7461 636b 7570 5f74    list(stackup_t
-0000c6a0: 6172 6765 742e 4c61 7965 7273 2873 656c  arget.Layers(sel
-0000c6b0: 662e 5f70 6564 622e 6564 625f 6170 692e  f._pedb.edb_api.
-0000c6c0: 6365 6c6c 2e6c 6179 6572 5f74 7970 655f  cell.layer_type_
-0000c6d0: 7365 742e 5369 676e 616c 4c61 7965 7253  set.SignalLayerS
-0000c6e0: 6574 2929 5b2d 315d 0a20 2020 2020 2020  et))[-1].       
-0000c6f0: 2020 2020 2029 0a20 2020 2020 2020 2073       ).        s
-0000c700: 656c 662e 7265 6672 6573 685f 6c61 7965  elf.refresh_laye
-0000c710: 725f 636f 6c6c 6563 7469 6f6e 2829 0a20  r_collection(). 
-0000c720: 2020 2020 2020 2072 6574 7572 6e20 5472         return Tr
-0000c730: 7565 0a0a 2020 2020 4070 7965 6462 5f66  ue..    @pyedb_f
-0000c740: 756e 6374 696f 6e5f 6861 6e64 6c65 7228  unction_handler(
-0000c750: 290a 2020 2020 6465 6620 706c 6163 655f  ).    def place_
-0000c760: 696e 5f6c 6179 6f75 745f 3364 5f70 6c61  in_layout_3d_pla
-0000c770: 6365 6d65 6e74 280a 2020 2020 2020 2020  cement(.        
-0000c780: 7365 6c66 2c0a 2020 2020 2020 2020 6564  self,.        ed
-0000c790: 622c 0a20 2020 2020 2020 2061 6e67 6c65  b,.        angle
-0000c7a0: 3d30 2e30 2c0a 2020 2020 2020 2020 6f66  =0.0,.        of
-0000c7b0: 6673 6574 5f78 3d30 2e30 2c0a 2020 2020  fset_x=0.0,.    
-0000c7c0: 2020 2020 6f66 6673 6574 5f79 3d30 2e30      offset_y=0.0
-0000c7d0: 2c0a 2020 2020 2020 2020 666c 6970 7065  ,.        flippe
-0000c7e0: 645f 7374 6163 6b75 703d 5472 7565 2c0a  d_stackup=True,.
-0000c7f0: 2020 2020 2020 2020 706c 6163 655f 6f6e          place_on
-0000c800: 5f74 6f70 3d54 7275 652c 0a20 2020 2020  _top=True,.     
-0000c810: 2020 2073 6f6c 6465 725f 6865 6967 6874     solder_height
-0000c820: 3d30 2c0a 2020 2020 293a 0a20 2020 2020  =0,.    ):.     
-0000c830: 2020 2022 2222 506c 6163 6520 6375 7272     """Place curr
-0000c840: 656e 7420 4365 6c6c 2069 6e74 6f20 616e  ent Cell into an
-0000c850: 6f74 6865 7220 6365 6c6c 2075 7369 6e67  other cell using
-0000c860: 2033 6420 706c 6163 656d 656e 7420 6d65   3d placement me
-0000c870: 7468 6f64 2e0a 2020 2020 2020 2020 466c  thod..        Fl
-0000c880: 6970 2074 6865 2063 7572 7265 6e74 206c  ip the current l
-0000c890: 6179 6572 2073 7461 636b 7570 206f 6620  ayer stackup of 
-0000c8a0: 6120 6c61 796f 7574 2069 6620 7265 7175  a layout if requ
-0000c8b0: 6573 7465 642e 2054 7261 6e73 666f 726d  ested. Transform
-0000c8c0: 2070 6172 616d 6574 6572 7320 6375 7272   parameters curr
-0000c8d0: 656e 746c 7920 6e6f 7420 7375 7070 6f72  ently not suppor
-0000c8e0: 7465 642e 0a0a 2020 2020 2020 2020 5061  ted...        Pa
-0000c8f0: 7261 6d65 7465 7273 0a20 2020 2020 2020  rameters.       
-0000c900: 202d 2d2d 2d2d 2d2d 2d2d 2d0a 2020 2020   ----------.    
-0000c910: 2020 2020 6564 6220 3a20 4564 620a 2020      edb : Edb.  
-0000c920: 2020 2020 2020 2020 2020 4365 6c6c 206f            Cell o
-0000c930: 6e20 7768 6963 6820 746f 2070 6c61 6365  n which to place
-0000c940: 2074 6865 2063 7572 7265 6e74 206c 6179   the current lay
-0000c950: 6f75 742e 2049 6620 4e6f 6e65 2074 6865  out. If None the
-0000c960: 2043 656c 6c20 7769 6c6c 2062 6520 6170   Cell will be ap
-0000c970: 706c 6965 6420 6f6e 2061 6e20 656d 7074  plied on an empt
-0000c980: 7920 6e65 7720 4365 6c6c 2e0a 2020 2020  y new Cell..    
-0000c990: 2020 2020 616e 676c 6520 3a20 646f 7562      angle : doub
-0000c9a0: 6c65 2c20 6f70 7469 6f6e 616c 0a20 2020  le, optional.   
-0000c9b0: 2020 2020 2020 2020 2054 6865 2072 6f74           The rot
-0000c9c0: 6174 696f 6e20 616e 676c 6520 6170 706c  ation angle appl
-0000c9d0: 6965 6420 6f6e 2074 6865 2064 6573 6967  ied on the desig
-0000c9e0: 6e2e 0a20 2020 2020 2020 206f 6666 7365  n..        offse
-0000c9f0: 745f 7820 3a20 646f 7562 6c65 2c20 6f70  t_x : double, op
-0000ca00: 7469 6f6e 616c 0a20 2020 2020 2020 2020  tional.         
-0000ca10: 2020 2054 6865 2078 206f 6666 7365 7420     The x offset 
-0000ca20: 7661 6c75 652e 0a20 2020 2020 2020 206f  value..        o
-0000ca30: 6666 7365 745f 7920 3a20 646f 7562 6c65  ffset_y : double
-0000ca40: 2c20 6f70 7469 6f6e 616c 0a20 2020 2020  , optional.     
-0000ca50: 2020 2020 2020 2054 6865 2079 206f 6666         The y off
-0000ca60: 7365 7420 7661 6c75 652e 0a20 2020 2020  set value..     
-0000ca70: 2020 2066 6c69 7070 6564 5f73 7461 636b     flipped_stack
-0000ca80: 7570 203a 2062 6f6f 6c2c 206f 7074 696f  up : bool, optio
-0000ca90: 6e61 6c0a 2020 2020 2020 2020 2020 2020  nal.            
-0000caa0: 4569 7468 6572 2069 6620 7468 6520 6375  Either if the cu
-0000cab0: 7272 656e 7420 6c61 796f 7574 2069 7320  rrent layout is 
-0000cac0: 696e 7665 7274 6564 2e0a 2020 2020 2020  inverted..      
-0000cad0: 2020 2020 2020 4966 2060 5472 7565 6020        If `True` 
-0000cae0: 616e 6420 706c 6163 655f 6f6e 5f74 6f70  and place_on_top
-0000caf0: 2069 7320 6054 7275 6560 2074 6865 2073   is `True` the s
-0000cb00: 7461 636b 7570 2077 696c 6c20 6265 2066  tackup will be f
-0000cb10: 6c69 7070 6564 2062 6566 6f72 6520 7468  lipped before th
-0000cb20: 6520 6d65 7267 652e 0a20 2020 2020 2020  e merge..       
-0000cb30: 2070 6c61 6365 5f6f 6e5f 746f 7020 3a20   place_on_top : 
-0000cb40: 626f 6f6c 2c20 6f70 7469 6f6e 616c 0a20  bool, optional. 
-0000cb50: 2020 2020 2020 2020 2020 2045 6974 6865             Eithe
-0000cb60: 7220 6966 2070 6c61 6365 2074 6865 2063  r if place the c
-0000cb70: 7572 7265 6e74 206c 6179 6f75 7420 6f6e  urrent layout on
-0000cb80: 2054 6f70 206f 7220 426f 7474 6f6d 206f   Top or Bottom o
-0000cb90: 6620 6465 7374 696e 6174 696f 6e20 4c61  f destination La
-0000cba0: 796f 7574 2e0a 2020 2020 2020 2020 736f  yout..        so
-0000cbb0: 6c64 6572 5f68 6569 6768 7420 3a20 666c  lder_height : fl
-0000cbc0: 6f61 742c 206f 7074 696f 6e61 6c0a 2020  oat, optional.  
-0000cbd0: 2020 2020 2020 2020 2020 536f 6c64 6572            Solder
-0000cbe0: 2042 616c 6c20 6f72 2042 756d 7073 2065   Ball or Bumps e
-0000cbf0: 6967 6874 2e0a 2020 2020 2020 2020 2020  ight..          
-0000cc00: 2020 5468 6973 2076 616c 7565 2077 696c    This value wil
-0000cc10: 6c20 6265 2061 6464 6564 2074 6f20 7468  l be added to th
-0000cc20: 6520 656c 6576 6174 696f 6e20 746f 2061  e elevation to a
-0000cc30: 6c69 676e 2074 6865 2074 776f 206c 6179  lign the two lay
-0000cc40: 6f75 7473 2e0a 0a20 2020 2020 2020 2052  outs...        R
-0000cc50: 6574 7572 6e73 0a20 2020 2020 2020 202d  eturns.        -
-0000cc60: 2d2d 2d2d 2d2d 0a20 2020 2020 2020 2062  ------.        b
-0000cc70: 6f6f 6c0a 2020 2020 2020 2020 2020 2020  ool.            
-0000cc80: 6060 5472 7565 6060 2077 6865 6e20 7375  ``True`` when su
-0000cc90: 6363 6565 6420 6060 4661 6c73 6560 6020  cceed ``False`` 
-0000cca0: 6966 206e 6f74 2e0a 0a20 2020 2020 2020  if not...       
-0000ccb0: 2045 7861 6d70 6c65 730a 2020 2020 2020   Examples.      
-0000ccc0: 2020 2d2d 2d2d 2d2d 2d2d 0a20 2020 2020    --------.     
-0000ccd0: 2020 203e 3e3e 2065 6462 3120 3d20 4564     >>> edb1 = Ed
-0000cce0: 6228 6564 6270 6174 683d 7461 7267 6574  b(edbpath=target
-0000ccf0: 6669 6c65 312c 2020 6564 6276 6572 7369  file1,  edbversi
-0000cd00: 6f6e 3d22 3230 3231 2e32 2229 0a20 2020  on="2021.2").   
-0000cd10: 2020 2020 203e 3e3e 2065 6462 3220 3d20       >>> edb2 = 
-0000cd20: 4564 6228 6564 6270 6174 683d 7461 7267  Edb(edbpath=targ
-0000cd30: 6574 6669 6c65 322c 2065 6462 7665 7273  etfile2, edbvers
-0000cd40: 696f 6e3d 2232 3032 312e 3222 290a 2020  ion="2021.2").  
-0000cd50: 2020 2020 2020 3e3e 3e20 686f 7374 696e        >>> hostin
-0000cd60: 675f 636d 7020 3d20 6564 6231 2e63 6f6d  g_cmp = edb1.com
-0000cd70: 706f 6e65 6e74 732e 6765 745f 636f 6d70  ponents.get_comp
-0000cd80: 6f6e 656e 745f 6279 5f6e 616d 6528 2255  onent_by_name("U
-0000cd90: 3130 3022 290a 2020 2020 2020 2020 3e3e  100").        >>
-0000cda0: 3e20 6d6f 756e 7465 645f 636d 7020 3d20  > mounted_cmp = 
-0000cdb0: 6564 6232 2e63 6f6d 706f 6e65 6e74 732e  edb2.components.
-0000cdc0: 6765 745f 636f 6d70 6f6e 656e 745f 6279  get_component_by
-0000cdd0: 5f6e 616d 6528 2242 4741 2229 0a20 2020  _name("BGA").   
-0000cde0: 2020 2020 203e 3e3e 2065 6462 322e 7374       >>> edb2.st
-0000cdf0: 6163 6b75 702e 706c 6163 655f 696e 5f6c  ackup.place_in_l
-0000ce00: 6179 6f75 7428 6564 6231 2e61 6374 6976  ayout(edb1.activ
-0000ce10: 655f 6365 6c6c 2c20 616e 676c 653d 302e  e_cell, angle=0.
-0000ce20: 302c 206f 6666 7365 745f 783d 2231 6d6d  0, offset_x="1mm
-0000ce30: 222c 0a20 2020 2020 2020 202e 2e2e 2020  ",.        ...  
-0000ce40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ce50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ce60: 206f 6666 7365 745f 793d 2232 6d6d 222c   offset_y="2mm",
-0000ce70: 2066 6c69 7070 6564 5f73 7461 636b 7570   flipped_stackup
-0000ce80: 3d46 616c 7365 2c20 706c 6163 655f 6f6e  =False, place_on
-0000ce90: 5f74 6f70 3d54 7275 652c 0a20 2020 2020  _top=True,.     
-0000cea0: 2020 202e 2e2e 2020 2020 2020 2020 2020     ...          
-0000ceb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cec0: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-0000ced0: 2020 2022 2222 0a20 2020 2020 2020 205f     """.        _
-0000cee0: 616e 676c 6520 3d20 616e 676c 6520 2a20  angle = angle * 
-0000cef0: 6d61 7468 2e70 6920 2f20 3138 302e 300a  math.pi / 180.0.
-0000cf00: 0a20 2020 2020 2020 2069 6620 736f 6c64  .        if sold
-0000cf10: 6572 5f68 6569 6768 7420 3c3d 2030 3a0a  er_height <= 0:.
-0000cf20: 2020 2020 2020 2020 2020 2020 6966 2066              if f
-0000cf30: 6c69 7070 6564 5f73 7461 636b 7570 2061  lipped_stackup a
-0000cf40: 6e64 206e 6f74 2070 6c61 6365 5f6f 6e5f  nd not place_on_
-0000cf50: 746f 7020 6f72 2028 706c 6163 655f 6f6e  top or (place_on
-0000cf60: 5f74 6f70 2061 6e64 206e 6f74 2066 6c69  _top and not fli
-0000cf70: 7070 6564 5f73 7461 636b 7570 293a 0a20  pped_stackup):. 
-0000cf80: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-0000cf90: 696e 696d 756d 5f65 6c65 7661 7469 6f6e  inimum_elevation
-0000cfa0: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-0000cfb0: 2020 2020 2020 2020 6c61 7965 7273 5f66          layers_f
-0000cfc0: 726f 6d5f 7468 655f 626f 7474 6f6d 203d  rom_the_bottom =
-0000cfd0: 2073 6f72 7465 6428 7365 6c66 2e73 6967   sorted(self.sig
-0000cfe0: 6e61 6c5f 6c61 7965 7273 2e76 616c 7565  nal_layers.value
-0000cff0: 7328 292c 206b 6579 3d6c 616d 6264 6120  s(), key=lambda 
-0000d000: 6c61 793a 206c 6179 2e75 7070 6572 5f65  lay: lay.upper_e
-0000d010: 6c65 7661 7469 6f6e 290a 2020 2020 2020  levation).      
-0000d020: 2020 2020 2020 2020 2020 666f 7220 6c61            for la
-0000d030: 7920 696e 206c 6179 6572 735f 6672 6f6d  y in layers_from
-0000d040: 5f74 6865 5f62 6f74 746f 6d3a 0a20 2020  _the_bottom:.   
-0000d050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d060: 2069 6620 6d69 6e69 6d75 6d5f 656c 6576   if minimum_elev
-0000d070: 6174 696f 6e20 6973 204e 6f6e 653a 0a20  ation is None:. 
-0000d080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d090: 2020 2020 2020 206d 696e 696d 756d 5f65         minimum_e
-0000d0a0: 6c65 7661 7469 6f6e 203d 206c 6179 2e6c  levation = lay.l
-0000d0b0: 6f77 6572 5f65 6c65 7661 7469 6f6e 0a20  ower_elevation. 
-0000d0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d0d0: 2020 2065 6c69 6620 6c61 792e 6c6f 7765     elif lay.lowe
-0000d0e0: 725f 656c 6576 6174 696f 6e20 3e20 6d69  r_elevation > mi
-0000d0f0: 6e69 6d75 6d5f 656c 6576 6174 696f 6e3a  nimum_elevation:
-0000d100: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000d110: 2020 2020 2020 2020 2062 7265 616b 0a20           break. 
-0000d120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d130: 2020 206c 6179 5f73 6f6c 6465 725f 6865     lay_solder_he
-0000d140: 6967 6874 203d 2073 656c 662e 5f67 6574  ight = self._get
-0000d150: 5f73 6f6c 6465 725f 6865 6967 6874 286c  _solder_height(l
-0000d160: 6179 2e6e 616d 6529 0a20 2020 2020 2020  ay.name).       
-0000d170: 2020 2020 2020 2020 2020 2020 2073 6f6c               sol
-0000d180: 6465 725f 6865 6967 6874 203d 206d 6178  der_height = max
-0000d190: 286c 6179 5f73 6f6c 6465 725f 6865 6967  (lay_solder_heig
-0000d1a0: 6874 2c20 736f 6c64 6572 5f68 6569 6768  ht, solder_heigh
-0000d1b0: 7429 0a20 2020 2020 2020 2020 2020 2020  t).             
-0000d1c0: 2020 2020 2020 2073 656c 662e 5f72 656d         self._rem
-0000d1d0: 6f76 655f 736f 6c64 6572 5f70 6563 286c  ove_solder_pec(l
-0000d1e0: 6179 2e6e 616d 6529 0a20 2020 2020 2020  ay.name).       
-0000d1f0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0000d200: 2020 2020 2020 2020 2020 206d 6178 696d             maxim
-0000d210: 756d 5f65 6c65 7661 7469 6f6e 203d 204e  um_elevation = N
-0000d220: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
-0000d230: 2020 2020 6c61 7965 7273 5f66 726f 6d5f      layers_from_
-0000d240: 7468 655f 746f 7020 3d20 736f 7274 6564  the_top = sorted
-0000d250: 2873 656c 662e 7369 676e 616c 5f6c 6179  (self.signal_lay
-0000d260: 6572 732e 7661 6c75 6573 2829 2c20 6b65  ers.values(), ke
-0000d270: 793d 6c61 6d62 6461 206c 6179 3a20 2d6c  y=lambda lay: -l
-0000d280: 6179 2e75 7070 6572 5f65 6c65 7661 7469  ay.upper_elevati
-0000d290: 6f6e 290a 2020 2020 2020 2020 2020 2020  on).            
-0000d2a0: 2020 2020 666f 7220 6c61 7920 696e 206c      for lay in l
-0000d2b0: 6179 6572 735f 6672 6f6d 5f74 6865 5f74  ayers_from_the_t
-0000d2c0: 6f70 3a0a 2020 2020 2020 2020 2020 2020  op:.            
-0000d2d0: 2020 2020 2020 2020 6966 206d 6178 696d          if maxim
-0000d2e0: 756d 5f65 6c65 7661 7469 6f6e 2069 7320  um_elevation is 
-0000d2f0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0000d300: 2020 2020 2020 2020 2020 2020 2020 6d61                ma
-0000d310: 7869 6d75 6d5f 656c 6576 6174 696f 6e20  ximum_elevation 
-0000d320: 3d20 6c61 792e 7570 7065 725f 656c 6576  = lay.upper_elev
-0000d330: 6174 696f 6e0a 2020 2020 2020 2020 2020  ation.          
-0000d340: 2020 2020 2020 2020 2020 656c 6966 206c            elif l
-0000d350: 6179 2e75 7070 6572 5f65 6c65 7661 7469  ay.upper_elevati
-0000d360: 6f6e 203c 206d 6178 696d 756d 5f65 6c65  on < maximum_ele
-0000d370: 7661 7469 6f6e 3a0a 2020 2020 2020 2020  vation:.        
-0000d380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d390: 6272 6561 6b0a 2020 2020 2020 2020 2020  break.          
-0000d3a0: 2020 2020 2020 2020 2020 6c61 795f 736f            lay_so
-0000d3b0: 6c64 6572 5f68 6569 6768 7420 3d20 7365  lder_height = se
-0000d3c0: 6c66 2e5f 6765 745f 736f 6c64 6572 5f68  lf._get_solder_h
-0000d3d0: 6569 6768 7428 6c61 792e 6e61 6d65 290a  eight(lay.name).
-0000d3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d3f0: 2020 2020 736f 6c64 6572 5f68 6569 6768      solder_heigh
-0000d400: 7420 3d20 6d61 7828 6c61 795f 736f 6c64  t = max(lay_sold
-0000d410: 6572 5f68 6569 6768 742c 2073 6f6c 6465  er_height, solde
-0000d420: 725f 6865 6967 6874 290a 2020 2020 2020  r_height).      
-0000d430: 2020 2020 2020 2020 2020 2020 2020 7365                se
-0000d440: 6c66 2e5f 7265 6d6f 7665 5f73 6f6c 6465  lf._remove_solde
-0000d450: 725f 7065 6328 6c61 792e 6e61 6d65 290a  r_pec(lay.name).
-0000d460: 0a20 2020 2020 2020 2072 6f74 6174 696f  .        rotatio
-0000d470: 6e20 3d20 7365 6c66 2e5f 6564 625f 7661  n = self._edb_va
-0000d480: 6c75 6528 302e 3029 0a20 2020 2020 2020  lue(0.0).       
-0000d490: 2069 6620 666c 6970 7065 645f 7374 6163   if flipped_stac
-0000d4a0: 6b75 703a 0a20 2020 2020 2020 2020 2020  kup:.           
-0000d4b0: 2072 6f74 6174 696f 6e20 3d20 7365 6c66   rotation = self
-0000d4c0: 2e5f 6564 625f 7661 6c75 6528 6d61 7468  ._edb_value(math
-0000d4d0: 2e70 6929 0a0a 2020 2020 2020 2020 6564  .pi)..        ed
-0000d4e0: 625f 6365 6c6c 203d 2065 6462 2e61 6374  b_cell = edb.act
-0000d4f0: 6976 655f 6365 6c6c 0a20 2020 2020 2020  ive_cell.       
-0000d500: 205f 6f66 6673 6574 5f78 203d 2073 656c   _offset_x = sel
-0000d510: 662e 5f65 6462 5f76 616c 7565 286f 6666  f._edb_value(off
-0000d520: 7365 745f 7829 0a20 2020 2020 2020 205f  set_x).        _
-0000d530: 6f66 6673 6574 5f79 203d 2073 656c 662e  offset_y = self.
-0000d540: 5f65 6462 5f76 616c 7565 286f 6666 7365  _edb_value(offse
-0000d550: 745f 7929 0a0a 2020 2020 2020 2020 6966  t_y)..        if
-0000d560: 2065 6462 5f63 656c 6c2e 4765 744e 616d   edb_cell.GetNam
-0000d570: 6528 2920 6e6f 7420 696e 2073 656c 662e  e() not in self.
-0000d580: 5f70 6564 622e 6365 6c6c 5f6e 616d 6573  _pedb.cell_names
-0000d590: 3a0a 2020 2020 2020 2020 2020 2020 6c69  :.            li
-0000d5a0: 7374 5f63 656c 6c73 203d 2073 656c 662e  st_cells = self.
-0000d5b0: 5f70 6564 622e 636f 7079 5f63 656c 6c73  _pedb.copy_cells
-0000d5c0: 2865 6462 5f63 656c 6c2e 6170 695f 6f62  (edb_cell.api_ob
-0000d5d0: 6a65 6374 290a 2020 2020 2020 2020 2020  ject).          
-0000d5e0: 2020 6564 625f 6365 6c6c 203d 206c 6973    edb_cell = lis
-0000d5f0: 745f 6365 6c6c 735b 305d 0a20 2020 2020  t_cells[0].     
-0000d600: 2020 2073 656c 662e 5f70 6564 622e 6c61     self._pedb.la
-0000d610: 796f 7574 2e63 656c 6c2e 5365 7442 6c61  yout.cell.SetBla
-0000d620: 636b 426f 7828 5472 7565 290a 2020 2020  ckBox(True).    
-0000d630: 2020 2020 6365 6c6c 5f69 6e73 7432 203d      cell_inst2 =
-0000d640: 2073 656c 662e 5f70 6564 622e 6564 625f   self._pedb.edb_
-0000d650: 6170 692e 6365 6c6c 2e68 6965 7261 7263  api.cell.hierarc
-0000d660: 6879 2e63 656c 6c5f 696e 7374 616e 6365  hy.cell_instance
-0000d670: 2e43 7265 6174 6528 0a20 2020 2020 2020  .Create(.       
-0000d680: 2020 2020 2065 6462 5f63 656c 6c2e 4765       edb_cell.Ge
-0000d690: 744c 6179 6f75 7428 292c 2073 656c 662e  tLayout(), self.
-0000d6a0: 5f70 6564 622e 6c61 796f 7574 2e63 656c  _pedb.layout.cel
-0000d6b0: 6c2e 4765 744e 616d 6528 292c 2073 656c  l.GetName(), sel
-0000d6c0: 662e 5f70 6564 622e 6163 7469 7665 5f6c  f._pedb.active_l
-0000d6d0: 6179 6f75 740a 2020 2020 2020 2020 290a  ayout.        ).
-0000d6e0: 0a20 2020 2020 2020 2073 7461 636b 7570  .        stackup
-0000d6f0: 5f74 6172 6765 7420 3d20 7365 6c66 2e5f  _target = self._
-0000d700: 7065 6462 2e65 6462 5f61 7069 2e43 656c  pedb.edb_api.Cel
-0000d710: 6c2e 4c61 7965 7243 6f6c 6c65 6374 696f  l.LayerCollectio
-0000d720: 6e28 6564 625f 6365 6c6c 2e47 6574 4c61  n(edb_cell.GetLa
-0000d730: 796f 7574 2829 2e47 6574 4c61 7965 7243  yout().GetLayerC
-0000d740: 6f6c 6c65 6374 696f 6e28 2929 0a20 2020  ollection()).   
-0000d750: 2020 2020 2073 7461 636b 7570 5f73 6f75       stackup_sou
-0000d760: 7263 6520 3d20 7365 6c66 2e5f 7065 6462  rce = self._pedb
-0000d770: 2e65 6462 5f61 7069 2e43 656c 6c2e 4c61  .edb_api.Cell.La
-0000d780: 7965 7243 6f6c 6c65 6374 696f 6e28 7365  yerCollection(se
-0000d790: 6c66 2e5f 7065 6462 2e6c 6179 6f75 742e  lf._pedb.layout.
-0000d7a0: 6c61 7965 725f 636f 6c6c 6563 7469 6f6e  layer_collection
-0000d7b0: 290a 0a20 2020 2020 2020 2069 6620 706c  )..        if pl
-0000d7c0: 6163 655f 6f6e 5f74 6f70 3a0a 2020 2020  ace_on_top:.    
-0000d7d0: 2020 2020 2020 2020 6365 6c6c 5f69 6e73          cell_ins
-0000d7e0: 7432 2e53 6574 506c 6163 656d 656e 744c  t2.SetPlacementL
-0000d7f0: 6179 6572 280a 2020 2020 2020 2020 2020  ayer(.          
-0000d800: 2020 2020 2020 6c69 7374 2873 7461 636b        list(stack
-0000d810: 7570 5f74 6172 6765 742e 4c61 7965 7273  up_target.Layers
-0000d820: 2873 656c 662e 5f70 6564 622e 6564 625f  (self._pedb.edb_
-0000d830: 6170 692e 6365 6c6c 2e6c 6179 6572 5f74  api.cell.layer_t
-0000d840: 7970 655f 7365 742e 5369 676e 616c 4c61  ype_set.SignalLa
-0000d850: 7965 7253 6574 2929 5b30 5d0a 2020 2020  yerSet))[0].    
-0000d860: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-0000d870: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0000d880: 2020 2020 6365 6c6c 5f69 6e73 7432 2e53      cell_inst2.S
-0000d890: 6574 506c 6163 656d 656e 744c 6179 6572  etPlacementLayer
-0000d8a0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-0000d8b0: 2020 6c69 7374 2873 7461 636b 7570 5f74    list(stackup_t
-0000d8c0: 6172 6765 742e 4c61 7965 7273 2873 656c  arget.Layers(sel
-0000d8d0: 662e 5f70 6564 622e 6564 625f 6170 692e  f._pedb.edb_api.
-0000d8e0: 6365 6c6c 2e6c 6179 6572 5f74 7970 655f  cell.layer_type_
-0000d8f0: 7365 742e 5369 676e 616c 4c61 7965 7253  set.SignalLayerS
-0000d900: 6574 2929 5b2d 315d 0a20 2020 2020 2020  et))[-1].       
-0000d910: 2020 2020 2029 0a20 2020 2020 2020 2063       ).        c
-0000d920: 656c 6c5f 696e 7374 322e 5365 7449 7333  ell_inst2.SetIs3
-0000d930: 4450 6c61 6365 6d65 6e74 2854 7275 6529  DPlacement(True)
-0000d940: 0a20 2020 2020 2020 2073 6967 5f73 6574  .        sig_set
-0000d950: 203d 2073 656c 662e 5f70 6564 622e 6564   = self._pedb.ed
-0000d960: 625f 6170 692e 6365 6c6c 2e6c 6179 6572  b_api.cell.layer
-0000d970: 5f74 7970 655f 7365 742e 5369 676e 616c  _type_set.Signal
-0000d980: 4c61 7965 7253 6574 0a20 2020 2020 2020  LayerSet.       
-0000d990: 2072 6573 203d 2073 7461 636b 7570 5f74   res = stackup_t
-0000d9a0: 6172 6765 742e 4765 7454 6f70 426f 7474  arget.GetTopBott
-0000d9b0: 6f6d 5374 6163 6b75 704c 6179 6572 7328  omStackupLayers(
-0000d9c0: 7369 675f 7365 7429 0a20 2020 2020 2020  sig_set).       
-0000d9d0: 2074 6172 6765 745f 746f 705f 656c 6576   target_top_elev
-0000d9e0: 6174 696f 6e20 3d20 7265 735b 325d 0a20  ation = res[2]. 
-0000d9f0: 2020 2020 2020 2074 6172 6765 745f 626f         target_bo
-0000da00: 7474 6f6d 5f65 6c65 7661 7469 6f6e 203d  ttom_elevation =
-0000da10: 2072 6573 5b34 5d0a 2020 2020 2020 2020   res[4].        
-0000da20: 7265 735f 7320 3d20 7374 6163 6b75 705f  res_s = stackup_
-0000da30: 736f 7572 6365 2e47 6574 546f 7042 6f74  source.GetTopBot
-0000da40: 746f 6d53 7461 636b 7570 4c61 7965 7273  tomStackupLayers
-0000da50: 2873 6967 5f73 6574 290a 2020 2020 2020  (sig_set).      
-0000da60: 2020 736f 7572 6365 5f73 7461 636b 5f74    source_stack_t
-0000da70: 6f70 5f65 6c65 7661 7469 6f6e 203d 2072  op_elevation = r
-0000da80: 6573 5f73 5b32 5d0a 2020 2020 2020 2020  es_s[2].        
-0000da90: 736f 7572 6365 5f73 7461 636b 5f62 6f74  source_stack_bot
-0000daa0: 5f65 6c65 7661 7469 6f6e 203d 2072 6573  _elevation = res
-0000dab0: 5f73 5b34 5d0a 0a20 2020 2020 2020 2069  _s[4]..        i
-0000dac0: 6620 706c 6163 655f 6f6e 5f74 6f70 2061  f place_on_top a
-0000dad0: 6e64 2066 6c69 7070 6564 5f73 7461 636b  nd flipped_stack
-0000dae0: 7570 3a0a 2020 2020 2020 2020 2020 2020  up:.            
-0000daf0: 656c 6576 6174 696f 6e20 3d20 7461 7267  elevation = targ
-0000db00: 6574 5f74 6f70 5f65 6c65 7661 7469 6f6e  et_top_elevation
-0000db10: 202b 2073 6f75 7263 655f 7374 6163 6b5f   + source_stack_
-0000db20: 746f 705f 656c 6576 6174 696f 6e0a 2020  top_elevation.  
-0000db30: 2020 2020 2020 656c 6966 2070 6c61 6365        elif place
-0000db40: 5f6f 6e5f 746f 703a 0a20 2020 2020 2020  _on_top:.       
-0000db50: 2020 2020 2065 6c65 7661 7469 6f6e 203d       elevation =
-0000db60: 2074 6172 6765 745f 746f 705f 656c 6576   target_top_elev
-0000db70: 6174 696f 6e20 2d20 736f 7572 6365 5f73  ation - source_s
-0000db80: 7461 636b 5f62 6f74 5f65 6c65 7661 7469  tack_bot_elevati
-0000db90: 6f6e 0a20 2020 2020 2020 2065 6c69 6620  on.        elif 
-0000dba0: 666c 6970 7065 645f 7374 6163 6b75 703a  flipped_stackup:
-0000dbb0: 0a20 2020 2020 2020 2020 2020 2065 6c65  .            ele
-0000dbc0: 7661 7469 6f6e 203d 2074 6172 6765 745f  vation = target_
-0000dbd0: 626f 7474 6f6d 5f65 6c65 7661 7469 6f6e  bottom_elevation
-0000dbe0: 202b 2073 6f75 7263 655f 7374 6163 6b5f   + source_stack_
-0000dbf0: 626f 745f 656c 6576 6174 696f 6e0a 2020  bot_elevation.  
-0000dc00: 2020 2020 2020 2020 2020 736f 6c64 6572            solder
-0000dc10: 5f68 6569 6768 7420 3d20 2d73 6f6c 6465  _height = -solde
-0000dc20: 725f 6865 6967 6874 0a20 2020 2020 2020  r_height.       
-0000dc30: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0000dc40: 2020 2065 6c65 7661 7469 6f6e 203d 2074     elevation = t
-0000dc50: 6172 6765 745f 626f 7474 6f6d 5f65 6c65  arget_bottom_ele
-0000dc60: 7661 7469 6f6e 202d 2073 6f75 7263 655f  vation - source_
-0000dc70: 7374 6163 6b5f 746f 705f 656c 6576 6174  stack_top_elevat
-0000dc80: 696f 6e0a 2020 2020 2020 2020 2020 2020  ion.            
-0000dc90: 736f 6c64 6572 5f68 6569 6768 7420 3d20  solder_height = 
-0000dca0: 2d73 6f6c 6465 725f 6865 6967 6874 0a0a  -solder_height..
-0000dcb0: 2020 2020 2020 2020 685f 7374 6163 6b75          h_stacku
-0000dcc0: 7020 3d20 7365 6c66 2e5f 6564 625f 7661  p = self._edb_va
-0000dcd0: 6c75 6528 656c 6576 6174 696f 6e20 2b20  lue(elevation + 
-0000dce0: 736f 6c64 6572 5f68 6569 6768 7429 0a0a  solder_height)..
-0000dcf0: 2020 2020 2020 2020 7a65 726f 5f64 6174          zero_dat
-0000dd00: 6120 3d20 7365 6c66 2e5f 6564 625f 7661  a = self._edb_va
-0000dd10: 6c75 6528 302e 3029 0a20 2020 2020 2020  lue(0.0).       
-0000dd20: 206f 6e65 5f64 6174 6120 3d20 7365 6c66   one_data = self
-0000dd30: 2e5f 6564 625f 7661 6c75 6528 312e 3029  ._edb_value(1.0)
-0000dd40: 0a20 2020 2020 2020 2070 6f69 6e74 3364  .        point3d
-0000dd50: 5f74 203d 2073 656c 662e 5f70 6564 622e  _t = self._pedb.
-0000dd60: 706f 696e 745f 3364 285f 6f66 6673 6574  point_3d(_offset
-0000dd70: 5f78 2c20 5f6f 6666 7365 745f 792c 2068  _x, _offset_y, h
-0000dd80: 5f73 7461 636b 7570 290a 2020 2020 2020  _stackup).      
-0000dd90: 2020 706f 696e 745f 6c6f 6320 3d20 7365    point_loc = se
-0000dda0: 6c66 2e5f 7065 6462 2e70 6f69 6e74 5f33  lf._pedb.point_3
-0000ddb0: 6428 7a65 726f 5f64 6174 612c 207a 6572  d(zero_data, zer
-0000ddc0: 6f5f 6461 7461 2c20 7a65 726f 5f64 6174  o_data, zero_dat
-0000ddd0: 6129 0a20 2020 2020 2020 2070 6f69 6e74  a).        point
-0000dde0: 5f66 726f 6d20 3d20 7365 6c66 2e5f 7065  _from = self._pe
-0000ddf0: 6462 2e70 6f69 6e74 5f33 6428 6f6e 655f  db.point_3d(one_
-0000de00: 6461 7461 2c20 7a65 726f 5f64 6174 612c  data, zero_data,
-0000de10: 207a 6572 6f5f 6461 7461 290a 2020 2020   zero_data).    
-0000de20: 2020 2020 706f 696e 745f 746f 203d 2073      point_to = s
-0000de30: 656c 662e 5f70 6564 622e 706f 696e 745f  elf._pedb.point_
-0000de40: 3364 286d 6174 682e 636f 7328 5f61 6e67  3d(math.cos(_ang
-0000de50: 6c65 292c 202d 3120 2a20 6d61 7468 2e73  le), -1 * math.s
-0000de60: 696e 285f 616e 676c 6529 2c20 7a65 726f  in(_angle), zero
-0000de70: 5f64 6174 6129 0a20 2020 2020 2020 2063  _data).        c
-0000de80: 656c 6c5f 696e 7374 322e 5365 7433 4454  ell_inst2.Set3DT
-0000de90: 7261 6e73 666f 726d 6174 696f 6e28 706f  ransformation(po
-0000dea0: 696e 745f 6c6f 632c 2070 6f69 6e74 5f66  int_loc, point_f
-0000deb0: 726f 6d2c 2070 6f69 6e74 5f74 6f2c 2072  rom, point_to, r
-0000dec0: 6f74 6174 696f 6e2c 2070 6f69 6e74 3364  otation, point3d
-0000ded0: 5f74 290a 2020 2020 2020 2020 7365 6c66  _t).        self
-0000dee0: 2e72 6566 7265 7368 5f6c 6179 6572 5f63  .refresh_layer_c
-0000def0: 6f6c 6c65 6374 696f 6e28 290a 2020 2020  ollection().    
-0000df00: 2020 2020 7265 7475 726e 2054 7275 650a      return True.
-0000df10: 0a20 2020 2040 7079 6564 625f 6675 6e63  .    @pyedb_func
-0000df20: 7469 6f6e 5f68 616e 646c 6572 2829 0a20  tion_handler(). 
-0000df30: 2020 2064 6566 2070 6c61 6365 5f69 6e73     def place_ins
-0000df40: 7461 6e63 6528 0a20 2020 2020 2020 2073  tance(.        s
-0000df50: 656c 662c 0a20 2020 2020 2020 2063 6f6d  elf,.        com
-0000df60: 706f 6e65 6e74 5f65 6462 2c0a 2020 2020  ponent_edb,.    
-0000df70: 2020 2020 616e 676c 653d 302e 302c 0a20      angle=0.0,. 
-0000df80: 2020 2020 2020 206f 6666 7365 745f 783d         offset_x=
-0000df90: 302e 302c 0a20 2020 2020 2020 206f 6666  0.0,.        off
-0000dfa0: 7365 745f 793d 302e 302c 0a20 2020 2020  set_y=0.0,.     
-0000dfb0: 2020 206f 6666 7365 745f 7a3d 302e 302c     offset_z=0.0,
-0000dfc0: 0a20 2020 2020 2020 2066 6c69 7070 6564  .        flipped
-0000dfd0: 5f73 7461 636b 7570 3d54 7275 652c 0a20  _stackup=True,. 
-0000dfe0: 2020 2020 2020 2070 6c61 6365 5f6f 6e5f         place_on_
-0000dff0: 746f 703d 5472 7565 2c0a 2020 2020 2020  top=True,.      
-0000e000: 2020 736f 6c64 6572 5f68 6569 6768 743d    solder_height=
-0000e010: 302c 0a20 2020 2029 3a0a 2020 2020 2020  0,.    ):.      
-0000e020: 2020 2222 2250 6c61 6365 2063 7572 7265    """Place curre
-0000e030: 6e74 2043 656c 6c20 696e 746f 2061 6e6f  nt Cell into ano
-0000e040: 7468 6572 2063 656c 6c20 7573 696e 6720  ther cell using 
-0000e050: 3364 2070 6c61 6365 6d65 6e74 206d 6574  3d placement met
-0000e060: 686f 642e 0a20 2020 2020 2020 2046 6c69  hod..        Fli
-0000e070: 7020 7468 6520 6375 7272 656e 7420 6c61  p the current la
-0000e080: 7965 7220 7374 6163 6b75 7020 6f66 2061  yer stackup of a
-0000e090: 206c 6179 6f75 7420 6966 2072 6571 7565   layout if reque
-0000e0a0: 7374 6564 2e20 5472 616e 7366 6f72 6d20  sted. Transform 
-0000e0b0: 7061 7261 6d65 7465 7273 2063 7572 7265  parameters curre
-0000e0c0: 6e74 6c79 206e 6f74 2073 7570 706f 7274  ntly not support
-0000e0d0: 6564 2e0a 0a20 2020 2020 2020 2050 6172  ed...        Par
-0000e0e0: 616d 6574 6572 730a 2020 2020 2020 2020  ameters.        
-0000e0f0: 2d2d 2d2d 2d2d 2d2d 2d2d 0a20 2020 2020  ----------.     
-0000e100: 2020 2063 6f6d 706f 6e65 6e74 5f65 6462     component_edb
-0000e110: 203a 2045 6462 0a20 2020 2020 2020 2020   : Edb.         
-0000e120: 2020 2043 656c 6c20 746f 2070 6c61 6365     Cell to place
-0000e130: 2069 6e20 7468 6520 6375 7272 656e 7420   in the current 
-0000e140: 6c61 796f 7574 2e0a 2020 2020 2020 2020  layout..        
-0000e150: 616e 676c 6520 3a20 646f 7562 6c65 2c20  angle : double, 
-0000e160: 6f70 7469 6f6e 616c 0a20 2020 2020 2020  optional.       
-0000e170: 2020 2020 2054 6865 2072 6f74 6174 696f       The rotatio
-0000e180: 6e20 616e 676c 6520 6170 706c 6965 6420  n angle applied 
-0000e190: 6f6e 2074 6865 2064 6573 6967 6e2e 0a20  on the design.. 
-0000e1a0: 2020 2020 2020 206f 6666 7365 745f 7820         offset_x 
-0000e1b0: 3a20 646f 7562 6c65 2c20 6f70 7469 6f6e  : double, option
-0000e1c0: 616c 0a20 2020 2020 2020 2020 2020 2054  al.            T
-0000e1d0: 6865 2078 206f 6666 7365 7420 7661 6c75  he x offset valu
-0000e1e0: 652e 0a20 2020 2020 2020 2020 2020 2054  e..            T
-0000e1f0: 6865 2064 6566 6175 6c74 2076 616c 7565  he default value
-0000e200: 2069 7320 6060 302e 3060 602e 0a20 2020   is ``0.0``..   
-0000e210: 2020 2020 206f 6666 7365 745f 7920 3a20       offset_y : 
-0000e220: 646f 7562 6c65 2c20 6f70 7469 6f6e 616c  double, optional
-0000e230: 0a20 2020 2020 2020 2020 2020 2054 6865  .            The
-0000e240: 2079 206f 6666 7365 7420 7661 6c75 652e   y offset value.
-0000e250: 0a20 2020 2020 2020 2020 2020 2054 6865  .            The
-0000e260: 2064 6566 6175 6c74 2076 616c 7565 2069   default value i
-0000e270: 7320 6060 302e 3060 602e 0a20 2020 2020  s ``0.0``..     
-0000e280: 2020 206f 6666 7365 745f 7a20 3a20 646f     offset_z : do
-0000e290: 7562 6c65 2c20 6f70 7469 6f6e 616c 0a20  uble, optional. 
-0000e2a0: 2020 2020 2020 2020 2020 2054 6865 207a             The z
-0000e2b0: 206f 6666 7365 7420 7661 6c75 652e 2028   offset value. (
-0000e2c0: 692e 652e 2065 6c65 7661 7469 6f6e 206f  i.e. elevation o
-0000e2d0: 6666 7365 7420 666f 7220 706c 6163 656d  ffset for placem
-0000e2e0: 656e 7420 7265 6c61 7469 7665 2074 6f20  ent relative to 
-0000e2f0: 7468 6520 746f 7020 6c61 7965 7220 636f  the top layer co
-0000e300: 6e64 7563 746f 7229 2e0a 2020 2020 2020  nductor)..      
-0000e310: 2020 2020 2020 5468 6520 6465 6661 756c        The defaul
-0000e320: 7420 7661 6c75 6520 6973 2060 6030 2e30  t value is ``0.0
-0000e330: 6060 2c20 7768 6963 6820 706c 6163 6573  ``, which places
-0000e340: 2074 6865 2063 656c 6c20 6c61 796f 7574   the cell layout
-0000e350: 206f 6e20 746f 7020 6f66 2074 6865 2074   on top of the t
-0000e360: 6f70 2063 6f6e 6475 6374 6f72 0a20 2020  op conductor.   
-0000e370: 2020 2020 2020 2020 206c 6179 6572 206f           layer o
-0000e380: 6620 7468 6520 7461 7267 6574 2045 4442  f the target EDB
-0000e390: 2e0a 2020 2020 2020 2020 666c 6970 7065  ..        flippe
-0000e3a0: 645f 7374 6163 6b75 7020 3a20 626f 6f6c  d_stackup : bool
-0000e3b0: 2c20 6f70 7469 6f6e 616c 0a20 2020 2020  , optional.     
-0000e3c0: 2020 2020 2020 2045 6974 6865 7220 6966         Either if
-0000e3d0: 2074 6865 2063 7572 7265 6e74 206c 6179   the current lay
-0000e3e0: 6f75 7420 6973 2069 6e76 6572 7465 642e  out is inverted.
-0000e3f0: 0a20 2020 2020 2020 2020 2020 2049 6620  .            If 
-0000e400: 6054 7275 6560 2061 6e64 2070 6c61 6365  `True` and place
-0000e410: 5f6f 6e5f 746f 7020 6973 2060 5472 7565  _on_top is `True
-0000e420: 6020 7468 6520 7374 6163 6b75 7020 7769  ` the stackup wi
-0000e430: 6c6c 2062 6520 666c 6970 7065 6420 6265  ll be flipped be
-0000e440: 666f 7265 2074 6865 206d 6572 6765 2e0a  fore the merge..
-0000e450: 2020 2020 2020 2020 706c 6163 655f 6f6e          place_on
-0000e460: 5f74 6f70 203a 2062 6f6f 6c2c 206f 7074  _top : bool, opt
-0000e470: 696f 6e61 6c0a 2020 2020 2020 2020 2020  ional.          
-0000e480: 2020 4569 7468 6572 2069 6620 706c 6163    Either if plac
-0000e490: 6520 7468 6520 636f 6d70 6f6e 656e 745f  e the component_
-0000e4a0: 6564 6220 6c61 796f 7574 206f 6e20 546f  edb layout on To
-0000e4b0: 7020 6f72 2042 6f74 746f 6d20 6f66 2064  p or Bottom of d
-0000e4c0: 6573 7469 6e61 7469 6f6e 204c 6179 6f75  estination Layou
-0000e4d0: 742e 0a20 2020 2020 2020 2073 6f6c 6465  t..        solde
-0000e4e0: 725f 6865 6967 6874 203a 2066 6c6f 6174  r_height : float
-0000e4f0: 2c20 6f70 7469 6f6e 616c 0a20 2020 2020  , optional.     
-0000e500: 2020 2020 2020 2053 6f6c 6465 7220 4261         Solder Ba
-0000e510: 6c6c 206f 7220 4275 6d70 7320 6569 6768  ll or Bumps eigh
-0000e520: 742e 0a20 2020 2020 2020 2020 2020 2054  t..            T
-0000e530: 6869 7320 7661 6c75 6520 7769 6c6c 2062  his value will b
-0000e540: 6520 6164 6465 6420 746f 2074 6865 2065  e added to the e
-0000e550: 6c65 7661 7469 6f6e 2074 6f20 616c 6967  levation to alig
-0000e560: 6e20 7468 6520 7477 6f20 6c61 796f 7574  n the two layout
-0000e570: 732e 0a0a 2020 2020 2020 2020 5265 7475  s...        Retu
-0000e580: 726e 730a 2020 2020 2020 2020 2d2d 2d2d  rns.        ----
-0000e590: 2d2d 2d0a 2020 2020 2020 2020 626f 6f6c  ---.        bool
-0000e5a0: 0a20 2020 2020 2020 2020 2020 2060 6054  .            ``T
-0000e5b0: 7275 6560 6020 7768 656e 2073 7563 6365  rue`` when succe
-0000e5c0: 6564 2060 6046 616c 7365 6060 2069 6620  ed ``False`` if 
-0000e5d0: 6e6f 742e 0a0a 2020 2020 2020 2020 4578  not...        Ex
-0000e5e0: 616d 706c 6573 0a20 2020 2020 2020 202d  amples.        -
-0000e5f0: 2d2d 2d2d 2d2d 2d0a 2020 2020 2020 2020  -------.        
-0000e600: 3e3e 3e20 6564 6231 203d 2045 6462 2865  >>> edb1 = Edb(e
-0000e610: 6462 7061 7468 3d74 6172 6765 7466 696c  dbpath=targetfil
-0000e620: 6531 2c20 2065 6462 7665 7273 696f 6e3d  e1,  edbversion=
-0000e630: 2232 3032 312e 3222 290a 2020 2020 2020  "2021.2").      
-0000e640: 2020 3e3e 3e20 6564 6232 203d 2045 6462    >>> edb2 = Edb
-0000e650: 2865 6462 7061 7468 3d74 6172 6765 7466  (edbpath=targetf
-0000e660: 696c 6532 2c20 6564 6276 6572 7369 6f6e  ile2, edbversion
-0000e670: 3d22 3230 3231 2e32 2229 0a20 2020 2020  ="2021.2").     
-0000e680: 2020 203e 3e3e 2068 6f73 7469 6e67 5f63     >>> hosting_c
-0000e690: 6d70 203d 2065 6462 312e 636f 6d70 6f6e  mp = edb1.compon
-0000e6a0: 656e 7473 2e67 6574 5f63 6f6d 706f 6e65  ents.get_compone
-0000e6b0: 6e74 5f62 795f 6e61 6d65 2822 5531 3030  nt_by_name("U100
-0000e6c0: 2229 0a20 2020 2020 2020 203e 3e3e 206d  ").        >>> m
-0000e6d0: 6f75 6e74 6564 5f63 6d70 203d 2065 6462  ounted_cmp = edb
-0000e6e0: 322e 636f 6d70 6f6e 656e 7473 2e67 6574  2.components.get
-0000e6f0: 5f63 6f6d 706f 6e65 6e74 5f62 795f 6e61  _component_by_na
-0000e700: 6d65 2822 4247 4122 290a 2020 2020 2020  me("BGA").      
-0000e710: 2020 3e3e 3e20 6564 6231 2e73 7461 636b    >>> edb1.stack
-0000e720: 7570 2e70 6c61 6365 5f69 6e73 7461 6e63  up.place_instanc
-0000e730: 6528 6564 6232 2c20 616e 676c 653d 302e  e(edb2, angle=0.
-0000e740: 302c 206f 6666 7365 745f 783d 2231 6d6d  0, offset_x="1mm
-0000e750: 222c 0a20 2020 2020 2020 202e 2e2e 2020  ",.        ...  
-0000e760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e780: 206f 6666 7365 745f 793d 2232 6d6d 222c   offset_y="2mm",
-0000e790: 2066 6c69 7070 6564 5f73 7461 636b 7570   flipped_stackup
-0000e7a0: 3d46 616c 7365 2c20 706c 6163 655f 6f6e  =False, place_on
-0000e7b0: 5f74 6f70 3d54 7275 652c 0a20 2020 2020  _top=True,.     
-0000e7c0: 2020 202e 2e2e 2020 2020 2020 2020 2020     ...          
-0000e7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e7e0: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-0000e7f0: 2020 2022 2222 0a20 2020 2020 2020 205f     """.        _
-0000e800: 616e 676c 6520 3d20 616e 676c 6520 2a20  angle = angle * 
-0000e810: 6d61 7468 2e70 6920 2f20 3138 302e 300a  math.pi / 180.0.
-0000e820: 0a20 2020 2020 2020 2069 6620 736f 6c64  .        if sold
-0000e830: 6572 5f68 6569 6768 7420 3c3d 2030 3a0a  er_height <= 0:.
-0000e840: 2020 2020 2020 2020 2020 2020 6966 2066              if f
-0000e850: 6c69 7070 6564 5f73 7461 636b 7570 2061  lipped_stackup a
-0000e860: 6e64 206e 6f74 2070 6c61 6365 5f6f 6e5f  nd not place_on_
-0000e870: 746f 7020 6f72 2028 706c 6163 655f 6f6e  top or (place_on
-0000e880: 5f74 6f70 2061 6e64 206e 6f74 2066 6c69  _top and not fli
-0000e890: 7070 6564 5f73 7461 636b 7570 293a 0a20  pped_stackup):. 
-0000e8a0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-0000e8b0: 696e 696d 756d 5f65 6c65 7661 7469 6f6e  inimum_elevation
-0000e8c0: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-0000e8d0: 2020 2020 2020 2020 6c61 7965 7273 5f66          layers_f
-0000e8e0: 726f 6d5f 7468 655f 626f 7474 6f6d 203d  rom_the_bottom =
-0000e8f0: 2073 6f72 7465 6428 0a20 2020 2020 2020   sorted(.       
-0000e900: 2020 2020 2020 2020 2020 2020 2063 6f6d               com
-0000e910: 706f 6e65 6e74 5f65 6462 2e73 7461 636b  ponent_edb.stack
-0000e920: 7570 2e73 6967 6e61 6c5f 6c61 7965 7273  up.signal_layers
-0000e930: 2e76 616c 7565 7328 292c 206b 6579 3d6c  .values(), key=l
-0000e940: 616d 6264 6120 6c61 793a 206c 6179 2e75  ambda lay: lay.u
-0000e950: 7070 6572 5f65 6c65 7661 7469 6f6e 0a20  pper_elevation. 
-0000e960: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-0000e970: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000e980: 2066 6f72 206c 6179 2069 6e20 6c61 7965   for lay in laye
-0000e990: 7273 5f66 726f 6d5f 7468 655f 626f 7474  rs_from_the_bott
-0000e9a0: 6f6d 3a0a 2020 2020 2020 2020 2020 2020  om:.            
-0000e9b0: 2020 2020 2020 2020 6966 206d 696e 696d          if minim
-0000e9c0: 756d 5f65 6c65 7661 7469 6f6e 2069 7320  um_elevation is 
-0000e9d0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0000e9e0: 2020 2020 2020 2020 2020 2020 2020 6d69                mi
-0000e9f0: 6e69 6d75 6d5f 656c 6576 6174 696f 6e20  nimum_elevation 
-0000ea00: 3d20 6c61 792e 6c6f 7765 725f 656c 6576  = lay.lower_elev
-0000ea10: 6174 696f 6e0a 2020 2020 2020 2020 2020  ation.          
-0000ea20: 2020 2020 2020 2020 2020 656c 6966 206c            elif l
-0000ea30: 6179 2e6c 6f77 6572 5f65 6c65 7661 7469  ay.lower_elevati
-0000ea40: 6f6e 203e 206d 696e 696d 756d 5f65 6c65  on > minimum_ele
-0000ea50: 7661 7469 6f6e 3a0a 2020 2020 2020 2020  vation:.        
-0000ea60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ea70: 6272 6561 6b0a 2020 2020 2020 2020 2020  break.          
-0000ea80: 2020 2020 2020 2020 2020 6c61 795f 736f            lay_so
-0000ea90: 6c64 6572 5f68 6569 6768 7420 3d20 636f  lder_height = co
-0000eaa0: 6d70 6f6e 656e 745f 6564 622e 7374 6163  mponent_edb.stac
-0000eab0: 6b75 702e 5f67 6574 5f73 6f6c 6465 725f  kup._get_solder_
-0000eac0: 6865 6967 6874 286c 6179 2e6e 616d 6529  height(lay.name)
-0000ead0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000eae0: 2020 2020 2073 6f6c 6465 725f 6865 6967       solder_heig
-0000eaf0: 6874 203d 206d 6178 286c 6179 5f73 6f6c  ht = max(lay_sol
-0000eb00: 6465 725f 6865 6967 6874 2c20 736f 6c64  der_height, sold
-0000eb10: 6572 5f68 6569 6768 7429 0a20 2020 2020  er_height).     
-0000eb20: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-0000eb30: 6f6d 706f 6e65 6e74 5f65 6462 2e73 7461  omponent_edb.sta
-0000eb40: 636b 7570 2e5f 7265 6d6f 7665 5f73 6f6c  ckup._remove_sol
-0000eb50: 6465 725f 7065 6328 6c61 792e 6e61 6d65  der_pec(lay.name
-0000eb60: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
-0000eb70: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0000eb80: 2020 2020 6d61 7869 6d75 6d5f 656c 6576      maximum_elev
-0000eb90: 6174 696f 6e20 3d20 4e6f 6e65 0a20 2020  ation = None.   
-0000eba0: 2020 2020 2020 2020 2020 2020 206c 6179               lay
-0000ebb0: 6572 735f 6672 6f6d 5f74 6865 5f74 6f70  ers_from_the_top
-0000ebc0: 203d 2073 6f72 7465 6428 0a20 2020 2020   = sorted(.     
-0000ebd0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-0000ebe0: 6f6d 706f 6e65 6e74 5f65 6462 2e73 7461  omponent_edb.sta
-0000ebf0: 636b 7570 2e73 6967 6e61 6c5f 6c61 7965  ckup.signal_laye
-0000ec00: 7273 2e76 616c 7565 7328 292c 206b 6579  rs.values(), key
-0000ec10: 3d6c 616d 6264 6120 6c61 793a 202d 6c61  =lambda lay: -la
-0000ec20: 792e 7570 7065 725f 656c 6576 6174 696f  y.upper_elevatio
-0000ec30: 6e0a 2020 2020 2020 2020 2020 2020 2020  n.              
-0000ec40: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
-0000ec50: 2020 2020 666f 7220 6c61 7920 696e 206c      for lay in l
-0000ec60: 6179 6572 735f 6672 6f6d 5f74 6865 5f74  ayers_from_the_t
-0000ec70: 6f70 3a0a 2020 2020 2020 2020 2020 2020  op:.            
-0000ec80: 2020 2020 2020 2020 6966 206d 6178 696d          if maxim
-0000ec90: 756d 5f65 6c65 7661 7469 6f6e 2069 7320  um_elevation is 
-0000eca0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0000ecb0: 2020 2020 2020 2020 2020 2020 2020 6d61                ma
-0000ecc0: 7869 6d75 6d5f 656c 6576 6174 696f 6e20  ximum_elevation 
-0000ecd0: 3d20 6c61 792e 7570 7065 725f 656c 6576  = lay.upper_elev
-0000ece0: 6174 696f 6e0a 2020 2020 2020 2020 2020  ation.          
-0000ecf0: 2020 2020 2020 2020 2020 656c 6966 206c            elif l
-0000ed00: 6179 2e75 7070 6572 5f65 6c65 7661 7469  ay.upper_elevati
-0000ed10: 6f6e 203c 206d 6178 696d 756d 5f65 6c65  on < maximum_ele
-0000ed20: 7661 7469 6f6e 3a0a 2020 2020 2020 2020  vation:.        
-0000ed30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ed40: 6272 6561 6b0a 2020 2020 2020 2020 2020  break.          
-0000ed50: 2020 2020 2020 2020 2020 6c61 795f 736f            lay_so
-0000ed60: 6c64 6572 5f68 6569 6768 7420 3d20 636f  lder_height = co
-0000ed70: 6d70 6f6e 656e 745f 6564 622e 7374 6163  mponent_edb.stac
-0000ed80: 6b75 702e 5f67 6574 5f73 6f6c 6465 725f  kup._get_solder_
-0000ed90: 6865 6967 6874 286c 6179 2e6e 616d 6529  height(lay.name)
+0000bfd0: 2020 2020 2020 2020 2020 2020 2020 6d6f                mo
+0000bfe0: 756e 7465 645f 636f 6d70 6f6e 656e 745f  unted_component_
+0000bff0: 7069 6e32 3d22 4131 3422 2c0a 2020 2020  pin2="A14",.    
+0000c000: 2020 2020 2e2e 2e20 2020 2020 2020 2020      ...         
+0000c010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c020: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c030: 2020 2020 2020 2020 2020 2020 686f 7374              host
+0000c040: 696e 675f 636f 6d70 6f6e 656e 745f 7069  ing_component_pi
+0000c050: 6e31 3d22 4131 3222 2c0a 2020 2020 2020  n1="A12",.      
+0000c060: 2020 2e2e 2e20 2020 2020 2020 2020 2020    ...           
+0000c070: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c090: 2020 2020 2020 2020 2020 686f 7374 696e            hostin
+0000c0a0: 675f 636f 6d70 6f6e 656e 745f 7069 6e32  g_component_pin2
+0000c0b0: 3d22 4131 3422 290a 2020 2020 2020 2020  ="A14").        
+0000c0c0: 3e3e 3e20 6564 6232 2e73 7461 636b 7570  >>> edb2.stackup
+0000c0d0: 2e70 6c61 6365 5f69 6e5f 6c61 796f 7574  .place_in_layout
+0000c0e0: 2865 6462 312e 6163 7469 7665 5f63 656c  (edb1.active_cel
+0000c0f0: 6c2c 2061 6e67 6c65 3d30 2e30 2c20 6f66  l, angle=0.0, of
+0000c100: 6673 6574 5f78 3d76 6563 746f 725b 305d  fset_x=vector[0]
+0000c110: 2c0a 2020 2020 2020 2020 2e2e 2e20 2020  ,.        ...   
+0000c120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c130: 2020 2020 2020 2020 2020 206f 6666 7365             offse
+0000c140: 745f 793d 7665 6374 6f72 5b31 5d2c 2066  t_y=vector[1], f
+0000c150: 6c69 7070 6564 5f73 7461 636b 7570 3d46  lipped_stackup=F
+0000c160: 616c 7365 2c20 706c 6163 655f 6f6e 5f74  alse, place_on_t
+0000c170: 6f70 3d54 7275 652c 0a20 2020 2020 2020  op=True,.       
+0000c180: 202e 2e2e 2020 2020 2020 2020 2020 2020   ...            
+0000c190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c1a0: 2020 290a 2020 2020 2020 2020 2222 220a    ).        """.
+0000c1b0: 2020 2020 2020 2020 2320 6966 2066 6c69          # if fli
+0000c1c0: 7070 6564 5f73 7461 636b 7570 2061 6e64  pped_stackup and
+0000c1d0: 2070 6c61 6365 5f6f 6e5f 746f 7020 6f72   place_on_top or
+0000c1e0: 2028 6e6f 7420 666c 6970 7065 645f 7374   (not flipped_st
+0000c1f0: 6163 6b75 7020 616e 6420 6e6f 7420 706c  ackup and not pl
+0000c200: 6163 655f 6f6e 5f74 6f70 293a 0a20 2020  ace_on_top):.   
+0000c210: 2020 2020 2073 656c 662e 6164 6a75 7374       self.adjust
+0000c220: 5f73 6f6c 6465 725f 6469 656c 6563 7472  _solder_dielectr
+0000c230: 6963 7328 290a 2020 2020 2020 2020 6966  ics().        if
+0000c240: 206e 6f74 2070 6c61 6365 5f6f 6e5f 746f   not place_on_to
+0000c250: 703a 0a20 2020 2020 2020 2020 2020 2065  p:.            e
+0000c260: 6462 2e73 7461 636b 7570 2e66 6c69 705f  db.stackup.flip_
+0000c270: 6465 7369 676e 2829 0a20 2020 2020 2020  design().       
+0000c280: 2020 2020 2070 6c61 6365 5f6f 6e5f 746f       place_on_to
+0000c290: 7020 3d20 5472 7565 0a20 2020 2020 2020  p = True.       
+0000c2a0: 2020 2020 2069 6620 6e6f 7420 666c 6970       if not flip
+0000c2b0: 7065 645f 7374 6163 6b75 703a 0a20 2020  ped_stackup:.   
+0000c2c0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+0000c2d0: 662e 666c 6970 5f64 6573 6967 6e28 290a  f.flip_design().
+0000c2e0: 2020 2020 2020 2020 656c 6966 2066 6c69          elif fli
+0000c2f0: 7070 6564 5f73 7461 636b 7570 3a0a 2020  pped_stackup:.  
+0000c300: 2020 2020 2020 2020 2020 7365 6c66 2e66            self.f
+0000c310: 6c69 705f 6465 7369 676e 2829 0a20 2020  lip_design().   
+0000c320: 2020 2020 2065 6462 5f63 656c 6c20 3d20       edb_cell = 
+0000c330: 6564 622e 6163 7469 7665 5f63 656c 6c0a  edb.active_cell.
+0000c340: 2020 2020 2020 2020 5f61 6e67 6c65 203d          _angle =
+0000c350: 2073 656c 662e 5f65 6462 5f76 616c 7565   self._edb_value
+0000c360: 2861 6e67 6c65 202a 206d 6174 682e 7069  (angle * math.pi
+0000c370: 202f 2031 3830 2e30 290a 2020 2020 2020   / 180.0).      
+0000c380: 2020 5f6f 6666 7365 745f 7820 3d20 7365    _offset_x = se
+0000c390: 6c66 2e5f 6564 625f 7661 6c75 6528 6f66  lf._edb_value(of
+0000c3a0: 6673 6574 5f78 290a 2020 2020 2020 2020  fset_x).        
+0000c3b0: 5f6f 6666 7365 745f 7920 3d20 7365 6c66  _offset_y = self
+0000c3c0: 2e5f 6564 625f 7661 6c75 6528 6f66 6673  ._edb_value(offs
+0000c3d0: 6574 5f79 290a 0a20 2020 2020 2020 2069  et_y)..        i
+0000c3e0: 6620 6564 625f 6365 6c6c 2e47 6574 4e61  f edb_cell.GetNa
+0000c3f0: 6d65 2829 206e 6f74 2069 6e20 7365 6c66  me() not in self
+0000c400: 2e5f 7065 6462 2e63 656c 6c5f 6e61 6d65  ._pedb.cell_name
+0000c410: 733a 0a20 2020 2020 2020 2020 2020 206c  s:.            l
+0000c420: 6973 745f 6365 6c6c 7320 3d20 7365 6c66  ist_cells = self
+0000c430: 2e5f 7065 6462 2e63 6f70 795f 6365 6c6c  ._pedb.copy_cell
+0000c440: 7328 5b65 6462 5f63 656c 6c2e 6170 695f  s([edb_cell.api_
+0000c450: 6f62 6a65 6374 5d29 0a20 2020 2020 2020  object]).       
+0000c460: 2020 2020 2065 6462 5f63 656c 6c20 3d20       edb_cell = 
+0000c470: 6c69 7374 5f63 656c 6c73 5b30 5d0a 2020  list_cells[0].  
+0000c480: 2020 2020 2020 7365 6c66 2e5f 7065 6462        self._pedb
+0000c490: 2e6c 6179 6f75 742e 6365 6c6c 2e53 6574  .layout.cell.Set
+0000c4a0: 426c 6163 6b42 6f78 2854 7275 6529 0a20  BlackBox(True). 
+0000c4b0: 2020 2020 2020 2063 656c 6c5f 696e 7374         cell_inst
+0000c4c0: 3220 3d20 7365 6c66 2e5f 7065 6462 2e65  2 = self._pedb.e
+0000c4d0: 6462 5f61 7069 2e63 656c 6c2e 6869 6572  db_api.cell.hier
+0000c4e0: 6172 6368 792e 6365 6c6c 5f69 6e73 7461  archy.cell_insta
+0000c4f0: 6e63 652e 4372 6561 7465 280a 2020 2020  nce.Create(.    
+0000c500: 2020 2020 2020 2020 6564 625f 6365 6c6c          edb_cell
+0000c510: 2e47 6574 4c61 796f 7574 2829 2c20 7365  .GetLayout(), se
+0000c520: 6c66 2e5f 7065 6462 2e6c 6179 6f75 742e  lf._pedb.layout.
+0000c530: 6365 6c6c 2e47 6574 4e61 6d65 2829 2c20  cell.GetName(), 
+0000c540: 7365 6c66 2e5f 7065 6462 2e61 6374 6976  self._pedb.activ
+0000c550: 655f 6c61 796f 7574 0a20 2020 2020 2020  e_layout.       
+0000c560: 2029 0a20 2020 2020 2020 2063 656c 6c5f   ).        cell_
+0000c570: 7472 616e 7320 3d20 6365 6c6c 5f69 6e73  trans = cell_ins
+0000c580: 7432 2e47 6574 5472 616e 7366 6f72 6d28  t2.GetTransform(
+0000c590: 290a 2020 2020 2020 2020 6365 6c6c 5f74  ).        cell_t
+0000c5a0: 7261 6e73 2e53 6574 526f 7461 7469 6f6e  rans.SetRotation
+0000c5b0: 5661 6c75 6528 5f61 6e67 6c65 290a 2020  Value(_angle).  
+0000c5c0: 2020 2020 2020 6365 6c6c 5f74 7261 6e73        cell_trans
+0000c5d0: 2e53 6574 584f 6666 7365 7456 616c 7565  .SetXOffsetValue
+0000c5e0: 285f 6f66 6673 6574 5f78 290a 2020 2020  (_offset_x).    
+0000c5f0: 2020 2020 6365 6c6c 5f74 7261 6e73 2e53      cell_trans.S
+0000c600: 6574 594f 6666 7365 7456 616c 7565 285f  etYOffsetValue(_
+0000c610: 6f66 6673 6574 5f79 290a 2020 2020 2020  offset_y).      
+0000c620: 2020 6365 6c6c 5f74 7261 6e73 2e53 6574    cell_trans.Set
+0000c630: 4d69 7272 6f72 2866 6c69 7070 6564 5f73  Mirror(flipped_s
+0000c640: 7461 636b 7570 290a 2020 2020 2020 2020  tackup).        
+0000c650: 6365 6c6c 5f69 6e73 7432 2e53 6574 5472  cell_inst2.SetTr
+0000c660: 616e 7366 6f72 6d28 6365 6c6c 5f74 7261  ansform(cell_tra
+0000c670: 6e73 290a 2020 2020 2020 2020 6365 6c6c  ns).        cell
+0000c680: 5f69 6e73 7432 2e53 6574 536f 6c76 6549  _inst2.SetSolveI
+0000c690: 6e64 6570 656e 6465 6e74 5072 6566 6572  ndependentPrefer
+0000c6a0: 656e 6365 2846 616c 7365 290a 2020 2020  ence(False).    
+0000c6b0: 2020 2020 7374 6163 6b75 705f 7461 7267      stackup_targ
+0000c6c0: 6574 203d 2065 6462 5f63 656c 6c2e 4765  et = edb_cell.Ge
+0000c6d0: 744c 6179 6f75 7428 292e 4765 744c 6179  tLayout().GetLay
+0000c6e0: 6572 436f 6c6c 6563 7469 6f6e 2829 0a0a  erCollection()..
+0000c6f0: 2020 2020 2020 2020 6966 2070 6c61 6365          if place
+0000c700: 5f6f 6e5f 746f 703a 0a20 2020 2020 2020  _on_top:.       
+0000c710: 2020 2020 2063 656c 6c5f 696e 7374 322e       cell_inst2.
+0000c720: 5365 7450 6c61 6365 6d65 6e74 4c61 7965  SetPlacementLaye
+0000c730: 7228 0a20 2020 2020 2020 2020 2020 2020  r(.             
+0000c740: 2020 206c 6973 7428 7374 6163 6b75 705f     list(stackup_
+0000c750: 7461 7267 6574 2e4c 6179 6572 7328 7365  target.Layers(se
+0000c760: 6c66 2e5f 7065 6462 2e65 6462 5f61 7069  lf._pedb.edb_api
+0000c770: 2e63 656c 6c2e 6c61 7965 725f 7479 7065  .cell.layer_type
+0000c780: 5f73 6574 2e53 6967 6e61 6c4c 6179 6572  _set.SignalLayer
+0000c790: 5365 7429 295b 305d 0a20 2020 2020 2020  Set))[0].       
+0000c7a0: 2020 2020 2029 0a20 2020 2020 2020 2065       ).        e
+0000c7b0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0000c7c0: 2063 656c 6c5f 696e 7374 322e 5365 7450   cell_inst2.SetP
+0000c7d0: 6c61 6365 6d65 6e74 4c61 7965 7228 0a20  lacementLayer(. 
+0000c7e0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+0000c7f0: 6973 7428 7374 6163 6b75 705f 7461 7267  ist(stackup_targ
+0000c800: 6574 2e4c 6179 6572 7328 7365 6c66 2e5f  et.Layers(self._
+0000c810: 7065 6462 2e65 6462 5f61 7069 2e63 656c  pedb.edb_api.cel
+0000c820: 6c2e 6c61 7965 725f 7479 7065 5f73 6574  l.layer_type_set
+0000c830: 2e53 6967 6e61 6c4c 6179 6572 5365 7429  .SignalLayerSet)
+0000c840: 295b 2d31 5d0a 2020 2020 2020 2020 2020  )[-1].          
+0000c850: 2020 290a 2020 2020 2020 2020 7365 6c66    ).        self
+0000c860: 2e72 6566 7265 7368 5f6c 6179 6572 5f63  .refresh_layer_c
+0000c870: 6f6c 6c65 6374 696f 6e28 290a 2020 2020  ollection().    
+0000c880: 2020 2020 7265 7475 726e 2054 7275 650a      return True.
+0000c890: 0a20 2020 2040 7079 6564 625f 6675 6e63  .    @pyedb_func
+0000c8a0: 7469 6f6e 5f68 616e 646c 6572 2829 0a20  tion_handler(). 
+0000c8b0: 2020 2064 6566 2070 6c61 6365 5f69 6e5f     def place_in_
+0000c8c0: 6c61 796f 7574 5f33 645f 706c 6163 656d  layout_3d_placem
+0000c8d0: 656e 7428 0a20 2020 2020 2020 2073 656c  ent(.        sel
+0000c8e0: 662c 0a20 2020 2020 2020 2065 6462 2c0a  f,.        edb,.
+0000c8f0: 2020 2020 2020 2020 616e 676c 653d 302e          angle=0.
+0000c900: 302c 0a20 2020 2020 2020 206f 6666 7365  0,.        offse
+0000c910: 745f 783d 302e 302c 0a20 2020 2020 2020  t_x=0.0,.       
+0000c920: 206f 6666 7365 745f 793d 302e 302c 0a20   offset_y=0.0,. 
+0000c930: 2020 2020 2020 2066 6c69 7070 6564 5f73         flipped_s
+0000c940: 7461 636b 7570 3d54 7275 652c 0a20 2020  tackup=True,.   
+0000c950: 2020 2020 2070 6c61 6365 5f6f 6e5f 746f       place_on_to
+0000c960: 703d 5472 7565 2c0a 2020 2020 2020 2020  p=True,.        
+0000c970: 736f 6c64 6572 5f68 6569 6768 743d 302c  solder_height=0,
+0000c980: 0a20 2020 2029 3a0a 2020 2020 2020 2020  .    ):.        
+0000c990: 2222 2250 6c61 6365 2063 7572 7265 6e74  """Place current
+0000c9a0: 2043 656c 6c20 696e 746f 2061 6e6f 7468   Cell into anoth
+0000c9b0: 6572 2063 656c 6c20 7573 696e 6720 3364  er cell using 3d
+0000c9c0: 2070 6c61 6365 6d65 6e74 206d 6574 686f   placement metho
+0000c9d0: 642e 0a20 2020 2020 2020 2046 6c69 7020  d..        Flip 
+0000c9e0: 7468 6520 6375 7272 656e 7420 6c61 7965  the current laye
+0000c9f0: 7220 7374 6163 6b75 7020 6f66 2061 206c  r stackup of a l
+0000ca00: 6179 6f75 7420 6966 2072 6571 7565 7374  ayout if request
+0000ca10: 6564 2e20 5472 616e 7366 6f72 6d20 7061  ed. Transform pa
+0000ca20: 7261 6d65 7465 7273 2063 7572 7265 6e74  rameters current
+0000ca30: 6c79 206e 6f74 2073 7570 706f 7274 6564  ly not supported
+0000ca40: 2e0a 0a20 2020 2020 2020 2050 6172 616d  ...        Param
+0000ca50: 6574 6572 730a 2020 2020 2020 2020 2d2d  eters.        --
+0000ca60: 2d2d 2d2d 2d2d 2d2d 0a20 2020 2020 2020  --------.       
+0000ca70: 2065 6462 203a 2045 6462 0a20 2020 2020   edb : Edb.     
+0000ca80: 2020 2020 2020 2043 656c 6c20 6f6e 2077         Cell on w
+0000ca90: 6869 6368 2074 6f20 706c 6163 6520 7468  hich to place th
+0000caa0: 6520 6375 7272 656e 7420 6c61 796f 7574  e current layout
+0000cab0: 2e20 4966 204e 6f6e 6520 7468 6520 4365  . If None the Ce
+0000cac0: 6c6c 2077 696c 6c20 6265 2061 7070 6c69  ll will be appli
+0000cad0: 6564 206f 6e20 616e 2065 6d70 7479 206e  ed on an empty n
+0000cae0: 6577 2043 656c 6c2e 0a20 2020 2020 2020  ew Cell..       
+0000caf0: 2061 6e67 6c65 203a 2064 6f75 626c 652c   angle : double,
+0000cb00: 206f 7074 696f 6e61 6c0a 2020 2020 2020   optional.      
+0000cb10: 2020 2020 2020 5468 6520 726f 7461 7469        The rotati
+0000cb20: 6f6e 2061 6e67 6c65 2061 7070 6c69 6564  on angle applied
+0000cb30: 206f 6e20 7468 6520 6465 7369 676e 2e0a   on the design..
+0000cb40: 2020 2020 2020 2020 6f66 6673 6574 5f78          offset_x
+0000cb50: 203a 2064 6f75 626c 652c 206f 7074 696f   : double, optio
+0000cb60: 6e61 6c0a 2020 2020 2020 2020 2020 2020  nal.            
+0000cb70: 5468 6520 7820 6f66 6673 6574 2076 616c  The x offset val
+0000cb80: 7565 2e0a 2020 2020 2020 2020 6f66 6673  ue..        offs
+0000cb90: 6574 5f79 203a 2064 6f75 626c 652c 206f  et_y : double, o
+0000cba0: 7074 696f 6e61 6c0a 2020 2020 2020 2020  ptional.        
+0000cbb0: 2020 2020 5468 6520 7920 6f66 6673 6574      The y offset
+0000cbc0: 2076 616c 7565 2e0a 2020 2020 2020 2020   value..        
+0000cbd0: 666c 6970 7065 645f 7374 6163 6b75 7020  flipped_stackup 
+0000cbe0: 3a20 626f 6f6c 2c20 6f70 7469 6f6e 616c  : bool, optional
+0000cbf0: 0a20 2020 2020 2020 2020 2020 2045 6974  .            Eit
+0000cc00: 6865 7220 6966 2074 6865 2063 7572 7265  her if the curre
+0000cc10: 6e74 206c 6179 6f75 7420 6973 2069 6e76  nt layout is inv
+0000cc20: 6572 7465 642e 0a20 2020 2020 2020 2020  erted..         
+0000cc30: 2020 2049 6620 6054 7275 6560 2061 6e64     If `True` and
+0000cc40: 2070 6c61 6365 5f6f 6e5f 746f 7020 6973   place_on_top is
+0000cc50: 2060 5472 7565 6020 7468 6520 7374 6163   `True` the stac
+0000cc60: 6b75 7020 7769 6c6c 2062 6520 666c 6970  kup will be flip
+0000cc70: 7065 6420 6265 666f 7265 2074 6865 206d  ped before the m
+0000cc80: 6572 6765 2e0a 2020 2020 2020 2020 706c  erge..        pl
+0000cc90: 6163 655f 6f6e 5f74 6f70 203a 2062 6f6f  ace_on_top : boo
+0000cca0: 6c2c 206f 7074 696f 6e61 6c0a 2020 2020  l, optional.    
+0000ccb0: 2020 2020 2020 2020 4569 7468 6572 2069          Either i
+0000ccc0: 6620 706c 6163 6520 7468 6520 6375 7272  f place the curr
+0000ccd0: 656e 7420 6c61 796f 7574 206f 6e20 546f  ent layout on To
+0000cce0: 7020 6f72 2042 6f74 746f 6d20 6f66 2064  p or Bottom of d
+0000ccf0: 6573 7469 6e61 7469 6f6e 204c 6179 6f75  estination Layou
+0000cd00: 742e 0a20 2020 2020 2020 2073 6f6c 6465  t..        solde
+0000cd10: 725f 6865 6967 6874 203a 2066 6c6f 6174  r_height : float
+0000cd20: 2c20 6f70 7469 6f6e 616c 0a20 2020 2020  , optional.     
+0000cd30: 2020 2020 2020 2053 6f6c 6465 7220 4261         Solder Ba
+0000cd40: 6c6c 206f 7220 4275 6d70 7320 6569 6768  ll or Bumps eigh
+0000cd50: 742e 0a20 2020 2020 2020 2020 2020 2054  t..            T
+0000cd60: 6869 7320 7661 6c75 6520 7769 6c6c 2062  his value will b
+0000cd70: 6520 6164 6465 6420 746f 2074 6865 2065  e added to the e
+0000cd80: 6c65 7661 7469 6f6e 2074 6f20 616c 6967  levation to alig
+0000cd90: 6e20 7468 6520 7477 6f20 6c61 796f 7574  n the two layout
+0000cda0: 732e 0a0a 2020 2020 2020 2020 5265 7475  s...        Retu
+0000cdb0: 726e 730a 2020 2020 2020 2020 2d2d 2d2d  rns.        ----
+0000cdc0: 2d2d 2d0a 2020 2020 2020 2020 626f 6f6c  ---.        bool
+0000cdd0: 0a20 2020 2020 2020 2020 2020 2060 6054  .            ``T
+0000cde0: 7275 6560 6020 7768 656e 2073 7563 6365  rue`` when succe
+0000cdf0: 6564 2060 6046 616c 7365 6060 2069 6620  ed ``False`` if 
+0000ce00: 6e6f 742e 0a0a 2020 2020 2020 2020 4578  not...        Ex
+0000ce10: 616d 706c 6573 0a20 2020 2020 2020 202d  amples.        -
+0000ce20: 2d2d 2d2d 2d2d 2d0a 2020 2020 2020 2020  -------.        
+0000ce30: 3e3e 3e20 6564 6231 203d 2045 6462 2865  >>> edb1 = Edb(e
+0000ce40: 6462 7061 7468 3d74 6172 6765 7466 696c  dbpath=targetfil
+0000ce50: 6531 2c20 2065 6462 7665 7273 696f 6e3d  e1,  edbversion=
+0000ce60: 2232 3032 312e 3222 290a 2020 2020 2020  "2021.2").      
+0000ce70: 2020 3e3e 3e20 6564 6232 203d 2045 6462    >>> edb2 = Edb
+0000ce80: 2865 6462 7061 7468 3d74 6172 6765 7466  (edbpath=targetf
+0000ce90: 696c 6532 2c20 6564 6276 6572 7369 6f6e  ile2, edbversion
+0000cea0: 3d22 3230 3231 2e32 2229 0a20 2020 2020  ="2021.2").     
+0000ceb0: 2020 203e 3e3e 2068 6f73 7469 6e67 5f63     >>> hosting_c
+0000cec0: 6d70 203d 2065 6462 312e 636f 6d70 6f6e  mp = edb1.compon
+0000ced0: 656e 7473 2e67 6574 5f63 6f6d 706f 6e65  ents.get_compone
+0000cee0: 6e74 5f62 795f 6e61 6d65 2822 5531 3030  nt_by_name("U100
+0000cef0: 2229 0a20 2020 2020 2020 203e 3e3e 206d  ").        >>> m
+0000cf00: 6f75 6e74 6564 5f63 6d70 203d 2065 6462  ounted_cmp = edb
+0000cf10: 322e 636f 6d70 6f6e 656e 7473 2e67 6574  2.components.get
+0000cf20: 5f63 6f6d 706f 6e65 6e74 5f62 795f 6e61  _component_by_na
+0000cf30: 6d65 2822 4247 4122 290a 2020 2020 2020  me("BGA").      
+0000cf40: 2020 3e3e 3e20 6564 6232 2e73 7461 636b    >>> edb2.stack
+0000cf50: 7570 2e70 6c61 6365 5f69 6e5f 6c61 796f  up.place_in_layo
+0000cf60: 7574 2865 6462 312e 6163 7469 7665 5f63  ut(edb1.active_c
+0000cf70: 656c 6c2c 2061 6e67 6c65 3d30 2e30 2c20  ell, angle=0.0, 
+0000cf80: 6f66 6673 6574 5f78 3d22 316d 6d22 2c0a  offset_x="1mm",.
+0000cf90: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
+0000cfa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cfb0: 2020 2020 2020 2020 2020 2020 2020 6f66                of
+0000cfc0: 6673 6574 5f79 3d22 326d 6d22 2c20 666c  fset_y="2mm", fl
+0000cfd0: 6970 7065 645f 7374 6163 6b75 703d 4661  ipped_stackup=Fa
+0000cfe0: 6c73 652c 2070 6c61 6365 5f6f 6e5f 746f  lse, place_on_to
+0000cff0: 703d 5472 7565 2c0a 2020 2020 2020 2020  p=True,.        
+0000d000: 2e2e 2e20 2020 2020 2020 2020 2020 2020  ...             
+0000d010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d020: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+0000d030: 2222 220a 2020 2020 2020 2020 5f61 6e67  """.        _ang
+0000d040: 6c65 203d 2061 6e67 6c65 202a 206d 6174  le = angle * mat
+0000d050: 682e 7069 202f 2031 3830 2e30 0a0a 2020  h.pi / 180.0..  
+0000d060: 2020 2020 2020 6966 2073 6f6c 6465 725f        if solder_
+0000d070: 6865 6967 6874 203c 3d20 303a 0a20 2020  height <= 0:.   
+0000d080: 2020 2020 2020 2020 2069 6620 666c 6970           if flip
+0000d090: 7065 645f 7374 6163 6b75 7020 616e 6420  ped_stackup and 
+0000d0a0: 6e6f 7420 706c 6163 655f 6f6e 5f74 6f70  not place_on_top
+0000d0b0: 206f 7220 2870 6c61 6365 5f6f 6e5f 746f   or (place_on_to
+0000d0c0: 7020 616e 6420 6e6f 7420 666c 6970 7065  p and not flippe
+0000d0d0: 645f 7374 6163 6b75 7029 3a0a 2020 2020  d_stackup):.    
+0000d0e0: 2020 2020 2020 2020 2020 2020 6d69 6e69              mini
+0000d0f0: 6d75 6d5f 656c 6576 6174 696f 6e20 3d20  mum_elevation = 
+0000d100: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
+0000d110: 2020 2020 206c 6179 6572 735f 6672 6f6d       layers_from
+0000d120: 5f74 6865 5f62 6f74 746f 6d20 3d20 736f  _the_bottom = so
+0000d130: 7274 6564 2873 656c 662e 7369 676e 616c  rted(self.signal
+0000d140: 5f6c 6179 6572 732e 7661 6c75 6573 2829  _layers.values()
+0000d150: 2c20 6b65 793d 6c61 6d62 6461 206c 6179  , key=lambda lay
+0000d160: 3a20 6c61 792e 7570 7065 725f 656c 6576  : lay.upper_elev
+0000d170: 6174 696f 6e29 0a20 2020 2020 2020 2020  ation).         
+0000d180: 2020 2020 2020 2066 6f72 206c 6179 2069         for lay i
+0000d190: 6e20 6c61 7965 7273 5f66 726f 6d5f 7468  n layers_from_th
+0000d1a0: 655f 626f 7474 6f6d 3a0a 2020 2020 2020  e_bottom:.      
+0000d1b0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0000d1c0: 206d 696e 696d 756d 5f65 6c65 7661 7469   minimum_elevati
+0000d1d0: 6f6e 2069 7320 4e6f 6e65 3a0a 2020 2020  on is None:.    
+0000d1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d1f0: 2020 2020 6d69 6e69 6d75 6d5f 656c 6576      minimum_elev
+0000d200: 6174 696f 6e20 3d20 6c61 792e 6c6f 7765  ation = lay.lowe
+0000d210: 725f 656c 6576 6174 696f 6e0a 2020 2020  r_elevation.    
+0000d220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d230: 656c 6966 206c 6179 2e6c 6f77 6572 5f65  elif lay.lower_e
+0000d240: 6c65 7661 7469 6f6e 203e 206d 696e 696d  levation > minim
+0000d250: 756d 5f65 6c65 7661 7469 6f6e 3a0a 2020  um_elevation:.  
+0000d260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d270: 2020 2020 2020 6272 6561 6b0a 2020 2020        break.    
+0000d280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d290: 6c61 795f 736f 6c64 6572 5f68 6569 6768  lay_solder_heigh
+0000d2a0: 7420 3d20 7365 6c66 2e5f 6765 745f 736f  t = self._get_so
+0000d2b0: 6c64 6572 5f68 6569 6768 7428 6c61 792e  lder_height(lay.
+0000d2c0: 6e61 6d65 290a 2020 2020 2020 2020 2020  name).          
+0000d2d0: 2020 2020 2020 2020 2020 736f 6c64 6572            solder
+0000d2e0: 5f68 6569 6768 7420 3d20 6d61 7828 6c61  _height = max(la
+0000d2f0: 795f 736f 6c64 6572 5f68 6569 6768 742c  y_solder_height,
+0000d300: 2073 6f6c 6465 725f 6865 6967 6874 290a   solder_height).
+0000d310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d320: 2020 2020 7365 6c66 2e5f 7265 6d6f 7665      self._remove
+0000d330: 5f73 6f6c 6465 725f 7065 6328 6c61 792e  _solder_pec(lay.
+0000d340: 6e61 6d65 290a 2020 2020 2020 2020 2020  name).          
+0000d350: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0000d360: 2020 2020 2020 2020 6d61 7869 6d75 6d5f          maximum_
+0000d370: 656c 6576 6174 696f 6e20 3d20 4e6f 6e65  elevation = None
+0000d380: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000d390: 206c 6179 6572 735f 6672 6f6d 5f74 6865   layers_from_the
+0000d3a0: 5f74 6f70 203d 2073 6f72 7465 6428 7365  _top = sorted(se
+0000d3b0: 6c66 2e73 6967 6e61 6c5f 6c61 7965 7273  lf.signal_layers
+0000d3c0: 2e76 616c 7565 7328 292c 206b 6579 3d6c  .values(), key=l
+0000d3d0: 616d 6264 6120 6c61 793a 202d 6c61 792e  ambda lay: -lay.
+0000d3e0: 7570 7065 725f 656c 6576 6174 696f 6e29  upper_elevation)
+0000d3f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000d400: 2066 6f72 206c 6179 2069 6e20 6c61 7965   for lay in laye
+0000d410: 7273 5f66 726f 6d5f 7468 655f 746f 703a  rs_from_the_top:
+0000d420: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000d430: 2020 2020 2069 6620 6d61 7869 6d75 6d5f       if maximum_
+0000d440: 656c 6576 6174 696f 6e20 6973 204e 6f6e  elevation is Non
+0000d450: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0000d460: 2020 2020 2020 2020 2020 206d 6178 696d             maxim
+0000d470: 756d 5f65 6c65 7661 7469 6f6e 203d 206c  um_elevation = l
+0000d480: 6179 2e75 7070 6572 5f65 6c65 7661 7469  ay.upper_elevati
+0000d490: 6f6e 0a20 2020 2020 2020 2020 2020 2020  on.             
+0000d4a0: 2020 2020 2020 2065 6c69 6620 6c61 792e         elif lay.
+0000d4b0: 7570 7065 725f 656c 6576 6174 696f 6e20  upper_elevation 
+0000d4c0: 3c20 6d61 7869 6d75 6d5f 656c 6576 6174  < maximum_elevat
+0000d4d0: 696f 6e3a 0a20 2020 2020 2020 2020 2020  ion:.           
+0000d4e0: 2020 2020 2020 2020 2020 2020 2062 7265               bre
+0000d4f0: 616b 0a20 2020 2020 2020 2020 2020 2020  ak.             
+0000d500: 2020 2020 2020 206c 6179 5f73 6f6c 6465         lay_solde
+0000d510: 725f 6865 6967 6874 203d 2073 656c 662e  r_height = self.
+0000d520: 5f67 6574 5f73 6f6c 6465 725f 6865 6967  _get_solder_heig
+0000d530: 6874 286c 6179 2e6e 616d 6529 0a20 2020  ht(lay.name).   
+0000d540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d550: 2073 6f6c 6465 725f 6865 6967 6874 203d   solder_height =
+0000d560: 206d 6178 286c 6179 5f73 6f6c 6465 725f   max(lay_solder_
+0000d570: 6865 6967 6874 2c20 736f 6c64 6572 5f68  height, solder_h
+0000d580: 6569 6768 7429 0a20 2020 2020 2020 2020  eight).         
+0000d590: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000d5a0: 5f72 656d 6f76 655f 736f 6c64 6572 5f70  _remove_solder_p
+0000d5b0: 6563 286c 6179 2e6e 616d 6529 0a0a 2020  ec(lay.name)..  
+0000d5c0: 2020 2020 2020 726f 7461 7469 6f6e 203d        rotation =
+0000d5d0: 2073 656c 662e 5f65 6462 5f76 616c 7565   self._edb_value
+0000d5e0: 2830 2e30 290a 2020 2020 2020 2020 6966  (0.0).        if
+0000d5f0: 2066 6c69 7070 6564 5f73 7461 636b 7570   flipped_stackup
+0000d600: 3a0a 2020 2020 2020 2020 2020 2020 726f  :.            ro
+0000d610: 7461 7469 6f6e 203d 2073 656c 662e 5f65  tation = self._e
+0000d620: 6462 5f76 616c 7565 286d 6174 682e 7069  db_value(math.pi
+0000d630: 290a 0a20 2020 2020 2020 2065 6462 5f63  )..        edb_c
+0000d640: 656c 6c20 3d20 6564 622e 6163 7469 7665  ell = edb.active
+0000d650: 5f63 656c 6c0a 2020 2020 2020 2020 5f6f  _cell.        _o
+0000d660: 6666 7365 745f 7820 3d20 7365 6c66 2e5f  ffset_x = self._
+0000d670: 6564 625f 7661 6c75 6528 6f66 6673 6574  edb_value(offset
+0000d680: 5f78 290a 2020 2020 2020 2020 5f6f 6666  _x).        _off
+0000d690: 7365 745f 7920 3d20 7365 6c66 2e5f 6564  set_y = self._ed
+0000d6a0: 625f 7661 6c75 6528 6f66 6673 6574 5f79  b_value(offset_y
+0000d6b0: 290a 0a20 2020 2020 2020 2069 6620 6564  )..        if ed
+0000d6c0: 625f 6365 6c6c 2e47 6574 4e61 6d65 2829  b_cell.GetName()
+0000d6d0: 206e 6f74 2069 6e20 7365 6c66 2e5f 7065   not in self._pe
+0000d6e0: 6462 2e63 656c 6c5f 6e61 6d65 733a 0a20  db.cell_names:. 
+0000d6f0: 2020 2020 2020 2020 2020 206c 6973 745f             list_
+0000d700: 6365 6c6c 7320 3d20 7365 6c66 2e5f 7065  cells = self._pe
+0000d710: 6462 2e63 6f70 795f 6365 6c6c 7328 6564  db.copy_cells(ed
+0000d720: 625f 6365 6c6c 2e61 7069 5f6f 626a 6563  b_cell.api_objec
+0000d730: 7429 0a20 2020 2020 2020 2020 2020 2065  t).            e
+0000d740: 6462 5f63 656c 6c20 3d20 6c69 7374 5f63  db_cell = list_c
+0000d750: 656c 6c73 5b30 5d0a 2020 2020 2020 2020  ells[0].        
+0000d760: 7365 6c66 2e5f 7065 6462 2e6c 6179 6f75  self._pedb.layou
+0000d770: 742e 6365 6c6c 2e53 6574 426c 6163 6b42  t.cell.SetBlackB
+0000d780: 6f78 2854 7275 6529 0a20 2020 2020 2020  ox(True).       
+0000d790: 2063 656c 6c5f 696e 7374 3220 3d20 7365   cell_inst2 = se
+0000d7a0: 6c66 2e5f 7065 6462 2e65 6462 5f61 7069  lf._pedb.edb_api
+0000d7b0: 2e63 656c 6c2e 6869 6572 6172 6368 792e  .cell.hierarchy.
+0000d7c0: 6365 6c6c 5f69 6e73 7461 6e63 652e 4372  cell_instance.Cr
+0000d7d0: 6561 7465 280a 2020 2020 2020 2020 2020  eate(.          
+0000d7e0: 2020 6564 625f 6365 6c6c 2e47 6574 4c61    edb_cell.GetLa
+0000d7f0: 796f 7574 2829 2c20 7365 6c66 2e5f 7065  yout(), self._pe
+0000d800: 6462 2e6c 6179 6f75 742e 6365 6c6c 2e47  db.layout.cell.G
+0000d810: 6574 4e61 6d65 2829 2c20 7365 6c66 2e5f  etName(), self._
+0000d820: 7065 6462 2e61 6374 6976 655f 6c61 796f  pedb.active_layo
+0000d830: 7574 0a20 2020 2020 2020 2029 0a0a 2020  ut.        )..  
+0000d840: 2020 2020 2020 7374 6163 6b75 705f 7461        stackup_ta
+0000d850: 7267 6574 203d 2073 656c 662e 5f70 6564  rget = self._ped
+0000d860: 622e 6564 625f 6170 692e 4365 6c6c 2e4c  b.edb_api.Cell.L
+0000d870: 6179 6572 436f 6c6c 6563 7469 6f6e 2865  ayerCollection(e
+0000d880: 6462 5f63 656c 6c2e 4765 744c 6179 6f75  db_cell.GetLayou
+0000d890: 7428 292e 4765 744c 6179 6572 436f 6c6c  t().GetLayerColl
+0000d8a0: 6563 7469 6f6e 2829 290a 2020 2020 2020  ection()).      
+0000d8b0: 2020 7374 6163 6b75 705f 736f 7572 6365    stackup_source
+0000d8c0: 203d 2073 656c 662e 5f70 6564 622e 6564   = self._pedb.ed
+0000d8d0: 625f 6170 692e 4365 6c6c 2e4c 6179 6572  b_api.Cell.Layer
+0000d8e0: 436f 6c6c 6563 7469 6f6e 2873 656c 662e  Collection(self.
+0000d8f0: 5f70 6564 622e 6c61 796f 7574 2e6c 6179  _pedb.layout.lay
+0000d900: 6572 5f63 6f6c 6c65 6374 696f 6e29 0a0a  er_collection)..
+0000d910: 2020 2020 2020 2020 6966 2070 6c61 6365          if place
+0000d920: 5f6f 6e5f 746f 703a 0a20 2020 2020 2020  _on_top:.       
+0000d930: 2020 2020 2063 656c 6c5f 696e 7374 322e       cell_inst2.
+0000d940: 5365 7450 6c61 6365 6d65 6e74 4c61 7965  SetPlacementLaye
+0000d950: 7228 0a20 2020 2020 2020 2020 2020 2020  r(.             
+0000d960: 2020 206c 6973 7428 7374 6163 6b75 705f     list(stackup_
+0000d970: 7461 7267 6574 2e4c 6179 6572 7328 7365  target.Layers(se
+0000d980: 6c66 2e5f 7065 6462 2e65 6462 5f61 7069  lf._pedb.edb_api
+0000d990: 2e63 656c 6c2e 6c61 7965 725f 7479 7065  .cell.layer_type
+0000d9a0: 5f73 6574 2e53 6967 6e61 6c4c 6179 6572  _set.SignalLayer
+0000d9b0: 5365 7429 295b 305d 0a20 2020 2020 2020  Set))[0].       
+0000d9c0: 2020 2020 2029 0a20 2020 2020 2020 2065       ).        e
+0000d9d0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0000d9e0: 2063 656c 6c5f 696e 7374 322e 5365 7450   cell_inst2.SetP
+0000d9f0: 6c61 6365 6d65 6e74 4c61 7965 7228 0a20  lacementLayer(. 
+0000da00: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+0000da10: 6973 7428 7374 6163 6b75 705f 7461 7267  ist(stackup_targ
+0000da20: 6574 2e4c 6179 6572 7328 7365 6c66 2e5f  et.Layers(self._
+0000da30: 7065 6462 2e65 6462 5f61 7069 2e63 656c  pedb.edb_api.cel
+0000da40: 6c2e 6c61 7965 725f 7479 7065 5f73 6574  l.layer_type_set
+0000da50: 2e53 6967 6e61 6c4c 6179 6572 5365 7429  .SignalLayerSet)
+0000da60: 295b 2d31 5d0a 2020 2020 2020 2020 2020  )[-1].          
+0000da70: 2020 290a 2020 2020 2020 2020 6365 6c6c    ).        cell
+0000da80: 5f69 6e73 7432 2e53 6574 4973 3344 506c  _inst2.SetIs3DPl
+0000da90: 6163 656d 656e 7428 5472 7565 290a 2020  acement(True).  
+0000daa0: 2020 2020 2020 7369 675f 7365 7420 3d20        sig_set = 
+0000dab0: 7365 6c66 2e5f 7065 6462 2e65 6462 5f61  self._pedb.edb_a
+0000dac0: 7069 2e63 656c 6c2e 6c61 7965 725f 7479  pi.cell.layer_ty
+0000dad0: 7065 5f73 6574 2e53 6967 6e61 6c4c 6179  pe_set.SignalLay
+0000dae0: 6572 5365 740a 2020 2020 2020 2020 7265  erSet.        re
+0000daf0: 7320 3d20 7374 6163 6b75 705f 7461 7267  s = stackup_targ
+0000db00: 6574 2e47 6574 546f 7042 6f74 746f 6d53  et.GetTopBottomS
+0000db10: 7461 636b 7570 4c61 7965 7273 2873 6967  tackupLayers(sig
+0000db20: 5f73 6574 290a 2020 2020 2020 2020 7461  _set).        ta
+0000db30: 7267 6574 5f74 6f70 5f65 6c65 7661 7469  rget_top_elevati
+0000db40: 6f6e 203d 2072 6573 5b32 5d0a 2020 2020  on = res[2].    
+0000db50: 2020 2020 7461 7267 6574 5f62 6f74 746f      target_botto
+0000db60: 6d5f 656c 6576 6174 696f 6e20 3d20 7265  m_elevation = re
+0000db70: 735b 345d 0a20 2020 2020 2020 2072 6573  s[4].        res
+0000db80: 5f73 203d 2073 7461 636b 7570 5f73 6f75  _s = stackup_sou
+0000db90: 7263 652e 4765 7454 6f70 426f 7474 6f6d  rce.GetTopBottom
+0000dba0: 5374 6163 6b75 704c 6179 6572 7328 7369  StackupLayers(si
+0000dbb0: 675f 7365 7429 0a20 2020 2020 2020 2073  g_set).        s
+0000dbc0: 6f75 7263 655f 7374 6163 6b5f 746f 705f  ource_stack_top_
+0000dbd0: 656c 6576 6174 696f 6e20 3d20 7265 735f  elevation = res_
+0000dbe0: 735b 325d 0a20 2020 2020 2020 2073 6f75  s[2].        sou
+0000dbf0: 7263 655f 7374 6163 6b5f 626f 745f 656c  rce_stack_bot_el
+0000dc00: 6576 6174 696f 6e20 3d20 7265 735f 735b  evation = res_s[
+0000dc10: 345d 0a0a 2020 2020 2020 2020 6966 2070  4]..        if p
+0000dc20: 6c61 6365 5f6f 6e5f 746f 7020 616e 6420  lace_on_top and 
+0000dc30: 666c 6970 7065 645f 7374 6163 6b75 703a  flipped_stackup:
+0000dc40: 0a20 2020 2020 2020 2020 2020 2065 6c65  .            ele
+0000dc50: 7661 7469 6f6e 203d 2074 6172 6765 745f  vation = target_
+0000dc60: 746f 705f 656c 6576 6174 696f 6e20 2b20  top_elevation + 
+0000dc70: 736f 7572 6365 5f73 7461 636b 5f74 6f70  source_stack_top
+0000dc80: 5f65 6c65 7661 7469 6f6e 0a20 2020 2020  _elevation.     
+0000dc90: 2020 2065 6c69 6620 706c 6163 655f 6f6e     elif place_on
+0000dca0: 5f74 6f70 3a0a 2020 2020 2020 2020 2020  _top:.          
+0000dcb0: 2020 656c 6576 6174 696f 6e20 3d20 7461    elevation = ta
+0000dcc0: 7267 6574 5f74 6f70 5f65 6c65 7661 7469  rget_top_elevati
+0000dcd0: 6f6e 202d 2073 6f75 7263 655f 7374 6163  on - source_stac
+0000dce0: 6b5f 626f 745f 656c 6576 6174 696f 6e0a  k_bot_elevation.
+0000dcf0: 2020 2020 2020 2020 656c 6966 2066 6c69          elif fli
+0000dd00: 7070 6564 5f73 7461 636b 7570 3a0a 2020  pped_stackup:.  
+0000dd10: 2020 2020 2020 2020 2020 656c 6576 6174            elevat
+0000dd20: 696f 6e20 3d20 7461 7267 6574 5f62 6f74  ion = target_bot
+0000dd30: 746f 6d5f 656c 6576 6174 696f 6e20 2b20  tom_elevation + 
+0000dd40: 736f 7572 6365 5f73 7461 636b 5f62 6f74  source_stack_bot
+0000dd50: 5f65 6c65 7661 7469 6f6e 0a20 2020 2020  _elevation.     
+0000dd60: 2020 2020 2020 2073 6f6c 6465 725f 6865         solder_he
+0000dd70: 6967 6874 203d 202d 736f 6c64 6572 5f68  ight = -solder_h
+0000dd80: 6569 6768 740a 2020 2020 2020 2020 656c  eight.        el
+0000dd90: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0000dda0: 656c 6576 6174 696f 6e20 3d20 7461 7267  elevation = targ
+0000ddb0: 6574 5f62 6f74 746f 6d5f 656c 6576 6174  et_bottom_elevat
+0000ddc0: 696f 6e20 2d20 736f 7572 6365 5f73 7461  ion - source_sta
+0000ddd0: 636b 5f74 6f70 5f65 6c65 7661 7469 6f6e  ck_top_elevation
+0000dde0: 0a20 2020 2020 2020 2020 2020 2073 6f6c  .            sol
+0000ddf0: 6465 725f 6865 6967 6874 203d 202d 736f  der_height = -so
+0000de00: 6c64 6572 5f68 6569 6768 740a 0a20 2020  lder_height..   
+0000de10: 2020 2020 2068 5f73 7461 636b 7570 203d       h_stackup =
+0000de20: 2073 656c 662e 5f65 6462 5f76 616c 7565   self._edb_value
+0000de30: 2865 6c65 7661 7469 6f6e 202b 2073 6f6c  (elevation + sol
+0000de40: 6465 725f 6865 6967 6874 290a 0a20 2020  der_height)..   
+0000de50: 2020 2020 207a 6572 6f5f 6461 7461 203d       zero_data =
+0000de60: 2073 656c 662e 5f65 6462 5f76 616c 7565   self._edb_value
+0000de70: 2830 2e30 290a 2020 2020 2020 2020 6f6e  (0.0).        on
+0000de80: 655f 6461 7461 203d 2073 656c 662e 5f65  e_data = self._e
+0000de90: 6462 5f76 616c 7565 2831 2e30 290a 2020  db_value(1.0).  
+0000dea0: 2020 2020 2020 706f 696e 7433 645f 7420        point3d_t 
+0000deb0: 3d20 7365 6c66 2e5f 7065 6462 2e70 6f69  = self._pedb.poi
+0000dec0: 6e74 5f33 6428 5f6f 6666 7365 745f 782c  nt_3d(_offset_x,
+0000ded0: 205f 6f66 6673 6574 5f79 2c20 685f 7374   _offset_y, h_st
+0000dee0: 6163 6b75 7029 0a20 2020 2020 2020 2070  ackup).        p
+0000def0: 6f69 6e74 5f6c 6f63 203d 2073 656c 662e  oint_loc = self.
+0000df00: 5f70 6564 622e 706f 696e 745f 3364 287a  _pedb.point_3d(z
+0000df10: 6572 6f5f 6461 7461 2c20 7a65 726f 5f64  ero_data, zero_d
+0000df20: 6174 612c 207a 6572 6f5f 6461 7461 290a  ata, zero_data).
+0000df30: 2020 2020 2020 2020 706f 696e 745f 6672          point_fr
+0000df40: 6f6d 203d 2073 656c 662e 5f70 6564 622e  om = self._pedb.
+0000df50: 706f 696e 745f 3364 286f 6e65 5f64 6174  point_3d(one_dat
+0000df60: 612c 207a 6572 6f5f 6461 7461 2c20 7a65  a, zero_data, ze
+0000df70: 726f 5f64 6174 6129 0a20 2020 2020 2020  ro_data).       
+0000df80: 2070 6f69 6e74 5f74 6f20 3d20 7365 6c66   point_to = self
+0000df90: 2e5f 7065 6462 2e70 6f69 6e74 5f33 6428  ._pedb.point_3d(
+0000dfa0: 6d61 7468 2e63 6f73 285f 616e 676c 6529  math.cos(_angle)
+0000dfb0: 2c20 2d31 202a 206d 6174 682e 7369 6e28  , -1 * math.sin(
+0000dfc0: 5f61 6e67 6c65 292c 207a 6572 6f5f 6461  _angle), zero_da
+0000dfd0: 7461 290a 2020 2020 2020 2020 6365 6c6c  ta).        cell
+0000dfe0: 5f69 6e73 7432 2e53 6574 3344 5472 616e  _inst2.Set3DTran
+0000dff0: 7366 6f72 6d61 7469 6f6e 2870 6f69 6e74  sformation(point
+0000e000: 5f6c 6f63 2c20 706f 696e 745f 6672 6f6d  _loc, point_from
+0000e010: 2c20 706f 696e 745f 746f 2c20 726f 7461  , point_to, rota
+0000e020: 7469 6f6e 2c20 706f 696e 7433 645f 7429  tion, point3d_t)
+0000e030: 0a20 2020 2020 2020 2073 656c 662e 7265  .        self.re
+0000e040: 6672 6573 685f 6c61 7965 725f 636f 6c6c  fresh_layer_coll
+0000e050: 6563 7469 6f6e 2829 0a20 2020 2020 2020  ection().       
+0000e060: 2072 6574 7572 6e20 5472 7565 0a0a 2020   return True..  
+0000e070: 2020 4070 7965 6462 5f66 756e 6374 696f    @pyedb_functio
+0000e080: 6e5f 6861 6e64 6c65 7228 290a 2020 2020  n_handler().    
+0000e090: 6465 6620 706c 6163 655f 696e 7374 616e  def place_instan
+0000e0a0: 6365 280a 2020 2020 2020 2020 7365 6c66  ce(.        self
+0000e0b0: 2c0a 2020 2020 2020 2020 636f 6d70 6f6e  ,.        compon
+0000e0c0: 656e 745f 6564 622c 0a20 2020 2020 2020  ent_edb,.       
+0000e0d0: 2061 6e67 6c65 3d30 2e30 2c0a 2020 2020   angle=0.0,.    
+0000e0e0: 2020 2020 6f66 6673 6574 5f78 3d30 2e30      offset_x=0.0
+0000e0f0: 2c0a 2020 2020 2020 2020 6f66 6673 6574  ,.        offset
+0000e100: 5f79 3d30 2e30 2c0a 2020 2020 2020 2020  _y=0.0,.        
+0000e110: 6f66 6673 6574 5f7a 3d30 2e30 2c0a 2020  offset_z=0.0,.  
+0000e120: 2020 2020 2020 666c 6970 7065 645f 7374        flipped_st
+0000e130: 6163 6b75 703d 5472 7565 2c0a 2020 2020  ackup=True,.    
+0000e140: 2020 2020 706c 6163 655f 6f6e 5f74 6f70      place_on_top
+0000e150: 3d54 7275 652c 0a20 2020 2020 2020 2073  =True,.        s
+0000e160: 6f6c 6465 725f 6865 6967 6874 3d30 2c0a  older_height=0,.
+0000e170: 2020 2020 293a 0a20 2020 2020 2020 2022      ):.        "
+0000e180: 2222 506c 6163 6520 6375 7272 656e 7420  ""Place current 
+0000e190: 4365 6c6c 2069 6e74 6f20 616e 6f74 6865  Cell into anothe
+0000e1a0: 7220 6365 6c6c 2075 7369 6e67 2033 6420  r cell using 3d 
+0000e1b0: 706c 6163 656d 656e 7420 6d65 7468 6f64  placement method
+0000e1c0: 2e0a 2020 2020 2020 2020 466c 6970 2074  ..        Flip t
+0000e1d0: 6865 2063 7572 7265 6e74 206c 6179 6572  he current layer
+0000e1e0: 2073 7461 636b 7570 206f 6620 6120 6c61   stackup of a la
+0000e1f0: 796f 7574 2069 6620 7265 7175 6573 7465  yout if requeste
+0000e200: 642e 2054 7261 6e73 666f 726d 2070 6172  d. Transform par
+0000e210: 616d 6574 6572 7320 6375 7272 656e 746c  ameters currentl
+0000e220: 7920 6e6f 7420 7375 7070 6f72 7465 642e  y not supported.
+0000e230: 0a0a 2020 2020 2020 2020 5061 7261 6d65  ..        Parame
+0000e240: 7465 7273 0a20 2020 2020 2020 202d 2d2d  ters.        ---
+0000e250: 2d2d 2d2d 2d2d 2d0a 2020 2020 2020 2020  -------.        
+0000e260: 636f 6d70 6f6e 656e 745f 6564 6220 3a20  component_edb : 
+0000e270: 4564 620a 2020 2020 2020 2020 2020 2020  Edb.            
+0000e280: 4365 6c6c 2074 6f20 706c 6163 6520 696e  Cell to place in
+0000e290: 2074 6865 2063 7572 7265 6e74 206c 6179   the current lay
+0000e2a0: 6f75 742e 0a20 2020 2020 2020 2061 6e67  out..        ang
+0000e2b0: 6c65 203a 2064 6f75 626c 652c 206f 7074  le : double, opt
+0000e2c0: 696f 6e61 6c0a 2020 2020 2020 2020 2020  ional.          
+0000e2d0: 2020 5468 6520 726f 7461 7469 6f6e 2061    The rotation a
+0000e2e0: 6e67 6c65 2061 7070 6c69 6564 206f 6e20  ngle applied on 
+0000e2f0: 7468 6520 6465 7369 676e 2e0a 2020 2020  the design..    
+0000e300: 2020 2020 6f66 6673 6574 5f78 203a 2064      offset_x : d
+0000e310: 6f75 626c 652c 206f 7074 696f 6e61 6c0a  ouble, optional.
+0000e320: 2020 2020 2020 2020 2020 2020 5468 6520              The 
+0000e330: 7820 6f66 6673 6574 2076 616c 7565 2e0a  x offset value..
+0000e340: 2020 2020 2020 2020 2020 2020 5468 6520              The 
+0000e350: 6465 6661 756c 7420 7661 6c75 6520 6973  default value is
+0000e360: 2060 6030 2e30 6060 2e0a 2020 2020 2020   ``0.0``..      
+0000e370: 2020 6f66 6673 6574 5f79 203a 2064 6f75    offset_y : dou
+0000e380: 626c 652c 206f 7074 696f 6e61 6c0a 2020  ble, optional.  
+0000e390: 2020 2020 2020 2020 2020 5468 6520 7920            The y 
+0000e3a0: 6f66 6673 6574 2076 616c 7565 2e0a 2020  offset value..  
+0000e3b0: 2020 2020 2020 2020 2020 5468 6520 6465            The de
+0000e3c0: 6661 756c 7420 7661 6c75 6520 6973 2060  fault value is `
+0000e3d0: 6030 2e30 6060 2e0a 2020 2020 2020 2020  `0.0``..        
+0000e3e0: 6f66 6673 6574 5f7a 203a 2064 6f75 626c  offset_z : doubl
+0000e3f0: 652c 206f 7074 696f 6e61 6c0a 2020 2020  e, optional.    
+0000e400: 2020 2020 2020 2020 5468 6520 7a20 6f66          The z of
+0000e410: 6673 6574 2076 616c 7565 2e20 2869 2e65  fset value. (i.e
+0000e420: 2e20 656c 6576 6174 696f 6e20 6f66 6673  . elevation offs
+0000e430: 6574 2066 6f72 2070 6c61 6365 6d65 6e74  et for placement
+0000e440: 2072 656c 6174 6976 6520 746f 2074 6865   relative to the
+0000e450: 2074 6f70 206c 6179 6572 2063 6f6e 6475   top layer condu
+0000e460: 6374 6f72 292e 0a20 2020 2020 2020 2020  ctor)..         
+0000e470: 2020 2054 6865 2064 6566 6175 6c74 2076     The default v
+0000e480: 616c 7565 2069 7320 6060 302e 3060 602c  alue is ``0.0``,
+0000e490: 2077 6869 6368 2070 6c61 6365 7320 7468   which places th
+0000e4a0: 6520 6365 6c6c 206c 6179 6f75 7420 6f6e  e cell layout on
+0000e4b0: 2074 6f70 206f 6620 7468 6520 746f 7020   top of the top 
+0000e4c0: 636f 6e64 7563 746f 720a 2020 2020 2020  conductor.      
+0000e4d0: 2020 2020 2020 6c61 7965 7220 6f66 2074        layer of t
+0000e4e0: 6865 2074 6172 6765 7420 4544 422e 0a20  he target EDB.. 
+0000e4f0: 2020 2020 2020 2066 6c69 7070 6564 5f73         flipped_s
+0000e500: 7461 636b 7570 203a 2062 6f6f 6c2c 206f  tackup : bool, o
+0000e510: 7074 696f 6e61 6c0a 2020 2020 2020 2020  ptional.        
+0000e520: 2020 2020 4569 7468 6572 2069 6620 7468      Either if th
+0000e530: 6520 6375 7272 656e 7420 6c61 796f 7574  e current layout
+0000e540: 2069 7320 696e 7665 7274 6564 2e0a 2020   is inverted..  
+0000e550: 2020 2020 2020 2020 2020 4966 2060 5472            If `Tr
+0000e560: 7565 6020 616e 6420 706c 6163 655f 6f6e  ue` and place_on
+0000e570: 5f74 6f70 2069 7320 6054 7275 6560 2074  _top is `True` t
+0000e580: 6865 2073 7461 636b 7570 2077 696c 6c20  he stackup will 
+0000e590: 6265 2066 6c69 7070 6564 2062 6566 6f72  be flipped befor
+0000e5a0: 6520 7468 6520 6d65 7267 652e 0a20 2020  e the merge..   
+0000e5b0: 2020 2020 2070 6c61 6365 5f6f 6e5f 746f       place_on_to
+0000e5c0: 7020 3a20 626f 6f6c 2c20 6f70 7469 6f6e  p : bool, option
+0000e5d0: 616c 0a20 2020 2020 2020 2020 2020 2045  al.            E
+0000e5e0: 6974 6865 7220 6966 2070 6c61 6365 2074  ither if place t
+0000e5f0: 6865 2063 6f6d 706f 6e65 6e74 5f65 6462  he component_edb
+0000e600: 206c 6179 6f75 7420 6f6e 2054 6f70 206f   layout on Top o
+0000e610: 7220 426f 7474 6f6d 206f 6620 6465 7374  r Bottom of dest
+0000e620: 696e 6174 696f 6e20 4c61 796f 7574 2e0a  ination Layout..
+0000e630: 2020 2020 2020 2020 736f 6c64 6572 5f68          solder_h
+0000e640: 6569 6768 7420 3a20 666c 6f61 742c 206f  eight : float, o
+0000e650: 7074 696f 6e61 6c0a 2020 2020 2020 2020  ptional.        
+0000e660: 2020 2020 536f 6c64 6572 2042 616c 6c20      Solder Ball 
+0000e670: 6f72 2042 756d 7073 2065 6967 6874 2e0a  or Bumps eight..
+0000e680: 2020 2020 2020 2020 2020 2020 5468 6973              This
+0000e690: 2076 616c 7565 2077 696c 6c20 6265 2061   value will be a
+0000e6a0: 6464 6564 2074 6f20 7468 6520 656c 6576  dded to the elev
+0000e6b0: 6174 696f 6e20 746f 2061 6c69 676e 2074  ation to align t
+0000e6c0: 6865 2074 776f 206c 6179 6f75 7473 2e0a  he two layouts..
+0000e6d0: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
+0000e6e0: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+0000e6f0: 0a20 2020 2020 2020 2062 6f6f 6c0a 2020  .        bool.  
+0000e700: 2020 2020 2020 2020 2020 6060 5472 7565            ``True
+0000e710: 6060 2077 6865 6e20 7375 6363 6565 6420  `` when succeed 
+0000e720: 6060 4661 6c73 6560 6020 6966 206e 6f74  ``False`` if not
+0000e730: 2e0a 0a20 2020 2020 2020 2045 7861 6d70  ...        Examp
+0000e740: 6c65 730a 2020 2020 2020 2020 2d2d 2d2d  les.        ----
+0000e750: 2d2d 2d2d 0a20 2020 2020 2020 203e 3e3e  ----.        >>>
+0000e760: 2065 6462 3120 3d20 4564 6228 6564 6270   edb1 = Edb(edbp
+0000e770: 6174 683d 7461 7267 6574 6669 6c65 312c  ath=targetfile1,
+0000e780: 2020 6564 6276 6572 7369 6f6e 3d22 3230    edbversion="20
+0000e790: 3231 2e32 2229 0a20 2020 2020 2020 203e  21.2").        >
+0000e7a0: 3e3e 2065 6462 3220 3d20 4564 6228 6564  >> edb2 = Edb(ed
+0000e7b0: 6270 6174 683d 7461 7267 6574 6669 6c65  bpath=targetfile
+0000e7c0: 322c 2065 6462 7665 7273 696f 6e3d 2232  2, edbversion="2
+0000e7d0: 3032 312e 3222 290a 2020 2020 2020 2020  021.2").        
+0000e7e0: 3e3e 3e20 686f 7374 696e 675f 636d 7020  >>> hosting_cmp 
+0000e7f0: 3d20 6564 6231 2e63 6f6d 706f 6e65 6e74  = edb1.component
+0000e800: 732e 6765 745f 636f 6d70 6f6e 656e 745f  s.get_component_
+0000e810: 6279 5f6e 616d 6528 2255 3130 3022 290a  by_name("U100").
+0000e820: 2020 2020 2020 2020 3e3e 3e20 6d6f 756e          >>> moun
+0000e830: 7465 645f 636d 7020 3d20 6564 6232 2e63  ted_cmp = edb2.c
+0000e840: 6f6d 706f 6e65 6e74 732e 6765 745f 636f  omponents.get_co
+0000e850: 6d70 6f6e 656e 745f 6279 5f6e 616d 6528  mponent_by_name(
+0000e860: 2242 4741 2229 0a20 2020 2020 2020 203e  "BGA").        >
+0000e870: 3e3e 2065 6462 312e 7374 6163 6b75 702e  >> edb1.stackup.
+0000e880: 706c 6163 655f 696e 7374 616e 6365 2865  place_instance(e
+0000e890: 6462 322c 2061 6e67 6c65 3d30 2e30 2c20  db2, angle=0.0, 
+0000e8a0: 6f66 6673 6574 5f78 3d22 316d 6d22 2c0a  offset_x="1mm",.
+0000e8b0: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
+0000e8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e8d0: 2020 2020 2020 2020 2020 2020 2020 6f66                of
+0000e8e0: 6673 6574 5f79 3d22 326d 6d22 2c20 666c  fset_y="2mm", fl
+0000e8f0: 6970 7065 645f 7374 6163 6b75 703d 4661  ipped_stackup=Fa
+0000e900: 6c73 652c 2070 6c61 6365 5f6f 6e5f 746f  lse, place_on_to
+0000e910: 703d 5472 7565 2c0a 2020 2020 2020 2020  p=True,.        
+0000e920: 2e2e 2e20 2020 2020 2020 2020 2020 2020  ...             
+0000e930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e940: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+0000e950: 2222 220a 2020 2020 2020 2020 5f61 6e67  """.        _ang
+0000e960: 6c65 203d 2061 6e67 6c65 202a 206d 6174  le = angle * mat
+0000e970: 682e 7069 202f 2031 3830 2e30 0a0a 2020  h.pi / 180.0..  
+0000e980: 2020 2020 2020 6966 2073 6f6c 6465 725f        if solder_
+0000e990: 6865 6967 6874 203c 3d20 303a 0a20 2020  height <= 0:.   
+0000e9a0: 2020 2020 2020 2020 2069 6620 666c 6970           if flip
+0000e9b0: 7065 645f 7374 6163 6b75 7020 616e 6420  ped_stackup and 
+0000e9c0: 6e6f 7420 706c 6163 655f 6f6e 5f74 6f70  not place_on_top
+0000e9d0: 206f 7220 2870 6c61 6365 5f6f 6e5f 746f   or (place_on_to
+0000e9e0: 7020 616e 6420 6e6f 7420 666c 6970 7065  p and not flippe
+0000e9f0: 645f 7374 6163 6b75 7029 3a0a 2020 2020  d_stackup):.    
+0000ea00: 2020 2020 2020 2020 2020 2020 6d69 6e69              mini
+0000ea10: 6d75 6d5f 656c 6576 6174 696f 6e20 3d20  mum_elevation = 
+0000ea20: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
+0000ea30: 2020 2020 206c 6179 6572 735f 6672 6f6d       layers_from
+0000ea40: 5f74 6865 5f62 6f74 746f 6d20 3d20 736f  _the_bottom = so
+0000ea50: 7274 6564 280a 2020 2020 2020 2020 2020  rted(.          
+0000ea60: 2020 2020 2020 2020 2020 636f 6d70 6f6e            compon
+0000ea70: 656e 745f 6564 622e 7374 6163 6b75 702e  ent_edb.stackup.
+0000ea80: 7369 676e 616c 5f6c 6179 6572 732e 7661  signal_layers.va
+0000ea90: 6c75 6573 2829 2c20 6b65 793d 6c61 6d62  lues(), key=lamb
+0000eaa0: 6461 206c 6179 3a20 6c61 792e 7570 7065  da lay: lay.uppe
+0000eab0: 725f 656c 6576 6174 696f 6e0a 2020 2020  r_elevation.    
+0000eac0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+0000ead0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+0000eae0: 7220 6c61 7920 696e 206c 6179 6572 735f  r lay in layers_
+0000eaf0: 6672 6f6d 5f74 6865 5f62 6f74 746f 6d3a  from_the_bottom:
+0000eb00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000eb10: 2020 2020 2069 6620 6d69 6e69 6d75 6d5f       if minimum_
+0000eb20: 656c 6576 6174 696f 6e20 6973 204e 6f6e  elevation is Non
+0000eb30: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0000eb40: 2020 2020 2020 2020 2020 206d 696e 696d             minim
+0000eb50: 756d 5f65 6c65 7661 7469 6f6e 203d 206c  um_elevation = l
+0000eb60: 6179 2e6c 6f77 6572 5f65 6c65 7661 7469  ay.lower_elevati
+0000eb70: 6f6e 0a20 2020 2020 2020 2020 2020 2020  on.             
+0000eb80: 2020 2020 2020 2065 6c69 6620 6c61 792e         elif lay.
+0000eb90: 6c6f 7765 725f 656c 6576 6174 696f 6e20  lower_elevation 
+0000eba0: 3e20 6d69 6e69 6d75 6d5f 656c 6576 6174  > minimum_elevat
+0000ebb0: 696f 6e3a 0a20 2020 2020 2020 2020 2020  ion:.           
+0000ebc0: 2020 2020 2020 2020 2020 2020 2062 7265               bre
+0000ebd0: 616b 0a20 2020 2020 2020 2020 2020 2020  ak.             
+0000ebe0: 2020 2020 2020 206c 6179 5f73 6f6c 6465         lay_solde
+0000ebf0: 725f 6865 6967 6874 203d 2063 6f6d 706f  r_height = compo
+0000ec00: 6e65 6e74 5f65 6462 2e73 7461 636b 7570  nent_edb.stackup
+0000ec10: 2e5f 6765 745f 736f 6c64 6572 5f68 6569  ._get_solder_hei
+0000ec20: 6768 7428 6c61 792e 6e61 6d65 290a 2020  ght(lay.name).  
+0000ec30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ec40: 2020 736f 6c64 6572 5f68 6569 6768 7420    solder_height 
+0000ec50: 3d20 6d61 7828 6c61 795f 736f 6c64 6572  = max(lay_solder
+0000ec60: 5f68 6569 6768 742c 2073 6f6c 6465 725f  _height, solder_
+0000ec70: 6865 6967 6874 290a 2020 2020 2020 2020  height).        
+0000ec80: 2020 2020 2020 2020 2020 2020 636f 6d70              comp
+0000ec90: 6f6e 656e 745f 6564 622e 7374 6163 6b75  onent_edb.stacku
+0000eca0: 702e 5f72 656d 6f76 655f 736f 6c64 6572  p._remove_solder
+0000ecb0: 5f70 6563 286c 6179 2e6e 616d 6529 0a20  _pec(lay.name). 
+0000ecc0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+0000ecd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000ece0: 206d 6178 696d 756d 5f65 6c65 7661 7469   maximum_elevati
+0000ecf0: 6f6e 203d 204e 6f6e 650a 2020 2020 2020  on = None.      
+0000ed00: 2020 2020 2020 2020 2020 6c61 7965 7273            layers
+0000ed10: 5f66 726f 6d5f 7468 655f 746f 7020 3d20  _from_the_top = 
+0000ed20: 736f 7274 6564 280a 2020 2020 2020 2020  sorted(.        
+0000ed30: 2020 2020 2020 2020 2020 2020 636f 6d70              comp
+0000ed40: 6f6e 656e 745f 6564 622e 7374 6163 6b75  onent_edb.stacku
+0000ed50: 702e 7369 676e 616c 5f6c 6179 6572 732e  p.signal_layers.
+0000ed60: 7661 6c75 6573 2829 2c20 6b65 793d 6c61  values(), key=la
+0000ed70: 6d62 6461 206c 6179 3a20 2d6c 6179 2e75  mbda lay: -lay.u
+0000ed80: 7070 6572 5f65 6c65 7661 7469 6f6e 0a20  pper_elevation. 
+0000ed90: 2020 2020 2020 2020 2020 2020 2020 2029                 )
 0000eda0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000edb0: 2020 2020 2073 6f6c 6465 725f 6865 6967       solder_heig
-0000edc0: 6874 203d 206d 6178 286c 6179 5f73 6f6c  ht = max(lay_sol
-0000edd0: 6465 725f 6865 6967 6874 2c20 736f 6c64  der_height, sold
-0000ede0: 6572 5f68 6569 6768 7429 0a20 2020 2020  er_height).     
-0000edf0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-0000ee00: 6f6d 706f 6e65 6e74 5f65 6462 2e73 7461  omponent_edb.sta
-0000ee10: 636b 7570 2e5f 7265 6d6f 7665 5f73 6f6c  ckup._remove_sol
-0000ee20: 6465 725f 7065 6328 6c61 792e 6e61 6d65  der_pec(lay.name
-0000ee30: 290a 2020 2020 2020 2020 6564 625f 6365  ).        edb_ce
-0000ee40: 6c6c 203d 2063 6f6d 706f 6e65 6e74 5f65  ll = component_e
-0000ee50: 6462 2e61 6374 6976 655f 6365 6c6c 0a20  db.active_cell. 
-0000ee60: 2020 2020 2020 205f 6f66 6673 6574 5f78         _offset_x
-0000ee70: 203d 2073 656c 662e 5f65 6462 5f76 616c   = self._edb_val
-0000ee80: 7565 286f 6666 7365 745f 7829 0a20 2020  ue(offset_x).   
-0000ee90: 2020 2020 205f 6f66 6673 6574 5f79 203d       _offset_y =
-0000eea0: 2073 656c 662e 5f65 6462 5f76 616c 7565   self._edb_value
-0000eeb0: 286f 6666 7365 745f 7929 0a0a 2020 2020  (offset_y)..    
-0000eec0: 2020 2020 6966 2065 6462 5f63 656c 6c2e      if edb_cell.
-0000eed0: 4765 744e 616d 6528 2920 6e6f 7420 696e  GetName() not in
-0000eee0: 2073 656c 662e 5f70 6564 622e 6365 6c6c   self._pedb.cell
-0000eef0: 5f6e 616d 6573 3a0a 2020 2020 2020 2020  _names:.        
-0000ef00: 2020 2020 6c69 7374 5f63 656c 6c73 203d      list_cells =
-0000ef10: 2073 656c 662e 5f70 6564 622e 636f 7079   self._pedb.copy
-0000ef20: 5f63 656c 6c73 2865 6462 5f63 656c 6c2e  _cells(edb_cell.
-0000ef30: 6170 695f 6f62 6a65 6374 290a 2020 2020  api_object).    
-0000ef40: 2020 2020 2020 2020 6564 625f 6365 6c6c          edb_cell
-0000ef50: 203d 206c 6973 745f 6365 6c6c 735b 305d   = list_cells[0]
-0000ef60: 0a20 2020 2020 2020 2066 6f72 2063 656c  .        for cel
-0000ef70: 6c20 696e 206c 6973 7428 7365 6c66 2e5f  l in list(self._
-0000ef80: 7065 6462 2e61 6374 6976 655f 6462 2e43  pedb.active_db.C
-0000ef90: 6972 6375 6974 4365 6c6c 7329 3a0a 2020  ircuitCells):.  
-0000efa0: 2020 2020 2020 2020 2020 6966 2063 656c            if cel
-0000efb0: 6c2e 4765 744e 616d 6528 2920 3d3d 2065  l.GetName() == e
-0000efc0: 6462 5f63 656c 6c2e 4765 744e 616d 6528  db_cell.GetName(
-0000efd0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0000efe0: 2020 2065 6462 5f63 656c 6c20 3d20 6365     edb_cell = ce
-0000eff0: 6c6c 0a20 2020 2020 2020 2023 204b 6565  ll.        # Kee
-0000f000: 7020 4365 6c6c 2049 6e64 6570 656e 6465  p Cell Independe
-0000f010: 6e74 0a20 2020 2020 2020 2065 6462 5f63  nt.        edb_c
-0000f020: 656c 6c2e 5365 7442 6c61 636b 426f 7828  ell.SetBlackBox(
-0000f030: 5472 7565 290a 2020 2020 2020 2020 726f  True).        ro
-0000f040: 7461 7469 6f6e 203d 2073 656c 662e 5f65  tation = self._e
-0000f050: 6462 5f76 616c 7565 2830 2e30 290a 2020  db_value(0.0).  
-0000f060: 2020 2020 2020 6966 2066 6c69 7070 6564        if flipped
-0000f070: 5f73 7461 636b 7570 3a0a 2020 2020 2020  _stackup:.      
-0000f080: 2020 2020 2020 726f 7461 7469 6f6e 203d        rotation =
-0000f090: 2073 656c 662e 5f65 6462 5f76 616c 7565   self._edb_value
-0000f0a0: 286d 6174 682e 7069 290a 0a20 2020 2020  (math.pi)..     
-0000f0b0: 2020 205f 6f66 6673 6574 5f78 203d 2073     _offset_x = s
-0000f0c0: 656c 662e 5f65 6462 5f76 616c 7565 286f  elf._edb_value(o
-0000f0d0: 6666 7365 745f 7829 0a20 2020 2020 2020  ffset_x).       
-0000f0e0: 205f 6f66 6673 6574 5f79 203d 2073 656c   _offset_y = sel
-0000f0f0: 662e 5f65 6462 5f76 616c 7565 286f 6666  f._edb_value(off
-0000f100: 7365 745f 7929 0a0a 2020 2020 2020 2020  set_y)..        
-0000f110: 696e 7374 616e 6365 5f6e 616d 6520 3d20  instance_name = 
-0000f120: 6765 6e65 7261 7465 5f75 6e69 7175 655f  generate_unique_
-0000f130: 6e61 6d65 2865 6462 5f63 656c 6c2e 4765  name(edb_cell.Ge
-0000f140: 744e 616d 6528 292c 206e 3d32 290a 0a20  tName(), n=2).. 
-0000f150: 2020 2020 2020 2063 656c 6c5f 696e 7374         cell_inst
-0000f160: 3220 3d20 7365 6c66 2e5f 7065 6462 2e65  2 = self._pedb.e
-0000f170: 6462 5f61 7069 2e63 656c 6c2e 6869 6572  db_api.cell.hier
-0000f180: 6172 6368 792e 6365 6c6c 5f69 6e73 7461  archy.cell_insta
-0000f190: 6e63 652e 4372 6561 7465 280a 2020 2020  nce.Create(.    
-0000f1a0: 2020 2020 2020 2020 7365 6c66 2e5f 7065          self._pe
-0000f1b0: 6462 2e61 6374 6976 655f 6c61 796f 7574  db.active_layout
-0000f1c0: 2c20 696e 7374 616e 6365 5f6e 616d 652c  , instance_name,
-0000f1d0: 2065 6462 5f63 656c 6c2e 4765 744c 6179   edb_cell.GetLay
-0000f1e0: 6f75 7428 290a 2020 2020 2020 2020 290a  out().        ).
-0000f1f0: 0a20 2020 2020 2020 2073 7461 636b 7570  .        stackup
-0000f200: 5f73 6f75 7263 6520 3d20 7365 6c66 2e5f  _source = self._
-0000f210: 7065 6462 2e65 6462 5f61 7069 2e43 656c  pedb.edb_api.Cel
-0000f220: 6c2e 4c61 7965 7243 6f6c 6c65 6374 696f  l.LayerCollectio
-0000f230: 6e28 6564 625f 6365 6c6c 2e47 6574 4c61  n(edb_cell.GetLa
-0000f240: 796f 7574 2829 2e47 6574 4c61 7965 7243  yout().GetLayerC
-0000f250: 6f6c 6c65 6374 696f 6e28 2929 0a20 2020  ollection()).   
-0000f260: 2020 2020 2073 7461 636b 7570 5f74 6172       stackup_tar
-0000f270: 6765 7420 3d20 7365 6c66 2e5f 7065 6462  get = self._pedb
-0000f280: 2e65 6462 5f61 7069 2e43 656c 6c2e 4c61  .edb_api.Cell.La
-0000f290: 7965 7243 6f6c 6c65 6374 696f 6e28 7365  yerCollection(se
-0000f2a0: 6c66 2e5f 7065 6462 2e6c 6179 6f75 742e  lf._pedb.layout.
-0000f2b0: 6c61 7965 725f 636f 6c6c 6563 7469 6f6e  layer_collection
-0000f2c0: 290a 0a20 2020 2020 2020 2069 6620 706c  )..        if pl
-0000f2d0: 6163 655f 6f6e 5f74 6f70 3a0a 2020 2020  ace_on_top:.    
-0000f2e0: 2020 2020 2020 2020 6365 6c6c 5f69 6e73          cell_ins
-0000f2f0: 7432 2e53 6574 506c 6163 656d 656e 744c  t2.SetPlacementL
-0000f300: 6179 6572 280a 2020 2020 2020 2020 2020  ayer(.          
-0000f310: 2020 2020 2020 6c69 7374 2873 7461 636b        list(stack
-0000f320: 7570 5f74 6172 6765 742e 4c61 7965 7273  up_target.Layers
-0000f330: 2873 656c 662e 5f70 6564 622e 6564 625f  (self._pedb.edb_
-0000f340: 6170 692e 6365 6c6c 2e6c 6179 6572 5f74  api.cell.layer_t
-0000f350: 7970 655f 7365 742e 5369 676e 616c 4c61  ype_set.SignalLa
-0000f360: 7965 7253 6574 2929 5b30 5d0a 2020 2020  yerSet))[0].    
-0000f370: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-0000f380: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0000f390: 2020 2020 6365 6c6c 5f69 6e73 7432 2e53      cell_inst2.S
-0000f3a0: 6574 506c 6163 656d 656e 744c 6179 6572  etPlacementLayer
-0000f3b0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-0000f3c0: 2020 6c69 7374 2873 7461 636b 7570 5f74    list(stackup_t
-0000f3d0: 6172 6765 742e 4c61 7965 7273 2873 656c  arget.Layers(sel
-0000f3e0: 662e 5f70 6564 622e 6564 625f 6170 692e  f._pedb.edb_api.
-0000f3f0: 6365 6c6c 2e6c 6179 6572 5f74 7970 655f  cell.layer_type_
-0000f400: 7365 742e 5369 676e 616c 4c61 7965 7253  set.SignalLayerS
-0000f410: 6574 2929 5b2d 315d 0a20 2020 2020 2020  et))[-1].       
-0000f420: 2020 2020 2029 0a20 2020 2020 2020 2063       ).        c
-0000f430: 656c 6c5f 696e 7374 322e 5365 7449 7333  ell_inst2.SetIs3
-0000f440: 4450 6c61 6365 6d65 6e74 2854 7275 6529  DPlacement(True)
-0000f450: 0a20 2020 2020 2020 2073 6967 5f73 6574  .        sig_set
-0000f460: 203d 2073 656c 662e 5f70 6564 622e 6564   = self._pedb.ed
-0000f470: 625f 6170 692e 6365 6c6c 2e6c 6179 6572  b_api.cell.layer
-0000f480: 5f74 7970 655f 7365 742e 5369 676e 616c  _type_set.Signal
-0000f490: 4c61 7965 7253 6574 0a20 2020 2020 2020  LayerSet.       
-0000f4a0: 2072 6573 203d 2073 7461 636b 7570 5f74   res = stackup_t
-0000f4b0: 6172 6765 742e 4765 7454 6f70 426f 7474  arget.GetTopBott
-0000f4c0: 6f6d 5374 6163 6b75 704c 6179 6572 7328  omStackupLayers(
-0000f4d0: 7369 675f 7365 7429 0a20 2020 2020 2020  sig_set).       
-0000f4e0: 2074 6172 6765 745f 746f 705f 656c 6576   target_top_elev
-0000f4f0: 6174 696f 6e20 3d20 7265 735b 325d 0a20  ation = res[2]. 
-0000f500: 2020 2020 2020 2074 6172 6765 745f 626f         target_bo
-0000f510: 7474 6f6d 5f65 6c65 7661 7469 6f6e 203d  ttom_elevation =
-0000f520: 2072 6573 5b34 5d0a 2020 2020 2020 2020   res[4].        
-0000f530: 7265 735f 7320 3d20 7374 6163 6b75 705f  res_s = stackup_
-0000f540: 736f 7572 6365 2e47 6574 546f 7042 6f74  source.GetTopBot
-0000f550: 746f 6d53 7461 636b 7570 4c61 7965 7273  tomStackupLayers
-0000f560: 2873 6967 5f73 6574 290a 2020 2020 2020  (sig_set).      
-0000f570: 2020 736f 7572 6365 5f73 7461 636b 5f74    source_stack_t
-0000f580: 6f70 5f65 6c65 7661 7469 6f6e 203d 2072  op_elevation = r
-0000f590: 6573 5f73 5b32 5d0a 2020 2020 2020 2020  es_s[2].        
-0000f5a0: 736f 7572 6365 5f73 7461 636b 5f62 6f74  source_stack_bot
-0000f5b0: 5f65 6c65 7661 7469 6f6e 203d 2072 6573  _elevation = res
-0000f5c0: 5f73 5b34 5d0a 0a20 2020 2020 2020 2069  _s[4]..        i
-0000f5d0: 6620 706c 6163 655f 6f6e 5f74 6f70 2061  f place_on_top a
-0000f5e0: 6e64 2066 6c69 7070 6564 5f73 7461 636b  nd flipped_stack
-0000f5f0: 7570 3a0a 2020 2020 2020 2020 2020 2020  up:.            
-0000f600: 656c 6576 6174 696f 6e20 3d20 7461 7267  elevation = targ
-0000f610: 6574 5f74 6f70 5f65 6c65 7661 7469 6f6e  et_top_elevation
-0000f620: 202b 2073 6f75 7263 655f 7374 6163 6b5f   + source_stack_
-0000f630: 746f 705f 656c 6576 6174 696f 6e20 2b20  top_elevation + 
-0000f640: 6f66 6673 6574 5f7a 0a20 2020 2020 2020  offset_z.       
-0000f650: 2065 6c69 6620 706c 6163 655f 6f6e 5f74   elif place_on_t
-0000f660: 6f70 3a0a 2020 2020 2020 2020 2020 2020  op:.            
-0000f670: 656c 6576 6174 696f 6e20 3d20 7461 7267  elevation = targ
-0000f680: 6574 5f74 6f70 5f65 6c65 7661 7469 6f6e  et_top_elevation
-0000f690: 202d 2073 6f75 7263 655f 7374 6163 6b5f   - source_stack_
-0000f6a0: 626f 745f 656c 6576 6174 696f 6e20 2b20  bot_elevation + 
-0000f6b0: 6f66 6673 6574 5f7a 0a20 2020 2020 2020  offset_z.       
-0000f6c0: 2065 6c69 6620 666c 6970 7065 645f 7374   elif flipped_st
-0000f6d0: 6163 6b75 703a 0a20 2020 2020 2020 2020  ackup:.         
-0000f6e0: 2020 2065 6c65 7661 7469 6f6e 203d 2074     elevation = t
-0000f6f0: 6172 6765 745f 626f 7474 6f6d 5f65 6c65  arget_bottom_ele
-0000f700: 7661 7469 6f6e 202b 2073 6f75 7263 655f  vation + source_
-0000f710: 7374 6163 6b5f 626f 745f 656c 6576 6174  stack_bot_elevat
-0000f720: 696f 6e20 2d20 6f66 6673 6574 5f7a 0a20  ion - offset_z. 
-0000f730: 2020 2020 2020 2020 2020 2073 6f6c 6465             solde
-0000f740: 725f 6865 6967 6874 203d 202d 736f 6c64  r_height = -sold
-0000f750: 6572 5f68 6569 6768 740a 2020 2020 2020  er_height.      
-0000f760: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0000f770: 2020 2020 656c 6576 6174 696f 6e20 3d20      elevation = 
-0000f780: 7461 7267 6574 5f62 6f74 746f 6d5f 656c  target_bottom_el
-0000f790: 6576 6174 696f 6e20 2d20 736f 7572 6365  evation - source
-0000f7a0: 5f73 7461 636b 5f74 6f70 5f65 6c65 7661  _stack_top_eleva
-0000f7b0: 7469 6f6e 202d 206f 6666 7365 745f 7a0a  tion - offset_z.
-0000f7c0: 2020 2020 2020 2020 2020 2020 736f 6c64              sold
-0000f7d0: 6572 5f68 6569 6768 7420 3d20 2d73 6f6c  er_height = -sol
-0000f7e0: 6465 725f 6865 6967 6874 0a0a 2020 2020  der_height..    
-0000f7f0: 2020 2020 685f 7374 6163 6b75 7020 3d20      h_stackup = 
-0000f800: 7365 6c66 2e5f 6564 625f 7661 6c75 6528  self._edb_value(
-0000f810: 656c 6576 6174 696f 6e20 2b20 736f 6c64  elevation + sold
-0000f820: 6572 5f68 6569 6768 7429 0a0a 2020 2020  er_height)..    
-0000f830: 2020 2020 7a65 726f 5f64 6174 6120 3d20      zero_data = 
-0000f840: 7365 6c66 2e5f 6564 625f 7661 6c75 6528  self._edb_value(
-0000f850: 302e 3029 0a20 2020 2020 2020 206f 6e65  0.0).        one
-0000f860: 5f64 6174 6120 3d20 7365 6c66 2e5f 6564  _data = self._ed
-0000f870: 625f 7661 6c75 6528 312e 3029 0a20 2020  b_value(1.0).   
-0000f880: 2020 2020 2070 6f69 6e74 3364 5f74 203d       point3d_t =
-0000f890: 2073 656c 662e 5f70 6564 622e 706f 696e   self._pedb.poin
-0000f8a0: 745f 3364 285f 6f66 6673 6574 5f78 2c20  t_3d(_offset_x, 
-0000f8b0: 5f6f 6666 7365 745f 792c 2068 5f73 7461  _offset_y, h_sta
-0000f8c0: 636b 7570 290a 2020 2020 2020 2020 706f  ckup).        po
-0000f8d0: 696e 745f 6c6f 6320 3d20 7365 6c66 2e5f  int_loc = self._
-0000f8e0: 7065 6462 2e70 6f69 6e74 5f33 6428 7a65  pedb.point_3d(ze
-0000f8f0: 726f 5f64 6174 612c 207a 6572 6f5f 6461  ro_data, zero_da
-0000f900: 7461 2c20 7a65 726f 5f64 6174 6129 0a20  ta, zero_data). 
-0000f910: 2020 2020 2020 2070 6f69 6e74 5f66 726f         point_fro
-0000f920: 6d20 3d20 7365 6c66 2e5f 7065 6462 2e70  m = self._pedb.p
-0000f930: 6f69 6e74 5f33 6428 6f6e 655f 6461 7461  oint_3d(one_data
-0000f940: 2c20 7a65 726f 5f64 6174 612c 207a 6572  , zero_data, zer
-0000f950: 6f5f 6461 7461 290a 2020 2020 2020 2020  o_data).        
-0000f960: 706f 696e 745f 746f 203d 2073 656c 662e  point_to = self.
-0000f970: 5f70 6564 622e 706f 696e 745f 3364 286d  _pedb.point_3d(m
-0000f980: 6174 682e 636f 7328 5f61 6e67 6c65 292c  ath.cos(_angle),
-0000f990: 202d 3120 2a20 6d61 7468 2e73 696e 285f   -1 * math.sin(_
-0000f9a0: 616e 676c 6529 2c20 7a65 726f 5f64 6174  angle), zero_dat
-0000f9b0: 6129 0a20 2020 2020 2020 2063 656c 6c5f  a).        cell_
-0000f9c0: 696e 7374 322e 5365 7433 4454 7261 6e73  inst2.Set3DTrans
-0000f9d0: 666f 726d 6174 696f 6e28 706f 696e 745f  formation(point_
-0000f9e0: 6c6f 632c 2070 6f69 6e74 5f66 726f 6d2c  loc, point_from,
-0000f9f0: 2070 6f69 6e74 5f74 6f2c 2072 6f74 6174   point_to, rotat
-0000fa00: 696f 6e2c 2070 6f69 6e74 3364 5f74 290a  ion, point3d_t).
-0000fa10: 2020 2020 2020 2020 7365 6c66 2e72 6566          self.ref
-0000fa20: 7265 7368 5f6c 6179 6572 5f63 6f6c 6c65  resh_layer_colle
-0000fa30: 6374 696f 6e28 290a 2020 2020 2020 2020  ction().        
-0000fa40: 7265 7475 726e 2063 656c 6c5f 696e 7374  return cell_inst
-0000fa50: 320a 0a20 2020 2040 7079 6564 625f 6675  2..    @pyedb_fu
-0000fa60: 6e63 7469 6f6e 5f68 616e 646c 6572 2829  nction_handler()
-0000fa70: 0a20 2020 2064 6566 2070 6c61 6365 5f61  .    def place_a
-0000fa80: 3364 636f 6d70 5f33 645f 706c 6163 656d  3dcomp_3d_placem
-0000fa90: 656e 7428 0a20 2020 2020 2020 2073 656c  ent(.        sel
-0000faa0: 662c 0a20 2020 2020 2020 2061 3364 636f  f,.        a3dco
-0000fab0: 6d70 5f70 6174 682c 0a20 2020 2020 2020  mp_path,.       
-0000fac0: 2061 6e67 6c65 3d30 2e30 2c0a 2020 2020   angle=0.0,.    
-0000fad0: 2020 2020 6f66 6673 6574 5f78 3d30 2e30      offset_x=0.0
-0000fae0: 2c0a 2020 2020 2020 2020 6f66 6673 6574  ,.        offset
-0000faf0: 5f79 3d30 2e30 2c0a 2020 2020 2020 2020  _y=0.0,.        
-0000fb00: 6f66 6673 6574 5f7a 3d30 2e30 2c0a 2020  offset_z=0.0,.  
-0000fb10: 2020 2020 2020 706c 6163 655f 6f6e 5f74        place_on_t
-0000fb20: 6f70 3d54 7275 652c 0a20 2020 2029 3a0a  op=True,.    ):.
-0000fb30: 2020 2020 2020 2020 2222 2250 6c61 6365          """Place
-0000fb40: 2061 2033 4420 436f 6d70 6f6e 656e 7420   a 3D Component 
-0000fb50: 696e 746f 2063 7572 7265 6e74 206c 6179  into current lay
-0000fb60: 6f75 742e 0a20 2020 2020 2020 2020 3344  out..         3D
-0000fb70: 2043 6f6d 706f 6e65 6e74 2070 6f72 7473   Component ports
-0000fb80: 2061 7265 206e 6f74 2076 6973 6962 6c65   are not visible
-0000fb90: 2076 6961 2045 4442 2e20 5468 6579 2077   via EDB. They w
-0000fba0: 696c 6c20 6265 2076 6973 6962 6c65 2061  ill be visible a
-0000fbb0: 6674 6572 2074 6865 2045 4442 2068 6173  fter the EDB has
-0000fbc0: 2062 6565 6e20 6f70 656e 6564 2069 6e20   been opened in 
-0000fbd0: 416e 7379 730a 2020 2020 2020 2020 2045  Ansys.         E
-0000fbe0: 6c65 6374 726f 6e69 6373 2044 6573 6b74  lectronics Deskt
-0000fbf0: 6f70 2061 7320 6120 7072 6f6a 6563 742e  op as a project.
-0000fc00: 0a0a 2020 2020 2020 2020 5061 7261 6d65  ..        Parame
-0000fc10: 7465 7273 0a20 2020 2020 2020 202d 2d2d  ters.        ---
-0000fc20: 2d2d 2d2d 2d2d 2d0a 2020 2020 2020 2020  -------.        
-0000fc30: 6133 6463 6f6d 705f 7061 7468 203a 2073  a3dcomp_path : s
-0000fc40: 7472 0a20 2020 2020 2020 2020 2020 2050  tr.            P
-0000fc50: 6174 6820 746f 2074 6865 2033 4420 436f  ath to the 3D Co
-0000fc60: 6d70 6f6e 656e 7420 6669 6c65 2028 5c5c  mponent file (\\
-0000fc70: 2a2e 6133 6463 6f6d 7029 2074 6f20 706c  *.a3dcomp) to pl
-0000fc80: 6163 652e 0a20 2020 2020 2020 2061 6e67  ace..        ang
-0000fc90: 6c65 203a 2064 6f75 626c 652c 206f 7074  le : double, opt
-0000fca0: 696f 6e61 6c0a 2020 2020 2020 2020 2020  ional.          
-0000fcb0: 2020 436c 6f63 6b77 6973 6520 726f 7461    Clockwise rota
-0000fcc0: 7469 6f6e 2061 6e67 6c65 2061 7070 6c69  tion angle appli
-0000fcd0: 6564 2074 6f20 7468 6520 6133 6463 6f6d  ed to the a3dcom
-0000fce0: 702e 0a20 2020 2020 2020 206f 6666 7365  p..        offse
-0000fcf0: 745f 7820 3a20 646f 7562 6c65 2c20 6f70  t_x : double, op
-0000fd00: 7469 6f6e 616c 0a20 2020 2020 2020 2020  tional.         
-0000fd10: 2020 2054 6865 2078 206f 6666 7365 7420     The x offset 
-0000fd20: 7661 6c75 652e 0a20 2020 2020 2020 2020  value..         
-0000fd30: 2020 2054 6865 2064 6566 6175 6c74 2076     The default v
-0000fd40: 616c 7565 2069 7320 6060 302e 3060 602e  alue is ``0.0``.
-0000fd50: 0a20 2020 2020 2020 206f 6666 7365 745f  .        offset_
-0000fd60: 7920 3a20 646f 7562 6c65 2c20 6f70 7469  y : double, opti
-0000fd70: 6f6e 616c 0a20 2020 2020 2020 2020 2020  onal.           
-0000fd80: 2054 6865 2079 206f 6666 7365 7420 7661   The y offset va
-0000fd90: 6c75 652e 0a20 2020 2020 2020 2020 2020  lue..           
-0000fda0: 2054 6865 2064 6566 6175 6c74 2076 616c   The default val
-0000fdb0: 7565 2069 7320 6060 302e 3060 602e 0a20  ue is ``0.0``.. 
-0000fdc0: 2020 2020 2020 206f 6666 7365 745f 7a20         offset_z 
-0000fdd0: 3a20 646f 7562 6c65 2c20 6f70 7469 6f6e  : double, option
-0000fde0: 616c 0a20 2020 2020 2020 2020 2020 2054  al.            T
-0000fdf0: 6865 207a 206f 6666 7365 7420 7661 6c75  he z offset valu
-0000fe00: 652e 2028 692e 652e 2065 6c65 7661 7469  e. (i.e. elevati
-0000fe10: 6f6e 290a 2020 2020 2020 2020 2020 2020  on).            
-0000fe20: 5468 6520 6465 6661 756c 7420 7661 6c75  The default valu
-0000fe30: 6520 6973 2060 6030 2e30 6060 2e0a 2020  e is ``0.0``..  
-0000fe40: 2020 2020 2020 706c 6163 655f 6f6e 5f74        place_on_t
-0000fe50: 6f70 203a 2062 6f6f 6c2c 206f 7074 696f  op : bool, optio
+0000edb0: 2066 6f72 206c 6179 2069 6e20 6c61 7965   for lay in laye
+0000edc0: 7273 5f66 726f 6d5f 7468 655f 746f 703a  rs_from_the_top:
+0000edd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000ede0: 2020 2020 2069 6620 6d61 7869 6d75 6d5f       if maximum_
+0000edf0: 656c 6576 6174 696f 6e20 6973 204e 6f6e  elevation is Non
+0000ee00: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0000ee10: 2020 2020 2020 2020 2020 206d 6178 696d             maxim
+0000ee20: 756d 5f65 6c65 7661 7469 6f6e 203d 206c  um_elevation = l
+0000ee30: 6179 2e75 7070 6572 5f65 6c65 7661 7469  ay.upper_elevati
+0000ee40: 6f6e 0a20 2020 2020 2020 2020 2020 2020  on.             
+0000ee50: 2020 2020 2020 2065 6c69 6620 6c61 792e         elif lay.
+0000ee60: 7570 7065 725f 656c 6576 6174 696f 6e20  upper_elevation 
+0000ee70: 3c20 6d61 7869 6d75 6d5f 656c 6576 6174  < maximum_elevat
+0000ee80: 696f 6e3a 0a20 2020 2020 2020 2020 2020  ion:.           
+0000ee90: 2020 2020 2020 2020 2020 2020 2062 7265               bre
+0000eea0: 616b 0a20 2020 2020 2020 2020 2020 2020  ak.             
+0000eeb0: 2020 2020 2020 206c 6179 5f73 6f6c 6465         lay_solde
+0000eec0: 725f 6865 6967 6874 203d 2063 6f6d 706f  r_height = compo
+0000eed0: 6e65 6e74 5f65 6462 2e73 7461 636b 7570  nent_edb.stackup
+0000eee0: 2e5f 6765 745f 736f 6c64 6572 5f68 6569  ._get_solder_hei
+0000eef0: 6768 7428 6c61 792e 6e61 6d65 290a 2020  ght(lay.name).  
+0000ef00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ef10: 2020 736f 6c64 6572 5f68 6569 6768 7420    solder_height 
+0000ef20: 3d20 6d61 7828 6c61 795f 736f 6c64 6572  = max(lay_solder
+0000ef30: 5f68 6569 6768 742c 2073 6f6c 6465 725f  _height, solder_
+0000ef40: 6865 6967 6874 290a 2020 2020 2020 2020  height).        
+0000ef50: 2020 2020 2020 2020 2020 2020 636f 6d70              comp
+0000ef60: 6f6e 656e 745f 6564 622e 7374 6163 6b75  onent_edb.stacku
+0000ef70: 702e 5f72 656d 6f76 655f 736f 6c64 6572  p._remove_solder
+0000ef80: 5f70 6563 286c 6179 2e6e 616d 6529 0a20  _pec(lay.name). 
+0000ef90: 2020 2020 2020 2065 6462 5f63 656c 6c20         edb_cell 
+0000efa0: 3d20 636f 6d70 6f6e 656e 745f 6564 622e  = component_edb.
+0000efb0: 6163 7469 7665 5f63 656c 6c0a 2020 2020  active_cell.    
+0000efc0: 2020 2020 5f6f 6666 7365 745f 7820 3d20      _offset_x = 
+0000efd0: 7365 6c66 2e5f 6564 625f 7661 6c75 6528  self._edb_value(
+0000efe0: 6f66 6673 6574 5f78 290a 2020 2020 2020  offset_x).      
+0000eff0: 2020 5f6f 6666 7365 745f 7920 3d20 7365    _offset_y = se
+0000f000: 6c66 2e5f 6564 625f 7661 6c75 6528 6f66  lf._edb_value(of
+0000f010: 6673 6574 5f79 290a 0a20 2020 2020 2020  fset_y)..       
+0000f020: 2069 6620 6564 625f 6365 6c6c 2e47 6574   if edb_cell.Get
+0000f030: 4e61 6d65 2829 206e 6f74 2069 6e20 7365  Name() not in se
+0000f040: 6c66 2e5f 7065 6462 2e63 656c 6c5f 6e61  lf._pedb.cell_na
+0000f050: 6d65 733a 0a20 2020 2020 2020 2020 2020  mes:.           
+0000f060: 206c 6973 745f 6365 6c6c 7320 3d20 7365   list_cells = se
+0000f070: 6c66 2e5f 7065 6462 2e63 6f70 795f 6365  lf._pedb.copy_ce
+0000f080: 6c6c 7328 6564 625f 6365 6c6c 2e61 7069  lls(edb_cell.api
+0000f090: 5f6f 626a 6563 7429 0a20 2020 2020 2020  _object).       
+0000f0a0: 2020 2020 2065 6462 5f63 656c 6c20 3d20       edb_cell = 
+0000f0b0: 6c69 7374 5f63 656c 6c73 5b30 5d0a 2020  list_cells[0].  
+0000f0c0: 2020 2020 2020 666f 7220 6365 6c6c 2069        for cell i
+0000f0d0: 6e20 6c69 7374 2873 656c 662e 5f70 6564  n list(self._ped
+0000f0e0: 622e 6163 7469 7665 5f64 622e 4369 7263  b.active_db.Circ
+0000f0f0: 7569 7443 656c 6c73 293a 0a20 2020 2020  uitCells):.     
+0000f100: 2020 2020 2020 2069 6620 6365 6c6c 2e47         if cell.G
+0000f110: 6574 4e61 6d65 2829 203d 3d20 6564 625f  etName() == edb_
+0000f120: 6365 6c6c 2e47 6574 4e61 6d65 2829 3a0a  cell.GetName():.
+0000f130: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f140: 6564 625f 6365 6c6c 203d 2063 656c 6c0a  edb_cell = cell.
+0000f150: 2020 2020 2020 2020 2320 4b65 6570 2043          # Keep C
+0000f160: 656c 6c20 496e 6465 7065 6e64 656e 740a  ell Independent.
+0000f170: 2020 2020 2020 2020 6564 625f 6365 6c6c          edb_cell
+0000f180: 2e53 6574 426c 6163 6b42 6f78 2854 7275  .SetBlackBox(Tru
+0000f190: 6529 0a20 2020 2020 2020 2072 6f74 6174  e).        rotat
+0000f1a0: 696f 6e20 3d20 7365 6c66 2e5f 6564 625f  ion = self._edb_
+0000f1b0: 7661 6c75 6528 302e 3029 0a20 2020 2020  value(0.0).     
+0000f1c0: 2020 2069 6620 666c 6970 7065 645f 7374     if flipped_st
+0000f1d0: 6163 6b75 703a 0a20 2020 2020 2020 2020  ackup:.         
+0000f1e0: 2020 2072 6f74 6174 696f 6e20 3d20 7365     rotation = se
+0000f1f0: 6c66 2e5f 6564 625f 7661 6c75 6528 6d61  lf._edb_value(ma
+0000f200: 7468 2e70 6929 0a0a 2020 2020 2020 2020  th.pi)..        
+0000f210: 5f6f 6666 7365 745f 7820 3d20 7365 6c66  _offset_x = self
+0000f220: 2e5f 6564 625f 7661 6c75 6528 6f66 6673  ._edb_value(offs
+0000f230: 6574 5f78 290a 2020 2020 2020 2020 5f6f  et_x).        _o
+0000f240: 6666 7365 745f 7920 3d20 7365 6c66 2e5f  ffset_y = self._
+0000f250: 6564 625f 7661 6c75 6528 6f66 6673 6574  edb_value(offset
+0000f260: 5f79 290a 0a20 2020 2020 2020 2069 6e73  _y)..        ins
+0000f270: 7461 6e63 655f 6e61 6d65 203d 2067 656e  tance_name = gen
+0000f280: 6572 6174 655f 756e 6971 7565 5f6e 616d  erate_unique_nam
+0000f290: 6528 6564 625f 6365 6c6c 2e47 6574 4e61  e(edb_cell.GetNa
+0000f2a0: 6d65 2829 2c20 6e3d 3229 0a0a 2020 2020  me(), n=2)..    
+0000f2b0: 2020 2020 6365 6c6c 5f69 6e73 7432 203d      cell_inst2 =
+0000f2c0: 2073 656c 662e 5f70 6564 622e 6564 625f   self._pedb.edb_
+0000f2d0: 6170 692e 6365 6c6c 2e68 6965 7261 7263  api.cell.hierarc
+0000f2e0: 6879 2e63 656c 6c5f 696e 7374 616e 6365  hy.cell_instance
+0000f2f0: 2e43 7265 6174 6528 0a20 2020 2020 2020  .Create(.       
+0000f300: 2020 2020 2073 656c 662e 5f70 6564 622e       self._pedb.
+0000f310: 6163 7469 7665 5f6c 6179 6f75 742c 2069  active_layout, i
+0000f320: 6e73 7461 6e63 655f 6e61 6d65 2c20 6564  nstance_name, ed
+0000f330: 625f 6365 6c6c 2e47 6574 4c61 796f 7574  b_cell.GetLayout
+0000f340: 2829 0a20 2020 2020 2020 2029 0a0a 2020  ().        )..  
+0000f350: 2020 2020 2020 7374 6163 6b75 705f 736f        stackup_so
+0000f360: 7572 6365 203d 2073 656c 662e 5f70 6564  urce = self._ped
+0000f370: 622e 6564 625f 6170 692e 4365 6c6c 2e4c  b.edb_api.Cell.L
+0000f380: 6179 6572 436f 6c6c 6563 7469 6f6e 2865  ayerCollection(e
+0000f390: 6462 5f63 656c 6c2e 4765 744c 6179 6f75  db_cell.GetLayou
+0000f3a0: 7428 292e 4765 744c 6179 6572 436f 6c6c  t().GetLayerColl
+0000f3b0: 6563 7469 6f6e 2829 290a 2020 2020 2020  ection()).      
+0000f3c0: 2020 7374 6163 6b75 705f 7461 7267 6574    stackup_target
+0000f3d0: 203d 2073 656c 662e 5f70 6564 622e 6564   = self._pedb.ed
+0000f3e0: 625f 6170 692e 4365 6c6c 2e4c 6179 6572  b_api.Cell.Layer
+0000f3f0: 436f 6c6c 6563 7469 6f6e 2873 656c 662e  Collection(self.
+0000f400: 5f70 6564 622e 6c61 796f 7574 2e6c 6179  _pedb.layout.lay
+0000f410: 6572 5f63 6f6c 6c65 6374 696f 6e29 0a0a  er_collection)..
+0000f420: 2020 2020 2020 2020 6966 2070 6c61 6365          if place
+0000f430: 5f6f 6e5f 746f 703a 0a20 2020 2020 2020  _on_top:.       
+0000f440: 2020 2020 2063 656c 6c5f 696e 7374 322e       cell_inst2.
+0000f450: 5365 7450 6c61 6365 6d65 6e74 4c61 7965  SetPlacementLaye
+0000f460: 7228 0a20 2020 2020 2020 2020 2020 2020  r(.             
+0000f470: 2020 206c 6973 7428 7374 6163 6b75 705f     list(stackup_
+0000f480: 7461 7267 6574 2e4c 6179 6572 7328 7365  target.Layers(se
+0000f490: 6c66 2e5f 7065 6462 2e65 6462 5f61 7069  lf._pedb.edb_api
+0000f4a0: 2e63 656c 6c2e 6c61 7965 725f 7479 7065  .cell.layer_type
+0000f4b0: 5f73 6574 2e53 6967 6e61 6c4c 6179 6572  _set.SignalLayer
+0000f4c0: 5365 7429 295b 305d 0a20 2020 2020 2020  Set))[0].       
+0000f4d0: 2020 2020 2029 0a20 2020 2020 2020 2065       ).        e
+0000f4e0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0000f4f0: 2063 656c 6c5f 696e 7374 322e 5365 7450   cell_inst2.SetP
+0000f500: 6c61 6365 6d65 6e74 4c61 7965 7228 0a20  lacementLayer(. 
+0000f510: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+0000f520: 6973 7428 7374 6163 6b75 705f 7461 7267  ist(stackup_targ
+0000f530: 6574 2e4c 6179 6572 7328 7365 6c66 2e5f  et.Layers(self._
+0000f540: 7065 6462 2e65 6462 5f61 7069 2e63 656c  pedb.edb_api.cel
+0000f550: 6c2e 6c61 7965 725f 7479 7065 5f73 6574  l.layer_type_set
+0000f560: 2e53 6967 6e61 6c4c 6179 6572 5365 7429  .SignalLayerSet)
+0000f570: 295b 2d31 5d0a 2020 2020 2020 2020 2020  )[-1].          
+0000f580: 2020 290a 2020 2020 2020 2020 6365 6c6c    ).        cell
+0000f590: 5f69 6e73 7432 2e53 6574 4973 3344 506c  _inst2.SetIs3DPl
+0000f5a0: 6163 656d 656e 7428 5472 7565 290a 2020  acement(True).  
+0000f5b0: 2020 2020 2020 7369 675f 7365 7420 3d20        sig_set = 
+0000f5c0: 7365 6c66 2e5f 7065 6462 2e65 6462 5f61  self._pedb.edb_a
+0000f5d0: 7069 2e63 656c 6c2e 6c61 7965 725f 7479  pi.cell.layer_ty
+0000f5e0: 7065 5f73 6574 2e53 6967 6e61 6c4c 6179  pe_set.SignalLay
+0000f5f0: 6572 5365 740a 2020 2020 2020 2020 7265  erSet.        re
+0000f600: 7320 3d20 7374 6163 6b75 705f 7461 7267  s = stackup_targ
+0000f610: 6574 2e47 6574 546f 7042 6f74 746f 6d53  et.GetTopBottomS
+0000f620: 7461 636b 7570 4c61 7965 7273 2873 6967  tackupLayers(sig
+0000f630: 5f73 6574 290a 2020 2020 2020 2020 7461  _set).        ta
+0000f640: 7267 6574 5f74 6f70 5f65 6c65 7661 7469  rget_top_elevati
+0000f650: 6f6e 203d 2072 6573 5b32 5d0a 2020 2020  on = res[2].    
+0000f660: 2020 2020 7461 7267 6574 5f62 6f74 746f      target_botto
+0000f670: 6d5f 656c 6576 6174 696f 6e20 3d20 7265  m_elevation = re
+0000f680: 735b 345d 0a20 2020 2020 2020 2072 6573  s[4].        res
+0000f690: 5f73 203d 2073 7461 636b 7570 5f73 6f75  _s = stackup_sou
+0000f6a0: 7263 652e 4765 7454 6f70 426f 7474 6f6d  rce.GetTopBottom
+0000f6b0: 5374 6163 6b75 704c 6179 6572 7328 7369  StackupLayers(si
+0000f6c0: 675f 7365 7429 0a20 2020 2020 2020 2073  g_set).        s
+0000f6d0: 6f75 7263 655f 7374 6163 6b5f 746f 705f  ource_stack_top_
+0000f6e0: 656c 6576 6174 696f 6e20 3d20 7265 735f  elevation = res_
+0000f6f0: 735b 325d 0a20 2020 2020 2020 2073 6f75  s[2].        sou
+0000f700: 7263 655f 7374 6163 6b5f 626f 745f 656c  rce_stack_bot_el
+0000f710: 6576 6174 696f 6e20 3d20 7265 735f 735b  evation = res_s[
+0000f720: 345d 0a0a 2020 2020 2020 2020 6966 2070  4]..        if p
+0000f730: 6c61 6365 5f6f 6e5f 746f 7020 616e 6420  lace_on_top and 
+0000f740: 666c 6970 7065 645f 7374 6163 6b75 703a  flipped_stackup:
+0000f750: 0a20 2020 2020 2020 2020 2020 2065 6c65  .            ele
+0000f760: 7661 7469 6f6e 203d 2074 6172 6765 745f  vation = target_
+0000f770: 746f 705f 656c 6576 6174 696f 6e20 2b20  top_elevation + 
+0000f780: 736f 7572 6365 5f73 7461 636b 5f74 6f70  source_stack_top
+0000f790: 5f65 6c65 7661 7469 6f6e 202b 206f 6666  _elevation + off
+0000f7a0: 7365 745f 7a0a 2020 2020 2020 2020 656c  set_z.        el
+0000f7b0: 6966 2070 6c61 6365 5f6f 6e5f 746f 703a  if place_on_top:
+0000f7c0: 0a20 2020 2020 2020 2020 2020 2065 6c65  .            ele
+0000f7d0: 7661 7469 6f6e 203d 2074 6172 6765 745f  vation = target_
+0000f7e0: 746f 705f 656c 6576 6174 696f 6e20 2d20  top_elevation - 
+0000f7f0: 736f 7572 6365 5f73 7461 636b 5f62 6f74  source_stack_bot
+0000f800: 5f65 6c65 7661 7469 6f6e 202b 206f 6666  _elevation + off
+0000f810: 7365 745f 7a0a 2020 2020 2020 2020 656c  set_z.        el
+0000f820: 6966 2066 6c69 7070 6564 5f73 7461 636b  if flipped_stack
+0000f830: 7570 3a0a 2020 2020 2020 2020 2020 2020  up:.            
+0000f840: 656c 6576 6174 696f 6e20 3d20 7461 7267  elevation = targ
+0000f850: 6574 5f62 6f74 746f 6d5f 656c 6576 6174  et_bottom_elevat
+0000f860: 696f 6e20 2b20 736f 7572 6365 5f73 7461  ion + source_sta
+0000f870: 636b 5f62 6f74 5f65 6c65 7661 7469 6f6e  ck_bot_elevation
+0000f880: 202d 206f 6666 7365 745f 7a0a 2020 2020   - offset_z.    
+0000f890: 2020 2020 2020 2020 736f 6c64 6572 5f68          solder_h
+0000f8a0: 6569 6768 7420 3d20 2d73 6f6c 6465 725f  eight = -solder_
+0000f8b0: 6865 6967 6874 0a20 2020 2020 2020 2065  height.        e
+0000f8c0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0000f8d0: 2065 6c65 7661 7469 6f6e 203d 2074 6172   elevation = tar
+0000f8e0: 6765 745f 626f 7474 6f6d 5f65 6c65 7661  get_bottom_eleva
+0000f8f0: 7469 6f6e 202d 2073 6f75 7263 655f 7374  tion - source_st
+0000f900: 6163 6b5f 746f 705f 656c 6576 6174 696f  ack_top_elevatio
+0000f910: 6e20 2d20 6f66 6673 6574 5f7a 0a20 2020  n - offset_z.   
+0000f920: 2020 2020 2020 2020 2073 6f6c 6465 725f           solder_
+0000f930: 6865 6967 6874 203d 202d 736f 6c64 6572  height = -solder
+0000f940: 5f68 6569 6768 740a 0a20 2020 2020 2020  _height..       
+0000f950: 2068 5f73 7461 636b 7570 203d 2073 656c   h_stackup = sel
+0000f960: 662e 5f65 6462 5f76 616c 7565 2865 6c65  f._edb_value(ele
+0000f970: 7661 7469 6f6e 202b 2073 6f6c 6465 725f  vation + solder_
+0000f980: 6865 6967 6874 290a 0a20 2020 2020 2020  height)..       
+0000f990: 207a 6572 6f5f 6461 7461 203d 2073 656c   zero_data = sel
+0000f9a0: 662e 5f65 6462 5f76 616c 7565 2830 2e30  f._edb_value(0.0
+0000f9b0: 290a 2020 2020 2020 2020 6f6e 655f 6461  ).        one_da
+0000f9c0: 7461 203d 2073 656c 662e 5f65 6462 5f76  ta = self._edb_v
+0000f9d0: 616c 7565 2831 2e30 290a 2020 2020 2020  alue(1.0).      
+0000f9e0: 2020 706f 696e 7433 645f 7420 3d20 7365    point3d_t = se
+0000f9f0: 6c66 2e5f 7065 6462 2e70 6f69 6e74 5f33  lf._pedb.point_3
+0000fa00: 6428 5f6f 6666 7365 745f 782c 205f 6f66  d(_offset_x, _of
+0000fa10: 6673 6574 5f79 2c20 685f 7374 6163 6b75  fset_y, h_stacku
+0000fa20: 7029 0a20 2020 2020 2020 2070 6f69 6e74  p).        point
+0000fa30: 5f6c 6f63 203d 2073 656c 662e 5f70 6564  _loc = self._ped
+0000fa40: 622e 706f 696e 745f 3364 287a 6572 6f5f  b.point_3d(zero_
+0000fa50: 6461 7461 2c20 7a65 726f 5f64 6174 612c  data, zero_data,
+0000fa60: 207a 6572 6f5f 6461 7461 290a 2020 2020   zero_data).    
+0000fa70: 2020 2020 706f 696e 745f 6672 6f6d 203d      point_from =
+0000fa80: 2073 656c 662e 5f70 6564 622e 706f 696e   self._pedb.poin
+0000fa90: 745f 3364 286f 6e65 5f64 6174 612c 207a  t_3d(one_data, z
+0000faa0: 6572 6f5f 6461 7461 2c20 7a65 726f 5f64  ero_data, zero_d
+0000fab0: 6174 6129 0a20 2020 2020 2020 2070 6f69  ata).        poi
+0000fac0: 6e74 5f74 6f20 3d20 7365 6c66 2e5f 7065  nt_to = self._pe
+0000fad0: 6462 2e70 6f69 6e74 5f33 6428 6d61 7468  db.point_3d(math
+0000fae0: 2e63 6f73 285f 616e 676c 6529 2c20 2d31  .cos(_angle), -1
+0000faf0: 202a 206d 6174 682e 7369 6e28 5f61 6e67   * math.sin(_ang
+0000fb00: 6c65 292c 207a 6572 6f5f 6461 7461 290a  le), zero_data).
+0000fb10: 2020 2020 2020 2020 6365 6c6c 5f69 6e73          cell_ins
+0000fb20: 7432 2e53 6574 3344 5472 616e 7366 6f72  t2.Set3DTransfor
+0000fb30: 6d61 7469 6f6e 2870 6f69 6e74 5f6c 6f63  mation(point_loc
+0000fb40: 2c20 706f 696e 745f 6672 6f6d 2c20 706f  , point_from, po
+0000fb50: 696e 745f 746f 2c20 726f 7461 7469 6f6e  int_to, rotation
+0000fb60: 2c20 706f 696e 7433 645f 7429 0a20 2020  , point3d_t).   
+0000fb70: 2020 2020 2073 656c 662e 7265 6672 6573       self.refres
+0000fb80: 685f 6c61 7965 725f 636f 6c6c 6563 7469  h_layer_collecti
+0000fb90: 6f6e 2829 0a20 2020 2020 2020 2072 6574  on().        ret
+0000fba0: 7572 6e20 6365 6c6c 5f69 6e73 7432 0a0a  urn cell_inst2..
+0000fbb0: 2020 2020 4070 7965 6462 5f66 756e 6374      @pyedb_funct
+0000fbc0: 696f 6e5f 6861 6e64 6c65 7228 290a 2020  ion_handler().  
+0000fbd0: 2020 6465 6620 706c 6163 655f 6133 6463    def place_a3dc
+0000fbe0: 6f6d 705f 3364 5f70 6c61 6365 6d65 6e74  omp_3d_placement
+0000fbf0: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
+0000fc00: 2020 2020 2020 2020 6133 6463 6f6d 705f          a3dcomp_
+0000fc10: 7061 7468 2c0a 2020 2020 2020 2020 616e  path,.        an
+0000fc20: 676c 653d 302e 302c 0a20 2020 2020 2020  gle=0.0,.       
+0000fc30: 206f 6666 7365 745f 783d 302e 302c 0a20   offset_x=0.0,. 
+0000fc40: 2020 2020 2020 206f 6666 7365 745f 793d         offset_y=
+0000fc50: 302e 302c 0a20 2020 2020 2020 206f 6666  0.0,.        off
+0000fc60: 7365 745f 7a3d 302e 302c 0a20 2020 2020  set_z=0.0,.     
+0000fc70: 2020 2070 6c61 6365 5f6f 6e5f 746f 703d     place_on_top=
+0000fc80: 5472 7565 2c0a 2020 2020 293a 0a20 2020  True,.    ):.   
+0000fc90: 2020 2020 2022 2222 506c 6163 6520 6120       """Place a 
+0000fca0: 3344 2043 6f6d 706f 6e65 6e74 2069 6e74  3D Component int
+0000fcb0: 6f20 6375 7272 656e 7420 6c61 796f 7574  o current layout
+0000fcc0: 2e0a 2020 2020 2020 2020 2033 4420 436f  ..         3D Co
+0000fcd0: 6d70 6f6e 656e 7420 706f 7274 7320 6172  mponent ports ar
+0000fce0: 6520 6e6f 7420 7669 7369 626c 6520 7669  e not visible vi
+0000fcf0: 6120 4544 422e 2054 6865 7920 7769 6c6c  a EDB. They will
+0000fd00: 2062 6520 7669 7369 626c 6520 6166 7465   be visible afte
+0000fd10: 7220 7468 6520 4544 4220 6861 7320 6265  r the EDB has be
+0000fd20: 656e 206f 7065 6e65 6420 696e 2041 6e73  en opened in Ans
+0000fd30: 7973 0a20 2020 2020 2020 2020 456c 6563  ys.         Elec
+0000fd40: 7472 6f6e 6963 7320 4465 736b 746f 7020  tronics Desktop 
+0000fd50: 6173 2061 2070 726f 6a65 6374 2e0a 0a20  as a project... 
+0000fd60: 2020 2020 2020 2050 6172 616d 6574 6572         Parameter
+0000fd70: 730a 2020 2020 2020 2020 2d2d 2d2d 2d2d  s.        ------
+0000fd80: 2d2d 2d2d 0a20 2020 2020 2020 2061 3364  ----.        a3d
+0000fd90: 636f 6d70 5f70 6174 6820 3a20 7374 720a  comp_path : str.
+0000fda0: 2020 2020 2020 2020 2020 2020 5061 7468              Path
+0000fdb0: 2074 6f20 7468 6520 3344 2043 6f6d 706f   to the 3D Compo
+0000fdc0: 6e65 6e74 2066 696c 6520 285c 5c2a 2e61  nent file (\\*.a
+0000fdd0: 3364 636f 6d70 2920 746f 2070 6c61 6365  3dcomp) to place
+0000fde0: 2e0a 2020 2020 2020 2020 616e 676c 6520  ..        angle 
+0000fdf0: 3a20 646f 7562 6c65 2c20 6f70 7469 6f6e  : double, option
+0000fe00: 616c 0a20 2020 2020 2020 2020 2020 2043  al.            C
+0000fe10: 6c6f 636b 7769 7365 2072 6f74 6174 696f  lockwise rotatio
+0000fe20: 6e20 616e 676c 6520 6170 706c 6965 6420  n angle applied 
+0000fe30: 746f 2074 6865 2061 3364 636f 6d70 2e0a  to the a3dcomp..
+0000fe40: 2020 2020 2020 2020 6f66 6673 6574 5f78          offset_x
+0000fe50: 203a 2064 6f75 626c 652c 206f 7074 696f   : double, optio
 0000fe60: 6e61 6c0a 2020 2020 2020 2020 2020 2020  nal.            
-0000fe70: 5768 6574 6865 7220 746f 2070 6c61 6365  Whether to place
-0000fe80: 2074 6865 2033 4420 436f 6d70 6f6e 656e   the 3D Componen
-0000fe90: 7420 6f6e 2074 6865 2074 6f70 206f 7220  t on the top or 
-0000fea0: 7468 6520 626f 7474 6f6d 206f 6620 7468  the bottom of th
-0000feb0: 6973 206c 6179 6f75 742e 0a20 2020 2020  is layout..     
-0000fec0: 2020 2020 2020 2049 6620 6060 4661 6c73         If ``Fals
-0000fed0: 6560 6020 7468 656e 2074 6865 2033 4420  e`` then the 3D 
-0000fee0: 436f 6d70 6f6e 656e 7420 7769 6c6c 2061  Component will a
-0000fef0: 6c73 6f20 6265 2066 6c69 7070 6564 206f  lso be flipped o
-0000ff00: 7665 7220 6172 6f75 6e64 2069 7473 2058  ver around its X
-0000ff10: 2061 7869 732e 0a0a 2020 2020 2020 2020   axis...        
-0000ff20: 5265 7475 726e 730a 2020 2020 2020 2020  Returns.        
-0000ff30: 2d2d 2d2d 2d2d 2d0a 2020 2020 2020 2020  -------.        
-0000ff40: 626f 6f6c 0a20 2020 2020 2020 2020 2020  bool.           
-0000ff50: 2060 6054 7275 6560 6020 6966 2073 7563   ``True`` if suc
-0000ff60: 6365 7373 6675 6c20 616e 6420 6060 4661  cessful and ``Fa
-0000ff70: 6c73 6560 6020 6966 206e 6f74 2e0a 0a20  lse`` if not... 
-0000ff80: 2020 2020 2020 2045 7861 6d70 6c65 730a         Examples.
-0000ff90: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
-0000ffa0: 0a20 2020 2020 2020 203e 3e3e 2065 6462  .        >>> edb
-0000ffb0: 3120 3d20 4564 6228 6564 6270 6174 683d  1 = Edb(edbpath=
-0000ffc0: 7461 7267 6574 6669 6c65 312c 2020 6564  targetfile1,  ed
-0000ffd0: 6276 6572 7369 6f6e 3d22 3230 3231 2e32  bversion="2021.2
-0000ffe0: 2229 0a20 2020 2020 2020 203e 3e3e 2061  ").        >>> a
-0000fff0: 3364 636f 6d70 5f70 6174 6820 3d20 2263  3dcomp_path = "c
-00010000: 6f6e 6e65 6374 6f72 2e61 3364 636f 6d70  onnector.a3dcomp
-00010010: 220a 2020 2020 2020 2020 3e3e 3e20 6564  ".        >>> ed
-00010020: 6231 2e73 7461 636b 7570 2e70 6c61 6365  b1.stackup.place
-00010030: 5f61 3364 636f 6d70 5f33 645f 706c 6163  _a3dcomp_3d_plac
-00010040: 656d 656e 7428 6133 6463 6f6d 705f 7061  ement(a3dcomp_pa
-00010050: 7468 2c20 616e 676c 653d 302e 302c 206f  th, angle=0.0, o
-00010060: 6666 7365 745f 783d 2231 6d6d 222c 0a20  ffset_x="1mm",. 
-00010070: 2020 2020 2020 202e 2e2e 2020 2020 2020         ...      
-00010080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010090: 2020 2020 2020 2020 2020 2020 206f 6666               off
-000100a0: 7365 745f 793d 2232 6d6d 222c 2066 6c69  set_y="2mm", fli
-000100b0: 7070 6564 5f73 7461 636b 7570 3d46 616c  pped_stackup=Fal
-000100c0: 7365 2c20 706c 6163 655f 6f6e 5f74 6f70  se, place_on_top
-000100d0: 3d54 7275 652c 0a20 2020 2020 2020 202e  =True,.        .
-000100e0: 2e2e 2020 2020 2020 2020 2020 2020 2020  ..              
-000100f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010100: 2020 2020 2029 0a20 2020 2020 2020 2022       ).        "
-00010110: 2222 0a20 2020 2020 2020 207a 6572 6f5f  "".        zero_
-00010120: 6461 7461 203d 2073 656c 662e 5f65 6462  data = self._edb
-00010130: 5f76 616c 7565 2830 2e30 290a 2020 2020  _value(0.0).    
-00010140: 2020 2020 6f6e 655f 6461 7461 203d 2073      one_data = s
-00010150: 656c 662e 5f65 6462 5f76 616c 7565 2831  elf._edb_value(1
-00010160: 2e30 290a 2020 2020 2020 2020 6c6f 6361  .0).        loca
-00010170: 6c5f 6f72 6967 696e 203d 2073 656c 662e  l_origin = self.
-00010180: 5f70 6564 622e 706f 696e 745f 3364 2830  _pedb.point_3d(0
-00010190: 2e30 2c20 302e 302c 2030 2e30 290a 2020  .0, 0.0, 0.0).  
-000101a0: 2020 2020 2020 726f 7461 7469 6f6e 5f61        rotation_a
-000101b0: 7869 735f 6672 6f6d 203d 2073 656c 662e  xis_from = self.
-000101c0: 5f70 6564 622e 706f 696e 745f 3364 2831  _pedb.point_3d(1
-000101d0: 2e30 2c20 302e 302c 2030 2e30 290a 2020  .0, 0.0, 0.0).  
-000101e0: 2020 2020 2020 5f61 6e67 6c65 203d 2061        _angle = a
-000101f0: 6e67 6c65 202a 206d 6174 682e 7069 202f  ngle * math.pi /
-00010200: 2031 3830 2e30 0a20 2020 2020 2020 2072   180.0.        r
-00010210: 6f74 6174 696f 6e5f 6178 6973 5f74 6f20  otation_axis_to 
-00010220: 3d20 7365 6c66 2e5f 7065 6462 2e70 6f69  = self._pedb.poi
-00010230: 6e74 5f33 6428 6d61 7468 2e63 6f73 285f  nt_3d(math.cos(_
-00010240: 616e 676c 6529 2c20 2d31 202a 206d 6174  angle), -1 * mat
-00010250: 682e 7369 6e28 5f61 6e67 6c65 292c 2030  h.sin(_angle), 0
-00010260: 2e30 290a 0a20 2020 2020 2020 2073 7461  .0)..        sta
-00010270: 636b 7570 5f74 6172 6765 7420 3d20 7365  ckup_target = se
-00010280: 6c66 2e5f 7065 6462 2e65 6462 5f61 7069  lf._pedb.edb_api
-00010290: 2e63 656c 6c2e 5f63 656c 6c2e 4c61 7965  .cell._cell.Laye
-000102a0: 7243 6f6c 6c65 6374 696f 6e28 7365 6c66  rCollection(self
-000102b0: 2e5f 7065 6462 2e6c 6179 6f75 742e 6c61  ._pedb.layout.la
-000102c0: 7965 725f 636f 6c6c 6563 7469 6f6e 290a  yer_collection).
-000102d0: 2020 2020 2020 2020 7369 675f 7365 7420          sig_set 
-000102e0: 3d20 7365 6c66 2e5f 7065 6462 2e65 6462  = self._pedb.edb
-000102f0: 5f61 7069 2e63 656c 6c2e 6c61 7965 725f  _api.cell.layer_
-00010300: 7479 7065 5f73 6574 2e53 6967 6e61 6c4c  type_set.SignalL
-00010310: 6179 6572 5365 740a 2020 2020 2020 2020  ayerSet.        
-00010320: 7265 7320 3d20 7374 6163 6b75 705f 7461  res = stackup_ta
-00010330: 7267 6574 2e47 6574 546f 7042 6f74 746f  rget.GetTopBotto
-00010340: 6d53 7461 636b 7570 4c61 7965 7273 2873  mStackupLayers(s
-00010350: 6967 5f73 6574 290a 2020 2020 2020 2020  ig_set).        
-00010360: 7461 7267 6574 5f74 6f70 5f65 6c65 7661  target_top_eleva
-00010370: 7469 6f6e 203d 2072 6573 5b32 5d0a 2020  tion = res[2].  
-00010380: 2020 2020 2020 7461 7267 6574 5f62 6f74        target_bot
-00010390: 746f 6d5f 656c 6576 6174 696f 6e20 3d20  tom_elevation = 
-000103a0: 7265 735b 345d 0a20 2020 2020 2020 2066  res[4].        f
-000103b0: 6c69 705f 616e 676c 6520 3d20 7365 6c66  lip_angle = self
-000103c0: 2e5f 6564 625f 7661 6c75 6528 2230 6465  ._edb_value("0de
-000103d0: 6722 290a 2020 2020 2020 2020 6966 2070  g").        if p
-000103e0: 6c61 6365 5f6f 6e5f 746f 703a 0a20 2020  lace_on_top:.   
-000103f0: 2020 2020 2020 2020 2065 6c65 7661 7469           elevati
-00010400: 6f6e 203d 2074 6172 6765 745f 746f 705f  on = target_top_
-00010410: 656c 6576 6174 696f 6e20 2b20 6f66 6673  elevation + offs
-00010420: 6574 5f7a 0a20 2020 2020 2020 2065 6c73  et_z.        els
-00010430: 653a 0a20 2020 2020 2020 2020 2020 2066  e:.            f
-00010440: 6c69 705f 616e 676c 6520 3d20 7365 6c66  lip_angle = self
-00010450: 2e5f 6564 625f 7661 6c75 6528 2231 3830  ._edb_value("180
-00010460: 6465 6722 290a 2020 2020 2020 2020 2020  deg").          
-00010470: 2020 656c 6576 6174 696f 6e20 3d20 7461    elevation = ta
-00010480: 7267 6574 5f62 6f74 746f 6d5f 656c 6576  rget_bottom_elev
-00010490: 6174 696f 6e20 2d20 6f66 6673 6574 5f7a  ation - offset_z
-000104a0: 0a20 2020 2020 2020 2068 5f73 7461 636b  .        h_stack
-000104b0: 7570 203d 2073 656c 662e 5f65 6462 5f76  up = self._edb_v
-000104c0: 616c 7565 2865 6c65 7661 7469 6f6e 290a  alue(elevation).
-000104d0: 2020 2020 2020 2020 6c6f 6361 7469 6f6e          location
-000104e0: 203d 2073 656c 662e 5f70 6564 622e 706f   = self._pedb.po
-000104f0: 696e 745f 3364 286f 6666 7365 745f 782c  int_3d(offset_x,
-00010500: 206f 6666 7365 745f 792c 2068 5f73 7461   offset_y, h_sta
-00010510: 636b 7570 290a 0a20 2020 2020 2020 206d  ckup)..        m
-00010520: 6361 645f 6d6f 6465 6c20 3d20 7365 6c66  cad_model = self
-00010530: 2e5f 7065 6462 2e65 6462 5f61 7069 2e4d  ._pedb.edb_api.M
-00010540: 6361 644d 6f64 656c 2e43 7265 6174 6533  cadModel.Create3
-00010550: 4443 6f6d 7028 7365 6c66 2e5f 7065 6462  DComp(self._pedb
-00010560: 2e61 6374 6976 655f 6c61 796f 7574 2c20  .active_layout, 
-00010570: 6133 6463 6f6d 705f 7061 7468 290a 2020  a3dcomp_path).  
-00010580: 2020 2020 2020 6966 206d 6361 645f 6d6f        if mcad_mo
-00010590: 6465 6c2e 4973 4e75 6c6c 2829 3a20 2023  del.IsNull():  #
-000105a0: 2070 7261 676d 613a 206e 6f20 636f 7665   pragma: no cove
-000105b0: 720a 2020 2020 2020 2020 2020 2020 6c6f  r.            lo
-000105c0: 6767 6572 2e65 7272 6f72 2822 4661 696c  gger.error("Fail
-000105d0: 6564 2074 6f20 6372 6561 7465 204d 4341  ed to create MCA
-000105e0: 4420 6d6f 6465 6c20 6672 6f6d 2061 3364  D model from a3d
-000105f0: 636f 6d70 2229 0a20 2020 2020 2020 2020  comp").         
-00010600: 2020 2072 6574 7572 6e20 4661 6c73 650a     return False.
-00010610: 0a20 2020 2020 2020 2063 656c 6c5f 696e  .        cell_in
-00010620: 7374 616e 6365 203d 206d 6361 645f 6d6f  stance = mcad_mo
-00010630: 6465 6c2e 4765 7443 656c 6c49 6e73 7461  del.GetCellInsta
-00010640: 6e63 6528 290a 2020 2020 2020 2020 6966  nce().        if
-00010650: 2063 656c 6c5f 696e 7374 616e 6365 2e49   cell_instance.I
-00010660: 734e 756c 6c28 293a 2020 2320 7072 6167  sNull():  # prag
-00010670: 6d61 3a20 6e6f 2063 6f76 6572 0a20 2020  ma: no cover.   
-00010680: 2020 2020 2020 2020 206c 6f67 6765 722e           logger.
-00010690: 6572 726f 7228 2243 656c 6c20 696e 7374  error("Cell inst
-000106a0: 616e 6365 206f 6620 6133 6463 6f6d 7020  ance of a3dcomp 
-000106b0: 6973 206e 756c 6c22 290a 2020 2020 2020  is null").      
-000106c0: 2020 2020 2020 7265 7475 726e 2046 616c        return Fal
-000106d0: 7365 0a0a 2020 2020 2020 2020 6966 206e  se..        if n
-000106e0: 6f74 2063 656c 6c5f 696e 7374 616e 6365  ot cell_instance
-000106f0: 2e53 6574 4973 3344 506c 6163 656d 656e  .SetIs3DPlacemen
-00010700: 7428 5472 7565 293a 2020 2320 7072 6167  t(True):  # prag
-00010710: 6d61 3a20 6e6f 2063 6f76 6572 0a20 2020  ma: no cover.   
-00010720: 2020 2020 2020 2020 206c 6f67 6765 722e           logger.
-00010730: 6572 726f 7228 2246 6169 6c65 6420 746f  error("Failed to
-00010740: 2073 6574 2033 4420 706c 6163 656d 656e   set 3D placemen
-00010750: 7420 6f6e 2061 3364 636f 6d70 2063 656c  t on a3dcomp cel
-00010760: 6c20 696e 7374 616e 6365 2229 0a20 2020  l instance").   
-00010770: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00010780: 4661 6c73 650a 0a20 2020 2020 2020 2069  False..        i
-00010790: 6620 6e6f 7420 6365 6c6c 5f69 6e73 7461  f not cell_insta
-000107a0: 6e63 652e 5365 7433 4454 7261 6e73 666f  nce.Set3DTransfo
-000107b0: 726d 6174 696f 6e28 0a20 2020 2020 2020  rmation(.       
-000107c0: 2020 2020 206c 6f63 616c 5f6f 7269 6769       local_origi
-000107d0: 6e2c 2072 6f74 6174 696f 6e5f 6178 6973  n, rotation_axis
-000107e0: 5f66 726f 6d2c 2072 6f74 6174 696f 6e5f  _from, rotation_
-000107f0: 6178 6973 5f74 6f2c 2066 6c69 705f 616e  axis_to, flip_an
-00010800: 676c 652c 206c 6f63 6174 696f 6e0a 2020  gle, location.  
-00010810: 2020 2020 2020 293a 2020 2320 7072 6167        ):  # prag
-00010820: 6d61 3a20 6e6f 2063 6f76 6572 0a20 2020  ma: no cover.   
-00010830: 2020 2020 2020 2020 206c 6f67 6765 722e           logger.
-00010840: 6572 726f 7228 2246 6169 6c65 6420 746f  error("Failed to
-00010850: 2073 6574 2033 4420 7472 616e 7366 6f72   set 3D transfor
-00010860: 6d20 6f6e 2061 3364 636f 6d70 2063 656c  m on a3dcomp cel
-00010870: 6c20 696e 7374 616e 6365 2229 0a20 2020  l instance").   
-00010880: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00010890: 4661 6c73 650a 2020 2020 2020 2020 7365  False.        se
-000108a0: 6c66 2e72 6566 7265 7368 5f6c 6179 6572  lf.refresh_layer
-000108b0: 5f63 6f6c 6c65 6374 696f 6e28 290a 2020  _collection().  
-000108c0: 2020 2020 2020 7265 7475 726e 2054 7275        return Tru
-000108d0: 650a 0a20 2020 2040 7079 6564 625f 6675  e..    @pyedb_fu
-000108e0: 6e63 7469 6f6e 5f68 616e 646c 6572 2829  nction_handler()
-000108f0: 0a20 2020 2064 6566 2072 6573 6964 7561  .    def residua
-00010900: 6c5f 636f 7070 6572 5f61 7265 615f 7065  l_copper_area_pe
-00010910: 725f 6c61 7965 7228 7365 6c66 293a 0a20  r_layer(self):. 
-00010920: 2020 2020 2020 2022 2222 5265 706f 7274         """Report
-00010930: 2072 6573 6964 7561 6c20 636f 7070 6572   residual copper
-00010940: 2061 7265 6120 7065 7220 6c61 7965 7220   area per layer 
-00010950: 696e 2070 6572 6365 6e74 6167 652e 0a0a  in percentage...
-00010960: 2020 2020 2020 2020 5265 7475 726e 730a          Returns.
-00010970: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0a          -------.
-00010980: 2020 2020 2020 2020 6469 6374 0a20 2020          dict.   
-00010990: 2020 2020 2020 2020 2043 6f70 7065 7220           Copper 
-000109a0: 6172 6561 2070 6572 206c 6179 6572 2e0a  area per layer..
-000109b0: 0a20 2020 2020 2020 2045 7861 6d70 6c65  .        Example
-000109c0: 730a 2020 2020 2020 2020 2d2d 2d2d 2d2d  s.        ------
-000109d0: 2d2d 0a20 2020 2020 2020 203e 3e3e 2065  --.        >>> e
-000109e0: 6462 203d 2045 6462 2865 6462 7061 7468  db = Edb(edbpath
-000109f0: 3d74 6172 6765 7466 696c 6531 2c20 2065  =targetfile1,  e
-00010a00: 6462 7665 7273 696f 6e3d 2232 3032 312e  dbversion="2021.
-00010a10: 3222 290a 2020 2020 2020 2020 3e3e 3e20  2").        >>> 
-00010a20: 6564 622e 7374 6163 6b75 702e 7265 7369  edb.stackup.resi
-00010a30: 6475 616c 5f63 6f70 7065 725f 6172 6561  dual_copper_area
-00010a40: 5f70 6572 5f6c 6179 6572 2829 0a20 2020  _per_layer().   
-00010a50: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00010a60: 2074 656d 705f 6461 7461 203d 207b 6e61   temp_data = {na
-00010a70: 6d65 3a20 3020 666f 7220 6e61 6d65 2c20  me: 0 for name, 
-00010a80: 5f20 696e 2073 656c 662e 7369 676e 616c  _ in self.signal
-00010a90: 5f6c 6179 6572 732e 6974 656d 7328 297d  _layers.items()}
-00010aa0: 0a20 2020 2020 2020 206f 7574 6c69 6e65  .        outline
-00010ab0: 5f61 7265 6120 3d20 300a 2020 2020 2020  _area = 0.      
-00010ac0: 2020 666f 7220 6920 696e 2073 656c 662e    for i in self.
-00010ad0: 5f70 6564 622e 6d6f 6465 6c65 722e 7072  _pedb.modeler.pr
-00010ae0: 696d 6974 6976 6573 3a0a 2020 2020 2020  imitives:.      
-00010af0: 2020 2020 2020 6c61 7965 725f 6e61 6d65        layer_name
-00010b00: 203d 2069 2e47 6574 4c61 7965 7228 292e   = i.GetLayer().
-00010b10: 4765 744e 616d 6528 290a 2020 2020 2020  GetName().      
-00010b20: 2020 2020 2020 6966 206c 6179 6572 5f6e        if layer_n
-00010b30: 616d 652e 6c6f 7765 7228 2920 3d3d 2022  ame.lower() == "
-00010b40: 6f75 746c 696e 6522 3a0a 2020 2020 2020  outline":.      
-00010b50: 2020 2020 2020 2020 2020 6966 2069 2e61            if i.a
-00010b60: 7265 6128 2920 3e20 6f75 746c 696e 655f  rea() > outline_
-00010b70: 6172 6561 3a0a 2020 2020 2020 2020 2020  area:.          
-00010b80: 2020 2020 2020 2020 2020 6f75 746c 696e            outlin
-00010b90: 655f 6172 6561 203d 2069 2e61 7265 6128  e_area = i.area(
-00010ba0: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
-00010bb0: 6966 206c 6179 6572 5f6e 616d 6520 6e6f  if layer_name no
-00010bc0: 7420 696e 2074 656d 705f 6461 7461 3a0a  t in temp_data:.
-00010bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010be0: 636f 6e74 696e 7565 0a20 2020 2020 2020  continue.       
-00010bf0: 2020 2020 2065 6c69 6620 6e6f 7420 692e       elif not i.
-00010c00: 6973 5f76 6f69 643a 0a20 2020 2020 2020  is_void:.       
-00010c10: 2020 2020 2020 2020 2074 656d 705f 6461           temp_da
-00010c20: 7461 5b6c 6179 6572 5f6e 616d 655d 203d  ta[layer_name] =
-00010c30: 2074 656d 705f 6461 7461 5b6c 6179 6572   temp_data[layer
-00010c40: 5f6e 616d 655d 202b 2069 2e61 7265 6128  _name] + i.area(
-00010c50: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
-00010c60: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00010c70: 2020 2020 7061 7373 0a20 2020 2020 2020      pass.       
-00010c80: 2074 656d 705f 6461 7461 203d 207b 6e61   temp_data = {na
-00010c90: 6d65 3a20 6172 6561 202f 206f 7574 6c69  me: area / outli
-00010ca0: 6e65 5f61 7265 6120 2a20 3130 3020 666f  ne_area * 100 fo
-00010cb0: 7220 6e61 6d65 2c20 6172 6561 2069 6e20  r name, area in 
-00010cc0: 7465 6d70 5f64 6174 612e 6974 656d 7328  temp_data.items(
-00010cd0: 297d 0a20 2020 2020 2020 2072 6574 7572  )}.        retur
-00010ce0: 6e20 7465 6d70 5f64 6174 610a 0a20 2020  n temp_data..   
-00010cf0: 2023 2054 4f44 4f3a 2054 6869 7320 6d65   # TODO: This me
-00010d00: 7468 6f64 206d 6967 6874 206e 6565 6420  thod might need 
-00010d10: 736f 6d65 2072 6566 6163 746f 7269 6e67  some refactoring
-00010d20: 0a20 2020 2040 7079 6564 625f 6675 6e63  .    @pyedb_func
-00010d30: 7469 6f6e 5f68 616e 646c 6572 2829 0a20  tion_handler(). 
-00010d40: 2020 2064 6566 205f 696d 706f 7274 5f64     def _import_d
-00010d50: 6963 7428 7365 6c66 2c20 6a73 6f6e 5f64  ict(self, json_d
-00010d60: 6963 742c 2072 656e 616d 653d 4661 6c73  ict, rename=Fals
-00010d70: 6529 3a0a 2020 2020 2020 2020 2222 2249  e):.        """I
-00010d80: 6d70 6f72 7420 7374 6163 6b75 7020 6672  mport stackup fr
-00010d90: 6f6d 2061 2064 6963 7469 6f6e 6172 792e  om a dictionary.
-00010da0: 2222 220a 2020 2020 2020 2020 6966 206e  """.        if n
-00010db0: 6f74 2022 6d61 7465 7269 616c 7322 2069  ot "materials" i
-00010dc0: 6e20 6a73 6f6e 5f64 6963 743a 0a20 2020  n json_dict:.   
-00010dd0: 2020 2020 2020 2020 2073 656c 662e 5f6c           self._l
-00010de0: 6f67 6765 722e 7761 726e 696e 6728 2243  ogger.warning("C
-00010df0: 6f6e 6669 6775 7261 7469 6f6e 2066 696c  onfiguration fil
-00010e00: 6520 646f 6573 206e 6f74 2068 6176 6520  e does not have 
-00010e10: 6d61 7465 7269 616c 2064 6566 696e 6974  material definit
-00010e20: 696f 6e22 290a 2020 2020 2020 2020 2020  ion").          
-00010e30: 2020 7365 6c66 2e5f 6c6f 6767 6572 2e77    self._logger.w
-00010e40: 6172 6e69 6e67 280a 2020 2020 2020 2020  arning(.        
-00010e50: 2020 2020 2020 2020 2250 6c65 6173 6520          "Please 
-00010e60: 6368 6563 6b20 796f 7572 206a 736f 6e20  check your json 
-00010e70: 6f72 2078 6d6c 2066 696c 652c 2069 6620  or xml file, if 
-00010e80: 6e6f 206d 6174 6572 6961 6c20 6172 6520  no material are 
-00010e90: 6465 6669 6e65 6420 796f 7572 2070 726f  defined your pro
-00010ea0: 6a65 6374 2077 696c 6c22 0a20 2020 2020  ject will".     
-00010eb0: 2020 2020 2020 2020 2020 2022 6c69 6b65             "like
-00010ec0: 6c79 2066 6169 6c20 746f 2073 696d 756c  ly fail to simul
-00010ed0: 6174 6522 0a20 2020 2020 2020 2020 2020  ate".           
-00010ee0: 2029 0a20 2020 2020 2020 2065 6c73 653a   ).        else:
-00010ef0: 0a20 2020 2020 2020 2020 2020 206d 6174  .            mat
-00010f00: 7320 3d20 6a73 6f6e 5f64 6963 745b 226d  s = json_dict["m
-00010f10: 6174 6572 6961 6c73 225d 0a20 2020 2020  aterials"].     
-00010f20: 2020 2020 2020 2066 6f72 206d 6174 6572         for mater
-00010f30: 6961 6c20 696e 206d 6174 732e 7661 6c75  ial in mats.valu
-00010f40: 6573 2829 3a0a 2020 2020 2020 2020 2020  es():.          
-00010f50: 2020 2020 2020 6d61 7465 7269 616c 5f6e        material_n
-00010f60: 616d 6520 3d20 6d61 7465 7269 616c 5b22  ame = material["
-00010f70: 6e61 6d65 225d 0a20 2020 2020 2020 2020  name"].         
-00010f80: 2020 2020 2020 2064 656c 206d 6174 6572         del mater
-00010f90: 6961 6c5b 226e 616d 6522 5d0a 2020 2020  ial["name"].    
-00010fa0: 2020 2020 2020 2020 2020 2020 6966 206d              if m
-00010fb0: 6174 6572 6961 6c5f 6e61 6d65 206e 6f74  aterial_name not
-00010fc0: 2069 6e20 7365 6c66 2e5f 7065 6462 2e6d   in self._pedb.m
-00010fd0: 6174 6572 6961 6c73 3a0a 2020 2020 2020  aterials:.      
-00010fe0: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00010ff0: 6c66 2e5f 7065 6462 2e6d 6174 6572 6961  lf._pedb.materia
-00011000: 6c73 2e61 6464 5f6d 6174 6572 6961 6c28  ls.add_material(
-00011010: 6d61 7465 7269 616c 5f6e 616d 652c 202a  material_name, *
-00011020: 2a6d 6174 6572 6961 6c29 0a20 2020 2020  *material).     
-00011030: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00011040: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011050: 2020 2020 2073 656c 662e 5f70 6564 622e       self._pedb.
-00011060: 6d61 7465 7269 616c 732e 7570 6461 7465  materials.update
-00011070: 5f6d 6174 6572 6961 6c28 6d61 7465 7269  _material(materi
-00011080: 616c 5f6e 616d 652c 206d 6174 6572 6961  al_name, materia
-00011090: 6c29 0a20 2020 2020 2020 2074 656d 7020  l).        temp 
-000110a0: 3d20 7b69 3a20 6a20 666f 7220 692c 206a  = {i: j for i, j
-000110b0: 2069 6e20 6a73 6f6e 5f64 6963 745b 226c   in json_dict["l
-000110c0: 6179 6572 7322 5d2e 6974 656d 7328 2920  ayers"].items() 
-000110d0: 6966 206a 5b22 7479 7065 225d 2069 6e20  if j["type"] in 
-000110e0: 5b22 7369 676e 616c 222c 2022 6469 656c  ["signal", "diel
-000110f0: 6563 7472 6963 225d 7d0a 2020 2020 2020  ectric"]}.      
-00011100: 2020 636f 6e66 6967 5f66 696c 655f 6c61    config_file_la
-00011110: 7965 7273 203d 206c 6973 7428 7465 6d70  yers = list(temp
-00011120: 2e6b 6579 7328 2929 0a20 2020 2020 2020  .keys()).       
-00011130: 206c 6179 6f75 745f 6c61 7965 7273 203d   layout_layers =
-00011140: 206c 6973 7428 7365 6c66 2e73 7461 636b   list(self.stack
-00011150: 7570 5f6c 6179 6572 732e 6b65 7973 2829  up_layers.keys()
-00011160: 290a 2020 2020 2020 2020 7265 6e61 6d65  ).        rename
-00011170: 645f 6c61 7965 7273 203d 207b 7d0a 2020  d_layers = {}.  
-00011180: 2020 2020 2020 6966 2072 656e 616d 6520        if rename 
-00011190: 616e 6420 6c65 6e28 636f 6e66 6967 5f66  and len(config_f
-000111a0: 696c 655f 6c61 7965 7273 2920 3d3d 206c  ile_layers) == l
-000111b0: 656e 286c 6179 6f75 745f 6c61 7965 7273  en(layout_layers
-000111c0: 293a 0a20 2020 2020 2020 2020 2020 2066  ):.            f
-000111d0: 6f72 206c 6179 5f69 6e64 2069 6e20 7261  or lay_ind in ra
-000111e0: 6e67 6528 6c65 6e28 6c69 7374 2874 656d  nge(len(list(tem
-000111f0: 702e 6b65 7973 2829 2929 293a 0a20 2020  p.keys()))):.   
-00011200: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00011210: 6e6f 7420 636f 6e66 6967 5f66 696c 655f  not config_file_
-00011220: 6c61 7965 7273 5b6c 6179 5f69 6e64 5d20  layers[lay_ind] 
-00011230: 3d3d 206c 6179 6f75 745f 6c61 7965 7273  == layout_layers
-00011240: 5b6c 6179 5f69 6e64 5d3a 0a20 2020 2020  [lay_ind]:.     
-00011250: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00011260: 656e 616d 6564 5f6c 6179 6572 735b 6c61  enamed_layers[la
-00011270: 796f 7574 5f6c 6179 6572 735b 6c61 795f  yout_layers[lay_
-00011280: 696e 645d 5d20 3d20 636f 6e66 6967 5f66  ind]] = config_f
-00011290: 696c 655f 6c61 7965 7273 5b6c 6179 5f69  ile_layers[lay_i
-000112a0: 6e64 5d0a 2020 2020 2020 2020 666f 7220  nd].        for 
-000112b0: 6e61 6d65 2069 6e20 6c69 7374 2873 656c  name in list(sel
-000112c0: 662e 7374 6163 6b75 705f 6c61 7965 7273  f.stackup_layers
-000112d0: 2e6b 6579 7328 2929 3a0a 2020 2020 2020  .keys()):.      
-000112e0: 2020 2020 2020 6c61 7965 7220 3d20 4e6f        layer = No
-000112f0: 6e65 0a20 2020 2020 2020 2020 2020 2069  ne.            i
-00011300: 6620 6e61 6d65 2069 6e20 7465 6d70 3a0a  f name in temp:.
-00011310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011320: 6c61 7965 7220 3d20 7465 6d70 5b6e 616d  layer = temp[nam
-00011330: 655d 0a20 2020 2020 2020 2020 2020 2065  e].            e
-00011340: 6c69 6620 6e61 6d65 2069 6e20 7265 6e61  lif name in rena
-00011350: 6d65 645f 6c61 7965 7273 3a0a 2020 2020  med_layers:.    
-00011360: 2020 2020 2020 2020 2020 2020 6c61 7965              laye
-00011370: 7220 3d20 7465 6d70 5b72 656e 616d 6564  r = temp[renamed
-00011380: 5f6c 6179 6572 735b 6e61 6d65 5d5d 0a20  _layers[name]]. 
-00011390: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-000113a0: 656c 662e 7374 6163 6b75 705f 6c61 7965  elf.stackup_laye
-000113b0: 7273 5b6e 616d 655d 2e6e 616d 6520 3d20  rs[name].name = 
-000113c0: 7265 6e61 6d65 645f 6c61 7965 7273 5b6e  renamed_layers[n
-000113d0: 616d 655d 0a20 2020 2020 2020 2020 2020  ame].           
-000113e0: 2020 2020 206e 616d 6520 3d20 7265 6e61       name = rena
-000113f0: 6d65 645f 6c61 7965 7273 5b6e 616d 655d  med_layers[name]
-00011400: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-00011410: 653a 2020 2320 5265 6d6f 7665 206c 6179  e:  # Remove lay
-00011420: 6572 7320 6e6f 7420 696e 2063 6f6e 6669  ers not in confi
-00011430: 6720 6669 6c65 2e0a 2020 2020 2020 2020  g file..        
-00011440: 2020 2020 2020 2020 7365 6c66 2e72 656d          self.rem
-00011450: 6f76 655f 6c61 7965 7228 6e61 6d65 290a  ove_layer(name).
-00011460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011470: 7365 6c66 2e5f 6c6f 6767 6572 2e77 6172  self._logger.war
-00011480: 6e69 6e67 2866 224c 6179 6572 207b 6e61  ning(f"Layer {na
-00011490: 6d65 7d20 7765 7265 206e 6f74 2066 6f75  me} were not fou
-000114a0: 6e64 2069 6e20 636f 6e66 6967 7572 6174  nd in configurat
-000114b0: 696f 6e20 6669 6c65 2c20 7265 6d6f 7669  ion file, removi
-000114c0: 6e67 206c 6179 6572 2229 0a20 2020 2020  ng layer").     
-000114d0: 2020 2020 2020 2064 6566 6175 6c74 5f6c         default_l
-000114e0: 6179 6572 203d 207b 0a20 2020 2020 2020  ayer = {.       
-000114f0: 2020 2020 2020 2020 2022 6e61 6d65 223a           "name":
-00011500: 2022 6465 6661 756c 7422 2c0a 2020 2020   "default",.    
-00011510: 2020 2020 2020 2020 2020 2020 2274 7970              "typ
-00011520: 6522 3a20 2273 6967 6e61 6c22 2c0a 2020  e": "signal",.  
-00011530: 2020 2020 2020 2020 2020 2020 2020 226d                "m
-00011540: 6174 6572 6961 6c22 3a20 2263 6f70 7065  aterial": "coppe
-00011550: 7222 2c0a 2020 2020 2020 2020 2020 2020  r",.            
-00011560: 2020 2020 2264 6965 6c65 6374 7269 635f      "dielectric_
-00011570: 6669 6c6c 223a 2022 6672 345f 6570 6f78  fill": "fr4_epox
-00011580: 7922 2c0a 2020 2020 2020 2020 2020 2020  y",.            
-00011590: 2020 2020 2274 6869 636b 6e65 7373 223a      "thickness":
-000115a0: 2033 2e35 652d 3035 2c0a 2020 2020 2020   3.5e-05,.      
-000115b0: 2020 2020 2020 2020 2020 2265 7463 685f            "etch_
-000115c0: 6661 6374 6f72 223a 2030 2e30 2c0a 2020  factor": 0.0,.  
-000115d0: 2020 2020 2020 2020 2020 2020 2020 2272                "r
-000115e0: 6f75 6768 6e65 7373 5f65 6e61 626c 6564  oughness_enabled
-000115f0: 223a 2046 616c 7365 2c0a 2020 2020 2020  ": False,.      
-00011600: 2020 2020 2020 2020 2020 2274 6f70 5f68            "top_h
-00011610: 616c 6c68 7572 6179 5f6e 6f64 756c 655f  allhuray_nodule_
-00011620: 7261 6469 7573 223a 2030 2e30 2c0a 2020  radius": 0.0,.  
-00011630: 2020 2020 2020 2020 2020 2020 2020 2274                "t
-00011640: 6f70 5f68 616c 6c68 7572 6179 5f73 7572  op_hallhuray_sur
-00011650: 6661 6365 5f72 6174 696f 223a 2030 2e30  face_ratio": 0.0
-00011660: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00011670: 2020 2262 6f74 746f 6d5f 6861 6c6c 6875    "bottom_hallhu
-00011680: 7261 795f 6e6f 6475 6c65 5f72 6164 6975  ray_nodule_radiu
-00011690: 7322 3a20 302e 302c 0a20 2020 2020 2020  s": 0.0,.       
-000116a0: 2020 2020 2020 2020 2022 626f 7474 6f6d           "bottom
-000116b0: 5f68 616c 6c68 7572 6179 5f73 7572 6661  _hallhuray_surfa
-000116c0: 6365 5f72 6174 696f 223a 2030 2e30 2c0a  ce_ratio": 0.0,.
-000116d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000116e0: 2273 6964 655f 6861 6c6c 6875 7261 795f  "side_hallhuray_
-000116f0: 6e6f 6475 6c65 5f72 6164 6975 7322 3a20  nodule_radius": 
-00011700: 302e 302c 0a20 2020 2020 2020 2020 2020  0.0,.           
-00011710: 2020 2020 2022 7369 6465 5f68 616c 6c68       "side_hallh
-00011720: 7572 6179 5f73 7572 6661 6365 5f72 6174  uray_surface_rat
-00011730: 696f 223a 2030 2e30 2c0a 2020 2020 2020  io": 0.0,.      
-00011740: 2020 2020 2020 2020 2020 2275 7070 6572            "upper
-00011750: 5f65 6c65 7661 7469 6f6e 223a 2030 2e30  _elevation": 0.0
-00011760: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00011770: 2020 226c 6f77 6572 5f65 6c65 7661 7469    "lower_elevati
-00011780: 6f6e 223a 2030 2e30 2c0a 2020 2020 2020  on": 0.0,.      
-00011790: 2020 2020 2020 2020 2020 2263 6f6c 6f72            "color
-000117a0: 223a 205b 3234 322c 2031 3430 2c20 3130  ": [242, 140, 10
-000117b0: 325d 2c0a 2020 2020 2020 2020 2020 2020  2],.            
-000117c0: 7d0a 2020 2020 2020 2020 2020 2020 6966  }.            if
-000117d0: 206c 6179 6572 3a0a 2020 2020 2020 2020   layer:.        
-000117e0: 2020 2020 2020 2020 6966 2022 636f 6c6f          if "colo
-000117f0: 7222 2069 6e20 6c61 7965 723a 0a20 2020  r" in layer:.   
-00011800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011810: 2064 6566 6175 6c74 5f6c 6179 6572 5b22   default_layer["
-00011820: 636f 6c6f 7222 5d20 3d20 6c61 7965 725b  color"] = layer[
-00011830: 2263 6f6c 6f72 225d 0a20 2020 2020 2020  "color"].       
-00011840: 2020 2020 2020 2020 2065 6c69 6620 6e6f           elif no
-00011850: 7420 6c61 7965 725b 2274 7970 6522 5d20  t layer["type"] 
-00011860: 3d3d 2022 7369 676e 616c 223a 0a20 2020  == "signal":.   
-00011870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011880: 2064 6566 6175 6c74 5f6c 6179 6572 5b22   default_layer["
-00011890: 636f 6c6f 7222 5d20 3d20 5b32 372c 2031  color"] = [27, 1
-000118a0: 3130 2c20 3736 5d0a 0a20 2020 2020 2020  10, 76]..       
-000118b0: 2020 2020 2020 2020 2066 6f72 206b 2c20           for k, 
-000118c0: 7620 696e 206c 6179 6572 2e69 7465 6d73  v in layer.items
-000118d0: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
-000118e0: 2020 2020 2020 2020 6465 6661 756c 745f          default_
-000118f0: 6c61 7965 725b 6b5d 203d 2076 0a20 2020  layer[k] = v.   
-00011900: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-00011910: 662e 7374 6163 6b75 705f 6c61 7965 7273  f.stackup_layers
-00011920: 5b6e 616d 655d 2e5f 6c6f 6164 5f6c 6179  [name]._load_lay
-00011930: 6572 2864 6566 6175 6c74 5f6c 6179 6572  er(default_layer
-00011940: 290a 2020 2020 2020 2020 666f 7220 6c61  ).        for la
-00011950: 7965 725f 6e61 6d65 2c20 6c61 7965 7220  yer_name, layer 
-00011960: 696e 2074 656d 702e 6974 656d 7328 293a  in temp.items():
-00011970: 2020 2320 6c6f 6f70 696e 6720 6f76 6572    # looping over
-00011980: 2070 6f74 656e 7469 616c 206e 6577 206c   potential new l
-00011990: 6179 6572 7320 746f 2061 6464 0a20 2020  ayers to add.   
-000119a0: 2020 2020 2020 2020 2069 6620 6c61 7965           if laye
-000119b0: 725f 6e61 6d65 2069 6e20 7365 6c66 2e73  r_name in self.s
-000119c0: 7461 636b 7570 5f6c 6179 6572 733a 0a20  tackup_layers:. 
-000119d0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-000119e0: 6f6e 7469 6e75 6520 2023 2069 6620 6c61  ontinue  # if la
-000119f0: 7965 7220 6578 6973 742c 2073 6b69 700a  yer exist, skip.
-00011a00: 2020 2020 2020 2020 2020 2020 2320 6164              # ad
-00011a10: 6469 6e67 206c 6179 6572 0a20 2020 2020  ding layer.     
-00011a20: 2020 2020 2020 2064 6566 6175 6c74 5f6c         default_l
-00011a30: 6179 6572 203d 207b 0a20 2020 2020 2020  ayer = {.       
-00011a40: 2020 2020 2020 2020 2022 6e61 6d65 223a           "name":
-00011a50: 2022 6465 6661 756c 7422 2c0a 2020 2020   "default",.    
-00011a60: 2020 2020 2020 2020 2020 2020 2274 7970              "typ
-00011a70: 6522 3a20 2273 6967 6e61 6c22 2c0a 2020  e": "signal",.  
-00011a80: 2020 2020 2020 2020 2020 2020 2020 226d                "m
-00011a90: 6174 6572 6961 6c22 3a20 2263 6f70 7065  aterial": "coppe
-00011aa0: 7222 2c0a 2020 2020 2020 2020 2020 2020  r",.            
-00011ab0: 2020 2020 2264 6965 6c65 6374 7269 635f      "dielectric_
-00011ac0: 6669 6c6c 223a 2022 6672 345f 6570 6f78  fill": "fr4_epox
-00011ad0: 7922 2c0a 2020 2020 2020 2020 2020 2020  y",.            
-00011ae0: 2020 2020 2274 6869 636b 6e65 7373 223a      "thickness":
-00011af0: 2033 2e35 652d 3035 2c0a 2020 2020 2020   3.5e-05,.      
-00011b00: 2020 2020 2020 2020 2020 2265 7463 685f            "etch_
-00011b10: 6661 6374 6f72 223a 2030 2e30 2c0a 2020  factor": 0.0,.  
-00011b20: 2020 2020 2020 2020 2020 2020 2020 2272                "r
-00011b30: 6f75 6768 6e65 7373 5f65 6e61 626c 6564  oughness_enabled
-00011b40: 223a 2046 616c 7365 2c0a 2020 2020 2020  ": False,.      
-00011b50: 2020 2020 2020 2020 2020 2274 6f70 5f68            "top_h
-00011b60: 616c 6c68 7572 6179 5f6e 6f64 756c 655f  allhuray_nodule_
-00011b70: 7261 6469 7573 223a 2030 2e30 2c0a 2020  radius": 0.0,.  
-00011b80: 2020 2020 2020 2020 2020 2020 2020 2274                "t
-00011b90: 6f70 5f68 616c 6c68 7572 6179 5f73 7572  op_hallhuray_sur
-00011ba0: 6661 6365 5f72 6174 696f 223a 2030 2e30  face_ratio": 0.0
-00011bb0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00011bc0: 2020 2262 6f74 746f 6d5f 6861 6c6c 6875    "bottom_hallhu
-00011bd0: 7261 795f 6e6f 6475 6c65 5f72 6164 6975  ray_nodule_radiu
-00011be0: 7322 3a20 302e 302c 0a20 2020 2020 2020  s": 0.0,.       
-00011bf0: 2020 2020 2020 2020 2022 626f 7474 6f6d           "bottom
-00011c00: 5f68 616c 6c68 7572 6179 5f73 7572 6661  _hallhuray_surfa
-00011c10: 6365 5f72 6174 696f 223a 2030 2e30 2c0a  ce_ratio": 0.0,.
-00011c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011c30: 2273 6964 655f 6861 6c6c 6875 7261 795f  "side_hallhuray_
-00011c40: 6e6f 6475 6c65 5f72 6164 6975 7322 3a20  nodule_radius": 
-00011c50: 302e 302c 0a20 2020 2020 2020 2020 2020  0.0,.           
-00011c60: 2020 2020 2022 7369 6465 5f68 616c 6c68       "side_hallh
-00011c70: 7572 6179 5f73 7572 6661 6365 5f72 6174  uray_surface_rat
-00011c80: 696f 223a 2030 2e30 2c0a 2020 2020 2020  io": 0.0,.      
-00011c90: 2020 2020 2020 2020 2020 2275 7070 6572            "upper
-00011ca0: 5f65 6c65 7661 7469 6f6e 223a 2030 2e30  _elevation": 0.0
-00011cb0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00011cc0: 2020 226c 6f77 6572 5f65 6c65 7661 7469    "lower_elevati
-00011cd0: 6f6e 223a 2030 2e30 2c0a 2020 2020 2020  on": 0.0,.      
-00011ce0: 2020 2020 2020 2020 2020 2263 6f6c 6f72            "color
-00011cf0: 223a 205b 3234 322c 2031 3430 2c20 3130  ": [242, 140, 10
-00011d00: 325d 2c0a 2020 2020 2020 2020 2020 2020  2],.            
-00011d10: 7d0a 0a20 2020 2020 2020 2020 2020 2069  }..            i
-00011d20: 6620 2263 6f6c 6f72 2220 696e 206c 6179  f "color" in lay
-00011d30: 6572 3a0a 2020 2020 2020 2020 2020 2020  er:.            
-00011d40: 2020 2020 6465 6661 756c 745f 6c61 7965      default_laye
-00011d50: 725b 2263 6f6c 6f72 225d 203d 206c 6179  r["color"] = lay
-00011d60: 6572 5b22 636f 6c6f 7222 5d0a 2020 2020  er["color"].    
-00011d70: 2020 2020 2020 2020 656c 6966 206e 6f74          elif not
-00011d80: 206c 6179 6572 5b22 7479 7065 225d 203d   layer["type"] =
-00011d90: 3d20 2273 6967 6e61 6c22 3a0a 2020 2020  = "signal":.    
-00011da0: 2020 2020 2020 2020 2020 2020 6465 6661              defa
-00011db0: 756c 745f 6c61 7965 725b 2263 6f6c 6f72  ult_layer["color
-00011dc0: 225d 203d 205b 3237 2c20 3131 302c 2037  "] = [27, 110, 7
-00011dd0: 365d 0a0a 2020 2020 2020 2020 2020 2020  6]..            
-00011de0: 666f 7220 6b2c 2076 2069 6e20 6c61 7965  for k, v in laye
-00011df0: 722e 6974 656d 7328 293a 0a20 2020 2020  r.items():.     
-00011e00: 2020 2020 2020 2020 2020 2064 6566 6175             defau
-00011e10: 6c74 5f6c 6179 6572 5b6b 5d20 3d20 760a  lt_layer[k] = v.
-00011e20: 0a20 2020 2020 2020 2020 2020 2074 656d  .            tem
-00011e30: 705f 3220 3d20 6c69 7374 2874 656d 702e  p_2 = list(temp.
-00011e40: 6b65 7973 2829 290a 2020 2020 2020 2020  keys()).        
-00011e50: 2020 2020 6966 2074 656d 705f 322e 696e      if temp_2.in
-00011e60: 6465 7828 6c61 7965 725f 6e61 6d65 2920  dex(layer_name) 
-00011e70: 3d3d 2030 3a0a 2020 2020 2020 2020 2020  == 0:.          
-00011e80: 2020 2020 2020 6e65 775f 6c61 7965 7220        new_layer 
-00011e90: 3d20 7365 6c66 2e61 6464 5f6c 6179 6572  = self.add_layer
-00011ea0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00011eb0: 2020 2020 2020 6c61 7965 725f 6e61 6d65        layer_name
-00011ec0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00011ed0: 2020 2020 2020 6d65 7468 6f64 3d22 6164        method="ad
-00011ee0: 645f 6f6e 5f74 6f70 222c 0a20 2020 2020  d_on_top",.     
-00011ef0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-00011f00: 6179 6572 5f74 7970 653d 6465 6661 756c  ayer_type=defaul
-00011f10: 745f 6c61 7965 725b 2274 7970 6522 5d2c  t_layer["type"],
-00011f20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011f30: 2020 2020 206d 6174 6572 6961 6c3d 6465       material=de
-00011f40: 6661 756c 745f 6c61 7965 725b 226d 6174  fault_layer["mat
-00011f50: 6572 6961 6c22 5d2c 0a20 2020 2020 2020  erial"],.       
-00011f60: 2020 2020 2020 2020 2020 2020 2066 696c               fil
-00011f70: 6c4d 6174 6572 6961 6c3d 6465 6661 756c  lMaterial=defaul
-00011f80: 745f 6c61 7965 725b 2264 6965 6c65 6374  t_layer["dielect
-00011f90: 7269 635f 6669 6c6c 225d 2c0a 2020 2020  ric_fill"],.    
-00011fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011fb0: 7468 6963 6b6e 6573 733d 6465 6661 756c  thickness=defaul
-00011fc0: 745f 6c61 7965 725b 2274 6869 636b 6e65  t_layer["thickne
-00011fd0: 7373 225d 2c0a 2020 2020 2020 2020 2020  ss"],.          
-00011fe0: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
-00011ff0: 2020 2020 2065 6c69 6620 7465 6d70 5f32       elif temp_2
-00012000: 2e69 6e64 6578 286c 6179 6572 5f6e 616d  .index(layer_nam
-00012010: 6529 203d 3d20 6c65 6e28 7465 6d70 5f32  e) == len(temp_2
-00012020: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00012030: 2020 206e 6577 5f6c 6179 6572 203d 2073     new_layer = s
-00012040: 656c 662e 6164 645f 6c61 7965 7228 0a20  elf.add_layer(. 
-00012050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012060: 2020 206c 6179 6572 5f6e 616d 652c 0a20     layer_name,. 
-00012070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012080: 2020 2062 6173 655f 6c61 7965 723d 6c61     base_layer=la
-00012090: 7965 725f 6e61 6d65 2c0a 2020 2020 2020  yer_name,.      
-000120a0: 2020 2020 2020 2020 2020 2020 2020 6d65                me
-000120b0: 7468 6f64 3d22 6164 645f 6f6e 5f62 6f74  thod="add_on_bot
-000120c0: 746f 6d22 2c0a 2020 2020 2020 2020 2020  tom",.          
-000120d0: 2020 2020 2020 2020 2020 6c61 7965 725f            layer_
-000120e0: 7479 7065 3d64 6566 6175 6c74 5f6c 6179  type=default_lay
-000120f0: 6572 5b22 7479 7065 225d 2c0a 2020 2020  er["type"],.    
-00012100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012110: 6d61 7465 7269 616c 3d64 6566 6175 6c74  material=default
-00012120: 5f6c 6179 6572 5b22 6d61 7465 7269 616c  _layer["material
-00012130: 225d 2c0a 2020 2020 2020 2020 2020 2020  "],.            
-00012140: 2020 2020 2020 2020 6669 6c6c 4d61 7465          fillMate
-00012150: 7269 616c 3d64 6566 6175 6c74 5f6c 6179  rial=default_lay
-00012160: 6572 5b22 6469 656c 6563 7472 6963 5f66  er["dielectric_f
-00012170: 696c 6c22 5d2c 0a20 2020 2020 2020 2020  ill"],.         
-00012180: 2020 2020 2020 2020 2020 2074 6869 636b             thick
-00012190: 6e65 7373 3d64 6566 6175 6c74 5f6c 6179  ness=default_lay
-000121a0: 6572 5b22 7468 6963 6b6e 6573 7322 5d2c  er["thickness"],
-000121b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000121c0: 2029 0a20 2020 2020 2020 2020 2020 2065   ).            e
-000121d0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-000121e0: 2020 2020 206e 6577 5f6c 6179 6572 203d       new_layer =
-000121f0: 2073 656c 662e 6164 645f 6c61 7965 7228   self.add_layer(
-00012200: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00012210: 2020 2020 206c 6179 6572 5f6e 616d 652c       layer_name,
-00012220: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00012230: 2020 2020 2062 6173 655f 6c61 7965 723d       base_layer=
-00012240: 7465 6d70 5f32 5b74 656d 705f 322e 696e  temp_2[temp_2.in
-00012250: 6465 7828 6c61 7965 725f 6e61 6d65 2920  dex(layer_name) 
-00012260: 2d20 315d 2c0a 2020 2020 2020 2020 2020  - 1],.          
-00012270: 2020 2020 2020 2020 2020 6d65 7468 6f64            method
-00012280: 3d22 696e 7365 7274 5f62 656c 6f77 222c  ="insert_below",
+0000fe70: 5468 6520 7820 6f66 6673 6574 2076 616c  The x offset val
+0000fe80: 7565 2e0a 2020 2020 2020 2020 2020 2020  ue..            
+0000fe90: 5468 6520 6465 6661 756c 7420 7661 6c75  The default valu
+0000fea0: 6520 6973 2060 6030 2e30 6060 2e0a 2020  e is ``0.0``..  
+0000feb0: 2020 2020 2020 6f66 6673 6574 5f79 203a        offset_y :
+0000fec0: 2064 6f75 626c 652c 206f 7074 696f 6e61   double, optiona
+0000fed0: 6c0a 2020 2020 2020 2020 2020 2020 5468  l.            Th
+0000fee0: 6520 7920 6f66 6673 6574 2076 616c 7565  e y offset value
+0000fef0: 2e0a 2020 2020 2020 2020 2020 2020 5468  ..            Th
+0000ff00: 6520 6465 6661 756c 7420 7661 6c75 6520  e default value 
+0000ff10: 6973 2060 6030 2e30 6060 2e0a 2020 2020  is ``0.0``..    
+0000ff20: 2020 2020 6f66 6673 6574 5f7a 203a 2064      offset_z : d
+0000ff30: 6f75 626c 652c 206f 7074 696f 6e61 6c0a  ouble, optional.
+0000ff40: 2020 2020 2020 2020 2020 2020 5468 6520              The 
+0000ff50: 7a20 6f66 6673 6574 2076 616c 7565 2e20  z offset value. 
+0000ff60: 2869 2e65 2e20 656c 6576 6174 696f 6e29  (i.e. elevation)
+0000ff70: 0a20 2020 2020 2020 2020 2020 2054 6865  .            The
+0000ff80: 2064 6566 6175 6c74 2076 616c 7565 2069   default value i
+0000ff90: 7320 6060 302e 3060 602e 0a20 2020 2020  s ``0.0``..     
+0000ffa0: 2020 2070 6c61 6365 5f6f 6e5f 746f 7020     place_on_top 
+0000ffb0: 3a20 626f 6f6c 2c20 6f70 7469 6f6e 616c  : bool, optional
+0000ffc0: 0a20 2020 2020 2020 2020 2020 2057 6865  .            Whe
+0000ffd0: 7468 6572 2074 6f20 706c 6163 6520 7468  ther to place th
+0000ffe0: 6520 3344 2043 6f6d 706f 6e65 6e74 206f  e 3D Component o
+0000fff0: 6e20 7468 6520 746f 7020 6f72 2074 6865  n the top or the
+00010000: 2062 6f74 746f 6d20 6f66 2074 6869 7320   bottom of this 
+00010010: 6c61 796f 7574 2e0a 2020 2020 2020 2020  layout..        
+00010020: 2020 2020 4966 2060 6046 616c 7365 6060      If ``False``
+00010030: 2074 6865 6e20 7468 6520 3344 2043 6f6d   then the 3D Com
+00010040: 706f 6e65 6e74 2077 696c 6c20 616c 736f  ponent will also
+00010050: 2062 6520 666c 6970 7065 6420 6f76 6572   be flipped over
+00010060: 2061 726f 756e 6420 6974 7320 5820 6178   around its X ax
+00010070: 6973 2e0a 0a20 2020 2020 2020 2052 6574  is...        Ret
+00010080: 7572 6e73 0a20 2020 2020 2020 202d 2d2d  urns.        ---
+00010090: 2d2d 2d2d 0a20 2020 2020 2020 2062 6f6f  ----.        boo
+000100a0: 6c0a 2020 2020 2020 2020 2020 2020 6060  l.            ``
+000100b0: 5472 7565 6060 2069 6620 7375 6363 6573  True`` if succes
+000100c0: 7366 756c 2061 6e64 2060 6046 616c 7365  sful and ``False
+000100d0: 6060 2069 6620 6e6f 742e 0a0a 2020 2020  `` if not...    
+000100e0: 2020 2020 4578 616d 706c 6573 0a20 2020      Examples.   
+000100f0: 2020 2020 202d 2d2d 2d2d 2d2d 2d0a 2020       --------.  
+00010100: 2020 2020 2020 3e3e 3e20 6564 6231 203d        >>> edb1 =
+00010110: 2045 6462 2865 6462 7061 7468 3d74 6172   Edb(edbpath=tar
+00010120: 6765 7466 696c 6531 2c20 2065 6462 7665  getfile1,  edbve
+00010130: 7273 696f 6e3d 2232 3032 312e 3222 290a  rsion="2021.2").
+00010140: 2020 2020 2020 2020 3e3e 3e20 6133 6463          >>> a3dc
+00010150: 6f6d 705f 7061 7468 203d 2022 636f 6e6e  omp_path = "conn
+00010160: 6563 746f 722e 6133 6463 6f6d 7022 0a20  ector.a3dcomp". 
+00010170: 2020 2020 2020 203e 3e3e 2065 6462 312e         >>> edb1.
+00010180: 7374 6163 6b75 702e 706c 6163 655f 6133  stackup.place_a3
+00010190: 6463 6f6d 705f 3364 5f70 6c61 6365 6d65  dcomp_3d_placeme
+000101a0: 6e74 2861 3364 636f 6d70 5f70 6174 682c  nt(a3dcomp_path,
+000101b0: 2061 6e67 6c65 3d30 2e30 2c20 6f66 6673   angle=0.0, offs
+000101c0: 6574 5f78 3d22 316d 6d22 2c0a 2020 2020  et_x="1mm",.    
+000101d0: 2020 2020 2e2e 2e20 2020 2020 2020 2020      ...         
+000101e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000101f0: 2020 2020 2020 2020 2020 6f66 6673 6574            offset
+00010200: 5f79 3d22 326d 6d22 2c20 666c 6970 7065  _y="2mm", flippe
+00010210: 645f 7374 6163 6b75 703d 4661 6c73 652c  d_stackup=False,
+00010220: 2070 6c61 6365 5f6f 6e5f 746f 703d 5472   place_on_top=Tr
+00010230: 7565 2c0a 2020 2020 2020 2020 2e2e 2e20  ue,.        ... 
+00010240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010260: 2020 290a 2020 2020 2020 2020 2222 220a    ).        """.
+00010270: 2020 2020 2020 2020 7a65 726f 5f64 6174          zero_dat
+00010280: 6120 3d20 7365 6c66 2e5f 6564 625f 7661  a = self._edb_va
+00010290: 6c75 6528 302e 3029 0a20 2020 2020 2020  lue(0.0).       
+000102a0: 206f 6e65 5f64 6174 6120 3d20 7365 6c66   one_data = self
+000102b0: 2e5f 6564 625f 7661 6c75 6528 312e 3029  ._edb_value(1.0)
+000102c0: 0a20 2020 2020 2020 206c 6f63 616c 5f6f  .        local_o
+000102d0: 7269 6769 6e20 3d20 7365 6c66 2e5f 7065  rigin = self._pe
+000102e0: 6462 2e70 6f69 6e74 5f33 6428 302e 302c  db.point_3d(0.0,
+000102f0: 2030 2e30 2c20 302e 3029 0a20 2020 2020   0.0, 0.0).     
+00010300: 2020 2072 6f74 6174 696f 6e5f 6178 6973     rotation_axis
+00010310: 5f66 726f 6d20 3d20 7365 6c66 2e5f 7065  _from = self._pe
+00010320: 6462 2e70 6f69 6e74 5f33 6428 312e 302c  db.point_3d(1.0,
+00010330: 2030 2e30 2c20 302e 3029 0a20 2020 2020   0.0, 0.0).     
+00010340: 2020 205f 616e 676c 6520 3d20 616e 676c     _angle = angl
+00010350: 6520 2a20 6d61 7468 2e70 6920 2f20 3138  e * math.pi / 18
+00010360: 302e 300a 2020 2020 2020 2020 726f 7461  0.0.        rota
+00010370: 7469 6f6e 5f61 7869 735f 746f 203d 2073  tion_axis_to = s
+00010380: 656c 662e 5f70 6564 622e 706f 696e 745f  elf._pedb.point_
+00010390: 3364 286d 6174 682e 636f 7328 5f61 6e67  3d(math.cos(_ang
+000103a0: 6c65 292c 202d 3120 2a20 6d61 7468 2e73  le), -1 * math.s
+000103b0: 696e 285f 616e 676c 6529 2c20 302e 3029  in(_angle), 0.0)
+000103c0: 0a0a 2020 2020 2020 2020 7374 6163 6b75  ..        stacku
+000103d0: 705f 7461 7267 6574 203d 2073 656c 662e  p_target = self.
+000103e0: 5f70 6564 622e 6564 625f 6170 692e 6365  _pedb.edb_api.ce
+000103f0: 6c6c 2e5f 6365 6c6c 2e4c 6179 6572 436f  ll._cell.LayerCo
+00010400: 6c6c 6563 7469 6f6e 2873 656c 662e 5f70  llection(self._p
+00010410: 6564 622e 6c61 796f 7574 2e6c 6179 6572  edb.layout.layer
+00010420: 5f63 6f6c 6c65 6374 696f 6e29 0a20 2020  _collection).   
+00010430: 2020 2020 2073 6967 5f73 6574 203d 2073       sig_set = s
+00010440: 656c 662e 5f70 6564 622e 6564 625f 6170  elf._pedb.edb_ap
+00010450: 692e 6365 6c6c 2e6c 6179 6572 5f74 7970  i.cell.layer_typ
+00010460: 655f 7365 742e 5369 676e 616c 4c61 7965  e_set.SignalLaye
+00010470: 7253 6574 0a20 2020 2020 2020 2072 6573  rSet.        res
+00010480: 203d 2073 7461 636b 7570 5f74 6172 6765   = stackup_targe
+00010490: 742e 4765 7454 6f70 426f 7474 6f6d 5374  t.GetTopBottomSt
+000104a0: 6163 6b75 704c 6179 6572 7328 7369 675f  ackupLayers(sig_
+000104b0: 7365 7429 0a20 2020 2020 2020 2074 6172  set).        tar
+000104c0: 6765 745f 746f 705f 656c 6576 6174 696f  get_top_elevatio
+000104d0: 6e20 3d20 7265 735b 325d 0a20 2020 2020  n = res[2].     
+000104e0: 2020 2074 6172 6765 745f 626f 7474 6f6d     target_bottom
+000104f0: 5f65 6c65 7661 7469 6f6e 203d 2072 6573  _elevation = res
+00010500: 5b34 5d0a 2020 2020 2020 2020 666c 6970  [4].        flip
+00010510: 5f61 6e67 6c65 203d 2073 656c 662e 5f65  _angle = self._e
+00010520: 6462 5f76 616c 7565 2822 3064 6567 2229  db_value("0deg")
+00010530: 0a20 2020 2020 2020 2069 6620 706c 6163  .        if plac
+00010540: 655f 6f6e 5f74 6f70 3a0a 2020 2020 2020  e_on_top:.      
+00010550: 2020 2020 2020 656c 6576 6174 696f 6e20        elevation 
+00010560: 3d20 7461 7267 6574 5f74 6f70 5f65 6c65  = target_top_ele
+00010570: 7661 7469 6f6e 202b 206f 6666 7365 745f  vation + offset_
+00010580: 7a0a 2020 2020 2020 2020 656c 7365 3a0a  z.        else:.
+00010590: 2020 2020 2020 2020 2020 2020 666c 6970              flip
+000105a0: 5f61 6e67 6c65 203d 2073 656c 662e 5f65  _angle = self._e
+000105b0: 6462 5f76 616c 7565 2822 3138 3064 6567  db_value("180deg
+000105c0: 2229 0a20 2020 2020 2020 2020 2020 2065  ").            e
+000105d0: 6c65 7661 7469 6f6e 203d 2074 6172 6765  levation = targe
+000105e0: 745f 626f 7474 6f6d 5f65 6c65 7661 7469  t_bottom_elevati
+000105f0: 6f6e 202d 206f 6666 7365 745f 7a0a 2020  on - offset_z.  
+00010600: 2020 2020 2020 685f 7374 6163 6b75 7020        h_stackup 
+00010610: 3d20 7365 6c66 2e5f 6564 625f 7661 6c75  = self._edb_valu
+00010620: 6528 656c 6576 6174 696f 6e29 0a20 2020  e(elevation).   
+00010630: 2020 2020 206c 6f63 6174 696f 6e20 3d20       location = 
+00010640: 7365 6c66 2e5f 7065 6462 2e70 6f69 6e74  self._pedb.point
+00010650: 5f33 6428 6f66 6673 6574 5f78 2c20 6f66  _3d(offset_x, of
+00010660: 6673 6574 5f79 2c20 685f 7374 6163 6b75  fset_y, h_stacku
+00010670: 7029 0a0a 2020 2020 2020 2020 6d63 6164  p)..        mcad
+00010680: 5f6d 6f64 656c 203d 2073 656c 662e 5f70  _model = self._p
+00010690: 6564 622e 6564 625f 6170 692e 4d63 6164  edb.edb_api.Mcad
+000106a0: 4d6f 6465 6c2e 4372 6561 7465 3344 436f  Model.Create3DCo
+000106b0: 6d70 2873 656c 662e 5f70 6564 622e 6163  mp(self._pedb.ac
+000106c0: 7469 7665 5f6c 6179 6f75 742c 2061 3364  tive_layout, a3d
+000106d0: 636f 6d70 5f70 6174 6829 0a20 2020 2020  comp_path).     
+000106e0: 2020 2069 6620 6d63 6164 5f6d 6f64 656c     if mcad_model
+000106f0: 2e49 734e 756c 6c28 293a 2020 2320 7072  .IsNull():  # pr
+00010700: 6167 6d61 3a20 6e6f 2063 6f76 6572 0a20  agma: no cover. 
+00010710: 2020 2020 2020 2020 2020 206c 6f67 6765             logge
+00010720: 722e 6572 726f 7228 2246 6169 6c65 6420  r.error("Failed 
+00010730: 746f 2063 7265 6174 6520 4d43 4144 206d  to create MCAD m
+00010740: 6f64 656c 2066 726f 6d20 6133 6463 6f6d  odel from a3dcom
+00010750: 7022 290a 2020 2020 2020 2020 2020 2020  p").            
+00010760: 7265 7475 726e 2046 616c 7365 0a0a 2020  return False..  
+00010770: 2020 2020 2020 6365 6c6c 5f69 6e73 7461        cell_insta
+00010780: 6e63 6520 3d20 6d63 6164 5f6d 6f64 656c  nce = mcad_model
+00010790: 2e47 6574 4365 6c6c 496e 7374 616e 6365  .GetCellInstance
+000107a0: 2829 0a20 2020 2020 2020 2069 6620 6365  ().        if ce
+000107b0: 6c6c 5f69 6e73 7461 6e63 652e 4973 4e75  ll_instance.IsNu
+000107c0: 6c6c 2829 3a20 2023 2070 7261 676d 613a  ll():  # pragma:
+000107d0: 206e 6f20 636f 7665 720a 2020 2020 2020   no cover.      
+000107e0: 2020 2020 2020 6c6f 6767 6572 2e65 7272        logger.err
+000107f0: 6f72 2822 4365 6c6c 2069 6e73 7461 6e63  or("Cell instanc
+00010800: 6520 6f66 2061 3364 636f 6d70 2069 7320  e of a3dcomp is 
+00010810: 6e75 6c6c 2229 0a20 2020 2020 2020 2020  null").         
+00010820: 2020 2072 6574 7572 6e20 4661 6c73 650a     return False.
+00010830: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+00010840: 6365 6c6c 5f69 6e73 7461 6e63 652e 5365  cell_instance.Se
+00010850: 7449 7333 4450 6c61 6365 6d65 6e74 2854  tIs3DPlacement(T
+00010860: 7275 6529 3a20 2023 2070 7261 676d 613a  rue):  # pragma:
+00010870: 206e 6f20 636f 7665 720a 2020 2020 2020   no cover.      
+00010880: 2020 2020 2020 6c6f 6767 6572 2e65 7272        logger.err
+00010890: 6f72 2822 4661 696c 6564 2074 6f20 7365  or("Failed to se
+000108a0: 7420 3344 2070 6c61 6365 6d65 6e74 206f  t 3D placement o
+000108b0: 6e20 6133 6463 6f6d 7020 6365 6c6c 2069  n a3dcomp cell i
+000108c0: 6e73 7461 6e63 6522 290a 2020 2020 2020  nstance").      
+000108d0: 2020 2020 2020 7265 7475 726e 2046 616c        return Fal
+000108e0: 7365 0a0a 2020 2020 2020 2020 6966 206e  se..        if n
+000108f0: 6f74 2063 656c 6c5f 696e 7374 616e 6365  ot cell_instance
+00010900: 2e53 6574 3344 5472 616e 7366 6f72 6d61  .Set3DTransforma
+00010910: 7469 6f6e 280a 2020 2020 2020 2020 2020  tion(.          
+00010920: 2020 6c6f 6361 6c5f 6f72 6967 696e 2c20    local_origin, 
+00010930: 726f 7461 7469 6f6e 5f61 7869 735f 6672  rotation_axis_fr
+00010940: 6f6d 2c20 726f 7461 7469 6f6e 5f61 7869  om, rotation_axi
+00010950: 735f 746f 2c20 666c 6970 5f61 6e67 6c65  s_to, flip_angle
+00010960: 2c20 6c6f 6361 7469 6f6e 0a20 2020 2020  , location.     
+00010970: 2020 2029 3a20 2023 2070 7261 676d 613a     ):  # pragma:
+00010980: 206e 6f20 636f 7665 720a 2020 2020 2020   no cover.      
+00010990: 2020 2020 2020 6c6f 6767 6572 2e65 7272        logger.err
+000109a0: 6f72 2822 4661 696c 6564 2074 6f20 7365  or("Failed to se
+000109b0: 7420 3344 2074 7261 6e73 666f 726d 206f  t 3D transform o
+000109c0: 6e20 6133 6463 6f6d 7020 6365 6c6c 2069  n a3dcomp cell i
+000109d0: 6e73 7461 6e63 6522 290a 2020 2020 2020  nstance").      
+000109e0: 2020 2020 2020 7265 7475 726e 2046 616c        return Fal
+000109f0: 7365 0a20 2020 2020 2020 2073 656c 662e  se.        self.
+00010a00: 7265 6672 6573 685f 6c61 7965 725f 636f  refresh_layer_co
+00010a10: 6c6c 6563 7469 6f6e 2829 0a20 2020 2020  llection().     
+00010a20: 2020 2072 6574 7572 6e20 5472 7565 0a0a     return True..
+00010a30: 2020 2020 4070 7965 6462 5f66 756e 6374      @pyedb_funct
+00010a40: 696f 6e5f 6861 6e64 6c65 7228 290a 2020  ion_handler().  
+00010a50: 2020 6465 6620 7265 7369 6475 616c 5f63    def residual_c
+00010a60: 6f70 7065 725f 6172 6561 5f70 6572 5f6c  opper_area_per_l
+00010a70: 6179 6572 2873 656c 6629 3a0a 2020 2020  ayer(self):.    
+00010a80: 2020 2020 2222 2252 6570 6f72 7420 7265      """Report re
+00010a90: 7369 6475 616c 2063 6f70 7065 7220 6172  sidual copper ar
+00010aa0: 6561 2070 6572 206c 6179 6572 2069 6e20  ea per layer in 
+00010ab0: 7065 7263 656e 7461 6765 2e0a 0a20 2020  percentage...   
+00010ac0: 2020 2020 2052 6574 7572 6e73 0a20 2020       Returns.   
+00010ad0: 2020 2020 202d 2d2d 2d2d 2d2d 0a20 2020       -------.   
+00010ae0: 2020 2020 2064 6963 740a 2020 2020 2020       dict.      
+00010af0: 2020 2020 2020 436f 7070 6572 2061 7265        Copper are
+00010b00: 6120 7065 7220 6c61 7965 722e 0a0a 2020  a per layer...  
+00010b10: 2020 2020 2020 4578 616d 706c 6573 0a20        Examples. 
+00010b20: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0a         --------.
+00010b30: 2020 2020 2020 2020 3e3e 3e20 6564 6220          >>> edb 
+00010b40: 3d20 4564 6228 6564 6270 6174 683d 7461  = Edb(edbpath=ta
+00010b50: 7267 6574 6669 6c65 312c 2020 6564 6276  rgetfile1,  edbv
+00010b60: 6572 7369 6f6e 3d22 3230 3231 2e32 2229  ersion="2021.2")
+00010b70: 0a20 2020 2020 2020 203e 3e3e 2065 6462  .        >>> edb
+00010b80: 2e73 7461 636b 7570 2e72 6573 6964 7561  .stackup.residua
+00010b90: 6c5f 636f 7070 6572 5f61 7265 615f 7065  l_copper_area_pe
+00010ba0: 725f 6c61 7965 7228 290a 2020 2020 2020  r_layer().      
+00010bb0: 2020 2222 220a 2020 2020 2020 2020 7465    """.        te
+00010bc0: 6d70 5f64 6174 6120 3d20 7b6e 616d 653a  mp_data = {name:
+00010bd0: 2030 2066 6f72 206e 616d 652c 205f 2069   0 for name, _ i
+00010be0: 6e20 7365 6c66 2e73 6967 6e61 6c5f 6c61  n self.signal_la
+00010bf0: 7965 7273 2e69 7465 6d73 2829 7d0a 2020  yers.items()}.  
+00010c00: 2020 2020 2020 6f75 746c 696e 655f 6172        outline_ar
+00010c10: 6561 203d 2030 0a20 2020 2020 2020 2066  ea = 0.        f
+00010c20: 6f72 2069 2069 6e20 7365 6c66 2e5f 7065  or i in self._pe
+00010c30: 6462 2e6d 6f64 656c 6572 2e70 7269 6d69  db.modeler.primi
+00010c40: 7469 7665 733a 0a20 2020 2020 2020 2020  tives:.         
+00010c50: 2020 206c 6179 6572 5f6e 616d 6520 3d20     layer_name = 
+00010c60: 692e 4765 744c 6179 6572 2829 2e47 6574  i.GetLayer().Get
+00010c70: 4e61 6d65 2829 0a20 2020 2020 2020 2020  Name().         
+00010c80: 2020 2069 6620 6c61 7965 725f 6e61 6d65     if layer_name
+00010c90: 2e6c 6f77 6572 2829 203d 3d20 226f 7574  .lower() == "out
+00010ca0: 6c69 6e65 223a 0a20 2020 2020 2020 2020  line":.         
+00010cb0: 2020 2020 2020 2069 6620 692e 6172 6561         if i.area
+00010cc0: 2829 203e 206f 7574 6c69 6e65 5f61 7265  () > outline_are
+00010cd0: 613a 0a20 2020 2020 2020 2020 2020 2020  a:.             
+00010ce0: 2020 2020 2020 206f 7574 6c69 6e65 5f61         outline_a
+00010cf0: 7265 6120 3d20 692e 6172 6561 2829 0a20  rea = i.area(). 
+00010d00: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+00010d10: 6c61 7965 725f 6e61 6d65 206e 6f74 2069  layer_name not i
+00010d20: 6e20 7465 6d70 5f64 6174 613a 0a20 2020  n temp_data:.   
+00010d30: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
+00010d40: 7469 6e75 650a 2020 2020 2020 2020 2020  tinue.          
+00010d50: 2020 656c 6966 206e 6f74 2069 2e69 735f    elif not i.is_
+00010d60: 766f 6964 3a0a 2020 2020 2020 2020 2020  void:.          
+00010d70: 2020 2020 2020 7465 6d70 5f64 6174 615b        temp_data[
+00010d80: 6c61 7965 725f 6e61 6d65 5d20 3d20 7465  layer_name] = te
+00010d90: 6d70 5f64 6174 615b 6c61 7965 725f 6e61  mp_data[layer_na
+00010da0: 6d65 5d20 2b20 692e 6172 6561 2829 0a20  me] + i.area(). 
+00010db0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00010dc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010dd0: 2070 6173 730a 2020 2020 2020 2020 7465   pass.        te
+00010de0: 6d70 5f64 6174 6120 3d20 7b6e 616d 653a  mp_data = {name:
+00010df0: 2061 7265 6120 2f20 6f75 746c 696e 655f   area / outline_
+00010e00: 6172 6561 202a 2031 3030 2066 6f72 206e  area * 100 for n
+00010e10: 616d 652c 2061 7265 6120 696e 2074 656d  ame, area in tem
+00010e20: 705f 6461 7461 2e69 7465 6d73 2829 7d0a  p_data.items()}.
+00010e30: 2020 2020 2020 2020 7265 7475 726e 2074          return t
+00010e40: 656d 705f 6461 7461 0a0a 2020 2020 2320  emp_data..    # 
+00010e50: 544f 444f 3a20 5468 6973 206d 6574 686f  TODO: This metho
+00010e60: 6420 6d69 6768 7420 6e65 6564 2073 6f6d  d might need som
+00010e70: 6520 7265 6661 6374 6f72 696e 670a 2020  e refactoring.  
+00010e80: 2020 4070 7965 6462 5f66 756e 6374 696f    @pyedb_functio
+00010e90: 6e5f 6861 6e64 6c65 7228 290a 2020 2020  n_handler().    
+00010ea0: 6465 6620 5f69 6d70 6f72 745f 6469 6374  def _import_dict
+00010eb0: 2873 656c 662c 206a 736f 6e5f 6469 6374  (self, json_dict
+00010ec0: 2c20 7265 6e61 6d65 3d46 616c 7365 293a  , rename=False):
+00010ed0: 0a20 2020 2020 2020 2022 2222 496d 706f  .        """Impo
+00010ee0: 7274 2073 7461 636b 7570 2066 726f 6d20  rt stackup from 
+00010ef0: 6120 6469 6374 696f 6e61 7279 2e22 2222  a dictionary."""
+00010f00: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+00010f10: 226d 6174 6572 6961 6c73 2220 696e 206a  "materials" in j
+00010f20: 736f 6e5f 6469 6374 3a0a 2020 2020 2020  son_dict:.      
+00010f30: 2020 2020 2020 7365 6c66 2e5f 6c6f 6767        self._logg
+00010f40: 6572 2e77 6172 6e69 6e67 2822 436f 6e66  er.warning("Conf
+00010f50: 6967 7572 6174 696f 6e20 6669 6c65 2064  iguration file d
+00010f60: 6f65 7320 6e6f 7420 6861 7665 206d 6174  oes not have mat
+00010f70: 6572 6961 6c20 6465 6669 6e69 7469 6f6e  erial definition
+00010f80: 2229 0a20 2020 2020 2020 2020 2020 2073  ").            s
+00010f90: 656c 662e 5f6c 6f67 6765 722e 7761 726e  elf._logger.warn
+00010fa0: 696e 6728 0a20 2020 2020 2020 2020 2020  ing(.           
+00010fb0: 2020 2020 2022 506c 6561 7365 2063 6865       "Please che
+00010fc0: 636b 2079 6f75 7220 6a73 6f6e 206f 7220  ck your json or 
+00010fd0: 786d 6c20 6669 6c65 2c20 6966 206e 6f20  xml file, if no 
+00010fe0: 6d61 7465 7269 616c 2061 7265 2064 6566  material are def
+00010ff0: 696e 6564 2079 6f75 7220 7072 6f6a 6563  ined your projec
+00011000: 7420 7769 6c6c 220a 2020 2020 2020 2020  t will".        
+00011010: 2020 2020 2020 2020 226c 696b 656c 7920          "likely 
+00011020: 6661 696c 2074 6f20 7369 6d75 6c61 7465  fail to simulate
+00011030: 220a 2020 2020 2020 2020 2020 2020 290a  ".            ).
+00011040: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00011050: 2020 2020 2020 2020 2020 6d61 7473 203d            mats =
+00011060: 206a 736f 6e5f 6469 6374 5b22 6d61 7465   json_dict["mate
+00011070: 7269 616c 7322 5d0a 2020 2020 2020 2020  rials"].        
+00011080: 2020 2020 666f 7220 6d61 7465 7269 616c      for material
+00011090: 2069 6e20 6d61 7473 2e76 616c 7565 7328   in mats.values(
+000110a0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+000110b0: 2020 206d 6174 6572 6961 6c5f 6e61 6d65     material_name
+000110c0: 203d 206d 6174 6572 6961 6c5b 226e 616d   = material["nam
+000110d0: 6522 5d0a 2020 2020 2020 2020 2020 2020  e"].            
+000110e0: 2020 2020 6465 6c20 6d61 7465 7269 616c      del material
+000110f0: 5b22 6e61 6d65 225d 0a20 2020 2020 2020  ["name"].       
+00011100: 2020 2020 2020 2020 2069 6620 6d61 7465           if mate
+00011110: 7269 616c 5f6e 616d 6520 6e6f 7420 696e  rial_name not in
+00011120: 2073 656c 662e 5f70 6564 622e 6d61 7465   self._pedb.mate
+00011130: 7269 616c 733a 0a20 2020 2020 2020 2020  rials:.         
+00011140: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00011150: 5f70 6564 622e 6d61 7465 7269 616c 732e  _pedb.materials.
+00011160: 6164 645f 6d61 7465 7269 616c 286d 6174  add_material(mat
+00011170: 6572 6961 6c5f 6e61 6d65 2c20 2a2a 6d61  erial_name, **ma
+00011180: 7465 7269 616c 290a 2020 2020 2020 2020  terial).        
+00011190: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+000111a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000111b0: 2020 7365 6c66 2e5f 7065 6462 2e6d 6174    self._pedb.mat
+000111c0: 6572 6961 6c73 2e75 7064 6174 655f 6d61  erials.update_ma
+000111d0: 7465 7269 616c 286d 6174 6572 6961 6c5f  terial(material_
+000111e0: 6e61 6d65 2c20 6d61 7465 7269 616c 290a  name, material).
+000111f0: 2020 2020 2020 2020 7465 6d70 203d 207b          temp = {
+00011200: 693a 206a 2066 6f72 2069 2c20 6a20 696e  i: j for i, j in
+00011210: 206a 736f 6e5f 6469 6374 5b22 6c61 7965   json_dict["laye
+00011220: 7273 225d 2e69 7465 6d73 2829 2069 6620  rs"].items() if 
+00011230: 6a5b 2274 7970 6522 5d20 696e 205b 2273  j["type"] in ["s
+00011240: 6967 6e61 6c22 2c20 2264 6965 6c65 6374  ignal", "dielect
+00011250: 7269 6322 5d7d 0a20 2020 2020 2020 2063  ric"]}.        c
+00011260: 6f6e 6669 675f 6669 6c65 5f6c 6179 6572  onfig_file_layer
+00011270: 7320 3d20 6c69 7374 2874 656d 702e 6b65  s = list(temp.ke
+00011280: 7973 2829 290a 2020 2020 2020 2020 6c61  ys()).        la
+00011290: 796f 7574 5f6c 6179 6572 7320 3d20 6c69  yout_layers = li
+000112a0: 7374 2873 656c 662e 7374 6163 6b75 705f  st(self.stackup_
+000112b0: 6c61 7965 7273 2e6b 6579 7328 2929 0a20  layers.keys()). 
+000112c0: 2020 2020 2020 2072 656e 616d 6564 5f6c         renamed_l
+000112d0: 6179 6572 7320 3d20 7b7d 0a20 2020 2020  ayers = {}.     
+000112e0: 2020 2069 6620 7265 6e61 6d65 2061 6e64     if rename and
+000112f0: 206c 656e 2863 6f6e 6669 675f 6669 6c65   len(config_file
+00011300: 5f6c 6179 6572 7329 203d 3d20 6c65 6e28  _layers) == len(
+00011310: 6c61 796f 7574 5f6c 6179 6572 7329 3a0a  layout_layers):.
+00011320: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00011330: 6c61 795f 696e 6420 696e 2072 616e 6765  lay_ind in range
+00011340: 286c 656e 286c 6973 7428 7465 6d70 2e6b  (len(list(temp.k
+00011350: 6579 7328 2929 2929 3a0a 2020 2020 2020  eys()))):.      
+00011360: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+00011370: 2063 6f6e 6669 675f 6669 6c65 5f6c 6179   config_file_lay
+00011380: 6572 735b 6c61 795f 696e 645d 203d 3d20  ers[lay_ind] == 
+00011390: 6c61 796f 7574 5f6c 6179 6572 735b 6c61  layout_layers[la
+000113a0: 795f 696e 645d 3a0a 2020 2020 2020 2020  y_ind]:.        
+000113b0: 2020 2020 2020 2020 2020 2020 7265 6e61              rena
+000113c0: 6d65 645f 6c61 7965 7273 5b6c 6179 6f75  med_layers[layou
+000113d0: 745f 6c61 7965 7273 5b6c 6179 5f69 6e64  t_layers[lay_ind
+000113e0: 5d5d 203d 2063 6f6e 6669 675f 6669 6c65  ]] = config_file
+000113f0: 5f6c 6179 6572 735b 6c61 795f 696e 645d  _layers[lay_ind]
+00011400: 0a20 2020 2020 2020 2066 6f72 206e 616d  .        for nam
+00011410: 6520 696e 206c 6973 7428 7365 6c66 2e73  e in list(self.s
+00011420: 7461 636b 7570 5f6c 6179 6572 732e 6b65  tackup_layers.ke
+00011430: 7973 2829 293a 0a20 2020 2020 2020 2020  ys()):.         
+00011440: 2020 206c 6179 6572 203d 204e 6f6e 650a     layer = None.
+00011450: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+00011460: 616d 6520 696e 2074 656d 703a 0a20 2020  ame in temp:.   
+00011470: 2020 2020 2020 2020 2020 2020 206c 6179               lay
+00011480: 6572 203d 2074 656d 705b 6e61 6d65 5d0a  er = temp[name].
+00011490: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+000114a0: 206e 616d 6520 696e 2072 656e 616d 6564   name in renamed
+000114b0: 5f6c 6179 6572 733a 0a20 2020 2020 2020  _layers:.       
+000114c0: 2020 2020 2020 2020 206c 6179 6572 203d           layer =
+000114d0: 2074 656d 705b 7265 6e61 6d65 645f 6c61   temp[renamed_la
+000114e0: 7965 7273 5b6e 616d 655d 5d0a 2020 2020  yers[name]].    
+000114f0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00011500: 2e73 7461 636b 7570 5f6c 6179 6572 735b  .stackup_layers[
+00011510: 6e61 6d65 5d2e 6e61 6d65 203d 2072 656e  name].name = ren
+00011520: 616d 6564 5f6c 6179 6572 735b 6e61 6d65  amed_layers[name
+00011530: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+00011540: 2020 6e61 6d65 203d 2072 656e 616d 6564    name = renamed
+00011550: 5f6c 6179 6572 735b 6e61 6d65 5d0a 2020  _layers[name].  
+00011560: 2020 2020 2020 2020 2020 656c 7365 3a20            else: 
+00011570: 2023 2052 656d 6f76 6520 6c61 7965 7273   # Remove layers
+00011580: 206e 6f74 2069 6e20 636f 6e66 6967 2066   not in config f
+00011590: 696c 652e 0a20 2020 2020 2020 2020 2020  ile..           
+000115a0: 2020 2020 2073 656c 662e 7265 6d6f 7665       self.remove
+000115b0: 5f6c 6179 6572 286e 616d 6529 0a20 2020  _layer(name).   
+000115c0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+000115d0: 662e 5f6c 6f67 6765 722e 7761 726e 696e  f._logger.warnin
+000115e0: 6728 6622 4c61 7965 7220 7b6e 616d 657d  g(f"Layer {name}
+000115f0: 2077 6572 6520 6e6f 7420 666f 756e 6420   were not found 
+00011600: 696e 2063 6f6e 6669 6775 7261 7469 6f6e  in configuration
+00011610: 2066 696c 652c 2072 656d 6f76 696e 6720   file, removing 
+00011620: 6c61 7965 7222 290a 2020 2020 2020 2020  layer").        
+00011630: 2020 2020 6465 6661 756c 745f 6c61 7965      default_laye
+00011640: 7220 3d20 7b0a 2020 2020 2020 2020 2020  r = {.          
+00011650: 2020 2020 2020 226e 616d 6522 3a20 2264        "name": "d
+00011660: 6566 6175 6c74 222c 0a20 2020 2020 2020  efault",.       
+00011670: 2020 2020 2020 2020 2022 7479 7065 223a           "type":
+00011680: 2022 7369 676e 616c 222c 0a20 2020 2020   "signal",.     
+00011690: 2020 2020 2020 2020 2020 2022 6d61 7465             "mate
+000116a0: 7269 616c 223a 2022 636f 7070 6572 222c  rial": "copper",
+000116b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000116c0: 2022 6469 656c 6563 7472 6963 5f66 696c   "dielectric_fil
+000116d0: 6c22 3a20 2246 5234 5f65 706f 7879 222c  l": "FR4_epoxy",
+000116e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000116f0: 2022 7468 6963 6b6e 6573 7322 3a20 332e   "thickness": 3.
+00011700: 3565 2d30 352c 0a20 2020 2020 2020 2020  5e-05,.         
+00011710: 2020 2020 2020 2022 6574 6368 5f66 6163         "etch_fac
+00011720: 746f 7222 3a20 302e 302c 0a20 2020 2020  tor": 0.0,.     
+00011730: 2020 2020 2020 2020 2020 2022 726f 7567             "roug
+00011740: 686e 6573 735f 656e 6162 6c65 6422 3a20  hness_enabled": 
+00011750: 4661 6c73 652c 0a20 2020 2020 2020 2020  False,.         
+00011760: 2020 2020 2020 2022 746f 705f 6861 6c6c         "top_hall
+00011770: 6875 7261 795f 6e6f 6475 6c65 5f72 6164  huray_nodule_rad
+00011780: 6975 7322 3a20 302e 302c 0a20 2020 2020  ius": 0.0,.     
+00011790: 2020 2020 2020 2020 2020 2022 746f 705f             "top_
+000117a0: 6861 6c6c 6875 7261 795f 7375 7266 6163  hallhuray_surfac
+000117b0: 655f 7261 7469 6f22 3a20 302e 302c 0a20  e_ratio": 0.0,. 
+000117c0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000117d0: 626f 7474 6f6d 5f68 616c 6c68 7572 6179  bottom_hallhuray
+000117e0: 5f6e 6f64 756c 655f 7261 6469 7573 223a  _nodule_radius":
+000117f0: 2030 2e30 2c0a 2020 2020 2020 2020 2020   0.0,.          
+00011800: 2020 2020 2020 2262 6f74 746f 6d5f 6861        "bottom_ha
+00011810: 6c6c 6875 7261 795f 7375 7266 6163 655f  llhuray_surface_
+00011820: 7261 7469 6f22 3a20 302e 302c 0a20 2020  ratio": 0.0,.   
+00011830: 2020 2020 2020 2020 2020 2020 2022 7369               "si
+00011840: 6465 5f68 616c 6c68 7572 6179 5f6e 6f64  de_hallhuray_nod
+00011850: 756c 655f 7261 6469 7573 223a 2030 2e30  ule_radius": 0.0
+00011860: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00011870: 2020 2273 6964 655f 6861 6c6c 6875 7261    "side_hallhura
+00011880: 795f 7375 7266 6163 655f 7261 7469 6f22  y_surface_ratio"
+00011890: 3a20 302e 302c 0a20 2020 2020 2020 2020  : 0.0,.         
+000118a0: 2020 2020 2020 2022 7570 7065 725f 656c         "upper_el
+000118b0: 6576 6174 696f 6e22 3a20 302e 302c 0a20  evation": 0.0,. 
+000118c0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000118d0: 6c6f 7765 725f 656c 6576 6174 696f 6e22  lower_elevation"
+000118e0: 3a20 302e 302c 0a20 2020 2020 2020 2020  : 0.0,.         
+000118f0: 2020 2020 2020 2022 636f 6c6f 7222 3a20         "color": 
+00011900: 5b32 3432 2c20 3134 302c 2031 3032 5d2c  [242, 140, 102],
+00011910: 0a20 2020 2020 2020 2020 2020 207d 0a20  .            }. 
+00011920: 2020 2020 2020 2020 2020 2069 6620 6c61             if la
+00011930: 7965 723a 0a20 2020 2020 2020 2020 2020  yer:.           
+00011940: 2020 2020 2069 6620 2263 6f6c 6f72 2220       if "color" 
+00011950: 696e 206c 6179 6572 3a0a 2020 2020 2020  in layer:.      
+00011960: 2020 2020 2020 2020 2020 2020 2020 6465                de
+00011970: 6661 756c 745f 6c61 7965 725b 2263 6f6c  fault_layer["col
+00011980: 6f72 225d 203d 206c 6179 6572 5b22 636f  or"] = layer["co
+00011990: 6c6f 7222 5d0a 2020 2020 2020 2020 2020  lor"].          
+000119a0: 2020 2020 2020 656c 6966 206e 6f74 206c        elif not l
+000119b0: 6179 6572 5b22 7479 7065 225d 203d 3d20  ayer["type"] == 
+000119c0: 2273 6967 6e61 6c22 3a0a 2020 2020 2020  "signal":.      
+000119d0: 2020 2020 2020 2020 2020 2020 2020 6465                de
+000119e0: 6661 756c 745f 6c61 7965 725b 2263 6f6c  fault_layer["col
+000119f0: 6f72 225d 203d 205b 3237 2c20 3131 302c  or"] = [27, 110,
+00011a00: 2037 365d 0a0a 2020 2020 2020 2020 2020   76]..          
+00011a10: 2020 2020 2020 666f 7220 6b2c 2076 2069        for k, v i
+00011a20: 6e20 6c61 7965 722e 6974 656d 7328 293a  n layer.items():
+00011a30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011a40: 2020 2020 2064 6566 6175 6c74 5f6c 6179       default_lay
+00011a50: 6572 5b6b 5d20 3d20 760a 2020 2020 2020  er[k] = v.      
+00011a60: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
+00011a70: 7461 636b 7570 5f6c 6179 6572 735b 6e61  tackup_layers[na
+00011a80: 6d65 5d2e 5f6c 6f61 645f 6c61 7965 7228  me]._load_layer(
+00011a90: 6465 6661 756c 745f 6c61 7965 7229 0a20  default_layer). 
+00011aa0: 2020 2020 2020 2066 6f72 206c 6179 6572         for layer
+00011ab0: 5f6e 616d 652c 206c 6179 6572 2069 6e20  _name, layer in 
+00011ac0: 7465 6d70 2e69 7465 6d73 2829 3a20 2023  temp.items():  #
+00011ad0: 206c 6f6f 7069 6e67 206f 7665 7220 706f   looping over po
+00011ae0: 7465 6e74 6961 6c20 6e65 7720 6c61 7965  tential new laye
+00011af0: 7273 2074 6f20 6164 640a 2020 2020 2020  rs to add.      
+00011b00: 2020 2020 2020 6966 206c 6179 6572 5f6e        if layer_n
+00011b10: 616d 6520 696e 2073 656c 662e 7374 6163  ame in self.stac
+00011b20: 6b75 705f 6c61 7965 7273 3a0a 2020 2020  kup_layers:.    
+00011b30: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
+00011b40: 696e 7565 2020 2320 6966 206c 6179 6572  inue  # if layer
+00011b50: 2065 7869 7374 2c20 736b 6970 0a20 2020   exist, skip.   
+00011b60: 2020 2020 2020 2020 2023 2061 6464 696e           # addin
+00011b70: 6720 6c61 7965 720a 2020 2020 2020 2020  g layer.        
+00011b80: 2020 2020 6465 6661 756c 745f 6c61 7965      default_laye
+00011b90: 7220 3d20 7b0a 2020 2020 2020 2020 2020  r = {.          
+00011ba0: 2020 2020 2020 226e 616d 6522 3a20 2264        "name": "d
+00011bb0: 6566 6175 6c74 222c 0a20 2020 2020 2020  efault",.       
+00011bc0: 2020 2020 2020 2020 2022 7479 7065 223a           "type":
+00011bd0: 2022 7369 676e 616c 222c 0a20 2020 2020   "signal",.     
+00011be0: 2020 2020 2020 2020 2020 2022 6d61 7465             "mate
+00011bf0: 7269 616c 223a 2022 636f 7070 6572 222c  rial": "copper",
+00011c00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011c10: 2022 6469 656c 6563 7472 6963 5f66 696c   "dielectric_fil
+00011c20: 6c22 3a20 2246 5234 5f65 706f 7879 222c  l": "FR4_epoxy",
+00011c30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011c40: 2022 7468 6963 6b6e 6573 7322 3a20 332e   "thickness": 3.
+00011c50: 3565 2d30 352c 0a20 2020 2020 2020 2020  5e-05,.         
+00011c60: 2020 2020 2020 2022 6574 6368 5f66 6163         "etch_fac
+00011c70: 746f 7222 3a20 302e 302c 0a20 2020 2020  tor": 0.0,.     
+00011c80: 2020 2020 2020 2020 2020 2022 726f 7567             "roug
+00011c90: 686e 6573 735f 656e 6162 6c65 6422 3a20  hness_enabled": 
+00011ca0: 4661 6c73 652c 0a20 2020 2020 2020 2020  False,.         
+00011cb0: 2020 2020 2020 2022 746f 705f 6861 6c6c         "top_hall
+00011cc0: 6875 7261 795f 6e6f 6475 6c65 5f72 6164  huray_nodule_rad
+00011cd0: 6975 7322 3a20 302e 302c 0a20 2020 2020  ius": 0.0,.     
+00011ce0: 2020 2020 2020 2020 2020 2022 746f 705f             "top_
+00011cf0: 6861 6c6c 6875 7261 795f 7375 7266 6163  hallhuray_surfac
+00011d00: 655f 7261 7469 6f22 3a20 302e 302c 0a20  e_ratio": 0.0,. 
+00011d10: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00011d20: 626f 7474 6f6d 5f68 616c 6c68 7572 6179  bottom_hallhuray
+00011d30: 5f6e 6f64 756c 655f 7261 6469 7573 223a  _nodule_radius":
+00011d40: 2030 2e30 2c0a 2020 2020 2020 2020 2020   0.0,.          
+00011d50: 2020 2020 2020 2262 6f74 746f 6d5f 6861        "bottom_ha
+00011d60: 6c6c 6875 7261 795f 7375 7266 6163 655f  llhuray_surface_
+00011d70: 7261 7469 6f22 3a20 302e 302c 0a20 2020  ratio": 0.0,.   
+00011d80: 2020 2020 2020 2020 2020 2020 2022 7369               "si
+00011d90: 6465 5f68 616c 6c68 7572 6179 5f6e 6f64  de_hallhuray_nod
+00011da0: 756c 655f 7261 6469 7573 223a 2030 2e30  ule_radius": 0.0
+00011db0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00011dc0: 2020 2273 6964 655f 6861 6c6c 6875 7261    "side_hallhura
+00011dd0: 795f 7375 7266 6163 655f 7261 7469 6f22  y_surface_ratio"
+00011de0: 3a20 302e 302c 0a20 2020 2020 2020 2020  : 0.0,.         
+00011df0: 2020 2020 2020 2022 7570 7065 725f 656c         "upper_el
+00011e00: 6576 6174 696f 6e22 3a20 302e 302c 0a20  evation": 0.0,. 
+00011e10: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00011e20: 6c6f 7765 725f 656c 6576 6174 696f 6e22  lower_elevation"
+00011e30: 3a20 302e 302c 0a20 2020 2020 2020 2020  : 0.0,.         
+00011e40: 2020 2020 2020 2022 636f 6c6f 7222 3a20         "color": 
+00011e50: 5b32 3432 2c20 3134 302c 2031 3032 5d2c  [242, 140, 102],
+00011e60: 0a20 2020 2020 2020 2020 2020 207d 0a0a  .            }..
+00011e70: 2020 2020 2020 2020 2020 2020 6966 2022              if "
+00011e80: 636f 6c6f 7222 2069 6e20 6c61 7965 723a  color" in layer:
+00011e90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011ea0: 2064 6566 6175 6c74 5f6c 6179 6572 5b22   default_layer["
+00011eb0: 636f 6c6f 7222 5d20 3d20 6c61 7965 725b  color"] = layer[
+00011ec0: 2263 6f6c 6f72 225d 0a20 2020 2020 2020  "color"].       
+00011ed0: 2020 2020 2065 6c69 6620 6e6f 7420 6c61       elif not la
+00011ee0: 7965 725b 2274 7970 6522 5d20 3d3d 2022  yer["type"] == "
+00011ef0: 7369 676e 616c 223a 0a20 2020 2020 2020  signal":.       
+00011f00: 2020 2020 2020 2020 2064 6566 6175 6c74           default
+00011f10: 5f6c 6179 6572 5b22 636f 6c6f 7222 5d20  _layer["color"] 
+00011f20: 3d20 5b32 372c 2031 3130 2c20 3736 5d0a  = [27, 110, 76].
+00011f30: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+00011f40: 206b 2c20 7620 696e 206c 6179 6572 2e69   k, v in layer.i
+00011f50: 7465 6d73 2829 3a0a 2020 2020 2020 2020  tems():.        
+00011f60: 2020 2020 2020 2020 6465 6661 756c 745f          default_
+00011f70: 6c61 7965 725b 6b5d 203d 2076 0a0a 2020  layer[k] = v..  
+00011f80: 2020 2020 2020 2020 2020 7465 6d70 5f32            temp_2
+00011f90: 203d 206c 6973 7428 7465 6d70 2e6b 6579   = list(temp.key
+00011fa0: 7328 2929 0a20 2020 2020 2020 2020 2020  s()).           
+00011fb0: 2069 6620 7465 6d70 5f32 2e69 6e64 6578   if temp_2.index
+00011fc0: 286c 6179 6572 5f6e 616d 6529 203d 3d20  (layer_name) == 
+00011fd0: 303a 0a20 2020 2020 2020 2020 2020 2020  0:.             
+00011fe0: 2020 206e 6577 5f6c 6179 6572 203d 2073     new_layer = s
+00011ff0: 656c 662e 6164 645f 6c61 7965 7228 0a20  elf.add_layer(. 
+00012000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012010: 2020 206c 6179 6572 5f6e 616d 652c 0a20     layer_name,. 
+00012020: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012030: 2020 206d 6574 686f 643d 2261 6464 5f6f     method="add_o
+00012040: 6e5f 746f 7022 2c0a 2020 2020 2020 2020  n_top",.        
+00012050: 2020 2020 2020 2020 2020 2020 6c61 7965              laye
+00012060: 725f 7479 7065 3d64 6566 6175 6c74 5f6c  r_type=default_l
+00012070: 6179 6572 5b22 7479 7065 225d 2c0a 2020  ayer["type"],.  
+00012080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012090: 2020 6d61 7465 7269 616c 3d64 6566 6175    material=defau
+000120a0: 6c74 5f6c 6179 6572 5b22 6d61 7465 7269  lt_layer["materi
+000120b0: 616c 225d 2c0a 2020 2020 2020 2020 2020  al"],.          
+000120c0: 2020 2020 2020 2020 2020 6669 6c6c 4d61            fillMa
+000120d0: 7465 7269 616c 3d64 6566 6175 6c74 5f6c  terial=default_l
+000120e0: 6179 6572 5b22 6469 656c 6563 7472 6963  ayer["dielectric
+000120f0: 5f66 696c 6c22 5d2c 0a20 2020 2020 2020  _fill"],.       
+00012100: 2020 2020 2020 2020 2020 2020 2074 6869               thi
+00012110: 636b 6e65 7373 3d64 6566 6175 6c74 5f6c  ckness=default_l
+00012120: 6179 6572 5b22 7468 6963 6b6e 6573 7322  ayer["thickness"
+00012130: 5d2c 0a20 2020 2020 2020 2020 2020 2020  ],.             
+00012140: 2020 2029 0a0a 2020 2020 2020 2020 2020     )..          
+00012150: 2020 656c 6966 2074 656d 705f 322e 696e    elif temp_2.in
+00012160: 6465 7828 6c61 7965 725f 6e61 6d65 2920  dex(layer_name) 
+00012170: 3d3d 206c 656e 2874 656d 705f 3229 3a0a  == len(temp_2):.
+00012180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012190: 6e65 775f 6c61 7965 7220 3d20 7365 6c66  new_layer = self
+000121a0: 2e61 6464 5f6c 6179 6572 280a 2020 2020  .add_layer(.    
+000121b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000121c0: 6c61 7965 725f 6e61 6d65 2c0a 2020 2020  layer_name,.    
+000121d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000121e0: 6261 7365 5f6c 6179 6572 3d6c 6179 6572  base_layer=layer
+000121f0: 5f6e 616d 652c 0a20 2020 2020 2020 2020  _name,.         
+00012200: 2020 2020 2020 2020 2020 206d 6574 686f             metho
+00012210: 643d 2261 6464 5f6f 6e5f 626f 7474 6f6d  d="add_on_bottom
+00012220: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
+00012230: 2020 2020 2020 206c 6179 6572 5f74 7970         layer_typ
+00012240: 653d 6465 6661 756c 745f 6c61 7965 725b  e=default_layer[
+00012250: 2274 7970 6522 5d2c 0a20 2020 2020 2020  "type"],.       
+00012260: 2020 2020 2020 2020 2020 2020 206d 6174               mat
+00012270: 6572 6961 6c3d 6465 6661 756c 745f 6c61  erial=default_la
+00012280: 7965 725b 226d 6174 6572 6961 6c22 5d2c  yer["material"],
 00012290: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000122a0: 2020 2020 206c 6179 6572 5f74 7970 653d       layer_type=
-000122b0: 6465 6661 756c 745f 6c61 7965 725b 2274  default_layer["t
-000122c0: 7970 6522 5d2c 0a20 2020 2020 2020 2020  ype"],.         
-000122d0: 2020 2020 2020 2020 2020 206d 6174 6572             mater
-000122e0: 6961 6c3d 6465 6661 756c 745f 6c61 7965  ial=default_laye
-000122f0: 725b 226d 6174 6572 6961 6c22 5d2c 0a20  r["material"],. 
-00012300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012310: 2020 2066 696c 6c4d 6174 6572 6961 6c3d     fillMaterial=
-00012320: 6465 6661 756c 745f 6c61 7965 725b 2264  default_layer["d
-00012330: 6965 6c65 6374 7269 635f 6669 6c6c 225d  ielectric_fill"]
-00012340: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00012350: 2020 2020 2020 7468 6963 6b6e 6573 733d        thickness=
-00012360: 6465 6661 756c 745f 6c61 7965 725b 2274  default_layer["t
-00012370: 6869 636b 6e65 7373 225d 2c0a 2020 2020  hickness"],.    
-00012380: 2020 2020 2020 2020 2020 2020 290a 0a20              ).. 
-00012390: 2020 2020 2020 2020 2020 206e 6577 5f6c             new_l
-000123a0: 6179 6572 2e63 6f6c 6f72 203d 2064 6566  ayer.color = def
-000123b0: 6175 6c74 5f6c 6179 6572 5b22 636f 6c6f  ault_layer["colo
-000123c0: 7222 5d0a 2020 2020 2020 2020 2020 2020  r"].            
-000123d0: 6e65 775f 6c61 7965 722e 6574 6368 5f66  new_layer.etch_f
-000123e0: 6163 746f 7220 3d20 6465 6661 756c 745f  actor = default_
-000123f0: 6c61 7965 725b 2265 7463 685f 6661 6374  layer["etch_fact
-00012400: 6f72 225d 0a0a 2020 2020 2020 2020 2020  or"]..          
-00012410: 2020 6e65 775f 6c61 7965 722e 726f 7567    new_layer.roug
-00012420: 686e 6573 735f 656e 6162 6c65 6420 3d20  hness_enabled = 
-00012430: 6465 6661 756c 745f 6c61 7965 725b 2272  default_layer["r
-00012440: 6f75 6768 6e65 7373 5f65 6e61 626c 6564  oughness_enabled
-00012450: 225d 0a20 2020 2020 2020 2020 2020 206e  "].            n
-00012460: 6577 5f6c 6179 6572 2e74 6f70 5f68 616c  ew_layer.top_hal
-00012470: 6c68 7572 6179 5f6e 6f64 756c 655f 7261  lhuray_nodule_ra
-00012480: 6469 7573 203d 2064 6566 6175 6c74 5f6c  dius = default_l
-00012490: 6179 6572 5b22 746f 705f 6861 6c6c 6875  ayer["top_hallhu
-000124a0: 7261 795f 6e6f 6475 6c65 5f72 6164 6975  ray_nodule_radiu
-000124b0: 7322 5d0a 2020 2020 2020 2020 2020 2020  s"].            
-000124c0: 6e65 775f 6c61 7965 722e 746f 705f 6861  new_layer.top_ha
-000124d0: 6c6c 6875 7261 795f 7375 7266 6163 655f  llhuray_surface_
-000124e0: 7261 7469 6f20 3d20 6465 6661 756c 745f  ratio = default_
-000124f0: 6c61 7965 725b 2274 6f70 5f68 616c 6c68  layer["top_hallh
-00012500: 7572 6179 5f73 7572 6661 6365 5f72 6174  uray_surface_rat
-00012510: 696f 225d 0a20 2020 2020 2020 2020 2020  io"].           
-00012520: 206e 6577 5f6c 6179 6572 2e62 6f74 746f   new_layer.botto
-00012530: 6d5f 6861 6c6c 6875 7261 795f 6e6f 6475  m_hallhuray_nodu
-00012540: 6c65 5f72 6164 6975 7320 3d20 6465 6661  le_radius = defa
-00012550: 756c 745f 6c61 7965 725b 2262 6f74 746f  ult_layer["botto
-00012560: 6d5f 6861 6c6c 6875 7261 795f 6e6f 6475  m_hallhuray_nodu
-00012570: 6c65 5f72 6164 6975 7322 5d0a 2020 2020  le_radius"].    
-00012580: 2020 2020 2020 2020 6e65 775f 6c61 7965          new_laye
-00012590: 722e 626f 7474 6f6d 5f68 616c 6c68 7572  r.bottom_hallhur
-000125a0: 6179 5f73 7572 6661 6365 5f72 6174 696f  ay_surface_ratio
-000125b0: 203d 2064 6566 6175 6c74 5f6c 6179 6572   = default_layer
-000125c0: 5b22 626f 7474 6f6d 5f68 616c 6c68 7572  ["bottom_hallhur
-000125d0: 6179 5f73 7572 6661 6365 5f72 6174 696f  ay_surface_ratio
-000125e0: 225d 0a20 2020 2020 2020 2020 2020 206e  "].            n
-000125f0: 6577 5f6c 6179 6572 2e73 6964 655f 6861  ew_layer.side_ha
-00012600: 6c6c 6875 7261 795f 6e6f 6475 6c65 5f72  llhuray_nodule_r
-00012610: 6164 6975 7320 3d20 6465 6661 756c 745f  adius = default_
-00012620: 6c61 7965 725b 2273 6964 655f 6861 6c6c  layer["side_hall
-00012630: 6875 7261 795f 6e6f 6475 6c65 5f72 6164  huray_nodule_rad
-00012640: 6975 7322 5d0a 2020 2020 2020 2020 2020  ius"].          
-00012650: 2020 6e65 775f 6c61 7965 722e 7369 6465    new_layer.side
-00012660: 5f68 616c 6c68 7572 6179 5f73 7572 6661  _hallhuray_surfa
-00012670: 6365 5f72 6174 696f 203d 2064 6566 6175  ce_ratio = defau
-00012680: 6c74 5f6c 6179 6572 5b22 7369 6465 5f68  lt_layer["side_h
-00012690: 616c 6c68 7572 6179 5f73 7572 6661 6365  allhuray_surface
-000126a0: 5f72 6174 696f 225d 0a0a 2020 2020 2020  _ratio"]..      
-000126b0: 2020 7265 7475 726e 2054 7275 650a 0a20    return True.. 
-000126c0: 2020 2040 7079 6564 625f 6675 6e63 7469     @pyedb_functi
-000126d0: 6f6e 5f68 616e 646c 6572 2829 0a20 2020  on_handler().   
-000126e0: 2064 6566 205f 696d 706f 7274 5f6a 736f   def _import_jso
-000126f0: 6e28 7365 6c66 2c20 6669 6c65 5f70 6174  n(self, file_pat
-00012700: 682c 2072 656e 616d 653d 4661 6c73 6529  h, rename=False)
-00012710: 3a0a 2020 2020 2020 2020 2222 2249 6d70  :.        """Imp
-00012720: 6f72 7420 7374 6163 6b75 7020 6672 6f6d  ort stackup from
-00012730: 2061 206a 736f 6e20 6669 6c65 2e22 2222   a json file."""
-00012740: 0a20 2020 2020 2020 2069 6620 6669 6c65  .        if file
-00012750: 5f70 6174 683a 0a20 2020 2020 2020 2020  _path:.         
-00012760: 2020 2066 203d 206f 7065 6e28 6669 6c65     f = open(file
-00012770: 5f70 6174 6829 0a20 2020 2020 2020 2020  _path).         
-00012780: 2020 206a 736f 6e5f 6469 6374 203d 206a     json_dict = j
-00012790: 736f 6e2e 6c6f 6164 2866 2920 2023 2070  son.load(f)  # p
-000127a0: 7261 676d 613a 206e 6f20 636f 7665 720a  ragma: no cover.
-000127b0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-000127c0: 726e 2073 656c 662e 5f69 6d70 6f72 745f  rn self._import_
-000127d0: 6469 6374 286a 736f 6e5f 6469 6374 2c20  dict(json_dict, 
-000127e0: 7265 6e61 6d65 290a 0a20 2020 2040 7079  rename)..    @py
-000127f0: 6564 625f 6675 6e63 7469 6f6e 5f68 616e  edb_function_han
-00012800: 646c 6572 2829 0a20 2020 2064 6566 205f  dler().    def _
-00012810: 696d 706f 7274 5f63 7376 2873 656c 662c  import_csv(self,
-00012820: 2066 696c 655f 7061 7468 293a 0a20 2020   file_path):.   
-00012830: 2020 2020 2022 2222 496d 706f 7274 2073       """Import s
-00012840: 7461 636b 7570 2064 6566 696e 6974 696f  tackup definitio
-00012850: 6e20 6672 6f6d 2061 2043 5356 2066 696c  n from a CSV fil
-00012860: 652e 0a0a 2020 2020 2020 2020 5061 7261  e...        Para
-00012870: 6d65 7465 7273 0a20 2020 2020 2020 202d  meters.        -
-00012880: 2d2d 2d2d 2d2d 2d2d 2d0a 2020 2020 2020  ---------.      
-00012890: 2020 6669 6c65 5f70 6174 6820 3a20 7374    file_path : st
-000128a0: 720a 2020 2020 2020 2020 2020 2020 4669  r.            Fi
-000128b0: 6c65 2070 6174 6820 746f 2074 6865 2043  le path to the C
-000128c0: 5356 2066 696c 652e 0a20 2020 2020 2020  SV file..       
-000128d0: 2022 2222 0a20 2020 2020 2020 2069 6620   """.        if 
-000128e0: 6e6f 7420 7064 3a0a 2020 2020 2020 2020  not pd:.        
-000128f0: 2020 2020 7365 6c66 2e5f 7065 6462 2e6c      self._pedb.l
-00012900: 6f67 6765 722e 6572 726f 7228 2250 616e  ogger.error("Pan
-00012910: 6461 7320 6973 206e 6565 6465 642e 2059  das is needed. Y
-00012920: 6f75 206d 7573 7420 696e 7374 616c 6c20  ou must install 
-00012930: 6974 2066 6972 7374 2e22 290a 2020 2020  it first.").    
-00012940: 2020 2020 2020 2020 7265 7475 726e 2046          return F
-00012950: 616c 7365 0a20 2020 2020 2020 2069 6620  alse.        if 
-00012960: 6973 5f69 726f 6e70 7974 686f 6e3a 0a20  is_ironpython:. 
-00012970: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00012980: 5f70 6564 622e 6c6f 6767 6572 2e65 7272  _pedb.logger.err
-00012990: 6f72 2822 4d65 7468 6f64 2077 6f72 6b73  or("Method works
-000129a0: 206f 6e20 4350 7974 686f 6e20 6f6e 6c79   on CPython only
-000129b0: 2e22 290a 2020 2020 2020 2020 2020 2020  .").            
-000129c0: 7265 7475 726e 2046 616c 7365 0a20 2020  return False.   
-000129d0: 2020 2020 2064 6620 3d20 7064 2e72 6561       df = pd.rea
-000129e0: 645f 6373 7628 6669 6c65 5f70 6174 682c  d_csv(file_path,
-000129f0: 2069 6e64 6578 5f63 6f6c 3d30 290a 0a20   index_col=0).. 
-00012a00: 2020 2020 2020 2066 6f72 206e 616d 6520         for name 
-00012a10: 696e 2073 656c 662e 7374 6163 6b75 705f  in self.stackup_
-00012a20: 6c61 7965 7273 2e6b 6579 7328 293a 2020  layers.keys():  
-00012a30: 2320 7072 6167 6d61 3a20 6e6f 2063 6f76  # pragma: no cov
-00012a40: 6572 0a20 2020 2020 2020 2020 2020 2069  er.            i
-00012a50: 6620 6e6f 7420 6e61 6d65 2069 6e20 6466  f not name in df
-00012a60: 2e69 6e64 6578 3a0a 2020 2020 2020 2020  .index:.        
-00012a70: 2020 2020 2020 2020 6c6f 6767 6572 2e65          logger.e
-00012a80: 7272 6f72 2822 7b7d 2064 6f65 736e 2774  rror("{} doesn't
-00012a90: 2065 7869 7374 2069 6e20 6373 7622 2e66   exist in csv".f
-00012aa0: 6f72 6d61 7428 6e61 6d65 2929 0a20 2020  ormat(name)).   
-00012ab0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00012ac0: 7572 6e20 4661 6c73 650a 0a20 2020 2020  urn False..     
-00012ad0: 2020 2066 6f72 206e 616d 652c 206c 6179     for name, lay
-00012ae0: 6572 5f69 6e66 6f20 696e 2064 662e 6974  er_info in df.it
-00012af0: 6572 726f 7773 2829 3a0a 2020 2020 2020  errows():.      
-00012b00: 2020 2020 2020 6c61 7965 725f 7479 7065        layer_type
-00012b10: 203d 206c 6179 6572 5f69 6e66 6f2e 5479   = layer_info.Ty
-00012b20: 7065 0a20 2020 2020 2020 2020 2020 2069  pe.            i
-00012b30: 6620 6e61 6d65 2069 6e20 7365 6c66 2e6c  f name in self.l
-00012b40: 6179 6572 733a 0a20 2020 2020 2020 2020  ayers:.         
-00012b50: 2020 2020 2020 206c 6179 6572 203d 2073         layer = s
-00012b60: 656c 662e 6c61 7965 7273 5b6e 616d 655d  elf.layers[name]
-00012b70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00012b80: 206c 6179 6572 2e74 7970 6520 3d20 6c61   layer.type = la
-00012b90: 7965 725f 7479 7065 0a20 2020 2020 2020  yer_type.       
-00012ba0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00012bb0: 2020 2020 2020 2020 2020 206c 6179 6572             layer
-00012bc0: 203d 2073 656c 662e 6164 645f 6c61 7965   = self.add_laye
-00012bd0: 7228 6e61 6d65 2c20 6c61 7965 725f 7479  r(name, layer_ty
-00012be0: 7065 3d6c 6179 6572 5f74 7970 652c 206d  pe=layer_type, m
-00012bf0: 6174 6572 6961 6c3d 2263 6f70 7065 7222  aterial="copper"
-00012c00: 2c20 6669 6c6c 4d61 7465 7269 616c 3d22  , fillMaterial="
-00012c10: 636f 7070 6572 2229 0a0a 2020 2020 2020  copper")..      
-00012c20: 2020 2020 2020 6c61 7965 722e 6d61 7465        layer.mate
-00012c30: 7269 616c 203d 206c 6179 6572 5f69 6e66  rial = layer_inf
-00012c40: 6f2e 4d61 7465 7269 616c 0a20 2020 2020  o.Material.     
-00012c50: 2020 2020 2020 206c 6179 6572 2e74 6869         layer.thi
-00012c60: 636b 6e65 7373 203d 206c 6179 6572 5f69  ckness = layer_i
-00012c70: 6e66 6f2e 5468 6963 6b6e 6573 730a 2020  nfo.Thickness.  
-00012c80: 2020 2020 2020 2020 2020 6c61 7965 722e            layer.
-00012c90: 6469 656c 6563 7472 6963 5f66 696c 6c20  dielectric_fill 
-00012ca0: 3d20 6c61 7965 725f 696e 666f 2e44 6965  = layer_info.Die
-00012cb0: 6c65 6374 7269 635f 4669 6c6c 0a0a 2020  lectric_Fill..  
-00012cc0: 2020 2020 2020 6c63 5f6e 6577 203d 2073        lc_new = s
-00012cd0: 656c 662e 5f70 6564 622e 6564 625f 6170  elf._pedb.edb_ap
-00012ce0: 692e 4365 6c6c 2e4c 6179 6572 436f 6c6c  i.Cell.LayerColl
-00012cf0: 6563 7469 6f6e 2829 0a20 2020 2020 2020  ection().       
-00012d00: 2066 6f72 206e 616d 652c 205f 2069 6e20   for name, _ in 
-00012d10: 6466 2e69 7465 7272 6f77 7328 293a 0a20  df.iterrows():. 
-00012d20: 2020 2020 2020 2020 2020 206c 6179 6572             layer
-00012d30: 203d 2073 656c 662e 6c61 7965 7273 5b6e   = self.layers[n
-00012d40: 616d 655d 0a20 2020 2020 2020 2020 2020  ame].           
-00012d50: 206c 635f 6e65 772e 4164 644c 6179 6572   lc_new.AddLayer
-00012d60: 426f 7474 6f6d 286c 6179 6572 2e5f 6564  Bottom(layer._ed
-00012d70: 625f 6c61 7965 7229 0a0a 2020 2020 2020  b_layer)..      
-00012d80: 2020 666f 7220 6e61 6d65 2c20 6c61 7965    for name, laye
-00012d90: 7220 696e 2073 656c 662e 6e6f 6e5f 7374  r in self.non_st
-00012da0: 6163 6b75 705f 6c61 7965 7273 2e69 7465  ackup_layers.ite
-00012db0: 6d73 2829 3a0a 2020 2020 2020 2020 2020  ms():.          
-00012dc0: 2020 6c63 5f6e 6577 2e41 6464 4c61 7965    lc_new.AddLaye
-00012dd0: 7242 6f74 746f 6d28 6c61 7965 722e 5f65  rBottom(layer._e
-00012de0: 6462 5f6c 6179 6572 290a 0a20 2020 2020  db_layer)..     
-00012df0: 2020 2073 656c 662e 5f70 6564 622e 6c61     self._pedb.la
-00012e00: 796f 7574 2e6c 6179 6572 5f63 6f6c 6c65  yout.layer_colle
-00012e10: 6374 696f 6e20 3d20 6c63 5f6e 6577 0a20  ction = lc_new. 
-00012e20: 2020 2020 2020 2073 656c 662e 7265 6672         self.refr
-00012e30: 6573 685f 6c61 7965 725f 636f 6c6c 6563  esh_layer_collec
-00012e40: 7469 6f6e 2829 0a20 2020 2020 2020 2072  tion().        r
-00012e50: 6574 7572 6e20 5472 7565 0a0a 2020 2020  eturn True..    
-00012e60: 4070 7965 6462 5f66 756e 6374 696f 6e5f  @pyedb_function_
-00012e70: 6861 6e64 6c65 7228 290a 2020 2020 6465  handler().    de
-00012e80: 6620 5f73 6574 2873 656c 662c 206c 6179  f _set(self, lay
-00012e90: 6572 733d 4e6f 6e65 2c20 6d61 7465 7269  ers=None, materi
-00012ea0: 616c 733d 4e6f 6e65 2c20 726f 7567 686e  als=None, roughn
-00012eb0: 6573 733d 4e6f 6e65 2c20 6e6f 6e5f 7374  ess=None, non_st
-00012ec0: 6163 6b75 705f 6c61 7965 7273 3d4e 6f6e  ackup_layers=Non
-00012ed0: 6529 3a0a 2020 2020 2020 2020 2222 2255  e):.        """U
-00012ee0: 7064 6174 6520 7374 6163 6b75 7020 696e  pdate stackup in
-00012ef0: 666f 726d 6174 696f 6e2e 0a0a 2020 2020  formation...    
-00012f00: 2020 2020 5061 7261 6d65 7465 7273 0a20      Parameters. 
-00012f10: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
-00012f20: 2d0a 2020 2020 2020 2020 6c61 7965 7273  -.        layers
-00012f30: 3a20 6469 6374 0a20 2020 2020 2020 2020  : dict.         
-00012f40: 2020 2044 6963 7469 6f6e 6172 7920 636f     Dictionary co
-00012f50: 6e74 6169 6e69 6e67 206c 6179 6572 2069  ntaining layer i
-00012f60: 6e66 6f72 6d61 7469 6f6e 2e0a 2020 2020  nformation..    
-00012f70: 2020 2020 6d61 7465 7269 616c 733a 2064      materials: d
-00012f80: 6963 740a 2020 2020 2020 2020 2020 2020  ict.            
-00012f90: 4469 6374 696f 6e61 7279 2063 6f6e 7461  Dictionary conta
-00012fa0: 696e 696e 6720 6d61 7465 7269 616c 2069  ining material i
-00012fb0: 6e66 6f72 6d61 7469 6f6e 2e0a 2020 2020  nformation..    
-00012fc0: 2020 2020 726f 7567 686e 6573 733a 2064      roughness: d
-00012fd0: 6963 740a 2020 2020 2020 2020 2020 2020  ict.            
-00012fe0: 4469 6374 696f 6e61 7279 2063 6f6e 7461  Dictionary conta
-00012ff0: 696e 696e 6720 726f 7567 686e 6573 7320  ining roughness 
-00013000: 696e 666f 726d 6174 696f 6e2e 0a0a 2020  information...  
-00013010: 2020 2020 2020 5265 7475 726e 730a 2020        Returns.  
-00013020: 2020 2020 2020 2d2d 2d2d 2d2d 2d0a 0a20        -------.. 
-00013030: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00013040: 2020 2069 6620 6d61 7465 7269 616c 733a     if materials:
-00013050: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00013060: 662e 5f61 6464 5f6d 6174 6572 6961 6c73  f._add_materials
-00013070: 5f66 726f 6d5f 6469 6374 696f 6e61 7279  _from_dictionary
-00013080: 286d 6174 6572 6961 6c73 290a 0a20 2020  (materials)..   
-00013090: 2020 2020 2069 6620 6c61 7965 7273 3a0a       if layers:.
-000130a0: 2020 2020 2020 2020 2020 2020 7072 6576              prev
-000130b0: 5f6c 6179 6572 203d 204e 6f6e 650a 2020  _layer = None.  
-000130c0: 2020 2020 2020 2020 2020 666f 7220 6e61            for na
-000130d0: 6d65 2c20 7661 6c20 696e 206c 6179 6572  me, val in layer
-000130e0: 732e 6974 656d 7328 293a 0a20 2020 2020  s.items():.     
-000130f0: 2020 2020 2020 2020 2020 2065 7463 6869             etchi
-00013100: 6e67 5f66 6163 746f 7220 3d20 666c 6f61  ng_factor = floa
-00013110: 7428 7661 6c5b 2245 7463 6846 6163 746f  t(val["EtchFacto
-00013120: 7222 5d29 2069 6620 2245 7463 6846 6163  r"]) if "EtchFac
-00013130: 746f 7222 2069 6e20 7661 6c20 656c 7365  tor" in val else
-00013140: 204e 6f6e 650a 0a20 2020 2020 2020 2020   None..         
-00013150: 2020 2020 2020 2069 6620 6e6f 7420 7365         if not se
-00013160: 6c66 2e73 7461 636b 7570 5f6c 6179 6572  lf.stackup_layer
-00013170: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
-00013180: 2020 2020 2020 2073 656c 662e 6164 645f         self.add_
-00013190: 6c61 7965 7228 0a20 2020 2020 2020 2020  layer(.         
-000131a0: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-000131b0: 616d 652c 0a20 2020 2020 2020 2020 2020  ame,.           
-000131c0: 2020 2020 2020 2020 2020 2020 204e 6f6e               Non
-000131d0: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
-000131e0: 2020 2020 2020 2020 2020 2022 6164 645f             "add_
-000131f0: 6f6e 5f74 6f70 222c 0a20 2020 2020 2020  on_top",.       
-00013200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013210: 2076 616c 5b22 5479 7065 225d 2c0a 2020   val["Type"],.  
-00013220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013230: 2020 2020 2020 7661 6c5b 224d 6174 6572        val["Mater
-00013240: 6961 6c22 5d2c 0a20 2020 2020 2020 2020  ial"],.         
-00013250: 2020 2020 2020 2020 2020 2020 2020 2076                 v
-00013260: 616c 5b22 4669 6c6c 4d61 7465 7269 616c  al["FillMaterial
-00013270: 225d 2069 6620 7661 6c5b 2254 7970 6522  "] if val["Type"
-00013280: 5d20 3d3d 2022 7369 676e 616c 2220 656c  ] == "signal" el
-00013290: 7365 2022 222c 0a20 2020 2020 2020 2020  se "",.         
-000132a0: 2020 2020 2020 2020 2020 2020 2020 2076                 v
-000132b0: 616c 5b22 5468 6963 6b6e 6573 7322 5d2c  al["Thickness"],
-000132c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000132d0: 2020 2020 2020 2020 2065 7463 6869 6e67           etching
-000132e0: 5f66 6163 746f 722c 0a20 2020 2020 2020  _factor,.       
-000132f0: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
-00013300: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00013310: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00013320: 2020 2020 2020 2020 2069 6620 6e61 6d65           if name
-00013330: 2069 6e20 7365 6c66 2e73 7461 636b 7570   in self.stackup
-00013340: 5f6c 6179 6572 732e 6b65 7973 2829 3a0a  _layers.keys():.
-00013350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013360: 2020 2020 2020 2020 6c79 7220 3d20 7365          lyr = se
-00013370: 6c66 2e73 7461 636b 7570 5f6c 6179 6572  lf.stackup_layer
-00013380: 735b 6e61 6d65 5d0a 2020 2020 2020 2020  s[name].        
-00013390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000133a0: 6c79 722e 7479 7065 203d 2076 616c 5b22  lyr.type = val["
-000133b0: 5479 7065 225d 0a20 2020 2020 2020 2020  Type"].         
-000133c0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-000133d0: 7972 2e6d 6174 6572 6961 6c20 3d20 7661  yr.material = va
-000133e0: 6c5b 224d 6174 6572 6961 6c22 5d0a 2020  l["Material"].  
-000133f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013400: 2020 2020 2020 6c79 722e 6469 656c 6563        lyr.dielec
-00013410: 7472 6963 5f66 696c 6c20 3d20 7661 6c5b  tric_fill = val[
-00013420: 2246 696c 6c4d 6174 6572 6961 6c22 5d20  "FillMaterial"] 
-00013430: 6966 2076 616c 5b22 5479 7065 225d 203d  if val["Type"] =
-00013440: 3d20 2273 6967 6e61 6c22 2065 6c73 6520  = "signal" else 
-00013450: 2222 0a20 2020 2020 2020 2020 2020 2020  "".             
-00013460: 2020 2020 2020 2020 2020 206c 7972 2e74             lyr.t
-00013470: 6869 636b 6e65 7373 203d 2076 616c 5b22  hickness = val["
-00013480: 5468 6963 6b6e 6573 7322 5d0a 2020 2020  Thickness"].    
-00013490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000134a0: 2020 2020 6966 2070 7265 765f 6c61 7965      if prev_laye
-000134b0: 723a 0a20 2020 2020 2020 2020 2020 2020  r:.             
-000134c0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-000134d0: 656c 662e 5f73 6574 5f6c 6179 6f75 745f  elf._set_layout_
-000134e0: 7374 6163 6b75 7028 6c79 722e 5f65 6462  stackup(lyr._edb
-000134f0: 5f6c 6179 6572 2c20 2263 6861 6e67 655f  _layer, "change_
-00013500: 706f 7369 7469 6f6e 222c 2070 7265 765f  position", prev_
-00013510: 6c61 7965 7229 0a20 2020 2020 2020 2020  layer).         
-00013520: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00013530: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013540: 2020 2020 2020 2020 2069 6620 7072 6576           if prev
-00013550: 5f6c 6179 6572 2061 6e64 2070 7265 765f  _layer and prev_
-00013560: 6c61 7965 7220 696e 2073 656c 662e 7374  layer in self.st
-00013570: 6163 6b75 705f 6c61 7965 7273 3a0a 2020  ackup_layers:.  
-00013580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013590: 2020 2020 2020 2020 2020 6c61 7965 725f            layer_
-000135a0: 6e61 6d65 203d 2070 7265 765f 6c61 7965  name = prev_laye
-000135b0: 720a 2020 2020 2020 2020 2020 2020 2020  r.              
-000135c0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-000135d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000135e0: 2020 2020 2020 2020 2020 2020 6c61 7965              laye
-000135f0: 725f 6e61 6d65 203d 206c 6973 7428 7365  r_name = list(se
-00013600: 6c66 2e73 7461 636b 7570 5f6c 6179 6572  lf.stackup_layer
-00013610: 732e 6b65 7973 2829 295b 2d31 5d20 6966  s.keys())[-1] if
-00013620: 2073 656c 662e 7374 6163 6b75 705f 6c61   self.stackup_la
-00013630: 7965 7273 2065 6c73 6520 4e6f 6e65 0a20  yers else None. 
-00013640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013650: 2020 2020 2020 2073 656c 662e 6164 645f         self.add_
-00013660: 6c61 7965 7228 0a20 2020 2020 2020 2020  layer(.         
-00013670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013680: 2020 206e 616d 652c 0a20 2020 2020 2020     name,.       
+000122a0: 2020 2020 2066 696c 6c4d 6174 6572 6961       fillMateria
+000122b0: 6c3d 6465 6661 756c 745f 6c61 7965 725b  l=default_layer[
+000122c0: 2264 6965 6c65 6374 7269 635f 6669 6c6c  "dielectric_fill
+000122d0: 225d 2c0a 2020 2020 2020 2020 2020 2020  "],.            
+000122e0: 2020 2020 2020 2020 7468 6963 6b6e 6573          thicknes
+000122f0: 733d 6465 6661 756c 745f 6c61 7965 725b  s=default_layer[
+00012300: 2274 6869 636b 6e65 7373 225d 2c0a 2020  "thickness"],.  
+00012310: 2020 2020 2020 2020 2020 2020 2020 290a                ).
+00012320: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00012330: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00012340: 2020 6e65 775f 6c61 7965 7220 3d20 7365    new_layer = se
+00012350: 6c66 2e61 6464 5f6c 6179 6572 280a 2020  lf.add_layer(.  
+00012360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012370: 2020 6c61 7965 725f 6e61 6d65 2c0a 2020    layer_name,.  
+00012380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012390: 2020 6261 7365 5f6c 6179 6572 3d74 656d    base_layer=tem
+000123a0: 705f 325b 7465 6d70 5f32 2e69 6e64 6578  p_2[temp_2.index
+000123b0: 286c 6179 6572 5f6e 616d 6529 202d 2031  (layer_name) - 1
+000123c0: 5d2c 0a20 2020 2020 2020 2020 2020 2020  ],.             
+000123d0: 2020 2020 2020 206d 6574 686f 643d 2269         method="i
+000123e0: 6e73 6572 745f 6265 6c6f 7722 2c0a 2020  nsert_below",.  
+000123f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012400: 2020 6c61 7965 725f 7479 7065 3d64 6566    layer_type=def
+00012410: 6175 6c74 5f6c 6179 6572 5b22 7479 7065  ault_layer["type
+00012420: 225d 2c0a 2020 2020 2020 2020 2020 2020  "],.            
+00012430: 2020 2020 2020 2020 6d61 7465 7269 616c          material
+00012440: 3d64 6566 6175 6c74 5f6c 6179 6572 5b22  =default_layer["
+00012450: 6d61 7465 7269 616c 225d 2c0a 2020 2020  material"],.    
+00012460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012470: 6669 6c6c 4d61 7465 7269 616c 3d64 6566  fillMaterial=def
+00012480: 6175 6c74 5f6c 6179 6572 5b22 6469 656c  ault_layer["diel
+00012490: 6563 7472 6963 5f66 696c 6c22 5d2c 0a20  ectric_fill"],. 
+000124a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000124b0: 2020 2074 6869 636b 6e65 7373 3d64 6566     thickness=def
+000124c0: 6175 6c74 5f6c 6179 6572 5b22 7468 6963  ault_layer["thic
+000124d0: 6b6e 6573 7322 5d2c 0a20 2020 2020 2020  kness"],.       
+000124e0: 2020 2020 2020 2020 2029 0a0a 2020 2020           )..    
+000124f0: 2020 2020 2020 2020 6e65 775f 6c61 7965          new_laye
+00012500: 722e 636f 6c6f 7220 3d20 6465 6661 756c  r.color = defaul
+00012510: 745f 6c61 7965 725b 2263 6f6c 6f72 225d  t_layer["color"]
+00012520: 0a20 2020 2020 2020 2020 2020 206e 6577  .            new
+00012530: 5f6c 6179 6572 2e65 7463 685f 6661 6374  _layer.etch_fact
+00012540: 6f72 203d 2064 6566 6175 6c74 5f6c 6179  or = default_lay
+00012550: 6572 5b22 6574 6368 5f66 6163 746f 7222  er["etch_factor"
+00012560: 5d0a 0a20 2020 2020 2020 2020 2020 206e  ]..            n
+00012570: 6577 5f6c 6179 6572 2e72 6f75 6768 6e65  ew_layer.roughne
+00012580: 7373 5f65 6e61 626c 6564 203d 2064 6566  ss_enabled = def
+00012590: 6175 6c74 5f6c 6179 6572 5b22 726f 7567  ault_layer["roug
+000125a0: 686e 6573 735f 656e 6162 6c65 6422 5d0a  hness_enabled"].
+000125b0: 2020 2020 2020 2020 2020 2020 6e65 775f              new_
+000125c0: 6c61 7965 722e 746f 705f 6861 6c6c 6875  layer.top_hallhu
+000125d0: 7261 795f 6e6f 6475 6c65 5f72 6164 6975  ray_nodule_radiu
+000125e0: 7320 3d20 6465 6661 756c 745f 6c61 7965  s = default_laye
+000125f0: 725b 2274 6f70 5f68 616c 6c68 7572 6179  r["top_hallhuray
+00012600: 5f6e 6f64 756c 655f 7261 6469 7573 225d  _nodule_radius"]
+00012610: 0a20 2020 2020 2020 2020 2020 206e 6577  .            new
+00012620: 5f6c 6179 6572 2e74 6f70 5f68 616c 6c68  _layer.top_hallh
+00012630: 7572 6179 5f73 7572 6661 6365 5f72 6174  uray_surface_rat
+00012640: 696f 203d 2064 6566 6175 6c74 5f6c 6179  io = default_lay
+00012650: 6572 5b22 746f 705f 6861 6c6c 6875 7261  er["top_hallhura
+00012660: 795f 7375 7266 6163 655f 7261 7469 6f22  y_surface_ratio"
+00012670: 5d0a 2020 2020 2020 2020 2020 2020 6e65  ].            ne
+00012680: 775f 6c61 7965 722e 626f 7474 6f6d 5f68  w_layer.bottom_h
+00012690: 616c 6c68 7572 6179 5f6e 6f64 756c 655f  allhuray_nodule_
+000126a0: 7261 6469 7573 203d 2064 6566 6175 6c74  radius = default
+000126b0: 5f6c 6179 6572 5b22 626f 7474 6f6d 5f68  _layer["bottom_h
+000126c0: 616c 6c68 7572 6179 5f6e 6f64 756c 655f  allhuray_nodule_
+000126d0: 7261 6469 7573 225d 0a20 2020 2020 2020  radius"].       
+000126e0: 2020 2020 206e 6577 5f6c 6179 6572 2e62       new_layer.b
+000126f0: 6f74 746f 6d5f 6861 6c6c 6875 7261 795f  ottom_hallhuray_
+00012700: 7375 7266 6163 655f 7261 7469 6f20 3d20  surface_ratio = 
+00012710: 6465 6661 756c 745f 6c61 7965 725b 2262  default_layer["b
+00012720: 6f74 746f 6d5f 6861 6c6c 6875 7261 795f  ottom_hallhuray_
+00012730: 7375 7266 6163 655f 7261 7469 6f22 5d0a  surface_ratio"].
+00012740: 2020 2020 2020 2020 2020 2020 6e65 775f              new_
+00012750: 6c61 7965 722e 7369 6465 5f68 616c 6c68  layer.side_hallh
+00012760: 7572 6179 5f6e 6f64 756c 655f 7261 6469  uray_nodule_radi
+00012770: 7573 203d 2064 6566 6175 6c74 5f6c 6179  us = default_lay
+00012780: 6572 5b22 7369 6465 5f68 616c 6c68 7572  er["side_hallhur
+00012790: 6179 5f6e 6f64 756c 655f 7261 6469 7573  ay_nodule_radius
+000127a0: 225d 0a20 2020 2020 2020 2020 2020 206e  "].            n
+000127b0: 6577 5f6c 6179 6572 2e73 6964 655f 6861  ew_layer.side_ha
+000127c0: 6c6c 6875 7261 795f 7375 7266 6163 655f  llhuray_surface_
+000127d0: 7261 7469 6f20 3d20 6465 6661 756c 745f  ratio = default_
+000127e0: 6c61 7965 725b 2273 6964 655f 6861 6c6c  layer["side_hall
+000127f0: 6875 7261 795f 7375 7266 6163 655f 7261  huray_surface_ra
+00012800: 7469 6f22 5d0a 0a20 2020 2020 2020 2072  tio"]..        r
+00012810: 6574 7572 6e20 5472 7565 0a0a 2020 2020  eturn True..    
+00012820: 4070 7965 6462 5f66 756e 6374 696f 6e5f  @pyedb_function_
+00012830: 6861 6e64 6c65 7228 290a 2020 2020 6465  handler().    de
+00012840: 6620 5f69 6d70 6f72 745f 6a73 6f6e 2873  f _import_json(s
+00012850: 656c 662c 2066 696c 655f 7061 7468 2c20  elf, file_path, 
+00012860: 7265 6e61 6d65 3d46 616c 7365 293a 0a20  rename=False):. 
+00012870: 2020 2020 2020 2022 2222 496d 706f 7274         """Import
+00012880: 2073 7461 636b 7570 2066 726f 6d20 6120   stackup from a 
+00012890: 6a73 6f6e 2066 696c 652e 2222 220a 2020  json file.""".  
+000128a0: 2020 2020 2020 6966 2066 696c 655f 7061        if file_pa
+000128b0: 7468 3a0a 2020 2020 2020 2020 2020 2020  th:.            
+000128c0: 6620 3d20 6f70 656e 2866 696c 655f 7061  f = open(file_pa
+000128d0: 7468 290a 2020 2020 2020 2020 2020 2020  th).            
+000128e0: 6a73 6f6e 5f64 6963 7420 3d20 6a73 6f6e  json_dict = json
+000128f0: 2e6c 6f61 6428 6629 2020 2320 7072 6167  .load(f)  # prag
+00012900: 6d61 3a20 6e6f 2063 6f76 6572 0a20 2020  ma: no cover.   
+00012910: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00012920: 7365 6c66 2e5f 696d 706f 7274 5f64 6963  self._import_dic
+00012930: 7428 6a73 6f6e 5f64 6963 742c 2072 656e  t(json_dict, ren
+00012940: 616d 6529 0a0a 2020 2020 4070 7965 6462  ame)..    @pyedb
+00012950: 5f66 756e 6374 696f 6e5f 6861 6e64 6c65  _function_handle
+00012960: 7228 290a 2020 2020 6465 6620 5f69 6d70  r().    def _imp
+00012970: 6f72 745f 6373 7628 7365 6c66 2c20 6669  ort_csv(self, fi
+00012980: 6c65 5f70 6174 6829 3a0a 2020 2020 2020  le_path):.      
+00012990: 2020 2222 2249 6d70 6f72 7420 7374 6163    """Import stac
+000129a0: 6b75 7020 6465 6669 6e69 7469 6f6e 2066  kup definition f
+000129b0: 726f 6d20 6120 4353 5620 6669 6c65 2e0a  rom a CSV file..
+000129c0: 0a20 2020 2020 2020 2050 6172 616d 6574  .        Paramet
+000129d0: 6572 730a 2020 2020 2020 2020 2d2d 2d2d  ers.        ----
+000129e0: 2d2d 2d2d 2d2d 0a20 2020 2020 2020 2066  ------.        f
+000129f0: 696c 655f 7061 7468 203a 2073 7472 0a20  ile_path : str. 
+00012a00: 2020 2020 2020 2020 2020 2046 696c 6520             File 
+00012a10: 7061 7468 2074 6f20 7468 6520 4353 5620  path to the CSV 
+00012a20: 6669 6c65 2e0a 2020 2020 2020 2020 2222  file..        ""
+00012a30: 220a 2020 2020 2020 2020 6966 206e 6f74  ".        if not
+00012a40: 2070 643a 0a20 2020 2020 2020 2020 2020   pd:.           
+00012a50: 2073 656c 662e 5f70 6564 622e 6c6f 6767   self._pedb.logg
+00012a60: 6572 2e65 7272 6f72 2822 5061 6e64 6173  er.error("Pandas
+00012a70: 2069 7320 6e65 6564 6564 2e20 596f 7520   is needed. You 
+00012a80: 6d75 7374 2069 6e73 7461 6c6c 2069 7420  must install it 
+00012a90: 6669 7273 742e 2229 0a20 2020 2020 2020  first.").       
+00012aa0: 2020 2020 2072 6574 7572 6e20 4661 6c73       return Fals
+00012ab0: 650a 2020 2020 2020 2020 6966 2069 735f  e.        if is_
+00012ac0: 6972 6f6e 7079 7468 6f6e 3a0a 2020 2020  ironpython:.    
+00012ad0: 2020 2020 2020 2020 7365 6c66 2e5f 7065          self._pe
+00012ae0: 6462 2e6c 6f67 6765 722e 6572 726f 7228  db.logger.error(
+00012af0: 224d 6574 686f 6420 776f 726b 7320 6f6e  "Method works on
+00012b00: 2043 5079 7468 6f6e 206f 6e6c 792e 2229   CPython only.")
+00012b10: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00012b20: 7572 6e20 4661 6c73 650a 2020 2020 2020  urn False.      
+00012b30: 2020 6466 203d 2070 642e 7265 6164 5f63    df = pd.read_c
+00012b40: 7376 2866 696c 655f 7061 7468 2c20 696e  sv(file_path, in
+00012b50: 6465 785f 636f 6c3d 3029 0a0a 2020 2020  dex_col=0)..    
+00012b60: 2020 2020 666f 7220 6e61 6d65 2069 6e20      for name in 
+00012b70: 7365 6c66 2e73 7461 636b 7570 5f6c 6179  self.stackup_lay
+00012b80: 6572 732e 6b65 7973 2829 3a20 2023 2070  ers.keys():  # p
+00012b90: 7261 676d 613a 206e 6f20 636f 7665 720a  ragma: no cover.
+00012ba0: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+00012bb0: 6f74 206e 616d 6520 696e 2064 662e 696e  ot name in df.in
+00012bc0: 6465 783a 0a20 2020 2020 2020 2020 2020  dex:.           
+00012bd0: 2020 2020 206c 6f67 6765 722e 6572 726f       logger.erro
+00012be0: 7228 227b 7d20 646f 6573 6e27 7420 6578  r("{} doesn't ex
+00012bf0: 6973 7420 696e 2063 7376 222e 666f 726d  ist in csv".form
+00012c00: 6174 286e 616d 6529 290a 2020 2020 2020  at(name)).      
+00012c10: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00012c20: 2046 616c 7365 0a0a 2020 2020 2020 2020   False..        
+00012c30: 666f 7220 6e61 6d65 2c20 6c61 7965 725f  for name, layer_
+00012c40: 696e 666f 2069 6e20 6466 2e69 7465 7272  info in df.iterr
+00012c50: 6f77 7328 293a 0a20 2020 2020 2020 2020  ows():.         
+00012c60: 2020 206c 6179 6572 5f74 7970 6520 3d20     layer_type = 
+00012c70: 6c61 7965 725f 696e 666f 2e54 7970 650a  layer_info.Type.
+00012c80: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+00012c90: 616d 6520 696e 2073 656c 662e 6c61 7965  ame in self.laye
+00012ca0: 7273 3a0a 2020 2020 2020 2020 2020 2020  rs:.            
+00012cb0: 2020 2020 6c61 7965 7220 3d20 7365 6c66      layer = self
+00012cc0: 2e6c 6179 6572 735b 6e61 6d65 5d0a 2020  .layers[name].  
+00012cd0: 2020 2020 2020 2020 2020 2020 2020 6c61                la
+00012ce0: 7965 722e 7479 7065 203d 206c 6179 6572  yer.type = layer
+00012cf0: 5f74 7970 650a 2020 2020 2020 2020 2020  _type.          
+00012d00: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00012d10: 2020 2020 2020 2020 6c61 7965 7220 3d20          layer = 
+00012d20: 7365 6c66 2e61 6464 5f6c 6179 6572 286e  self.add_layer(n
+00012d30: 616d 652c 206c 6179 6572 5f74 7970 653d  ame, layer_type=
+00012d40: 6c61 7965 725f 7479 7065 2c20 6d61 7465  layer_type, mate
+00012d50: 7269 616c 3d22 636f 7070 6572 222c 2066  rial="copper", f
+00012d60: 696c 6c4d 6174 6572 6961 6c3d 2263 6f70  illMaterial="cop
+00012d70: 7065 7222 290a 0a20 2020 2020 2020 2020  per")..         
+00012d80: 2020 206c 6179 6572 2e6d 6174 6572 6961     layer.materia
+00012d90: 6c20 3d20 6c61 7965 725f 696e 666f 2e4d  l = layer_info.M
+00012da0: 6174 6572 6961 6c0a 2020 2020 2020 2020  aterial.        
+00012db0: 2020 2020 6c61 7965 722e 7468 6963 6b6e      layer.thickn
+00012dc0: 6573 7320 3d20 6c61 7965 725f 696e 666f  ess = layer_info
+00012dd0: 2e54 6869 636b 6e65 7373 0a20 2020 2020  .Thickness.     
+00012de0: 2020 2020 2020 206c 6179 6572 2e64 6965         layer.die
+00012df0: 6c65 6374 7269 635f 6669 6c6c 203d 206c  lectric_fill = l
+00012e00: 6179 6572 5f69 6e66 6f2e 4469 656c 6563  ayer_info.Dielec
+00012e10: 7472 6963 5f46 696c 6c0a 0a20 2020 2020  tric_Fill..     
+00012e20: 2020 206c 635f 6e65 7720 3d20 7365 6c66     lc_new = self
+00012e30: 2e5f 7065 6462 2e65 6462 5f61 7069 2e43  ._pedb.edb_api.C
+00012e40: 656c 6c2e 4c61 7965 7243 6f6c 6c65 6374  ell.LayerCollect
+00012e50: 696f 6e28 290a 2020 2020 2020 2020 666f  ion().        fo
+00012e60: 7220 6e61 6d65 2c20 5f20 696e 2064 662e  r name, _ in df.
+00012e70: 6974 6572 726f 7773 2829 3a0a 2020 2020  iterrows():.    
+00012e80: 2020 2020 2020 2020 6c61 7965 7220 3d20          layer = 
+00012e90: 7365 6c66 2e6c 6179 6572 735b 6e61 6d65  self.layers[name
+00012ea0: 5d0a 2020 2020 2020 2020 2020 2020 6c63  ].            lc
+00012eb0: 5f6e 6577 2e41 6464 4c61 7965 7242 6f74  _new.AddLayerBot
+00012ec0: 746f 6d28 6c61 7965 722e 5f65 6462 5f6c  tom(layer._edb_l
+00012ed0: 6179 6572 290a 0a20 2020 2020 2020 2066  ayer)..        f
+00012ee0: 6f72 206e 616d 652c 206c 6179 6572 2069  or name, layer i
+00012ef0: 6e20 7365 6c66 2e6e 6f6e 5f73 7461 636b  n self.non_stack
+00012f00: 7570 5f6c 6179 6572 732e 6974 656d 7328  up_layers.items(
+00012f10: 293a 0a20 2020 2020 2020 2020 2020 206c  ):.            l
+00012f20: 635f 6e65 772e 4164 644c 6179 6572 426f  c_new.AddLayerBo
+00012f30: 7474 6f6d 286c 6179 6572 2e5f 6564 625f  ttom(layer._edb_
+00012f40: 6c61 7965 7229 0a0a 2020 2020 2020 2020  layer)..        
+00012f50: 7365 6c66 2e5f 7065 6462 2e6c 6179 6f75  self._pedb.layou
+00012f60: 742e 6c61 7965 725f 636f 6c6c 6563 7469  t.layer_collecti
+00012f70: 6f6e 203d 206c 635f 6e65 770a 2020 2020  on = lc_new.    
+00012f80: 2020 2020 7365 6c66 2e72 6566 7265 7368      self.refresh
+00012f90: 5f6c 6179 6572 5f63 6f6c 6c65 6374 696f  _layer_collectio
+00012fa0: 6e28 290a 2020 2020 2020 2020 7265 7475  n().        retu
+00012fb0: 726e 2054 7275 650a 0a20 2020 2040 7079  rn True..    @py
+00012fc0: 6564 625f 6675 6e63 7469 6f6e 5f68 616e  edb_function_han
+00012fd0: 646c 6572 2829 0a20 2020 2064 6566 205f  dler().    def _
+00012fe0: 7365 7428 7365 6c66 2c20 6c61 7965 7273  set(self, layers
+00012ff0: 3d4e 6f6e 652c 206d 6174 6572 6961 6c73  =None, materials
+00013000: 3d4e 6f6e 652c 2072 6f75 6768 6e65 7373  =None, roughness
+00013010: 3d4e 6f6e 652c 206e 6f6e 5f73 7461 636b  =None, non_stack
+00013020: 7570 5f6c 6179 6572 733d 4e6f 6e65 293a  up_layers=None):
+00013030: 0a20 2020 2020 2020 2022 2222 5570 6461  .        """Upda
+00013040: 7465 2073 7461 636b 7570 2069 6e66 6f72  te stackup infor
+00013050: 6d61 7469 6f6e 2e0a 0a20 2020 2020 2020  mation...       
+00013060: 2050 6172 616d 6574 6572 730a 2020 2020   Parameters.    
+00013070: 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0a20      ----------. 
+00013080: 2020 2020 2020 206c 6179 6572 733a 2064         layers: d
+00013090: 6963 740a 2020 2020 2020 2020 2020 2020  ict.            
+000130a0: 4469 6374 696f 6e61 7279 2063 6f6e 7461  Dictionary conta
+000130b0: 696e 696e 6720 6c61 7965 7220 696e 666f  ining layer info
+000130c0: 726d 6174 696f 6e2e 0a20 2020 2020 2020  rmation..       
+000130d0: 206d 6174 6572 6961 6c73 3a20 6469 6374   materials: dict
+000130e0: 0a20 2020 2020 2020 2020 2020 2044 6963  .            Dic
+000130f0: 7469 6f6e 6172 7920 636f 6e74 6169 6e69  tionary containi
+00013100: 6e67 206d 6174 6572 6961 6c20 696e 666f  ng material info
+00013110: 726d 6174 696f 6e2e 0a20 2020 2020 2020  rmation..       
+00013120: 2072 6f75 6768 6e65 7373 3a20 6469 6374   roughness: dict
+00013130: 0a20 2020 2020 2020 2020 2020 2044 6963  .            Dic
+00013140: 7469 6f6e 6172 7920 636f 6e74 6169 6e69  tionary containi
+00013150: 6e67 2072 6f75 6768 6e65 7373 2069 6e66  ng roughness inf
+00013160: 6f72 6d61 7469 6f6e 2e0a 0a20 2020 2020  ormation...     
+00013170: 2020 2052 6574 7572 6e73 0a20 2020 2020     Returns.     
+00013180: 2020 202d 2d2d 2d2d 2d2d 0a0a 2020 2020     -------..    
+00013190: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+000131a0: 6966 206d 6174 6572 6961 6c73 3a0a 2020  if materials:.  
+000131b0: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
+000131c0: 6164 645f 6d61 7465 7269 616c 735f 6672  add_materials_fr
+000131d0: 6f6d 5f64 6963 7469 6f6e 6172 7928 6d61  om_dictionary(ma
+000131e0: 7465 7269 616c 7329 0a0a 2020 2020 2020  terials)..      
+000131f0: 2020 6966 206c 6179 6572 733a 0a20 2020    if layers:.   
+00013200: 2020 2020 2020 2020 2070 7265 765f 6c61           prev_la
+00013210: 7965 7220 3d20 4e6f 6e65 0a20 2020 2020  yer = None.     
+00013220: 2020 2020 2020 2066 6f72 206e 616d 652c         for name,
+00013230: 2076 616c 2069 6e20 6c61 7965 7273 2e69   val in layers.i
+00013240: 7465 6d73 2829 3a0a 2020 2020 2020 2020  tems():.        
+00013250: 2020 2020 2020 2020 6574 6368 696e 675f          etching_
+00013260: 6661 6374 6f72 203d 2066 6c6f 6174 2876  factor = float(v
+00013270: 616c 5b22 4574 6368 4661 6374 6f72 225d  al["EtchFactor"]
+00013280: 2920 6966 2022 4574 6368 4661 6374 6f72  ) if "EtchFactor
+00013290: 2220 696e 2076 616c 2065 6c73 6520 4e6f  " in val else No
+000132a0: 6e65 0a0a 2020 2020 2020 2020 2020 2020  ne..            
+000132b0: 2020 2020 6966 206e 6f74 2073 656c 662e      if not self.
+000132c0: 7374 6163 6b75 705f 6c61 7965 7273 3a0a  stackup_layers:.
+000132d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000132e0: 2020 2020 7365 6c66 2e61 6464 5f6c 6179      self.add_lay
+000132f0: 6572 280a 2020 2020 2020 2020 2020 2020  er(.            
+00013300: 2020 2020 2020 2020 2020 2020 6e61 6d65              name
+00013310: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00013320: 2020 2020 2020 2020 2020 4e6f 6e65 2c0a            None,.
+00013330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013340: 2020 2020 2020 2020 2261 6464 5f6f 6e5f          "add_on_
+00013350: 746f 7022 2c0a 2020 2020 2020 2020 2020  top",.          
+00013360: 2020 2020 2020 2020 2020 2020 2020 7661                va
+00013370: 6c5b 2254 7970 6522 5d2c 0a20 2020 2020  l["Type"],.     
+00013380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013390: 2020 2076 616c 5b22 4d61 7465 7269 616c     val["Material
+000133a0: 225d 2c0a 2020 2020 2020 2020 2020 2020  "],.            
+000133b0: 2020 2020 2020 2020 2020 2020 7661 6c5b              val[
+000133c0: 2246 696c 6c4d 6174 6572 6961 6c22 5d20  "FillMaterial"] 
+000133d0: 6966 2076 616c 5b22 5479 7065 225d 203d  if val["Type"] =
+000133e0: 3d20 2273 6967 6e61 6c22 2065 6c73 6520  = "signal" else 
+000133f0: 2222 2c0a 2020 2020 2020 2020 2020 2020  "",.            
+00013400: 2020 2020 2020 2020 2020 2020 7661 6c5b              val[
+00013410: 2254 6869 636b 6e65 7373 225d 2c0a 2020  "Thickness"],.  
+00013420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013430: 2020 2020 2020 6574 6368 696e 675f 6661        etching_fa
+00013440: 6374 6f72 2c0a 2020 2020 2020 2020 2020  ctor,.          
+00013450: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+00013460: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00013470: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00013480: 2020 2020 2020 6966 206e 616d 6520 696e        if name in
+00013490: 2073 656c 662e 7374 6163 6b75 705f 6c61   self.stackup_la
+000134a0: 7965 7273 2e6b 6579 7328 293a 0a20 2020  yers.keys():.   
+000134b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000134c0: 2020 2020 206c 7972 203d 2073 656c 662e       lyr = self.
+000134d0: 7374 6163 6b75 705f 6c61 7965 7273 5b6e  stackup_layers[n
+000134e0: 616d 655d 0a20 2020 2020 2020 2020 2020  ame].           
+000134f0: 2020 2020 2020 2020 2020 2020 206c 7972               lyr
+00013500: 2e74 7970 6520 3d20 7661 6c5b 2254 7970  .type = val["Typ
+00013510: 6522 5d0a 2020 2020 2020 2020 2020 2020  e"].            
+00013520: 2020 2020 2020 2020 2020 2020 6c79 722e              lyr.
+00013530: 6d61 7465 7269 616c 203d 2076 616c 5b22  material = val["
+00013540: 4d61 7465 7269 616c 225d 0a20 2020 2020  Material"].     
+00013550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013560: 2020 206c 7972 2e64 6965 6c65 6374 7269     lyr.dielectri
+00013570: 635f 6669 6c6c 203d 2076 616c 5b22 4669  c_fill = val["Fi
+00013580: 6c6c 4d61 7465 7269 616c 225d 2069 6620  llMaterial"] if 
+00013590: 7661 6c5b 2254 7970 6522 5d20 3d3d 2022  val["Type"] == "
+000135a0: 7369 676e 616c 2220 656c 7365 2022 220a  signal" else "".
+000135b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000135c0: 2020 2020 2020 2020 6c79 722e 7468 6963          lyr.thic
+000135d0: 6b6e 6573 7320 3d20 7661 6c5b 2254 6869  kness = val["Thi
+000135e0: 636b 6e65 7373 225d 0a20 2020 2020 2020  ckness"].       
+000135f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013600: 2069 6620 7072 6576 5f6c 6179 6572 3a0a   if prev_layer:.
+00013610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013620: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00013630: 2e5f 7365 745f 6c61 796f 7574 5f73 7461  ._set_layout_sta
+00013640: 636b 7570 286c 7972 2e5f 6564 625f 6c61  ckup(lyr._edb_la
+00013650: 7965 722c 2022 6368 616e 6765 5f70 6f73  yer, "change_pos
+00013660: 6974 696f 6e22 2c20 7072 6576 5f6c 6179  ition", prev_lay
+00013670: 6572 290a 2020 2020 2020 2020 2020 2020  er).            
+00013680: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
 00013690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000136a0: 2020 2020 206c 6179 6572 5f6e 616d 652c       layer_name,
-000136b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000136c0: 2020 2020 2020 2020 2020 2020 2022 696e               "in
-000136d0: 7365 7274 5f61 626f 7665 222c 0a20 2020  sert_above",.   
+000136a0: 2020 2020 2020 6966 2070 7265 765f 6c61        if prev_la
+000136b0: 7965 7220 616e 6420 7072 6576 5f6c 6179  yer and prev_lay
+000136c0: 6572 2069 6e20 7365 6c66 2e73 7461 636b  er in self.stack
+000136d0: 7570 5f6c 6179 6572 733a 0a20 2020 2020  up_layers:.     
 000136e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000136f0: 2020 2020 2020 2020 2076 616c 5b22 5479           val["Ty
-00013700: 7065 225d 2c0a 2020 2020 2020 2020 2020  pe"],.          
+000136f0: 2020 2020 2020 206c 6179 6572 5f6e 616d         layer_nam
+00013700: 6520 3d20 7072 6576 5f6c 6179 6572 0a20  e = prev_layer. 
 00013710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013720: 2020 7661 6c5b 224d 6174 6572 6961 6c22    val["Material"
-00013730: 5d2c 0a20 2020 2020 2020 2020 2020 2020  ],.             
-00013740: 2020 2020 2020 2020 2020 2020 2020 2076                 v
-00013750: 616c 5b22 4669 6c6c 4d61 7465 7269 616c  al["FillMaterial
-00013760: 225d 2069 6620 7661 6c5b 2254 7970 6522  "] if val["Type"
-00013770: 5d20 3d3d 2022 7369 676e 616c 2220 656c  ] == "signal" el
-00013780: 7365 2022 222c 0a20 2020 2020 2020 2020  se "",.         
-00013790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000137a0: 2020 2076 616c 5b22 5468 6963 6b6e 6573     val["Thicknes
-000137b0: 7322 5d2c 0a20 2020 2020 2020 2020 2020  s"],.           
-000137c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000137d0: 2065 7463 6869 6e67 5f66 6163 746f 722c   etching_factor,
-000137e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000137f0: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-00013800: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00013810: 7265 765f 6c61 7965 7220 3d20 6e61 6d65  rev_layer = name
-00013820: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-00013830: 206e 616d 6520 696e 2073 656c 662e 7374   name in self.st
-00013840: 6163 6b75 705f 6c61 7965 7273 3a0a 2020  ackup_layers:.  
-00013850: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00013860: 206e 616d 6520 6e6f 7420 696e 206c 6179   name not in lay
-00013870: 6572 733a 0a20 2020 2020 2020 2020 2020  ers:.           
-00013880: 2020 2020 2020 2020 2073 656c 662e 7265           self.re
-00013890: 6d6f 7665 5f6c 6179 6572 286e 616d 6529  move_layer(name)
-000138a0: 0a0a 2020 2020 2020 2020 6966 2072 6f75  ..        if rou
-000138b0: 6768 6e65 7373 3a0a 2020 2020 2020 2020  ghness:.        
-000138c0: 2020 2020 666f 7220 6e61 6d65 2c20 6174      for name, at
-000138d0: 7472 2069 6e20 726f 7567 686e 6573 732e  tr in roughness.
-000138e0: 6974 656d 7328 293a 0a20 2020 2020 2020  items():.       
-000138f0: 2020 2020 2020 2020 206c 6179 6572 203d           layer =
-00013900: 2073 656c 662e 7369 676e 616c 5f6c 6179   self.signal_lay
-00013910: 6572 735b 6e61 6d65 5d0a 2020 2020 2020  ers[name].      
-00013920: 2020 2020 2020 2020 2020 6c61 7965 722e            layer.
-00013930: 726f 7567 686e 6573 735f 656e 6162 6c65  roughness_enable
-00013940: 6420 3d20 5472 7565 0a0a 2020 2020 2020  d = True..      
-00013950: 2020 2020 2020 2020 2020 6174 7472 5f6e            attr_n
-00013960: 616d 6520 3d20 2248 7572 6179 5375 7266  ame = "HuraySurf
-00013970: 6163 6552 6f75 6768 6e65 7373 220a 2020  aceRoughness".  
-00013980: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00013990: 2061 7474 725f 6e61 6d65 2069 6e20 6174   attr_name in at
-000139a0: 7472 3a0a 2020 2020 2020 2020 2020 2020  tr:.            
-000139b0: 2020 2020 2020 2020 6f6e 5f73 7572 6661          on_surfa
-000139c0: 6365 203d 2022 746f 7022 0a20 2020 2020  ce = "top".     
-000139d0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-000139e0: 6179 6572 2e61 7373 6967 6e5f 726f 7567  ayer.assign_roug
-000139f0: 686e 6573 735f 6d6f 6465 6c28 0a20 2020  hness_model(.   
-00013a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013a10: 2020 2020 2022 6875 7261 7922 2c0a 2020       "huray",.  
-00013a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013a30: 2020 2020 2020 6174 7472 5b61 7474 725f        attr[attr_
-00013a40: 6e61 6d65 5d5b 224e 6f64 756c 6552 6164  name]["NoduleRad
-00013a50: 6975 7322 5d2c 0a20 2020 2020 2020 2020  ius"],.         
-00013a60: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-00013a70: 7474 725b 6174 7472 5f6e 616d 655d 5b22  ttr[attr_name]["
-00013a80: 4861 6c6c 4875 7261 7953 7572 6661 6365  HallHuraySurface
-00013a90: 5261 7469 6f22 5d2c 0a20 2020 2020 2020  Ratio"],.       
-00013aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013ab0: 2061 7070 6c79 5f6f 6e5f 7375 7266 6163   apply_on_surfac
-00013ac0: 653d 6f6e 5f73 7572 6661 6365 2c0a 2020  e=on_surface,.  
-00013ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013ae0: 2020 290a 0a20 2020 2020 2020 2020 2020    )..           
-00013af0: 2020 2020 2061 7474 725f 6e61 6d65 203d       attr_name =
-00013b00: 2022 4875 7261 7942 6f74 746f 6d53 7572   "HurayBottomSur
-00013b10: 6661 6365 526f 7567 686e 6573 7322 0a20  faceRoughness". 
-00013b20: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00013b30: 6620 6174 7472 5f6e 616d 6520 696e 2061  f attr_name in a
-00013b40: 7474 723a 0a20 2020 2020 2020 2020 2020  ttr:.           
-00013b50: 2020 2020 2020 2020 206f 6e5f 7375 7266           on_surf
-00013b60: 6163 6520 3d20 2262 6f74 746f 6d22 0a20  ace = "bottom". 
-00013b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013b80: 2020 206c 6179 6572 2e61 7373 6967 6e5f     layer.assign_
-00013b90: 726f 7567 686e 6573 735f 6d6f 6465 6c28  roughness_model(
-00013ba0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013bb0: 2020 2020 2020 2020 2022 6875 7261 7922           "huray"
-00013bc0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00013bd0: 2020 2020 2020 2020 2020 6174 7472 5b61            attr[a
-00013be0: 7474 725f 6e61 6d65 5d5b 224e 6f64 756c  ttr_name]["Nodul
-00013bf0: 6552 6164 6975 7322 5d2c 0a20 2020 2020  eRadius"],.     
-00013c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013c10: 2020 2061 7474 725b 6174 7472 5f6e 616d     attr[attr_nam
-00013c20: 655d 5b22 4861 6c6c 4875 7261 7953 7572  e]["HallHuraySur
-00013c30: 6661 6365 5261 7469 6f22 5d2c 0a20 2020  faceRatio"],.   
-00013c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013c50: 2020 2020 2061 7070 6c79 5f6f 6e5f 7375       apply_on_su
-00013c60: 7266 6163 653d 6f6e 5f73 7572 6661 6365  rface=on_surface
-00013c70: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00013c80: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00013c90: 2020 2020 2020 2020 6174 7472 5f6e 616d          attr_nam
-00013ca0: 6520 3d20 2248 7572 6179 5369 6465 5375  e = "HuraySideSu
-00013cb0: 7266 6163 6552 6f75 6768 6e65 7373 220a  rfaceRoughness".
-00013cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013cd0: 6966 2061 7474 725f 6e61 6d65 2069 6e20  if attr_name in 
-00013ce0: 6174 7472 3a0a 2020 2020 2020 2020 2020  attr:.          
-00013cf0: 2020 2020 2020 2020 2020 6f6e 5f73 7572            on_sur
-00013d00: 6661 6365 203d 2022 7369 6465 220a 2020  face = "side".  
-00013d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013d20: 2020 6c61 7965 722e 6173 7369 676e 5f72    layer.assign_r
-00013d30: 6f75 6768 6e65 7373 5f6d 6f64 656c 280a  oughness_model(.
-00013d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013d50: 2020 2020 2020 2020 2268 7572 6179 222c          "huray",
-00013d60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013d70: 2020 2020 2020 2020 2061 7474 725b 6174           attr[at
-00013d80: 7472 5f6e 616d 655d 5b22 4e6f 6475 6c65  tr_name]["Nodule
-00013d90: 5261 6469 7573 225d 2c0a 2020 2020 2020  Radius"],.      
+00013720: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00013730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013740: 2020 2020 2020 2020 206c 6179 6572 5f6e           layer_n
+00013750: 616d 6520 3d20 6c69 7374 2873 656c 662e  ame = list(self.
+00013760: 7374 6163 6b75 705f 6c61 7965 7273 2e6b  stackup_layers.k
+00013770: 6579 7328 2929 5b2d 315d 2069 6620 7365  eys())[-1] if se
+00013780: 6c66 2e73 7461 636b 7570 5f6c 6179 6572  lf.stackup_layer
+00013790: 7320 656c 7365 204e 6f6e 650a 2020 2020  s else None.    
+000137a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000137b0: 2020 2020 7365 6c66 2e61 6464 5f6c 6179      self.add_lay
+000137c0: 6572 280a 2020 2020 2020 2020 2020 2020  er(.            
+000137d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000137e0: 6e61 6d65 2c0a 2020 2020 2020 2020 2020  name,.          
+000137f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013800: 2020 6c61 7965 725f 6e61 6d65 2c0a 2020    layer_name,.  
+00013810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013820: 2020 2020 2020 2020 2020 2269 6e73 6572            "inser
+00013830: 745f 6162 6f76 6522 2c0a 2020 2020 2020  t_above",.      
+00013840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013850: 2020 2020 2020 7661 6c5b 2254 7970 6522        val["Type"
+00013860: 5d2c 0a20 2020 2020 2020 2020 2020 2020  ],.             
+00013870: 2020 2020 2020 2020 2020 2020 2020 2076                 v
+00013880: 616c 5b22 4d61 7465 7269 616c 225d 2c0a  al["Material"],.
+00013890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000138a0: 2020 2020 2020 2020 2020 2020 7661 6c5b              val[
+000138b0: 2246 696c 6c4d 6174 6572 6961 6c22 5d20  "FillMaterial"] 
+000138c0: 6966 2076 616c 5b22 5479 7065 225d 203d  if val["Type"] =
+000138d0: 3d20 2273 6967 6e61 6c22 2065 6c73 6520  = "signal" else 
+000138e0: 2222 2c0a 2020 2020 2020 2020 2020 2020  "",.            
+000138f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013900: 7661 6c5b 2254 6869 636b 6e65 7373 225d  val["Thickness"]
+00013910: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00013920: 2020 2020 2020 2020 2020 2020 2020 6574                et
+00013930: 6368 696e 675f 6661 6374 6f72 2c0a 2020  ching_factor,.  
+00013940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013950: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00013960: 2020 2020 2020 2020 2020 2020 7072 6576              prev
+00013970: 5f6c 6179 6572 203d 206e 616d 650a 2020  _layer = name.  
+00013980: 2020 2020 2020 2020 2020 666f 7220 6e61            for na
+00013990: 6d65 2069 6e20 7365 6c66 2e73 7461 636b  me in self.stack
+000139a0: 7570 5f6c 6179 6572 733a 0a20 2020 2020  up_layers:.     
+000139b0: 2020 2020 2020 2020 2020 2069 6620 6e61             if na
+000139c0: 6d65 206e 6f74 2069 6e20 6c61 7965 7273  me not in layers
+000139d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000139e0: 2020 2020 2020 7365 6c66 2e72 656d 6f76        self.remov
+000139f0: 655f 6c61 7965 7228 6e61 6d65 290a 0a20  e_layer(name).. 
+00013a00: 2020 2020 2020 2069 6620 726f 7567 686e         if roughn
+00013a10: 6573 733a 0a20 2020 2020 2020 2020 2020  ess:.           
+00013a20: 2066 6f72 206e 616d 652c 2061 7474 7220   for name, attr 
+00013a30: 696e 2072 6f75 6768 6e65 7373 2e69 7465  in roughness.ite
+00013a40: 6d73 2829 3a0a 2020 2020 2020 2020 2020  ms():.          
+00013a50: 2020 2020 2020 6c61 7965 7220 3d20 7365        layer = se
+00013a60: 6c66 2e73 6967 6e61 6c5f 6c61 7965 7273  lf.signal_layers
+00013a70: 5b6e 616d 655d 0a20 2020 2020 2020 2020  [name].         
+00013a80: 2020 2020 2020 206c 6179 6572 2e72 6f75         layer.rou
+00013a90: 6768 6e65 7373 5f65 6e61 626c 6564 203d  ghness_enabled =
+00013aa0: 2054 7275 650a 0a20 2020 2020 2020 2020   True..         
+00013ab0: 2020 2020 2020 2061 7474 725f 6e61 6d65         attr_name
+00013ac0: 203d 2022 4875 7261 7953 7572 6661 6365   = "HuraySurface
+00013ad0: 526f 7567 686e 6573 7322 0a20 2020 2020  Roughness".     
+00013ae0: 2020 2020 2020 2020 2020 2069 6620 6174             if at
+00013af0: 7472 5f6e 616d 6520 696e 2061 7474 723a  tr_name in attr:
+00013b00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00013b10: 2020 2020 206f 6e5f 7375 7266 6163 6520       on_surface 
+00013b20: 3d20 2274 6f70 220a 2020 2020 2020 2020  = "top".        
+00013b30: 2020 2020 2020 2020 2020 2020 6c61 7965              laye
+00013b40: 722e 6173 7369 676e 5f72 6f75 6768 6e65  r.assign_roughne
+00013b50: 7373 5f6d 6f64 656c 280a 2020 2020 2020  ss_model(.      
+00013b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013b70: 2020 2268 7572 6179 222c 0a20 2020 2020    "huray",.     
+00013b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013b90: 2020 2061 7474 725b 6174 7472 5f6e 616d     attr[attr_nam
+00013ba0: 655d 5b22 4e6f 6475 6c65 5261 6469 7573  e]["NoduleRadius
+00013bb0: 225d 2c0a 2020 2020 2020 2020 2020 2020  "],.            
+00013bc0: 2020 2020 2020 2020 2020 2020 6174 7472              attr
+00013bd0: 5b61 7474 725f 6e61 6d65 5d5b 2248 616c  [attr_name]["Hal
+00013be0: 6c48 7572 6179 5375 7266 6163 6552 6174  lHuraySurfaceRat
+00013bf0: 696f 225d 2c0a 2020 2020 2020 2020 2020  io"],.          
+00013c00: 2020 2020 2020 2020 2020 2020 2020 6170                ap
+00013c10: 706c 795f 6f6e 5f73 7572 6661 6365 3d6f  ply_on_surface=o
+00013c20: 6e5f 7375 7266 6163 652c 0a20 2020 2020  n_surface,.     
+00013c30: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+00013c40: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00013c50: 2020 6174 7472 5f6e 616d 6520 3d20 2248    attr_name = "H
+00013c60: 7572 6179 426f 7474 6f6d 5375 7266 6163  urayBottomSurfac
+00013c70: 6552 6f75 6768 6e65 7373 220a 2020 2020  eRoughness".    
+00013c80: 2020 2020 2020 2020 2020 2020 6966 2061              if a
+00013c90: 7474 725f 6e61 6d65 2069 6e20 6174 7472  ttr_name in attr
+00013ca0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00013cb0: 2020 2020 2020 6f6e 5f73 7572 6661 6365        on_surface
+00013cc0: 203d 2022 626f 7474 6f6d 220a 2020 2020   = "bottom".    
+00013cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013ce0: 6c61 7965 722e 6173 7369 676e 5f72 6f75  layer.assign_rou
+00013cf0: 6768 6e65 7373 5f6d 6f64 656c 280a 2020  ghness_model(.  
+00013d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013d10: 2020 2020 2020 2268 7572 6179 222c 0a20        "huray",. 
+00013d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013d30: 2020 2020 2020 2061 7474 725b 6174 7472         attr[attr
+00013d40: 5f6e 616d 655d 5b22 4e6f 6475 6c65 5261  _name]["NoduleRa
+00013d50: 6469 7573 225d 2c0a 2020 2020 2020 2020  dius"],.        
+00013d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013d70: 6174 7472 5b61 7474 725f 6e61 6d65 5d5b  attr[attr_name][
+00013d80: 2248 616c 6c48 7572 6179 5375 7266 6163  "HallHuraySurfac
+00013d90: 6552 6174 696f 225d 2c0a 2020 2020 2020  eRatio"],.      
 00013da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013db0: 2020 6174 7472 5b61 7474 725f 6e61 6d65    attr[attr_name
-00013dc0: 5d5b 2248 616c 6c48 7572 6179 5375 7266  ]["HallHuraySurf
-00013dd0: 6163 6552 6174 696f 225d 2c0a 2020 2020  aceRatio"],.    
-00013de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013df0: 2020 2020 6170 706c 795f 6f6e 5f73 7572      apply_on_sur
-00013e00: 6661 6365 3d6f 6e5f 7375 7266 6163 652c  face=on_surface,
-00013e10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013e20: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
-00013e30: 2020 2020 2020 2020 6174 7472 5f6e 616d          attr_nam
-00013e40: 6520 3d20 2247 726f 6973 7353 7572 6661  e = "GroissSurfa
-00013e50: 6365 526f 7567 686e 6573 7322 0a20 2020  ceRoughness".   
-00013e60: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00013e70: 6174 7472 5f6e 616d 6520 696e 2061 7474  attr_name in att
-00013e80: 723a 0a20 2020 2020 2020 2020 2020 2020  r:.             
-00013e90: 2020 2020 2020 206f 6e5f 7375 7266 6163         on_surfac
-00013ea0: 6520 3d20 2274 6f70 220a 2020 2020 2020  e = "top".      
-00013eb0: 2020 2020 2020 2020 2020 2020 2020 6c61                la
-00013ec0: 7965 722e 6173 7369 676e 5f72 6f75 6768  yer.assign_rough
-00013ed0: 6e65 7373 5f6d 6f64 656c 280a 2020 2020  ness_model(.    
-00013ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013ef0: 2020 2020 2267 726f 6973 7365 222c 2067      "groisse", g
-00013f00: 726f 6973 7365 5f72 6f75 6768 6e65 7373  roisse_roughness
-00013f10: 3d61 7474 725b 6174 7472 5f6e 616d 655d  =attr[attr_name]
-00013f20: 5b22 526f 7567 686e 6573 7322 5d2c 2061  ["Roughness"], a
-00013f30: 7070 6c79 5f6f 6e5f 7375 7266 6163 653d  pply_on_surface=
-00013f40: 6f6e 5f73 7572 6661 6365 0a20 2020 2020  on_surface.     
-00013f50: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00013f60: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00013f70: 2020 6174 7472 5f6e 616d 6520 3d20 2247    attr_name = "G
-00013f80: 726f 6973 7342 6f74 746f 6d53 7572 6661  roissBottomSurfa
-00013f90: 6365 526f 7567 686e 6573 7322 0a20 2020  ceRoughness".   
-00013fa0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00013fb0: 6174 7472 5f6e 616d 6520 696e 2061 7474  attr_name in att
-00013fc0: 723a 0a20 2020 2020 2020 2020 2020 2020  r:.             
-00013fd0: 2020 2020 2020 206f 6e5f 7375 7266 6163         on_surfac
-00013fe0: 6520 3d20 2262 6f74 746f 6d22 0a20 2020  e = "bottom".   
-00013ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014000: 206c 6179 6572 2e61 7373 6967 6e5f 726f   layer.assign_ro
-00014010: 7567 686e 6573 735f 6d6f 6465 6c28 0a20  ughness_model(. 
-00014020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014030: 2020 2020 2020 2022 6772 6f69 7373 6522         "groisse"
-00014040: 2c20 6772 6f69 7373 655f 726f 7567 686e  , groisse_roughn
-00014050: 6573 733d 6174 7472 5b61 7474 725f 6e61  ess=attr[attr_na
-00014060: 6d65 5d5b 2252 6f75 6768 6e65 7373 225d  me]["Roughness"]
-00014070: 2c20 6170 706c 795f 6f6e 5f73 7572 6661  , apply_on_surfa
-00014080: 6365 3d6f 6e5f 7375 7266 6163 650a 2020  ce=on_surface.  
-00014090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000140a0: 2020 290a 0a20 2020 2020 2020 2020 2020    )..           
-000140b0: 2020 2020 2061 7474 725f 6e61 6d65 203d       attr_name =
-000140c0: 2022 4772 6f69 7373 5369 6465 5375 7266   "GroissSideSurf
-000140d0: 6163 6552 6f75 6768 6e65 7373 220a 2020  aceRoughness".  
-000140e0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-000140f0: 2061 7474 725f 6e61 6d65 2069 6e20 6174   attr_name in at
-00014100: 7472 3a0a 2020 2020 2020 2020 2020 2020  tr:.            
-00014110: 2020 2020 2020 2020 6f6e 5f73 7572 6661          on_surfa
-00014120: 6365 203d 2022 7369 6465 220a 2020 2020  ce = "side".    
-00014130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014140: 6c61 7965 722e 6173 7369 676e 5f72 6f75  layer.assign_rou
-00014150: 6768 6e65 7373 5f6d 6f64 656c 280a 2020  ghness_model(.  
-00014160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014170: 2020 2020 2020 2267 726f 6973 7365 222c        "groisse",
-00014180: 2067 726f 6973 7365 5f72 6f75 6768 6e65   groisse_roughne
-00014190: 7373 3d61 7474 725b 6174 7472 5f6e 616d  ss=attr[attr_nam
-000141a0: 655d 5b22 526f 7567 686e 6573 7322 5d2c  e]["Roughness"],
-000141b0: 2061 7070 6c79 5f6f 6e5f 7375 7266 6163   apply_on_surfac
-000141c0: 653d 6f6e 5f73 7572 6661 6365 0a20 2020  e=on_surface.   
-000141d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000141e0: 2029 0a0a 2020 2020 2020 2020 6966 206e   )..        if n
-000141f0: 6f6e 5f73 7461 636b 7570 5f6c 6179 6572  on_stackup_layer
-00014200: 733a 0a20 2020 2020 2020 2020 2020 2066  s:.            f
-00014210: 6f72 206e 616d 652c 2076 616c 2069 6e20  or name, val in 
-00014220: 6e6f 6e5f 7374 6163 6b75 705f 6c61 7965  non_stackup_laye
-00014230: 7273 2e69 7465 6d73 2829 3a0a 2020 2020  rs.items():.    
-00014240: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-00014250: 616d 6520 696e 2073 656c 662e 6e6f 6e5f  ame in self.non_
-00014260: 7374 6163 6b75 705f 6c61 7965 7273 3a0a  stackup_layers:.
-00014270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014280: 2020 2020 636f 6e74 696e 7565 0a20 2020      continue.   
-00014290: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-000142a0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-000142b0: 2020 2020 2020 2073 656c 662e 6164 645f         self.add_
-000142c0: 6c61 7965 7228 6e61 6d65 2c20 6c61 7965  layer(name, laye
-000142d0: 725f 7479 7065 3d76 616c 5b22 5479 7065  r_type=val["Type
-000142e0: 225d 290a 0a20 2020 2020 2020 2072 6574  "])..        ret
-000142f0: 7572 6e20 5472 7565 0a0a 2020 2020 4070  urn True..    @p
-00014300: 7965 6462 5f66 756e 6374 696f 6e5f 6861  yedb_function_ha
-00014310: 6e64 6c65 7228 290a 2020 2020 6465 6620  ndler().    def 
-00014320: 5f67 6574 2873 656c 6629 3a0a 2020 2020  _get(self):.    
-00014330: 2020 2020 2222 2247 6574 2073 7461 636b      """Get stack
-00014340: 7570 2069 6e66 6f72 6d61 7469 6f6e 2066  up information f
-00014350: 726f 6d20 6c61 796f 7574 2e0a 0a20 2020  rom layout...   
-00014360: 2020 2020 2052 6574 7572 6e73 3a0a 2020       Returns:.  
-00014370: 2020 2020 2020 7475 706c 653a 2028 6469        tuple: (di
-00014380: 6374 2c20 6469 6374 2c20 6469 6374 290a  ct, dict, dict).
-00014390: 2020 2020 2020 2020 2020 2020 6c61 7965              laye
-000143a0: 7273 2c20 6d61 7465 7269 616c 732c 2072  rs, materials, r
-000143b0: 6f75 6768 6e65 7373 5f6d 6f64 656c 730a  oughness_models.
-000143c0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-000143d0: 2020 2020 6c61 7965 7273 203d 204f 7264      layers = Ord
-000143e0: 6572 6564 4469 6374 2829 0a20 2020 2020  eredDict().     
-000143f0: 2020 2072 6f75 6768 6e65 7373 5f6d 6f64     roughness_mod
-00014400: 656c 7320 3d20 4f72 6465 7265 6444 6963  els = OrderedDic
-00014410: 7428 290a 2020 2020 2020 2020 666f 7220  t().        for 
-00014420: 6e61 6d65 2c20 7661 6c20 696e 2073 656c  name, val in sel
-00014430: 662e 7374 6163 6b75 705f 6c61 7965 7273  f.stackup_layers
-00014440: 2e69 7465 6d73 2829 3a0a 2020 2020 2020  .items():.      
-00014450: 2020 2020 2020 6c61 7965 7220 3d20 6469        layer = di
-00014460: 6374 2829 0a20 2020 2020 2020 2020 2020  ct().           
-00014470: 206c 6179 6572 5b22 4d61 7465 7269 616c   layer["Material
-00014480: 225d 203d 2076 616c 2e6d 6174 6572 6961  "] = val.materia
-00014490: 6c0a 2020 2020 2020 2020 2020 2020 6c61  l.            la
-000144a0: 7965 725b 224e 616d 6522 5d20 3d20 7661  yer["Name"] = va
-000144b0: 6c2e 6e61 6d65 0a20 2020 2020 2020 2020  l.name.         
-000144c0: 2020 206c 6179 6572 5b22 5468 6963 6b6e     layer["Thickn
-000144d0: 6573 7322 5d20 3d20 7661 6c2e 7468 6963  ess"] = val.thic
-000144e0: 6b6e 6573 730a 2020 2020 2020 2020 2020  kness.          
-000144f0: 2020 6c61 7965 725b 2254 7970 6522 5d20    layer["Type"] 
-00014500: 3d20 7661 6c2e 7479 7065 0a20 2020 2020  = val.type.     
-00014510: 2020 2020 2020 2069 6620 6e6f 7420 7661         if not va
-00014520: 6c2e 7479 7065 203d 3d20 2264 6965 6c65  l.type == "diele
-00014530: 6374 7269 6322 3a0a 2020 2020 2020 2020  ctric":.        
-00014540: 2020 2020 2020 2020 6c61 7965 725b 2246          layer["F
-00014550: 696c 6c4d 6174 6572 6961 6c22 5d20 3d20  illMaterial"] = 
-00014560: 7661 6c2e 6469 656c 6563 7472 6963 5f66  val.dielectric_f
-00014570: 696c 6c0a 2020 2020 2020 2020 2020 2020  ill.            
-00014580: 2020 2020 6c61 7965 725b 2245 7463 6846      layer["EtchF
-00014590: 6163 746f 7222 5d20 3d20 7661 6c2e 6574  actor"] = val.et
-000145a0: 6368 5f66 6163 746f 720a 2020 2020 2020  ch_factor.      
-000145b0: 2020 2020 2020 6c61 7965 7273 5b6e 616d        layers[nam
-000145c0: 655d 203d 206c 6179 6572 0a0a 2020 2020  e] = layer..    
-000145d0: 2020 2020 2020 2020 6966 2076 616c 2e72          if val.r
-000145e0: 6f75 6768 6e65 7373 5f65 6e61 626c 6564  oughness_enabled
-000145f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00014600: 2020 726f 7567 686e 6573 735f 6d6f 6465    roughness_mode
-00014610: 6c73 5b6e 616d 655d 203d 207b 7d0a 2020  ls[name] = {}.  
-00014620: 2020 2020 2020 2020 2020 2020 2020 6d6f                mo
-00014630: 6465 6c20 3d20 7661 6c2e 6765 745f 726f  del = val.get_ro
-00014640: 7567 686e 6573 735f 6d6f 6465 6c28 2274  ughness_model("t
-00014650: 6f70 2229 0a20 2020 2020 2020 2020 2020  op").           
-00014660: 2020 2020 2069 6620 6d6f 6465 6c2e 546f       if model.To
-00014670: 5374 7269 6e67 2829 2e65 6e64 7377 6974  String().endswit
-00014680: 6828 2247 726f 6973 7352 6f75 6768 6e65  h("GroissRoughne
-00014690: 7373 4d6f 6465 6c22 293a 0a20 2020 2020  ssModel"):.     
-000146a0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-000146b0: 6f75 6768 6e65 7373 5f6d 6f64 656c 735b  oughness_models[
-000146c0: 6e61 6d65 5d5b 2247 726f 6973 7353 7572  name]["GroissSur
-000146d0: 6661 6365 526f 7567 686e 6573 7322 5d20  faceRoughness"] 
-000146e0: 3d20 7b22 526f 7567 686e 6573 7322 3a20  = {"Roughness": 
-000146f0: 6d6f 6465 6c2e 6765 745f 526f 7567 686e  model.get_Roughn
-00014700: 6573 7328 292e 546f 446f 7562 6c65 2829  ess().ToDouble()
-00014710: 7d0a 2020 2020 2020 2020 2020 2020 2020  }.              
-00014720: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00014730: 2020 2020 2020 2020 2020 2020 726f 7567              roug
-00014740: 686e 6573 735f 6d6f 6465 6c73 5b6e 616d  hness_models[nam
-00014750: 655d 5b22 4875 7261 7953 7572 6661 6365  e]["HuraySurface
-00014760: 526f 7567 686e 6573 7322 5d20 3d20 7b0a  Roughness"] = {.
-00014770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014780: 2020 2020 2020 2020 2248 616c 6c48 7572          "HallHur
-00014790: 6179 5375 7266 6163 6552 6174 696f 223a  aySurfaceRatio":
-000147a0: 206d 6f64 656c 2e67 6574 5f4e 6f64 756c   model.get_Nodul
-000147b0: 6552 6164 6975 7328 292e 546f 446f 7562  eRadius().ToDoub
-000147c0: 6c65 2829 2c0a 2020 2020 2020 2020 2020  le(),.          
-000147d0: 2020 2020 2020 2020 2020 2020 2020 224e                "N
-000147e0: 6f64 756c 6552 6164 6975 7322 3a20 6d6f  oduleRadius": mo
-000147f0: 6465 6c2e 6765 745f 5375 7266 6163 6552  del.get_SurfaceR
-00014800: 6174 696f 2829 2e54 6f44 6f75 626c 6528  atio().ToDouble(
-00014810: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
-00014820: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-00014830: 2020 2020 2020 2020 206d 6f64 656c 203d           model =
-00014840: 2076 616c 2e67 6574 5f72 6f75 6768 6e65   val.get_roughne
-00014850: 7373 5f6d 6f64 656c 2822 626f 7474 6f6d  ss_model("bottom
-00014860: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
-00014870: 2020 2069 6620 6d6f 6465 6c2e 546f 5374     if model.ToSt
-00014880: 7269 6e67 2829 2e65 6e64 7377 6974 6828  ring().endswith(
-00014890: 2247 726f 6973 7352 6f75 6768 6e65 7373  "GroissRoughness
-000148a0: 4d6f 6465 6c22 293a 0a20 2020 2020 2020  Model"):.       
-000148b0: 2020 2020 2020 2020 2020 2020 2072 6f75               rou
-000148c0: 6768 6e65 7373 5f6d 6f64 656c 735b 6e61  ghness_models[na
-000148d0: 6d65 5d5b 2247 726f 6973 7342 6f74 746f  me]["GroissBotto
-000148e0: 6d53 7572 6661 6365 526f 7567 686e 6573  mSurfaceRoughnes
-000148f0: 7322 5d20 3d20 7b0a 2020 2020 2020 2020  s"] = {.        
-00014900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014910: 2252 6f75 6768 6e65 7373 223a 206d 6f64  "Roughness": mod
-00014920: 656c 2e67 6574 5f52 6f75 6768 6e65 7373  el.get_Roughness
-00014930: 2829 2e54 6f44 6f75 626c 6528 290a 2020  ().ToDouble().  
-00014940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014950: 2020 7d0a 2020 2020 2020 2020 2020 2020    }.            
-00014960: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00014970: 2020 2020 2020 2020 2020 2020 2020 726f                ro
-00014980: 7567 686e 6573 735f 6d6f 6465 6c73 5b6e  ughness_models[n
-00014990: 616d 655d 5b22 4875 7261 7942 6f74 746f  ame]["HurayBotto
-000149a0: 6d53 7572 6661 6365 526f 7567 686e 6573  mSurfaceRoughnes
-000149b0: 7322 5d20 3d20 7b0a 2020 2020 2020 2020  s"] = {.        
+00013db0: 2020 6170 706c 795f 6f6e 5f73 7572 6661    apply_on_surfa
+00013dc0: 6365 3d6f 6e5f 7375 7266 6163 652c 0a20  ce=on_surface,. 
+00013dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013de0: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
+00013df0: 2020 2020 2061 7474 725f 6e61 6d65 203d       attr_name =
+00013e00: 2022 4875 7261 7953 6964 6553 7572 6661   "HuraySideSurfa
+00013e10: 6365 526f 7567 686e 6573 7322 0a20 2020  ceRoughness".   
+00013e20: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00013e30: 6174 7472 5f6e 616d 6520 696e 2061 7474  attr_name in att
+00013e40: 723a 0a20 2020 2020 2020 2020 2020 2020  r:.             
+00013e50: 2020 2020 2020 206f 6e5f 7375 7266 6163         on_surfac
+00013e60: 6520 3d20 2273 6964 6522 0a20 2020 2020  e = "side".     
+00013e70: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+00013e80: 6179 6572 2e61 7373 6967 6e5f 726f 7567  ayer.assign_roug
+00013e90: 686e 6573 735f 6d6f 6465 6c28 0a20 2020  hness_model(.   
+00013ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013eb0: 2020 2020 2022 6875 7261 7922 2c0a 2020       "huray",.  
+00013ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013ed0: 2020 2020 2020 6174 7472 5b61 7474 725f        attr[attr_
+00013ee0: 6e61 6d65 5d5b 224e 6f64 756c 6552 6164  name]["NoduleRad
+00013ef0: 6975 7322 5d2c 0a20 2020 2020 2020 2020  ius"],.         
+00013f00: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+00013f10: 7474 725b 6174 7472 5f6e 616d 655d 5b22  ttr[attr_name]["
+00013f20: 4861 6c6c 4875 7261 7953 7572 6661 6365  HallHuraySurface
+00013f30: 5261 7469 6f22 5d2c 0a20 2020 2020 2020  Ratio"],.       
+00013f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013f50: 2061 7070 6c79 5f6f 6e5f 7375 7266 6163   apply_on_surfac
+00013f60: 653d 6f6e 5f73 7572 6661 6365 2c0a 2020  e=on_surface,.  
+00013f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013f80: 2020 290a 0a20 2020 2020 2020 2020 2020    )..           
+00013f90: 2020 2020 2061 7474 725f 6e61 6d65 203d       attr_name =
+00013fa0: 2022 4772 6f69 7373 5375 7266 6163 6552   "GroissSurfaceR
+00013fb0: 6f75 6768 6e65 7373 220a 2020 2020 2020  oughness".      
+00013fc0: 2020 2020 2020 2020 2020 6966 2061 7474            if att
+00013fd0: 725f 6e61 6d65 2069 6e20 6174 7472 3a0a  r_name in attr:.
+00013fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013ff0: 2020 2020 6f6e 5f73 7572 6661 6365 203d      on_surface =
+00014000: 2022 746f 7022 0a20 2020 2020 2020 2020   "top".         
+00014010: 2020 2020 2020 2020 2020 206c 6179 6572             layer
+00014020: 2e61 7373 6967 6e5f 726f 7567 686e 6573  .assign_roughnes
+00014030: 735f 6d6f 6465 6c28 0a20 2020 2020 2020  s_model(.       
+00014040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014050: 2022 6772 6f69 7373 6522 2c20 6772 6f69   "groisse", groi
+00014060: 7373 655f 726f 7567 686e 6573 733d 6174  sse_roughness=at
+00014070: 7472 5b61 7474 725f 6e61 6d65 5d5b 2252  tr[attr_name]["R
+00014080: 6f75 6768 6e65 7373 225d 2c20 6170 706c  oughness"], appl
+00014090: 795f 6f6e 5f73 7572 6661 6365 3d6f 6e5f  y_on_surface=on_
+000140a0: 7375 7266 6163 650a 2020 2020 2020 2020  surface.        
+000140b0: 2020 2020 2020 2020 2020 2020 290a 0a20              ).. 
+000140c0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+000140d0: 7474 725f 6e61 6d65 203d 2022 4772 6f69  ttr_name = "Groi
+000140e0: 7373 426f 7474 6f6d 5375 7266 6163 6552  ssBottomSurfaceR
+000140f0: 6f75 6768 6e65 7373 220a 2020 2020 2020  oughness".      
+00014100: 2020 2020 2020 2020 2020 6966 2061 7474            if att
+00014110: 725f 6e61 6d65 2069 6e20 6174 7472 3a0a  r_name in attr:.
+00014120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014130: 2020 2020 6f6e 5f73 7572 6661 6365 203d      on_surface =
+00014140: 2022 626f 7474 6f6d 220a 2020 2020 2020   "bottom".      
+00014150: 2020 2020 2020 2020 2020 2020 2020 6c61                la
+00014160: 7965 722e 6173 7369 676e 5f72 6f75 6768  yer.assign_rough
+00014170: 6e65 7373 5f6d 6f64 656c 280a 2020 2020  ness_model(.    
+00014180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014190: 2020 2020 2267 726f 6973 7365 222c 2067      "groisse", g
+000141a0: 726f 6973 7365 5f72 6f75 6768 6e65 7373  roisse_roughness
+000141b0: 3d61 7474 725b 6174 7472 5f6e 616d 655d  =attr[attr_name]
+000141c0: 5b22 526f 7567 686e 6573 7322 5d2c 2061  ["Roughness"], a
+000141d0: 7070 6c79 5f6f 6e5f 7375 7266 6163 653d  pply_on_surface=
+000141e0: 6f6e 5f73 7572 6661 6365 0a20 2020 2020  on_surface.     
+000141f0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+00014200: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00014210: 2020 6174 7472 5f6e 616d 6520 3d20 2247    attr_name = "G
+00014220: 726f 6973 7353 6964 6553 7572 6661 6365  roissSideSurface
+00014230: 526f 7567 686e 6573 7322 0a20 2020 2020  Roughness".     
+00014240: 2020 2020 2020 2020 2020 2069 6620 6174             if at
+00014250: 7472 5f6e 616d 6520 696e 2061 7474 723a  tr_name in attr:
+00014260: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00014270: 2020 2020 206f 6e5f 7375 7266 6163 6520       on_surface 
+00014280: 3d20 2273 6964 6522 0a20 2020 2020 2020  = "side".       
+00014290: 2020 2020 2020 2020 2020 2020 206c 6179               lay
+000142a0: 6572 2e61 7373 6967 6e5f 726f 7567 686e  er.assign_roughn
+000142b0: 6573 735f 6d6f 6465 6c28 0a20 2020 2020  ess_model(.     
+000142c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000142d0: 2020 2022 6772 6f69 7373 6522 2c20 6772     "groisse", gr
+000142e0: 6f69 7373 655f 726f 7567 686e 6573 733d  oisse_roughness=
+000142f0: 6174 7472 5b61 7474 725f 6e61 6d65 5d5b  attr[attr_name][
+00014300: 2252 6f75 6768 6e65 7373 225d 2c20 6170  "Roughness"], ap
+00014310: 706c 795f 6f6e 5f73 7572 6661 6365 3d6f  ply_on_surface=o
+00014320: 6e5f 7375 7266 6163 650a 2020 2020 2020  n_surface.      
+00014330: 2020 2020 2020 2020 2020 2020 2020 290a                ).
+00014340: 0a20 2020 2020 2020 2069 6620 6e6f 6e5f  .        if non_
+00014350: 7374 6163 6b75 705f 6c61 7965 7273 3a0a  stackup_layers:.
+00014360: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00014370: 6e61 6d65 2c20 7661 6c20 696e 206e 6f6e  name, val in non
+00014380: 5f73 7461 636b 7570 5f6c 6179 6572 732e  _stackup_layers.
+00014390: 6974 656d 7328 293a 0a20 2020 2020 2020  items():.       
+000143a0: 2020 2020 2020 2020 2069 6620 6e61 6d65           if name
+000143b0: 2069 6e20 7365 6c66 2e6e 6f6e 5f73 7461   in self.non_sta
+000143c0: 636b 7570 5f6c 6179 6572 733a 0a20 2020  ckup_layers:.   
+000143d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000143e0: 2063 6f6e 7469 6e75 650a 2020 2020 2020   continue.      
+000143f0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00014400: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014410: 2020 2020 7365 6c66 2e61 6464 5f6c 6179      self.add_lay
+00014420: 6572 286e 616d 652c 206c 6179 6572 5f74  er(name, layer_t
+00014430: 7970 653d 7661 6c5b 2254 7970 6522 5d29  ype=val["Type"])
+00014440: 0a0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00014450: 2054 7275 650a 0a20 2020 2040 7079 6564   True..    @pyed
+00014460: 625f 6675 6e63 7469 6f6e 5f68 616e 646c  b_function_handl
+00014470: 6572 2829 0a20 2020 2064 6566 205f 6765  er().    def _ge
+00014480: 7428 7365 6c66 293a 0a20 2020 2020 2020  t(self):.       
+00014490: 2022 2222 4765 7420 7374 6163 6b75 7020   """Get stackup 
+000144a0: 696e 666f 726d 6174 696f 6e20 6672 6f6d  information from
+000144b0: 206c 6179 6f75 742e 0a0a 2020 2020 2020   layout...      
+000144c0: 2020 5265 7475 726e 733a 0a20 2020 2020    Returns:.     
+000144d0: 2020 2074 7570 6c65 3a20 2864 6963 742c     tuple: (dict,
+000144e0: 2064 6963 742c 2064 6963 7429 0a20 2020   dict, dict).   
+000144f0: 2020 2020 2020 2020 206c 6179 6572 732c           layers,
+00014500: 206d 6174 6572 6961 6c73 2c20 726f 7567   materials, roug
+00014510: 686e 6573 735f 6d6f 6465 6c73 0a20 2020  hness_models.   
+00014520: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00014530: 206c 6179 6572 7320 3d20 4f72 6465 7265   layers = Ordere
+00014540: 6444 6963 7428 290a 2020 2020 2020 2020  dDict().        
+00014550: 726f 7567 686e 6573 735f 6d6f 6465 6c73  roughness_models
+00014560: 203d 204f 7264 6572 6564 4469 6374 2829   = OrderedDict()
+00014570: 0a20 2020 2020 2020 2066 6f72 206e 616d  .        for nam
+00014580: 652c 2076 616c 2069 6e20 7365 6c66 2e73  e, val in self.s
+00014590: 7461 636b 7570 5f6c 6179 6572 732e 6974  tackup_layers.it
+000145a0: 656d 7328 293a 0a20 2020 2020 2020 2020  ems():.         
+000145b0: 2020 206c 6179 6572 203d 2064 6963 7428     layer = dict(
+000145c0: 290a 2020 2020 2020 2020 2020 2020 6c61  ).            la
+000145d0: 7965 725b 224d 6174 6572 6961 6c22 5d20  yer["Material"] 
+000145e0: 3d20 7661 6c2e 6d61 7465 7269 616c 0a20  = val.material. 
+000145f0: 2020 2020 2020 2020 2020 206c 6179 6572             layer
+00014600: 5b22 4e61 6d65 225d 203d 2076 616c 2e6e  ["Name"] = val.n
+00014610: 616d 650a 2020 2020 2020 2020 2020 2020  ame.            
+00014620: 6c61 7965 725b 2254 6869 636b 6e65 7373  layer["Thickness
+00014630: 225d 203d 2076 616c 2e74 6869 636b 6e65  "] = val.thickne
+00014640: 7373 0a20 2020 2020 2020 2020 2020 206c  ss.            l
+00014650: 6179 6572 5b22 5479 7065 225d 203d 2076  ayer["Type"] = v
+00014660: 616c 2e74 7970 650a 2020 2020 2020 2020  al.type.        
+00014670: 2020 2020 6966 206e 6f74 2076 616c 2e74      if not val.t
+00014680: 7970 6520 3d3d 2022 6469 656c 6563 7472  ype == "dielectr
+00014690: 6963 223a 0a20 2020 2020 2020 2020 2020  ic":.           
+000146a0: 2020 2020 206c 6179 6572 5b22 4669 6c6c       layer["Fill
+000146b0: 4d61 7465 7269 616c 225d 203d 2076 616c  Material"] = val
+000146c0: 2e64 6965 6c65 6374 7269 635f 6669 6c6c  .dielectric_fill
+000146d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000146e0: 206c 6179 6572 5b22 4574 6368 4661 6374   layer["EtchFact
+000146f0: 6f72 225d 203d 2076 616c 2e65 7463 685f  or"] = val.etch_
+00014700: 6661 6374 6f72 0a20 2020 2020 2020 2020  factor.         
+00014710: 2020 206c 6179 6572 735b 6e61 6d65 5d20     layers[name] 
+00014720: 3d20 6c61 7965 720a 0a20 2020 2020 2020  = layer..       
+00014730: 2020 2020 2069 6620 7661 6c2e 726f 7567       if val.roug
+00014740: 686e 6573 735f 656e 6162 6c65 643a 0a20  hness_enabled:. 
+00014750: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00014760: 6f75 6768 6e65 7373 5f6d 6f64 656c 735b  oughness_models[
+00014770: 6e61 6d65 5d20 3d20 7b7d 0a20 2020 2020  name] = {}.     
+00014780: 2020 2020 2020 2020 2020 206d 6f64 656c             model
+00014790: 203d 2076 616c 2e67 6574 5f72 6f75 6768   = val.get_rough
+000147a0: 6e65 7373 5f6d 6f64 656c 2822 746f 7022  ness_model("top"
+000147b0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000147c0: 2020 6966 206d 6f64 656c 2e54 6f53 7472    if model.ToStr
+000147d0: 696e 6728 292e 656e 6473 7769 7468 2822  ing().endswith("
+000147e0: 4772 6f69 7373 526f 7567 686e 6573 734d  GroissRoughnessM
+000147f0: 6f64 656c 2229 3a0a 2020 2020 2020 2020  odel"):.        
+00014800: 2020 2020 2020 2020 2020 2020 726f 7567              roug
+00014810: 686e 6573 735f 6d6f 6465 6c73 5b6e 616d  hness_models[nam
+00014820: 655d 5b22 4772 6f69 7373 5375 7266 6163  e]["GroissSurfac
+00014830: 6552 6f75 6768 6e65 7373 225d 203d 207b  eRoughness"] = {
+00014840: 2252 6f75 6768 6e65 7373 223a 206d 6f64  "Roughness": mod
+00014850: 656c 2e67 6574 5f52 6f75 6768 6e65 7373  el.get_Roughness
+00014860: 2829 2e54 6f44 6f75 626c 6528 297d 0a20  ().ToDouble()}. 
+00014870: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00014880: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00014890: 2020 2020 2020 2020 2072 6f75 6768 6e65           roughne
+000148a0: 7373 5f6d 6f64 656c 735b 6e61 6d65 5d5b  ss_models[name][
+000148b0: 2248 7572 6179 5375 7266 6163 6552 6f75  "HuraySurfaceRou
+000148c0: 6768 6e65 7373 225d 203d 207b 0a20 2020  ghness"] = {.   
+000148d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000148e0: 2020 2020 2022 4861 6c6c 4875 7261 7953       "HallHurayS
+000148f0: 7572 6661 6365 5261 7469 6f22 3a20 6d6f  urfaceRatio": mo
+00014900: 6465 6c2e 6765 745f 4e6f 6475 6c65 5261  del.get_NoduleRa
+00014910: 6469 7573 2829 2e54 6f44 6f75 626c 6528  dius().ToDouble(
+00014920: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
+00014930: 2020 2020 2020 2020 2020 2022 4e6f 6475             "Nodu
+00014940: 6c65 5261 6469 7573 223a 206d 6f64 656c  leRadius": model
+00014950: 2e67 6574 5f53 7572 6661 6365 5261 7469  .get_SurfaceRati
+00014960: 6f28 292e 546f 446f 7562 6c65 2829 2c0a  o().ToDouble(),.
+00014970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014980: 2020 2020 7d0a 2020 2020 2020 2020 2020      }.          
+00014990: 2020 2020 2020 6d6f 6465 6c20 3d20 7661        model = va
+000149a0: 6c2e 6765 745f 726f 7567 686e 6573 735f  l.get_roughness_
+000149b0: 6d6f 6465 6c28 2262 6f74 746f 6d22 290a  model("bottom").
 000149c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000149d0: 2248 616c 6c48 7572 6179 5375 7266 6163  "HallHuraySurfac
-000149e0: 6552 6174 696f 223a 206d 6f64 656c 2e67  eRatio": model.g
-000149f0: 6574 5f4e 6f64 756c 6552 6164 6975 7328  et_NoduleRadius(
-00014a00: 292e 546f 446f 7562 6c65 2829 2c0a 2020  ).ToDouble(),.  
-00014a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014a20: 2020 2020 2020 224e 6f64 756c 6552 6164        "NoduleRad
-00014a30: 6975 7322 3a20 6d6f 6465 6c2e 6765 745f  ius": model.get_
-00014a40: 5375 7266 6163 6552 6174 696f 2829 2e54  SurfaceRatio().T
-00014a50: 6f44 6f75 626c 6528 292c 0a20 2020 2020  oDouble(),.     
-00014a60: 2020 2020 2020 2020 2020 2020 2020 207d                 }
-00014a70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00014a80: 206d 6f64 656c 203d 2076 616c 2e67 6574   model = val.get
-00014a90: 5f72 6f75 6768 6e65 7373 5f6d 6f64 656c  _roughness_model
-00014aa0: 2822 7369 6465 2229 0a20 2020 2020 2020  ("side").       
-00014ab0: 2020 2020 2020 2020 2069 6620 6d6f 6465           if mode
-00014ac0: 6c2e 546f 5374 7269 6e67 2829 2e65 6e64  l.ToString().end
-00014ad0: 7377 6974 6828 2247 726f 6973 7352 6f75  swith("GroissRou
-00014ae0: 6768 6e65 7373 4d6f 6465 6c22 293a 0a20  ghnessModel"):. 
-00014af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014b00: 2020 2072 6f75 6768 6e65 7373 5f6d 6f64     roughness_mod
-00014b10: 656c 735b 6e61 6d65 5d5b 2247 726f 6973  els[name]["Grois
-00014b20: 7353 6964 6553 7572 6661 6365 526f 7567  sSideSurfaceRoug
-00014b30: 686e 6573 7322 5d20 3d20 7b0a 2020 2020  hness"] = {.    
-00014b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014b50: 2020 2020 2252 6f75 6768 6e65 7373 223a      "Roughness":
-00014b60: 206d 6f64 656c 2e67 6574 5f52 6f75 6768   model.get_Rough
-00014b70: 6e65 7373 2829 2e54 6f44 6f75 626c 6528  ness().ToDouble(
-00014b80: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00014b90: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-00014ba0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00014bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014bc0: 2020 726f 7567 686e 6573 735f 6d6f 6465    roughness_mode
-00014bd0: 6c73 5b6e 616d 655d 5b22 4875 7261 7953  ls[name]["HurayS
-00014be0: 6964 6553 7572 6661 6365 526f 7567 686e  ideSurfaceRoughn
-00014bf0: 6573 7322 5d20 3d20 7b0a 2020 2020 2020  ess"] = {.      
-00014c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014c10: 2020 2248 616c 6c48 7572 6179 5375 7266    "HallHuraySurf
-00014c20: 6163 6552 6174 696f 223a 206d 6f64 656c  aceRatio": model
-00014c30: 2e67 6574 5f4e 6f64 756c 6552 6164 6975  .get_NoduleRadiu
-00014c40: 7328 292e 546f 446f 7562 6c65 2829 2c0a  s().ToDouble(),.
+000149d0: 6966 206d 6f64 656c 2e54 6f53 7472 696e  if model.ToStrin
+000149e0: 6728 292e 656e 6473 7769 7468 2822 4772  g().endswith("Gr
+000149f0: 6f69 7373 526f 7567 686e 6573 734d 6f64  oissRoughnessMod
+00014a00: 656c 2229 3a0a 2020 2020 2020 2020 2020  el"):.          
+00014a10: 2020 2020 2020 2020 2020 726f 7567 686e            roughn
+00014a20: 6573 735f 6d6f 6465 6c73 5b6e 616d 655d  ess_models[name]
+00014a30: 5b22 4772 6f69 7373 426f 7474 6f6d 5375  ["GroissBottomSu
+00014a40: 7266 6163 6552 6f75 6768 6e65 7373 225d  rfaceRoughness"]
+00014a50: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
+00014a60: 2020 2020 2020 2020 2020 2020 2022 526f               "Ro
+00014a70: 7567 686e 6573 7322 3a20 6d6f 6465 6c2e  ughness": model.
+00014a80: 6765 745f 526f 7567 686e 6573 7328 292e  get_Roughness().
+00014a90: 546f 446f 7562 6c65 2829 0a20 2020 2020  ToDouble().     
+00014aa0: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+00014ab0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00014ac0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00014ad0: 2020 2020 2020 2020 2020 2072 6f75 6768             rough
+00014ae0: 6e65 7373 5f6d 6f64 656c 735b 6e61 6d65  ness_models[name
+00014af0: 5d5b 2248 7572 6179 426f 7474 6f6d 5375  ]["HurayBottomSu
+00014b00: 7266 6163 6552 6f75 6768 6e65 7373 225d  rfaceRoughness"]
+00014b10: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
+00014b20: 2020 2020 2020 2020 2020 2020 2022 4861               "Ha
+00014b30: 6c6c 4875 7261 7953 7572 6661 6365 5261  llHuraySurfaceRa
+00014b40: 7469 6f22 3a20 6d6f 6465 6c2e 6765 745f  tio": model.get_
+00014b50: 4e6f 6475 6c65 5261 6469 7573 2829 2e54  NoduleRadius().T
+00014b60: 6f44 6f75 626c 6528 292c 0a20 2020 2020  oDouble(),.     
+00014b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014b80: 2020 2022 4e6f 6475 6c65 5261 6469 7573     "NoduleRadius
+00014b90: 223a 206d 6f64 656c 2e67 6574 5f53 7572  ": model.get_Sur
+00014ba0: 6661 6365 5261 7469 6f28 292e 546f 446f  faceRatio().ToDo
+00014bb0: 7562 6c65 2829 2c0a 2020 2020 2020 2020  uble(),.        
+00014bc0: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
+00014bd0: 2020 2020 2020 2020 2020 2020 2020 6d6f                mo
+00014be0: 6465 6c20 3d20 7661 6c2e 6765 745f 726f  del = val.get_ro
+00014bf0: 7567 686e 6573 735f 6d6f 6465 6c28 2273  ughness_model("s
+00014c00: 6964 6522 290a 2020 2020 2020 2020 2020  ide").          
+00014c10: 2020 2020 2020 6966 206d 6f64 656c 2e54        if model.T
+00014c20: 6f53 7472 696e 6728 292e 656e 6473 7769  oString().endswi
+00014c30: 7468 2822 4772 6f69 7373 526f 7567 686e  th("GroissRoughn
+00014c40: 6573 734d 6f64 656c 2229 3a0a 2020 2020  essModel"):.    
 00014c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014c60: 2020 2020 2020 2020 224e 6f64 756c 6552          "NoduleR
-00014c70: 6164 6975 7322 3a20 6d6f 6465 6c2e 6765  adius": model.ge
-00014c80: 745f 5375 7266 6163 6552 6174 696f 2829  t_SurfaceRatio()
-00014c90: 2e54 6f44 6f75 626c 6528 292c 0a20 2020  .ToDouble(),.   
+00014c60: 726f 7567 686e 6573 735f 6d6f 6465 6c73  roughness_models
+00014c70: 5b6e 616d 655d 5b22 4772 6f69 7373 5369  [name]["GroissSi
+00014c80: 6465 5375 7266 6163 6552 6f75 6768 6e65  deSurfaceRoughne
+00014c90: 7373 225d 203d 207b 0a20 2020 2020 2020  ss"] = {.       
 00014ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014cb0: 207d 0a0a 2020 2020 2020 2020 6e6f 6e5f   }..        non_
-00014cc0: 7374 6163 6b75 705f 6c61 7965 7273 203d  stackup_layers =
-00014cd0: 204f 7264 6572 6564 4469 6374 2829 0a20   OrderedDict(). 
-00014ce0: 2020 2020 2020 2066 6f72 206e 616d 652c         for name,
-00014cf0: 2076 616c 2069 6e20 7365 6c66 2e6e 6f6e   val in self.non
-00014d00: 5f73 7461 636b 7570 5f6c 6179 6572 732e  _stackup_layers.
-00014d10: 6974 656d 7328 293a 0a20 2020 2020 2020  items():.       
-00014d20: 2020 2020 206c 6179 6572 203d 2064 6963       layer = dic
-00014d30: 7428 290a 2020 2020 2020 2020 2020 2020  t().            
-00014d40: 6c61 7965 725b 224e 616d 6522 5d20 3d20  layer["Name"] = 
-00014d50: 7661 6c2e 6e61 6d65 0a20 2020 2020 2020  val.name.       
-00014d60: 2020 2020 206c 6179 6572 5b22 5479 7065       layer["Type
-00014d70: 225d 203d 2076 616c 2e74 7970 650a 2020  "] = val.type.  
-00014d80: 2020 2020 2020 2020 2020 6e6f 6e5f 7374            non_st
-00014d90: 6163 6b75 705f 6c61 7965 7273 5b6e 616d  ackup_layers[nam
-00014da0: 655d 203d 206c 6179 6572 0a0a 2020 2020  e] = layer..    
-00014db0: 2020 2020 6d61 7465 7269 616c 7320 3d20      materials = 
-00014dc0: 7b7d 0a20 2020 2020 2020 2066 6f72 206e  {}.        for n
-00014dd0: 616d 652c 2076 616c 2069 6e20 7365 6c66  ame, val in self
-00014de0: 2e5f 7065 6462 2e6d 6174 6572 6961 6c73  ._pedb.materials
-00014df0: 2e6d 6174 6572 6961 6c73 2e69 7465 6d73  .materials.items
-00014e00: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
-00014e10: 6d61 7465 7269 616c 203d 207b 7d0a 2020  material = {}.  
-00014e20: 2020 2020 2020 2020 2020 6966 2076 616c            if val
-00014e30: 2e63 6f6e 6475 6374 6976 6974 793a 0a20  .conductivity:. 
-00014e40: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00014e50: 6620 7661 6c2e 636f 6e64 7563 7469 7669  f val.conductivi
-00014e60: 7479 203e 2034 6537 3a0a 2020 2020 2020  ty > 4e7:.      
-00014e70: 2020 2020 2020 2020 2020 2020 2020 6d61                ma
-00014e80: 7465 7269 616c 5b22 436f 6e64 7563 7469  terial["Conducti
-00014e90: 7669 7479 225d 203d 2076 616c 2e63 6f6e  vity"] = val.con
-00014ea0: 6475 6374 6976 6974 790a 2020 2020 2020  ductivity.      
-00014eb0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00014ec0: 2020 2020 2020 2020 2020 2020 6d61 7465              mate
-00014ed0: 7269 616c 5b22 5065 726d 6974 7469 7669  rial["Permittivi
-00014ee0: 7479 225d 203d 2076 616c 2e70 6572 6d69  ty"] = val.permi
-00014ef0: 7474 6976 6974 790a 2020 2020 2020 2020  ttivity.        
-00014f00: 2020 2020 2020 2020 6d61 7465 7269 616c          material
-00014f10: 5b22 4469 656c 6563 7472 6963 4c6f 7373  ["DielectricLoss
-00014f20: 5461 6e67 656e 7422 5d20 3d20 7661 6c2e  Tangent"] = val.
-00014f30: 6469 656c 6563 7472 6963 5f6c 6f73 735f  dielectric_loss_
-00014f40: 7461 6e67 656e 740a 2020 2020 2020 2020  tangent.        
-00014f50: 2020 2020 6d61 7465 7269 616c 735b 6e61      materials[na
-00014f60: 6d65 5d20 3d20 6d61 7465 7269 616c 0a0a  me] = material..
-00014f70: 2020 2020 2020 2020 7265 7475 726e 206c          return l
-00014f80: 6179 6572 732c 206d 6174 6572 6961 6c73  ayers, materials
-00014f90: 2c20 726f 7567 686e 6573 735f 6d6f 6465  , roughness_mode
-00014fa0: 6c73 2c20 6e6f 6e5f 7374 6163 6b75 705f  ls, non_stackup_
-00014fb0: 6c61 7965 7273 0a0a 2020 2020 4070 7965  layers..    @pye
-00014fc0: 6462 5f66 756e 6374 696f 6e5f 6861 6e64  db_function_hand
-00014fd0: 6c65 7228 290a 2020 2020 6465 6620 5f61  ler().    def _a
-00014fe0: 6464 5f6d 6174 6572 6961 6c73 5f66 726f  dd_materials_fro
-00014ff0: 6d5f 6469 6374 696f 6e61 7279 2873 656c  m_dictionary(sel
-00015000: 662c 206d 6174 6572 6961 6c5f 6469 6374  f, material_dict
-00015010: 293a 0a20 2020 2020 2020 206d 6174 5f6b  ):.        mat_k
-00015020: 6579 7320 3d20 5b69 2e6c 6f77 6572 2829  eys = [i.lower()
-00015030: 2066 6f72 2069 2069 6e20 7365 6c66 2e5f   for i in self._
-00015040: 7065 6462 2e6d 6174 6572 6961 6c73 2e6d  pedb.materials.m
-00015050: 6174 6572 6961 6c73 2e6b 6579 7328 295d  aterials.keys()]
-00015060: 0a20 2020 2020 2020 206d 6174 5f6b 6579  .        mat_key
-00015070: 735f 6361 7365 203d 205b 6920 666f 7220  s_case = [i for 
-00015080: 6920 696e 2073 656c 662e 5f70 6564 622e  i in self._pedb.
-00015090: 6d61 7465 7269 616c 732e 6d61 7465 7269  materials.materi
-000150a0: 616c 732e 6b65 7973 2829 5d0a 2020 2020  als.keys()].    
-000150b0: 2020 2020 666f 7220 6e61 6d65 2c20 6174      for name, at
-000150c0: 7472 2069 6e20 6d61 7465 7269 616c 5f64  tr in material_d
-000150d0: 6963 742e 6974 656d 7328 293a 0a20 2020  ict.items():.   
-000150e0: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-000150f0: 6e61 6d65 2e6c 6f77 6572 2829 2069 6e20  name.lower() in 
-00015100: 6d61 745f 6b65 7973 3a0a 2020 2020 2020  mat_keys:.      
-00015110: 2020 2020 2020 2020 2020 6966 2022 436f            if "Co
-00015120: 6e64 7563 7469 7669 7479 2220 696e 2061  nductivity" in a
-00015130: 7474 723a 0a20 2020 2020 2020 2020 2020  ttr:.           
-00015140: 2020 2020 2020 2020 2073 656c 662e 5f70           self._p
-00015150: 6564 622e 6d61 7465 7269 616c 732e 6164  edb.materials.ad
-00015160: 645f 636f 6e64 7563 746f 725f 6d61 7465  d_conductor_mate
-00015170: 7269 616c 286e 616d 652c 2061 7474 725b  rial(name, attr[
-00015180: 2243 6f6e 6475 6374 6976 6974 7922 5d29  "Conductivity"])
-00015190: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000151a0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-000151b0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-000151c0: 5f70 6564 622e 6d61 7465 7269 616c 732e  _pedb.materials.
-000151d0: 6164 645f 6469 656c 6563 7472 6963 5f6d  add_dielectric_m
-000151e0: 6174 6572 6961 6c28 0a20 2020 2020 2020  aterial(.       
-000151f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015200: 206e 616d 652c 0a20 2020 2020 2020 2020   name,.         
-00015210: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-00015220: 7474 725b 2250 6572 6d69 7474 6976 6974  ttr["Permittivit
-00015230: 7922 5d2c 0a20 2020 2020 2020 2020 2020  y"],.           
-00015240: 2020 2020 2020 2020 2020 2020 2061 7474               att
-00015250: 725b 2244 6965 6c65 6374 7269 634c 6f73  r["DielectricLos
-00015260: 7354 616e 6765 6e74 225d 2c0a 2020 2020  sTangent"],.    
-00015270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015280: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
-00015290: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-000152a0: 2020 2020 6c6f 6361 6c5f 6d61 7465 7269      local_materi
-000152b0: 616c 203d 2073 656c 662e 5f70 6564 622e  al = self._pedb.
-000152c0: 6d61 7465 7269 616c 735b 6d61 745f 6b65  materials[mat_ke
-000152d0: 7973 5f63 6173 655b 6d61 745f 6b65 7973  ys_case[mat_keys
-000152e0: 2e69 6e64 6578 286e 616d 652e 6c6f 7765  .index(name.lowe
-000152f0: 7228 2929 5d5d 0a20 2020 2020 2020 2020  r())]].         
-00015300: 2020 2020 2020 2069 6620 2243 6f6e 6475         if "Condu
-00015310: 6374 6976 6974 7922 2069 6e20 6174 7472  ctivity" in attr
-00015320: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00015330: 2020 2020 2020 6c6f 6361 6c5f 6d61 7465        local_mate
-00015340: 7269 616c 2e63 6f6e 6475 6374 6976 6974  rial.conductivit
-00015350: 7920 3d20 6174 7472 5b22 436f 6e64 7563  y = attr["Conduc
-00015360: 7469 7669 7479 225d 0a20 2020 2020 2020  tivity"].       
-00015370: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-00015380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015390: 2020 206c 6f63 616c 5f6d 6174 6572 6961     local_materia
-000153a0: 6c2e 7065 726d 6974 7469 7669 7479 203d  l.permittivity =
-000153b0: 2061 7474 725b 2250 6572 6d69 7474 6976   attr["Permittiv
-000153c0: 6974 7922 5d0a 2020 2020 2020 2020 2020  ity"].          
-000153d0: 2020 2020 2020 2020 2020 6c6f 6361 6c5f            local_
-000153e0: 6d61 7465 7269 616c 2e6c 6f73 735f 7461  material.loss_ta
-000153f0: 6e67 6574 203d 2061 7474 725b 2244 6965  nget = attr["Die
-00015400: 6c65 6374 7269 634c 6f73 7354 616e 6765  lectricLossTange
-00015410: 6e74 225d 0a20 2020 2020 2020 2072 6574  nt"].        ret
-00015420: 7572 6e20 5472 7565 0a0a 2020 2020 4070  urn True..    @p
-00015430: 7965 6462 5f66 756e 6374 696f 6e5f 6861  yedb_function_ha
-00015440: 6e64 6c65 7228 290a 2020 2020 6465 6620  ndler().    def 
-00015450: 5f69 6d70 6f72 745f 786d 6c28 7365 6c66  _import_xml(self
-00015460: 2c20 6669 6c65 5f70 6174 682c 2072 656e  , file_path, ren
-00015470: 616d 653d 4661 6c73 6529 3a0a 2020 2020  ame=False):.    
-00015480: 2020 2020 2222 2252 6561 6420 6578 7465      """Read exte
-00015490: 726e 616c 2078 6d6c 2066 696c 6520 616e  rnal xml file an
-000154a0: 6420 636f 6e76 6572 7420 696e 746f 206a  d convert into j
-000154b0: 736f 6e20 6669 6c65 2e0a 2020 2020 2020  son file..      
-000154c0: 2020 596f 7520 6361 6e20 7573 6520 786d    You can use xm
-000154d0: 6c20 6669 6c65 2074 6f20 696d 706f 7274  l file to import
-000154e0: 206c 6179 6572 2073 7461 636b 7570 2062   layer stackup b
-000154f0: 7574 2075 7369 6e67 206a 736f 6e20 6669  ut using json fi
-00015500: 6c65 2069 7320 7265 636f 6d6d 656e 6465  le is recommende
-00015510: 642e 0a20 2020 2020 2020 2073 6565 203a  d..        see :
-00015520: 636c 6173 733a 6070 7965 6462 2e64 6f74  class:`pyedb.dot
-00015530: 6e65 742e 6564 625f 636f 7265 2e65 6462  net.edb_core.edb
-00015540: 5f64 6174 612e 7369 6d75 6c61 7469 6f6e  _data.simulation
-00015550: 5f63 6f6e 6669 6775 7261 7469 6f6e 2e53  _configuration.S
-00015560: 696d 756c 6174 696f 6e43 6f6e 6669 6775  imulationConfigu
-00015570: 7261 7469 6f6e c2b4 2063 6c61 7373 2074  ration.. class t
-00015580: 6f0a 2020 2020 2020 2020 6765 6e65 7261  o.        genera
-00015590: 7465 2066 696c 6573 602e 0a0a 2020 2020  te files`...    
-000155a0: 2020 2020 5061 7261 6d65 7465 7273 0a20      Parameters. 
-000155b0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
-000155c0: 2d0a 2020 2020 2020 2020 6669 6c65 5f70  -.        file_p
-000155d0: 6174 683a 2073 7472 0a20 2020 2020 2020  ath: str.       
-000155e0: 2020 2020 2050 6174 6820 746f 2065 7874       Path to ext
-000155f0: 6572 6e61 6c20 584d 4c20 6669 6c65 2e0a  ernal XML file..
-00015600: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
-00015610: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-00015620: 0a20 2020 2020 2020 2062 6f6f 6c0a 2020  .        bool.  
-00015630: 2020 2020 2020 2020 2020 6060 5472 7565            ``True
-00015640: 6060 2077 6865 6e20 7375 6363 6573 7366  `` when successf
-00015650: 756c 2c20 6060 4661 6c73 6560 6020 7768  ul, ``False`` wh
-00015660: 656e 2066 6169 6c65 642e 0a20 2020 2020  en failed..     
-00015670: 2020 2022 2222 0a20 2020 2020 2020 2074     """.        t
-00015680: 7265 6520 3d20 4554 2e70 6172 7365 2866  ree = ET.parse(f
-00015690: 696c 655f 7061 7468 290a 2020 2020 2020  ile_path).      
-000156a0: 2020 726f 6f74 203d 2074 7265 652e 6765    root = tree.ge
-000156b0: 7472 6f6f 7428 290a 2020 2020 2020 2020  troot().        
-000156c0: 7374 6163 6b75 7020 3d20 726f 6f74 2e66  stackup = root.f
-000156d0: 696e 6428 2253 7461 636b 7570 2229 0a20  ind("Stackup"). 
-000156e0: 2020 2020 2020 2073 7461 636b 7570 5f64         stackup_d
-000156f0: 6963 7420 3d20 7b7d 0a20 2020 2020 2020  ict = {}.       
-00015700: 2069 6620 7374 6163 6b75 702e 6669 6e64   if stackup.find
-00015710: 2822 4d61 7465 7269 616c 7322 293a 0a20  ("Materials"):. 
-00015720: 2020 2020 2020 2020 2020 2073 7461 636b             stack
-00015730: 7570 5f64 6963 745b 226d 6174 6572 6961  up_dict["materia
-00015740: 6c73 225d 203d 207b 7d0a 2020 2020 2020  ls"] = {}.      
-00015750: 2020 2020 2020 666f 7220 6d20 696e 2073        for m in s
-00015760: 7461 636b 7570 2e66 696e 6428 224d 6174  tackup.find("Mat
-00015770: 6572 6961 6c73 2229 2e66 696e 6461 6c6c  erials").findall
-00015780: 2822 4d61 7465 7269 616c 2229 3a0a 2020  ("Material"):.  
-00015790: 2020 2020 2020 2020 2020 2020 2020 6d61                ma
-000157a0: 7465 7269 616c 203d 207b 226e 616d 6522  terial = {"name"
-000157b0: 3a20 6d2e 6174 7472 6962 5b22 4e61 6d65  : m.attrib["Name
-000157c0: 225d 7d0a 2020 2020 2020 2020 2020 2020  "]}.            
-000157d0: 2020 2020 666f 7220 6920 696e 206c 6973      for i in lis
-000157e0: 7428 6d29 3a0a 2020 2020 2020 2020 2020  t(m):.          
-000157f0: 2020 2020 2020 2020 2020 6d61 7465 7269            materi
-00015800: 616c 5b69 2e74 6167 2e6c 6f77 6572 2829  al[i.tag.lower()
-00015810: 5d20 3d20 666c 6f61 7428 6c69 7374 2869  ] = float(list(i
-00015820: 295b 305d 2e74 6578 7429 0a20 2020 2020  )[0].text).     
-00015830: 2020 2020 2020 2020 2020 2069 6620 6d61             if ma
-00015840: 7465 7269 616c 3a0a 2020 2020 2020 2020  terial:.        
-00015850: 2020 2020 2020 2020 2020 2020 7374 6163              stac
-00015860: 6b75 705f 6469 6374 5b22 6d61 7465 7269  kup_dict["materi
-00015870: 616c 7322 5d5b 6d61 7465 7269 616c 5b22  als"][material["
-00015880: 6e61 6d65 225d 5d20 3d20 6d61 7465 7269  name"]] = materi
-00015890: 616c 0a20 2020 2020 2020 2073 7461 636b  al.        stack
-000158a0: 7570 5f73 6563 7469 6f6e 203d 2073 7461  up_section = sta
-000158b0: 636b 7570 2e66 696e 6428 224c 6179 6572  ckup.find("Layer
-000158c0: 7322 290a 2020 2020 2020 2020 6966 2073  s").        if s
-000158d0: 7461 636b 7570 5f73 6563 7469 6f6e 3a0a  tackup_section:.
-000158e0: 2020 2020 2020 2020 2020 2020 6c65 6e67              leng
-000158f0: 7468 5f75 6e69 7420 3d20 7374 6163 6b75  th_unit = stacku
-00015900: 705f 7365 6374 696f 6e2e 6174 7472 6962  p_section.attrib
-00015910: 5b22 4c65 6e67 7468 556e 6974 225d 0a20  ["LengthUnit"]. 
-00015920: 2020 2020 2020 2020 2020 2073 7461 636b             stack
-00015930: 7570 5f64 6963 745b 226c 6179 6572 7322  up_dict["layers"
-00015940: 5d20 3d20 7b7d 0a20 2020 2020 2020 2020  ] = {}.         
-00015950: 2020 2066 6f72 206c 2069 6e20 7374 6163     for l in stac
-00015960: 6b75 702e 6669 6e64 2822 4c61 7965 7273  kup.find("Layers
-00015970: 2229 2e66 696e 6461 6c6c 2822 4c61 7965  ").findall("Laye
-00015980: 7222 293a 0a20 2020 2020 2020 2020 2020  r"):.           
-00015990: 2020 2020 206c 6179 6572 203d 207b 226e       layer = {"n
-000159a0: 616d 6522 3a20 6c2e 6174 7472 6962 5b22  ame": l.attrib["
-000159b0: 4e61 6d65 225d 7d0a 2020 2020 2020 2020  Name"]}.        
-000159c0: 2020 2020 2020 2020 666f 7220 6b2c 2076          for k, v
-000159d0: 2069 6e20 6c2e 6174 7472 6962 2e69 7465   in l.attrib.ite
-000159e0: 6d73 2829 3a0a 2020 2020 2020 2020 2020  ms():.          
-000159f0: 2020 2020 2020 2020 2020 6966 206b 203d            if k =
-00015a00: 3d20 2243 6f6c 6f72 223a 0a20 2020 2020  = "Color":.     
-00015a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015a20: 2020 206c 6179 6572 5b6b 2e6c 6f77 6572     layer[k.lower
-00015a30: 2829 5d20 3d20 5b69 6e74 2878 202a 2032  ()] = [int(x * 2
-00015a40: 3535 2920 666f 7220 7820 696e 206c 6973  55) for x in lis
-00015a50: 7428 6d61 7470 6c6f 746c 6962 2e63 6f6c  t(matplotlib.col
-00015a60: 6f72 732e 746f 5f72 6762 2876 2929 5d0a  ors.to_rgb(v))].
-00015a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015a80: 2020 2020 656c 6966 206b 203d 3d20 2254      elif k == "T
-00015a90: 6869 636b 6e65 7373 223a 0a20 2020 2020  hickness":.     
-00015aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015ab0: 2020 206c 6179 6572 5b6b 2e6c 6f77 6572     layer[k.lower
-00015ac0: 2829 5d20 3d20 7620 2b20 6c65 6e67 7468  ()] = v + length
-00015ad0: 5f75 6e69 740a 2020 2020 2020 2020 2020  _unit.          
-00015ae0: 2020 2020 2020 2020 2020 656c 6966 2076            elif v
-00015af0: 203d 3d20 2263 6f6e 6475 6374 6f72 223a   == "conductor":
-00015b00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00015b10: 2020 2020 2020 2020 206c 6179 6572 5b6b           layer[k
-00015b20: 2e6c 6f77 6572 2829 5d20 3d20 2273 6967  .lower()] = "sig
-00015b30: 6e61 6c22 0a20 2020 2020 2020 2020 2020  nal".           
-00015b40: 2020 2020 2020 2020 2065 6c69 6620 6b20           elif k 
-00015b50: 3d3d 2022 4669 6c6c 4d61 7465 7269 616c  == "FillMaterial
-00015b60: 223a 0a20 2020 2020 2020 2020 2020 2020  ":.             
-00015b70: 2020 2020 2020 2020 2020 206c 6179 6572             layer
-00015b80: 5b22 6469 656c 6563 7472 6963 5f66 696c  ["dielectric_fil
-00015b90: 6c22 5d20 3d20 760a 2020 2020 2020 2020  l"] = v.        
-00015ba0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00015bb0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00015bc0: 2020 2020 2020 2020 2020 6c61 7965 725b            layer[
-00015bd0: 6b2e 6c6f 7765 7228 295d 203d 2076 0a20  k.lower()] = v. 
-00015be0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00015bf0: 6620 6c61 7965 723a 0a20 2020 2020 2020  f layer:.       
-00015c00: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00015c10: 6c61 7965 725b 2274 7970 6522 5d20 3d3d  layer["type"] ==
-00015c20: 2022 7369 676e 616c 2220 6f72 206c 6179   "signal" or lay
-00015c30: 6572 5b22 7479 7065 225d 203d 3d20 2264  er["type"] == "d
-00015c40: 6965 6c65 6374 7269 6322 3a0a 2020 2020  ielectric":.    
-00015c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015c60: 2020 2020 7374 6163 6b75 705f 6469 6374      stackup_dict
-00015c70: 5b22 6c61 7965 7273 225d 5b6c 6179 6572  ["layers"][layer
-00015c80: 5b22 6e61 6d65 225d 5d20 3d20 6c61 7965  ["name"]] = laye
-00015c90: 720a 2020 2020 2020 2020 7265 7475 726e  r.        return
-00015ca0: 2073 656c 662e 5f69 6d70 6f72 745f 6469   self._import_di
-00015cb0: 6374 2873 7461 636b 7570 5f64 6963 742c  ct(stackup_dict,
-00015cc0: 2072 656e 616d 653d 7265 6e61 6d65 290a   rename=rename).
-00015cd0: 0a20 2020 2040 7079 6564 625f 6675 6e63  .    @pyedb_func
-00015ce0: 7469 6f6e 5f68 616e 646c 6572 2829 0a20  tion_handler(). 
-00015cf0: 2020 2064 6566 205f 6578 706f 7274 5f78     def _export_x
-00015d00: 6d6c 2873 656c 662c 2066 696c 655f 7061  ml(self, file_pa
-00015d10: 7468 293a 0a20 2020 2020 2020 2022 2222  th):.        """
-00015d20: 4578 706f 7274 2073 7461 636b 7570 2069  Export stackup i
-00015d30: 6e66 6f72 6d61 7469 6f6e 2074 6f20 616e  nformation to an
-00015d40: 2065 7874 6572 6e61 6c20 584d 4c66 696c   external XMLfil
-00015d50: 652e 0a0a 2020 2020 2020 2020 5061 7261  e...        Para
-00015d60: 6d65 7465 7273 0a20 2020 2020 2020 202d  meters.        -
-00015d70: 2d2d 2d2d 2d2d 2d2d 2d0a 2020 2020 2020  ---------.      
-00015d80: 2020 6669 6c65 5f70 6174 683a 2073 7472    file_path: str
-00015d90: 0a20 2020 2020 2020 2020 2020 2050 6174  .            Pat
-00015da0: 6820 746f 2065 7874 6572 6e61 6c20 584d  h to external XM
-00015db0: 4c20 6669 6c65 2e0a 0a20 2020 2020 2020  L file...       
-00015dc0: 2052 6574 7572 6e73 0a20 2020 2020 2020   Returns.       
-00015dd0: 202d 2d2d 2d2d 2d2d 0a20 2020 2020 2020   -------.       
-00015de0: 2062 6f6f 6c0a 2020 2020 2020 2020 2020   bool.          
-00015df0: 2020 6060 5472 7565 6060 2077 6865 6e20    ``True`` when 
-00015e00: 7375 6363 6573 7366 756c 2c20 6060 4661  successful, ``Fa
-00015e10: 6c73 6560 6020 7768 656e 2066 6169 6c65  lse`` when faile
-00015e20: 642e 0a20 2020 2020 2020 2022 2222 0a20  d..        """. 
-00015e30: 2020 2020 2020 206c 6179 6572 732c 206d         layers, m
-00015e40: 6174 6572 6961 6c73 2c20 726f 7567 686e  aterials, roughn
-00015e50: 6573 732c 206e 6f6e 5f73 7461 636b 7570  ess, non_stackup
-00015e60: 5f6c 6179 6572 7320 3d20 7365 6c66 2e5f  _layers = self._
-00015e70: 6765 7428 290a 0a20 2020 2020 2020 2072  get()..        r
-00015e80: 6f6f 7420 3d20 4554 2e45 6c65 6d65 6e74  oot = ET.Element
-00015e90: 2822 7b68 7474 703a 2f2f 7777 772e 616e  ("{http://www.an
-00015ea0: 7379 732e 636f 6d2f 636f 6e74 726f 6c7d  sys.com/control}
-00015eb0: 436f 6e74 726f 6c22 2c20 6174 7472 6962  Control", attrib
-00015ec0: 3d7b 2273 6368 656d 6156 6572 7369 6f6e  ={"schemaVersion
-00015ed0: 223a 2022 312e 3022 7d29 0a0a 2020 2020  ": "1.0"})..    
-00015ee0: 2020 2020 656c 5f73 7461 636b 7570 203d      el_stackup =
-00015ef0: 2045 542e 5375 6245 6c65 6d65 6e74 2872   ET.SubElement(r
-00015f00: 6f6f 742c 2022 5374 6163 6b75 7022 2c20  oot, "Stackup", 
-00015f10: 7b22 7363 6865 6d61 5665 7273 696f 6e22  {"schemaVersion"
-00015f20: 3a20 2231 2e30 227d 290a 0a20 2020 2020  : "1.0"})..     
-00015f30: 2020 2065 6c5f 6d61 7465 7269 616c 7320     el_materials 
-00015f40: 3d20 4554 2e53 7562 456c 656d 656e 7428  = ET.SubElement(
-00015f50: 656c 5f73 7461 636b 7570 2c20 224d 6174  el_stackup, "Mat
-00015f60: 6572 6961 6c73 2229 0a20 2020 2020 2020  erials").       
-00015f70: 2066 6f72 206d 6174 2c20 7661 6c20 696e   for mat, val in
-00015f80: 206d 6174 6572 6961 6c73 2e69 7465 6d73   materials.items
-00015f90: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
-00015fa0: 6d61 7465 7269 616c 203d 2045 542e 5375  material = ET.Su
-00015fb0: 6245 6c65 6d65 6e74 2865 6c5f 6d61 7465  bElement(el_mate
-00015fc0: 7269 616c 732c 2022 4d61 7465 7269 616c  rials, "Material
-00015fd0: 2229 0a20 2020 2020 2020 2020 2020 206d  ").            m
-00015fe0: 6174 6572 6961 6c2e 7365 7428 224e 616d  aterial.set("Nam
-00015ff0: 6522 2c20 6d61 7429 0a20 2020 2020 2020  e", mat).       
-00016000: 2020 2020 2066 6f72 2070 6e61 6d65 2c20       for pname, 
-00016010: 7076 616c 2069 6e20 7661 6c2e 6974 656d  pval in val.item
-00016020: 7328 293a 0a20 2020 2020 2020 2020 2020  s():.           
-00016030: 2020 2020 206d 6174 5f70 726f 7020 3d20       mat_prop = 
-00016040: 4554 2e53 7562 456c 656d 656e 7428 6d61  ET.SubElement(ma
-00016050: 7465 7269 616c 2c20 706e 616d 6529 0a20  terial, pname). 
-00016060: 2020 2020 2020 2020 2020 2020 2020 2076                 v
-00016070: 616c 7565 203d 2045 542e 5375 6245 6c65  alue = ET.SubEle
-00016080: 6d65 6e74 286d 6174 5f70 726f 702c 2022  ment(mat_prop, "
-00016090: 446f 7562 6c65 2229 0a20 2020 2020 2020  Double").       
-000160a0: 2020 2020 2020 2020 2076 616c 7565 2e74           value.t
-000160b0: 6578 7420 3d20 7374 7228 7076 616c 290a  ext = str(pval).
-000160c0: 0a20 2020 2020 2020 2065 6c5f 6c61 7965  .        el_laye
-000160d0: 7273 203d 2045 542e 5375 6245 6c65 6d65  rs = ET.SubEleme
-000160e0: 6e74 2865 6c5f 7374 6163 6b75 702c 2022  nt(el_stackup, "
-000160f0: 4c61 7965 7273 222c 207b 224c 656e 6774  Layers", {"Lengt
-00016100: 6855 6e69 7422 3a20 226d 6574 6572 227d  hUnit": "meter"}
-00016110: 290a 2020 2020 2020 2020 666f 7220 6c79  ).        for ly
-00016120: 722c 2076 616c 2069 6e20 6c61 7965 7273  r, val in layers
-00016130: 2e69 7465 6d73 2829 3a0a 2020 2020 2020  .items():.      
-00016140: 2020 2020 2020 6c61 7965 7220 3d20 4554        layer = ET
-00016150: 2e53 7562 456c 656d 656e 7428 656c 5f6c  .SubElement(el_l
-00016160: 6179 6572 732c 2022 4c61 7965 7222 290a  ayers, "Layer").
-00016170: 2020 2020 2020 2020 2020 2020 7661 6c20              val 
-00016180: 3d20 7b69 3a20 7374 7228 6a29 2066 6f72  = {i: str(j) for
-00016190: 2069 2c20 6a20 696e 2076 616c 2e69 7465   i, j in val.ite
-000161a0: 6d73 2829 7d0a 2020 2020 2020 2020 2020  ms()}.          
-000161b0: 2020 6966 2076 616c 5b22 5479 7065 225d    if val["Type"]
-000161c0: 203d 3d20 2273 6967 6e61 6c22 3a0a 2020   == "signal":.  
-000161d0: 2020 2020 2020 2020 2020 2020 2020 7661                va
-000161e0: 6c5b 2254 7970 6522 5d20 3d20 2263 6f6e  l["Type"] = "con
-000161f0: 6475 6374 6f72 220a 2020 2020 2020 2020  ductor".        
-00016200: 2020 2020 6c61 7965 722e 6174 7472 6962      layer.attrib
-00016210: 2e75 7064 6174 6528 7661 6c29 0a0a 2020  .update(val)..  
-00016220: 2020 2020 2020 666f 7220 6c79 722c 2076        for lyr, v
-00016230: 616c 2069 6e20 6e6f 6e5f 7374 6163 6b75  al in non_stacku
-00016240: 705f 6c61 7965 7273 2e69 7465 6d73 2829  p_layers.items()
-00016250: 3a0a 2020 2020 2020 2020 2020 2020 6c61  :.            la
-00016260: 7965 7220 3d20 4554 2e53 7562 456c 656d  yer = ET.SubElem
-00016270: 656e 7428 656c 5f6c 6179 6572 732c 2022  ent(el_layers, "
-00016280: 4c61 7965 7222 290a 2020 2020 2020 2020  Layer").        
-00016290: 2020 2020 7661 6c20 3d20 7b69 3a20 7374      val = {i: st
-000162a0: 7228 6a29 2066 6f72 2069 2c20 6a20 696e  r(j) for i, j in
-000162b0: 2076 616c 2e69 7465 6d73 2829 7d0a 2020   val.items()}.  
-000162c0: 2020 2020 2020 2020 2020 6c61 7965 722e            layer.
-000162d0: 6174 7472 6962 2e75 7064 6174 6528 7661  attrib.update(va
-000162e0: 6c29 0a0a 2020 2020 2020 2020 666f 7220  l)..        for 
-000162f0: 6c79 722c 2076 616c 2069 6e20 726f 7567  lyr, val in roug
-00016300: 686e 6573 732e 6974 656d 7328 293a 0a20  hness.items():. 
-00016310: 2020 2020 2020 2020 2020 2065 6c20 3d20             el = 
-00016320: 656c 5f6c 6179 6572 732e 6669 6e64 2822  el_layers.find("
-00016330: 2e2f 4c61 7965 725b 404e 616d 653d 277b  ./Layer[@Name='{
-00016340: 7d27 5d22 2e66 6f72 6d61 7428 6c79 7229  }']".format(lyr)
-00016350: 290a 2020 2020 2020 2020 2020 2020 666f  ).            fo
-00016360: 7220 706e 616d 652c 2070 7661 6c20 696e  r pname, pval in
-00016370: 2076 616c 2e69 7465 6d73 2829 3a0a 2020   val.items():.  
-00016380: 2020 2020 2020 2020 2020 2020 2020 7076                pv
-00016390: 616c 203d 207b 693a 2073 7472 286a 2920  al = {i: str(j) 
-000163a0: 666f 7220 692c 206a 2069 6e20 7076 616c  for i, j in pval
-000163b0: 2e69 7465 6d73 2829 7d0a 2020 2020 2020  .items()}.      
-000163c0: 2020 2020 2020 2020 2020 4554 2e53 7562            ET.Sub
-000163d0: 456c 656d 656e 7428 656c 2c20 706e 616d  Element(el, pnam
-000163e0: 652c 2070 7661 6c29 0a0a 2020 2020 2020  e, pval)..      
-000163f0: 2020 7772 6974 655f 7072 6574 7479 5f78    write_pretty_x
-00016400: 6d6c 2872 6f6f 742c 2066 696c 655f 7061  ml(root, file_pa
-00016410: 7468 290a 2020 2020 2020 2020 7265 7475  th).        retu
-00016420: 726e 2054 7275 650a 0a20 2020 2040 7079  rn True..    @py
-00016430: 6564 625f 6675 6e63 7469 6f6e 5f68 616e  edb_function_han
-00016440: 646c 6572 2829 0a20 2020 2064 6566 206c  dler().    def l
-00016450: 6f61 6428 7365 6c66 2c20 6669 6c65 5f70  oad(self, file_p
-00016460: 6174 682c 2072 656e 616d 653d 4661 6c73  ath, rename=Fals
-00016470: 6529 3a0a 2020 2020 2020 2020 2222 2249  e):.        """I
-00016480: 6d70 6f72 7420 7374 6163 6b75 7020 6672  mport stackup fr
-00016490: 6f6d 2061 2066 696c 652e 2054 6865 2066  om a file. The f
-000164a0: 696c 6520 666f 726d 6174 2063 616e 2062  ile format can b
-000164b0: 6520 584d 4c2c 2043 5356 2c20 6f72 204a  e XML, CSV, or J
-000164c0: 534f 4e2e 0a0a 0a20 2020 2020 2020 2050  SON....        P
-000164d0: 6172 616d 6574 6572 730a 2020 2020 2020  arameters.      
-000164e0: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0a20 2020    ----------.   
-000164f0: 2020 2020 2066 696c 655f 7061 7468 203a       file_path :
-00016500: 2073 7472 0a20 2020 2020 2020 2020 2020   str.           
-00016510: 2050 6174 6820 746f 2073 7461 636b 7570   Path to stackup
-00016520: 2066 696c 652e 0a20 2020 2020 2020 2072   file..        r
-00016530: 656e 616d 6520 3a20 626f 6f6c 0a20 2020  ename : bool.   
-00016540: 2020 2020 2020 2020 2049 6620 7265 6e61           If rena
-00016550: 6d65 2069 7320 6060 4661 6c73 6560 6020  me is ``False`` 
-00016560: 7468 656e 206c 6179 6572 2069 6e20 6c61  then layer in la
-00016570: 796f 7574 206e 6f74 2066 6f75 6e64 2069  yout not found i
-00016580: 6e20 7468 6520 7374 6163 6b75 7020 6669  n the stackup fi
-00016590: 6c65 2061 7265 2064 656c 6574 6564 2e0a  le are deleted..
-000165a0: 2020 2020 2020 2020 2020 2020 4f74 6865              Othe
-000165b0: 7277 6973 652c 2069 6620 7468 6520 6e75  rwise, if the nu
-000165c0: 6d62 6572 206f 6620 6c61 7965 7220 696e  mber of layer in
-000165d0: 2074 6865 2073 7461 636b 7570 2066 696c   the stackup fil
-000165e0: 6520 6571 7561 6c73 2074 6865 206e 756d  e equals the num
-000165f0: 6265 7220 6f66 2073 7461 636b 7570 206c  ber of stackup l
-00016600: 6179 6572 0a20 2020 2020 2020 2020 2020  ayer.           
-00016610: 2069 6e20 7468 6520 6c61 796f 7574 2c20   in the layout, 
-00016620: 6c61 7965 7273 2061 7265 2072 656e 616d  layers are renam
-00016630: 6564 2061 6363 6f72 6469 6e67 2074 6865  ed according the
-00016640: 2074 6865 2066 696c 652e 0a20 2020 2020   the file..     
-00016650: 2020 2020 2020 204e 6f74 6520 7468 6174         Note that
-00016660: 206c 6179 6572 206f 7264 6572 206d 6174   layer order mat
-00016670: 7465 7273 2c20 616e 6420 6861 7320 746f  ters, and has to
-00016680: 2062 6520 7772 6974 7465 6e74 2066 726f   be writtent fro
-00016690: 6d20 746f 7020 746f 2062 6f74 746f 6d20  m top to bottom 
-000166a0: 6c61 7965 7220 696e 2074 6865 2066 696c  layer in the fil
-000166b0: 652e 0a0a 2020 2020 2020 2020 5265 7475  e...        Retu
-000166c0: 726e 730a 2020 2020 2020 2020 2d2d 2d2d  rns.        ----
-000166d0: 2d2d 2d0a 2020 2020 2020 2020 626f 6f6c  ---.        bool
-000166e0: 0a20 2020 2020 2020 2020 2020 2060 6054  .            ``T
-000166f0: 7275 6560 6020 7768 656e 2073 7563 6365  rue`` when succe
-00016700: 7373 6675 6c2c 2060 6046 616c 7365 6060  ssful, ``False``
-00016710: 2077 6865 6e20 6661 696c 6564 2e0a 0a20   when failed... 
-00016720: 2020 2020 2020 2045 7861 6d70 6c65 730a         Examples.
-00016730: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
-00016740: 0a20 2020 2020 2020 203e 3e3e 2066 726f  .        >>> fro
-00016750: 6d20 7079 6564 6220 696d 706f 7274 2045  m pyedb import E
-00016760: 6462 0a20 2020 2020 2020 203e 3e3e 2065  db.        >>> e
-00016770: 6462 203d 2045 6462 2829 0a20 2020 2020  db = Edb().     
-00016780: 2020 203e 3e3e 2065 6462 2e73 7461 636b     >>> edb.stack
-00016790: 7570 2e6c 6f61 6428 2273 7461 636b 7570  up.load("stackup
-000167a0: 2e78 6d6c 2229 0a20 2020 2020 2020 2022  .xml").        "
-000167b0: 2222 0a0a 2020 2020 2020 2020 6966 2069  ""..        if i
-000167c0: 7369 6e73 7461 6e63 6528 6669 6c65 5f70  sinstance(file_p
-000167d0: 6174 682c 2064 6963 7429 3a0a 2020 2020  ath, dict):.    
-000167e0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-000167f0: 656c 662e 5f69 6d70 6f72 745f 6469 6374  elf._import_dict
-00016800: 2866 696c 655f 7061 7468 290a 2020 2020  (file_path).    
-00016810: 2020 2020 656c 6966 2066 696c 655f 7061      elif file_pa
-00016820: 7468 2e65 6e64 7377 6974 6828 222e 6373  th.endswith(".cs
-00016830: 7622 293a 0a20 2020 2020 2020 2020 2020  v"):.           
-00016840: 2072 6574 7572 6e20 7365 6c66 2e5f 696d   return self._im
-00016850: 706f 7274 5f63 7376 2866 696c 655f 7061  port_csv(file_pa
-00016860: 7468 290a 2020 2020 2020 2020 656c 6966  th).        elif
-00016870: 2066 696c 655f 7061 7468 2e65 6e64 7377   file_path.endsw
-00016880: 6974 6828 222e 6a73 6f6e 2229 3a0a 2020  ith(".json"):.  
-00016890: 2020 2020 2020 2020 2020 7265 7475 726e            return
-000168a0: 2073 656c 662e 5f69 6d70 6f72 745f 6a73   self._import_js
-000168b0: 6f6e 2866 696c 655f 7061 7468 2c20 7265  on(file_path, re
-000168c0: 6e61 6d65 3d72 656e 616d 6529 0a20 2020  name=rename).   
-000168d0: 2020 2020 2065 6c69 6620 6669 6c65 5f70       elif file_p
-000168e0: 6174 682e 656e 6473 7769 7468 2822 2e78  ath.endswith(".x
-000168f0: 6d6c 2229 3a0a 2020 2020 2020 2020 2020  ml"):.          
-00016900: 2020 7265 7475 726e 2073 656c 662e 5f69    return self._i
-00016910: 6d70 6f72 745f 786d 6c28 6669 6c65 5f70  mport_xml(file_p
-00016920: 6174 682c 2072 656e 616d 653d 7265 6e61  ath, rename=rena
-00016930: 6d65 290a 2020 2020 2020 2020 656c 7365  me).        else
-00016940: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00016950: 7475 726e 2046 616c 7365 0a0a 2020 2020  turn False..    
-00016960: 4070 7965 6462 5f66 756e 6374 696f 6e5f  @pyedb_function_
-00016970: 6861 6e64 6c65 7228 290a 2020 2020 6465  handler().    de
-00016980: 6620 696d 706f 7274 5f73 7461 636b 7570  f import_stackup
-00016990: 2873 656c 662c 2066 696c 655f 7061 7468  (self, file_path
-000169a0: 293a 0a20 2020 2020 2020 2022 2222 496d  ):.        """Im
-000169b0: 706f 7274 2073 7461 636b 7570 2066 726f  port stackup fro
-000169c0: 6d20 6120 6669 6c65 2e20 5468 6520 6669  m a file. The fi
-000169d0: 6c65 2066 6f72 6d61 7420 6361 6e20 6265  le format can be
-000169e0: 2058 4d4c 2c20 4353 562c 206f 7220 4a53   XML, CSV, or JS
-000169f0: 4f4e 2e0a 0a20 2020 2020 2020 202e 2e20  ON...        .. 
-00016a00: 6465 7072 6563 6174 6564 3a3a 2030 2e36  deprecated:: 0.6
-00016a10: 2e36 310a 2020 2020 2020 2020 2020 2055  .61.           U
-00016a20: 7365 203a 6675 6e63 3a60 6c6f 6164 6020  se :func:`load` 
-00016a30: 696e 7374 6561 642e 0a0a 2020 2020 2020  instead...      
-00016a40: 2020 5061 7261 6d65 7465 7273 0a20 2020    Parameters.   
-00016a50: 2020 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0a       ----------.
-00016a60: 2020 2020 2020 2020 6669 6c65 5f70 6174          file_pat
-00016a70: 6820 3a20 7374 720a 2020 2020 2020 2020  h : str.        
-00016a80: 2020 2020 5061 7468 2074 6f20 7374 6163      Path to stac
-00016a90: 6b75 7020 6669 6c65 2e0a 0a20 2020 2020  kup file...     
-00016aa0: 2020 2052 6574 7572 6e73 0a20 2020 2020     Returns.     
-00016ab0: 2020 202d 2d2d 2d2d 2d2d 0a20 2020 2020     -------.     
-00016ac0: 2020 2062 6f6f 6c0a 2020 2020 2020 2020     bool.        
-00016ad0: 2020 2020 6060 5472 7565 6060 2077 6865      ``True`` whe
-00016ae0: 6e20 7375 6363 6573 7366 756c 2c20 6060  n successful, ``
-00016af0: 4661 6c73 6560 6020 7768 656e 2066 6169  False`` when fai
-00016b00: 6c65 642e 0a0a 2020 2020 2020 2020 4578  led...        Ex
-00016b10: 616d 706c 6573 0a20 2020 2020 2020 202d  amples.        -
-00016b20: 2d2d 2d2d 2d2d 2d0a 2020 2020 2020 2020  -------.        
-00016b30: 3e3e 3e20 6672 6f6d 2070 7965 6462 2069  >>> from pyedb i
-00016b40: 6d70 6f72 7420 4564 620a 2020 2020 2020  mport Edb.      
-00016b50: 2020 3e3e 3e20 6564 6220 3d20 4564 6228    >>> edb = Edb(
-00016b60: 290a 2020 2020 2020 2020 3e3e 3e20 6564  ).        >>> ed
-00016b70: 622e 7374 6163 6b75 702e 696d 706f 7274  b.stackup.import
-00016b80: 5f73 7461 636b 7570 2822 7374 6163 6b75  _stackup("stacku
-00016b90: 702e 786d 6c22 290a 2020 2020 2020 2020  p.xml").        
-00016ba0: 2222 220a 0a20 2020 2020 2020 2073 656c  """..        sel
-00016bb0: 662e 5f6c 6f67 6765 722e 7761 726e 696e  f._logger.warnin
-00016bc0: 6728 224d 6574 686f 6420 6578 706f 7274  g("Method export
-00016bd0: 5f73 7461 636b 7570 2069 7320 6465 7072  _stackup is depr
-00016be0: 6563 6174 6564 2e20 5573 6520 2e65 7870  ecated. Use .exp
-00016bf0: 6f72 742e 2229 0a20 2020 2020 2020 2072  ort.").        r
-00016c00: 6574 7572 6e20 7365 6c66 2e6c 6f61 6428  eturn self.load(
-00016c10: 6669 6c65 5f70 6174 6829 0a0a 2020 2020  file_path)..    
-00016c20: 4070 7965 6462 5f66 756e 6374 696f 6e5f  @pyedb_function_
-00016c30: 6861 6e64 6c65 7228 290a 2020 2020 6465  handler().    de
-00016c40: 6620 706c 6f74 280a 2020 2020 2020 2020  f plot(.        
-00016c50: 7365 6c66 2c0a 2020 2020 2020 2020 7361  self,.        sa
-00016c60: 7665 5f70 6c6f 743d 4e6f 6e65 2c0a 2020  ve_plot=None,.  
-00016c70: 2020 2020 2020 7369 7a65 3d28 3230 3030        size=(2000
-00016c80: 2c20 3135 3030 292c 0a20 2020 2020 2020  , 1500),.       
-00016c90: 2070 6c6f 745f 6465 6669 6e69 7469 6f6e   plot_definition
-00016ca0: 733d 4e6f 6e65 2c0a 2020 2020 2020 2020  s=None,.        
-00016cb0: 6669 7273 745f 6c61 7965 723d 4e6f 6e65  first_layer=None
-00016cc0: 2c0a 2020 2020 2020 2020 6c61 7374 5f6c  ,.        last_l
-00016cd0: 6179 6572 3d4e 6f6e 652c 0a20 2020 2020  ayer=None,.     
-00016ce0: 2020 2073 6361 6c65 5f65 6c65 7661 7469     scale_elevati
-00016cf0: 6f6e 3d54 7275 652c 0a20 2020 2029 3a0a  on=True,.    ):.
-00016d00: 2020 2020 2020 2020 2222 2250 6c6f 7420          """Plot 
-00016d10: 6375 7272 656e 7420 7374 6163 6b75 7020  current stackup 
-00016d20: 616e 642c 206f 7074 696f 6e61 6c6c 792c  and, optionally,
-00016d30: 206f 7665 726c 6170 2070 6164 7374 6163   overlap padstac
-00016d40: 6b20 6465 6669 6e69 7469 6f6e 732e 0a20  k definitions.. 
-00016d50: 2020 2020 2020 2050 6c6f 7420 7375 7070         Plot supp
-00016d60: 6f72 7473 206f 6e6c 7920 274c 616d 696e  orts only 'Lamin
-00016d70: 6174 6527 2061 6e64 2027 4f76 6572 6c61  ate' and 'Overla
-00016d80: 7070 696e 6727 2073 7461 636b 7570 2074  pping' stackup t
-00016d90: 7970 6573 2e0a 0a20 2020 2020 2020 2050  ypes...        P
-00016da0: 6172 616d 6574 6572 730a 2020 2020 2020  arameters.      
-00016db0: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0a20 2020    ----------.   
-00016dc0: 2020 2020 2073 6176 655f 706c 6f74 203a       save_plot :
-00016dd0: 2073 7472 2c20 6f70 7469 6f6e 616c 0a20   str, optional. 
-00016de0: 2020 2020 2020 2020 2020 2049 6620 6060             If ``
-00016df0: 4e6f 6e65 6060 2074 6865 2070 6c6f 7420  None`` the plot 
-00016e00: 7769 6c6c 2062 6520 7368 6f77 6e2e 0a20  will be shown.. 
-00016e10: 2020 2020 2020 2020 2020 2049 6620 6120             If a 
-00016e20: 6669 6c65 2070 6174 6820 6973 2073 7065  file path is spe
-00016e30: 6369 6669 6564 2074 6865 2070 6c6f 7420  cified the plot 
-00016e40: 7769 6c6c 2062 6520 7361 7665 6420 746f  will be saved to
-00016e50: 2073 7563 6820 6669 6c65 2e0a 2020 2020   such file..    
-00016e60: 2020 2020 7369 7a65 203a 2074 7570 6c65      size : tuple
-00016e70: 2c20 6f70 7469 6f6e 616c 0a20 2020 2020  , optional.     
-00016e80: 2020 2020 2020 2049 6d61 6765 2073 697a         Image siz
-00016e90: 6520 696e 2070 6978 656c 2028 7769 6474  e in pixel (widt
-00016ea0: 682c 2068 6569 6768 7429 2e20 4465 6661  h, height). Defa
-00016eb0: 756c 7420 7661 6c75 6520 6973 2060 6028  ult value is ``(
-00016ec0: 3230 3030 2c20 3135 3030 2960 600a 2020  2000, 1500)``.  
-00016ed0: 2020 2020 2020 706c 6f74 5f64 6566 696e        plot_defin
-00016ee0: 6974 696f 6e73 203a 2073 7472 2c20 6c69  itions : str, li
-00016ef0: 7374 2c20 6f70 7469 6f6e 616c 0a20 2020  st, optional.   
-00016f00: 2020 2020 2020 2020 204c 6973 7420 6f66           List of
-00016f10: 2070 6164 7374 6163 6b20 6465 6669 6e69   padstack defini
-00016f20: 7469 6f6e 7320 746f 2070 6c6f 7420 6f6e  tions to plot on
-00016f30: 2074 6865 2073 7461 636b 7570 2e0a 2020   the stackup..  
-00016f40: 2020 2020 2020 2020 2020 4974 2069 7320            It is 
-00016f50: 7375 7070 6f72 7465 6420 6f6e 6c79 2066  supported only f
-00016f60: 6f72 204c 616d 696e 6174 6520 6d6f 6465  or Laminate mode
-00016f70: 2e0a 2020 2020 2020 2020 6669 7273 745f  ..        first_
-00016f80: 6c61 7965 7220 3a20 7374 7220 6f72 203a  layer : str or :
-00016f90: 636c 6173 733a 6070 7965 6462 2e64 6f74  class:`pyedb.dot
-00016fa0: 6e65 742e 6564 625f 636f 7265 2e65 6462  net.edb_core.edb
-00016fb0: 5f64 6174 612e 6c61 7965 725f 6461 7461  _data.layer_data
-00016fc0: 2e4c 6179 6572 4564 6243 6c61 7373 600a  .LayerEdbClass`.
-00016fd0: 2020 2020 2020 2020 2020 2020 4669 7273              Firs
-00016fe0: 7420 6c61 7965 7220 746f 2070 6c6f 7420  t layer to plot 
-00016ff0: 6672 6f6d 2074 6865 2062 6f74 746f 6d2e  from the bottom.
-00017000: 2044 6566 6175 6c74 2069 7320 604e 6f6e   Default is `Non
-00017010: 6560 2074 6f20 7374 6172 7420 706c 6f74  e` to start plot
-00017020: 7469 6e67 2066 726f 6d20 626f 7474 6f6d  ting from bottom
-00017030: 2e0a 2020 2020 2020 2020 6c61 7374 5f6c  ..        last_l
-00017040: 6179 6572 203a 2073 7472 206f 7220 3a63  ayer : str or :c
-00017050: 6c61 7373 3a60 7079 6564 622e 646f 746e  lass:`pyedb.dotn
-00017060: 6574 2e65 6462 5f63 6f72 652e 6564 625f  et.edb_core.edb_
-00017070: 6461 7461 2e6c 6179 6572 5f64 6174 612e  data.layer_data.
-00017080: 4c61 7965 7245 6462 436c 6173 7360 0a20  LayerEdbClass`. 
-00017090: 2020 2020 2020 2020 2020 204c 6173 7420             Last 
-000170a0: 6c61 7965 7220 746f 2070 6c6f 7420 6672  layer to plot fr
-000170b0: 6f6d 2074 6865 2062 6f74 746f 6d2e 2044  om the bottom. D
-000170c0: 6566 6175 6c74 2069 7320 604e 6f6e 6560  efault is `None`
-000170d0: 2074 6f20 706c 6f74 2075 7020 746f 2074   to plot up to t
-000170e0: 6f70 206c 6179 6572 2e0a 2020 2020 2020  op layer..      
-000170f0: 2020 7363 616c 655f 656c 6576 6174 696f    scale_elevatio
-00017100: 6e20 3a20 626f 6f6c 2c20 6f70 7469 6f6e  n : bool, option
-00017110: 616c 0a20 2020 2020 2020 2020 2020 2054  al.            T
-00017120: 6865 2072 6561 6c20 6c61 7965 7220 7468  he real layer th
-00017130: 6963 6b6e 6573 7320 6973 2073 6361 6c65  ickness is scale
-00017140: 6420 736f 2074 6861 7420 6d61 785f 7468  d so that max_th
-00017150: 6963 6b6e 6573 7320 3d20 3320 2a20 6d69  ickness = 3 * mi
-00017160: 6e5f 7468 6963 6b6e 6573 732e 0a20 2020  n_thickness..   
-00017170: 2020 2020 2020 2020 2044 6566 6175 6c74           Default
-00017180: 2069 7320 6054 7275 6560 2e0a 0a20 2020   is `True`...   
-00017190: 2020 2020 2052 6574 7572 6e73 0a20 2020       Returns.   
-000171a0: 2020 2020 202d 2d2d 2d2d 2d2d 0a20 2020       -------.   
-000171b0: 2020 2020 203a 636c 6173 733a 606d 6174       :class:`mat
-000171c0: 706c 6f74 6c69 622e 706c 7460 0a20 2020  plotlib.plt`.   
-000171d0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-000171e0: 2069 6620 6973 5f69 726f 6e70 7974 686f   if is_ironpytho
-000171f0: 6e3a 0a20 2020 2020 2020 2020 2020 2072  n:.            r
-00017200: 6574 7572 6e20 4661 6c73 650a 2020 2020  eturn False.    
-00017210: 2020 2020 6672 6f6d 2070 7965 6462 2e67      from pyedb.g
-00017220: 656e 6572 6963 2e63 6f6e 7374 616e 7473  eneric.constants
-00017230: 2069 6d70 6f72 7420 4353 5334 5f43 4f4c   import CSS4_COL
-00017240: 4f52 530a 2020 2020 2020 2020 6672 6f6d  ORS.        from
-00017250: 2070 7965 6462 2e67 656e 6572 6963 2e70   pyedb.generic.p
-00017260: 6c6f 7420 696d 706f 7274 2070 6c6f 745f  lot import plot_
-00017270: 6d61 7470 6c6f 746c 6962 0a0a 2020 2020  matplotlib..    
-00017280: 2020 2020 6c61 7965 725f 6e61 6d65 7320      layer_names 
-00017290: 3d20 6c69 7374 2873 656c 662e 7374 6163  = list(self.stac
-000172a0: 6b75 705f 6c61 7965 7273 2e6b 6579 7328  kup_layers.keys(
-000172b0: 2929 0a20 2020 2020 2020 2069 6620 6669  )).        if fi
-000172c0: 7273 745f 6c61 7965 7220 6973 204e 6f6e  rst_layer is Non
-000172d0: 6520 6f72 2066 6972 7374 5f6c 6179 6572  e or first_layer
-000172e0: 206e 6f74 2069 6e20 6c61 7965 725f 6e61   not in layer_na
-000172f0: 6d65 733a 0a20 2020 2020 2020 2020 2020  mes:.           
-00017300: 2062 6f74 746f 6d5f 6c61 7965 7220 3d20   bottom_layer = 
-00017310: 6c61 7965 725f 6e61 6d65 735b 2d31 5d0a  layer_names[-1].
-00017320: 2020 2020 2020 2020 656c 6966 2069 7369          elif isi
-00017330: 6e73 7461 6e63 6528 6669 7273 745f 6c61  nstance(first_la
-00017340: 7965 722c 2073 7472 293a 0a20 2020 2020  yer, str):.     
-00017350: 2020 2020 2020 2062 6f74 746f 6d5f 6c61         bottom_la
-00017360: 7965 7220 3d20 6669 7273 745f 6c61 7965  yer = first_laye
-00017370: 720a 2020 2020 2020 2020 656c 6966 2069  r.        elif i
-00017380: 7369 6e73 7461 6e63 6528 6669 7273 745f  sinstance(first_
-00017390: 6c61 7965 722c 204c 6179 6572 4564 6243  layer, LayerEdbC
-000173a0: 6c61 7373 293a 0a20 2020 2020 2020 2020  lass):.         
-000173b0: 2020 2062 6f74 746f 6d5f 6c61 7965 7220     bottom_layer 
-000173c0: 3d20 6669 7273 745f 6c61 7965 722e 6e61  = first_layer.na
-000173d0: 6d65 0a20 2020 2020 2020 2065 6c73 653a  me.        else:
-000173e0: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-000173f0: 7365 2041 7474 7269 6275 7465 4572 726f  se AttributeErro
-00017400: 7228 2266 6972 7374 5f6c 6179 6572 206d  r("first_layer m
-00017410: 7573 7420 6265 2073 7472 206f 7220 636c  ust be str or cl
-00017420: 6173 7320 6064 6f74 6e65 742e 6564 625f  ass `dotnet.edb_
-00017430: 636f 7265 2e65 6462 5f64 6174 612e 6c61  core.edb_data.la
-00017440: 7965 725f 6461 7461 2e4c 6179 6572 4564  yer_data.LayerEd
-00017450: 6243 6c61 7373 6022 290a 2020 2020 2020  bClass`").      
-00017460: 2020 6966 206c 6173 745f 6c61 7965 7220    if last_layer 
-00017470: 6973 204e 6f6e 6520 6f72 206c 6173 745f  is None or last_
-00017480: 6c61 7965 7220 6e6f 7420 696e 206c 6179  layer not in lay
-00017490: 6572 5f6e 616d 6573 3a0a 2020 2020 2020  er_names:.      
-000174a0: 2020 2020 2020 746f 705f 6c61 7965 7220        top_layer 
-000174b0: 3d20 6c61 7965 725f 6e61 6d65 735b 305d  = layer_names[0]
-000174c0: 0a20 2020 2020 2020 2065 6c69 6620 6973  .        elif is
-000174d0: 696e 7374 616e 6365 286c 6173 745f 6c61  instance(last_la
-000174e0: 7965 722c 2073 7472 293a 0a20 2020 2020  yer, str):.     
-000174f0: 2020 2020 2020 2074 6f70 5f6c 6179 6572         top_layer
-00017500: 203d 206c 6173 745f 6c61 7965 720a 2020   = last_layer.  
-00017510: 2020 2020 2020 656c 6966 2069 7369 6e73        elif isins
-00017520: 7461 6e63 6528 6c61 7374 5f6c 6179 6572  tance(last_layer
-00017530: 2c20 4c61 7965 7245 6462 436c 6173 7329  , LayerEdbClass)
-00017540: 3a0a 2020 2020 2020 2020 2020 2020 746f  :.            to
-00017550: 705f 6c61 7965 7220 3d20 6c61 7374 5f6c  p_layer = last_l
-00017560: 6179 6572 2e6e 616d 650a 2020 2020 2020  ayer.name.      
-00017570: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00017580: 2020 2020 7261 6973 6520 4174 7472 6962      raise Attrib
-00017590: 7574 6545 7272 6f72 2822 6c61 7374 5f6c  uteError("last_l
-000175a0: 6179 6572 206d 7573 7420 6265 2073 7472  ayer must be str
-000175b0: 206f 7220 636c 6173 7320 6064 6f74 6e65   or class `dotne
-000175c0: 742e 6564 625f 636f 7265 2e65 6462 5f64  t.edb_core.edb_d
-000175d0: 6174 612e 6c61 7965 725f 6461 7461 2e4c  ata.layer_data.L
-000175e0: 6179 6572 4564 6243 6c61 7373 6022 290a  ayerEdbClass`").
-000175f0: 0a20 2020 2020 2020 2073 7461 636b 7570  .        stackup
-00017600: 5f6d 6f64 6520 3d20 7365 6c66 2e73 7461  _mode = self.sta
-00017610: 636b 7570 5f6d 6f64 650a 2020 2020 2020  ckup_mode.      
-00017620: 2020 6966 2073 7461 636b 7570 5f6d 6f64    if stackup_mod
-00017630: 6520 6e6f 7420 696e 205b 224c 616d 696e  e not in ["Lamin
-00017640: 6174 6522 2c20 224f 7665 726c 6170 7069  ate", "Overlappi
-00017650: 6e67 225d 3a0a 2020 2020 2020 2020 2020  ng"]:.          
-00017660: 2020 7261 6973 6520 4174 7472 6962 7574    raise Attribut
-00017670: 6545 7272 6f72 2822 7374 6163 6b75 7020  eError("stackup 
-00017680: 706c 6f74 2073 7570 706f 7274 7320 6f6e  plot supports on
-00017690: 6c79 2027 4c61 6d69 6e61 7465 2720 616e  ly 'Laminate' an
-000176a0: 6420 274f 7665 726c 6170 7069 6e67 2720  d 'Overlapping' 
-000176b0: 7374 6163 6b75 7020 7479 7065 732e 2229  stackup types.")
-000176c0: 0a0a 2020 2020 2020 2020 2320 6275 696c  ..        # buil
-000176d0: 6420 7468 6520 6c61 7965 7273 2064 6174  d the layers dat
-000176e0: 610a 2020 2020 2020 2020 6c61 7965 7273  a.        layers
-000176f0: 5f64 6174 6120 3d20 5b5d 0a20 2020 2020  _data = [].     
-00017700: 2020 2073 6b69 705f 666c 6167 203d 2054     skip_flag = T
-00017710: 7275 650a 2020 2020 2020 2020 666f 7220  rue.        for 
-00017720: 6c61 7965 7220 696e 2073 656c 662e 7374  layer in self.st
-00017730: 6163 6b75 705f 6c61 7965 7273 2e76 616c  ackup_layers.val
-00017740: 7565 7328 293a 2020 2320 7374 6172 7420  ues():  # start 
-00017750: 6672 6f6d 2074 6f70 0a20 2020 2020 2020  from top.       
-00017760: 2020 2020 2069 6620 6c61 7965 722e 6e61       if layer.na
-00017770: 6d65 2021 3d20 746f 705f 6c61 7965 7220  me != top_layer 
-00017780: 616e 6420 736b 6970 5f66 6c61 673a 0a20  and skip_flag:. 
-00017790: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-000177a0: 6f6e 7469 6e75 650a 2020 2020 2020 2020  ontinue.        
-000177b0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-000177c0: 2020 2020 2020 2020 2020 736b 6970 5f66            skip_f
-000177d0: 6c61 6720 3d20 4661 6c73 650a 2020 2020  lag = False.    
-000177e0: 2020 2020 2020 2020 6c61 7965 7273 5f64          layers_d
-000177f0: 6174 612e 6170 7065 6e64 285b 6c61 7965  ata.append([laye
-00017800: 722c 206c 6179 6572 2e6c 6f77 6572 5f65  r, layer.lower_e
-00017810: 6c65 7661 7469 6f6e 2c20 6c61 7965 722e  levation, layer.
-00017820: 7570 7065 725f 656c 6576 6174 696f 6e2c  upper_elevation,
-00017830: 206c 6179 6572 2e74 6869 636b 6e65 7373   layer.thickness
-00017840: 5d29 0a20 2020 2020 2020 2020 2020 2069  ]).            i
-00017850: 6620 6c61 7965 722e 6e61 6d65 203d 3d20  f layer.name == 
-00017860: 626f 7474 6f6d 5f6c 6179 6572 3a0a 2020  bottom_layer:.  
-00017870: 2020 2020 2020 2020 2020 2020 2020 6272                br
-00017880: 6561 6b0a 2020 2020 2020 2020 6c61 7965  eak.        laye
-00017890: 7273 5f64 6174 612e 7265 7665 7273 6528  rs_data.reverse(
-000178a0: 2920 2023 206c 6574 2773 2073 7461 7274  )  # let's start
-000178b0: 2066 726f 6d20 7468 6520 626f 7474 6f6d   from the bottom
-000178c0: 0a0a 2020 2020 2020 2020 2320 7365 7061  ..        # sepa
-000178d0: 7261 7465 2064 6965 6c65 6374 7269 6320  rate dielectric 
-000178e0: 616e 6420 7369 676e 616c 2069 6620 6f76  and signal if ov
-000178f0: 6572 6c61 7070 696e 6720 7374 6163 6b75  erlapping stacku
-00017900: 700a 2020 2020 2020 2020 6966 2073 7461  p.        if sta
-00017910: 636b 7570 5f6d 6f64 6520 3d3d 2022 4f76  ckup_mode == "Ov
-00017920: 6572 6c61 7070 696e 6722 3a0a 2020 2020  erlapping":.    
-00017930: 2020 2020 2020 2020 6469 656c 6563 7472          dielectr
-00017940: 6963 5f6c 6179 6572 7320 3d20 5b6c 2066  ic_layers = [l f
-00017950: 6f72 206c 2069 6e20 6c61 7965 7273 5f64  or l in layers_d
-00017960: 6174 6120 6966 206c 5b30 5d2e 7479 7065  ata if l[0].type
-00017970: 203d 3d20 2264 6965 6c65 6374 7269 6322   == "dielectric"
-00017980: 5d0a 2020 2020 2020 2020 2020 2020 7369  ].            si
-00017990: 676e 616c 5f6c 6179 6572 7320 3d20 5b6c  gnal_layers = [l
-000179a0: 2066 6f72 206c 2069 6e20 6c61 7965 7273   for l in layers
-000179b0: 5f64 6174 6120 6966 206c 5b30 5d2e 7479  _data if l[0].ty
-000179c0: 7065 203d 3d20 2273 6967 6e61 6c22 5d0a  pe == "signal"].
-000179d0: 0a20 2020 2020 2020 2023 2063 6f6d 7072  .        # compr
-000179e0: 6573 7320 7468 6520 7468 6963 6b6e 6573  ess the thicknes
-000179f0: 7365 7320 6966 2072 6571 7569 7265 640a  ses if required.
-00017a00: 2020 2020 2020 2020 6966 2073 6361 6c65          if scale
-00017a10: 5f65 6c65 7661 7469 6f6e 3a0a 2020 2020  _elevation:.    
-00017a20: 2020 2020 2020 2020 6d69 6e5f 7468 6963          min_thic
-00017a30: 6b6e 6573 7320 3d20 6d69 6e28 5b69 5b33  kness = min([i[3
-00017a40: 5d20 666f 7220 6920 696e 206c 6179 6572  ] for i in layer
-00017a50: 735f 6461 7461 2069 6620 695b 335d 2021  s_data if i[3] !
-00017a60: 3d20 305d 290a 2020 2020 2020 2020 2020  = 0]).          
-00017a70: 2020 6d61 785f 7468 6963 6b6e 6573 7320    max_thickness 
-00017a80: 3d20 6d61 7828 5b69 5b33 5d20 666f 7220  = max([i[3] for 
-00017a90: 6920 696e 206c 6179 6572 735f 6461 7461  i in layers_data
-00017aa0: 5d29 0a20 2020 2020 2020 2020 2020 2063  ]).            c
-00017ab0: 203d 2033 2020 2320 6d61 785f 7468 6963   = 3  # max_thic
-00017ac0: 6b6e 6573 7320 3d20 6320 2a20 6d69 6e5f  kness = c * min_
-00017ad0: 7468 6963 6b6e 6573 730a 0a20 2020 2020  thickness..     
-00017ae0: 2020 2020 2020 2064 6566 205f 636f 6d70         def _comp
-00017af0: 7265 7373 5f74 2879 293a 0a20 2020 2020  ress_t(y):.     
-00017b00: 2020 2020 2020 2020 2020 206d 203d 206d             m = m
-00017b10: 696e 5f74 6869 636b 6e65 7373 0a20 2020  in_thickness.   
-00017b20: 2020 2020 2020 2020 2020 2020 204d 203d               M =
-00017b30: 206d 6178 5f74 6869 636b 6e65 7373 0a20   max_thickness. 
-00017b40: 2020 2020 2020 2020 2020 2020 2020 206b                 k
-00017b50: 203d 2028 6320 2d20 3129 202a 206d 202f   = (c - 1) * m /
-00017b60: 2028 4d20 2d20 6d29 0a20 2020 2020 2020   (M - m).       
-00017b70: 2020 2020 2020 2020 2069 6620 7920 3e20           if y > 
-00017b80: 303a 0a20 2020 2020 2020 2020 2020 2020  0:.             
-00017b90: 2020 2020 2020 2072 6574 7572 6e20 2879         return (y
-00017ba0: 202d 206d 2920 2a20 6b20 2b20 6d0a 2020   - m) * k + m.  
-00017bb0: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00017bc0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00017bd0: 2020 2020 2020 2020 7265 7475 726e 2030          return 0
-00017be0: 2e30 0a0a 2020 2020 2020 2020 2020 2020  .0..            
-00017bf0: 6966 2073 7461 636b 7570 5f6d 6f64 6520  if stackup_mode 
-00017c00: 3d3d 2022 4c61 6d69 6e61 7465 223a 0a20  == "Laminate":. 
-00017c10: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-00017c20: 3020 3d20 6c61 7965 7273 5f64 6174 615b  0 = layers_data[
-00017c30: 305d 0a20 2020 2020 2020 2020 2020 2020  0].             
-00017c40: 2020 2063 6f6d 7072 6573 7365 645f 6c61     compressed_la
-00017c50: 7965 7273 5f64 6174 6120 3d20 5b5b 6c30  yers_data = [[l0
-00017c60: 5b30 5d2c 206c 305b 315d 2c20 5f63 6f6d  [0], l0[1], _com
-00017c70: 7072 6573 735f 7428 6c30 5b33 5d29 2c20  press_t(l0[3]), 
-00017c80: 5f63 6f6d 7072 6573 735f 7428 6c30 5b33  _compress_t(l0[3
-00017c90: 5d29 5d5d 2020 2320 7468 6520 6669 7273  ])]]  # the firs
-00017ca0: 7420 726f 770a 2020 2020 2020 2020 2020  t row.          
-00017cb0: 2020 2020 2020 6c70 203d 2063 6f6d 7072        lp = compr
-00017cc0: 6573 7365 645f 6c61 7965 7273 5f64 6174  essed_layers_dat
-00017cd0: 615b 305d 0a20 2020 2020 2020 2020 2020  a[0].           
-00017ce0: 2020 2020 2066 6f72 206c 6920 696e 206c       for li in l
-00017cf0: 6179 6572 735f 6461 7461 5b31 3a5d 3a20  ayers_data[1:]: 
-00017d00: 2023 2074 6865 206f 7468 6572 2072 6f77   # the other row
-00017d10: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
-00017d20: 2020 2020 2020 6374 203d 205f 636f 6d70        ct = _comp
-00017d30: 7265 7373 5f74 286c 695b 335d 290a 2020  ress_t(li[3]).  
-00017d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017d50: 2020 636f 6d70 7265 7373 6564 5f6c 6179    compressed_lay
-00017d60: 6572 735f 6461 7461 2e61 7070 656e 6428  ers_data.append(
-00017d70: 5b6c 695b 305d 2c20 6c70 5b32 5d2c 206c  [li[0], lp[2], l
-00017d80: 705b 325d 202b 2063 742c 2063 745d 290a  p[2] + ct, ct]).
-00017d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017da0: 2020 2020 6c70 203d 2063 6f6d 7072 6573      lp = compres
-00017db0: 7365 645f 6c61 7965 7273 5f64 6174 615b  sed_layers_data[
-00017dc0: 2d31 5d0a 2020 2020 2020 2020 2020 2020  -1].            
-00017dd0: 2020 2020 6c61 7965 7273 5f64 6174 6120      layers_data 
-00017de0: 3d20 636f 6d70 7265 7373 6564 5f6c 6179  = compressed_lay
-00017df0: 6572 735f 6461 7461 0a0a 2020 2020 2020  ers_data..      
-00017e00: 2020 2020 2020 656c 6966 2073 7461 636b        elif stack
-00017e10: 7570 5f6d 6f64 6520 3d3d 2022 4f76 6572  up_mode == "Over
-00017e20: 6c61 7070 696e 6722 3a0a 2020 2020 2020  lapping":.      
-00017e30: 2020 2020 2020 2020 2020 636f 6d70 7265            compre
-00017e40: 7373 6564 5f64 6965 6c73 203d 205b 5d0a  ssed_diels = [].
-00017e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017e60: 6669 7273 745f 6469 656c 203d 2054 7275  first_diel = Tru
-00017e70: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-00017e80: 2020 666f 7220 6c69 2069 6e20 6469 656c    for li in diel
-00017e90: 6563 7472 6963 5f6c 6179 6572 733a 0a20  ectric_layers:. 
-00017ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017eb0: 2020 2063 7420 3d20 5f63 6f6d 7072 6573     ct = _compres
-00017ec0: 735f 7428 6c69 5b33 5d29 0a20 2020 2020  s_t(li[3]).     
-00017ed0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00017ee0: 6620 6669 7273 745f 6469 656c 3a0a 2020  f first_diel:.  
-00017ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017f00: 2020 2020 2020 6966 206c 695b 315d 203e        if li[1] >
-00017f10: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
-00017f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017f30: 6c30 6c65 203d 205f 636f 6d70 7265 7373  l0le = _compress
-00017f40: 5f74 286c 695b 315d 290a 2020 2020 2020  _t(li[1]).      
-00017f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017f60: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00017f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017f80: 2020 2020 6c30 6c65 203d 206c 695b 315d      l0le = li[1]
-00017f90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00017fa0: 2020 2020 2020 2020 2063 6f6d 7072 6573           compres
-00017fb0: 7365 645f 6469 656c 732e 6170 7065 6e64  sed_diels.append
-00017fc0: 285b 6c69 5b30 5d2c 206c 306c 652c 206c  ([li[0], l0le, l
-00017fd0: 306c 6520 2b20 6374 2c20 6374 5d29 0a20  0le + ct, ct]). 
-00017fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017ff0: 2020 2020 2020 2066 6972 7374 5f64 6965         first_die
-00018000: 6c20 3d20 4661 6c73 650a 2020 2020 2020  l = False.      
-00018010: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00018020: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00018030: 2020 2020 2020 2020 2020 2020 6c70 203d              lp =
-00018040: 2063 6f6d 7072 6573 7365 645f 6469 656c   compressed_diel
-00018050: 735b 2d31 5d0a 2020 2020 2020 2020 2020  s[-1].          
-00018060: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00018070: 6d70 7265 7373 6564 5f64 6965 6c73 2e61  mpressed_diels.a
-00018080: 7070 656e 6428 5b6c 695b 305d 2c20 6c70  ppend([li[0], lp
-00018090: 5b32 5d2c 206c 705b 325d 202b 2063 742c  [2], lp[2] + ct,
-000180a0: 2063 745d 290a 0a20 2020 2020 2020 2020   ct])..         
-000180b0: 2020 2020 2020 2064 6566 205f 636f 6e76         def _conv
-000180c0: 6572 745f 656c 6576 6174 696f 6e28 656c  ert_elevation(el
-000180d0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-000180e0: 2020 2020 2020 2069 6e73 6964 6520 3d20         inside = 
-000180f0: 4661 6c73 650a 2020 2020 2020 2020 2020  False.          
-00018100: 2020 2020 2020 2020 2020 666f 7220 692c            for i,
-00018110: 206c 6920 696e 2065 6e75 6d65 7261 7465   li in enumerate
-00018120: 2864 6965 6c65 6374 7269 635f 6c61 7965  (dielectric_laye
-00018130: 7273 293a 0a20 2020 2020 2020 2020 2020  rs):.           
-00018140: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00018150: 6c69 5b31 5d20 3c3d 2065 6c20 3c3d 206c  li[1] <= el <= l
-00018160: 695b 325d 3a0a 2020 2020 2020 2020 2020  i[2]:.          
-00018170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018180: 2020 696e 7369 6465 203d 2054 7275 650a    inside = True.
-00018190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000181a0: 2020 2020 2020 2020 2020 2020 6272 6561              brea
-000181b0: 6b0a 2020 2020 2020 2020 2020 2020 2020  k.              
-000181c0: 2020 2020 2020 6966 2069 6e73 6964 653a        if inside:
-000181d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000181e0: 2020 2020 2020 2020 2075 203d 2028 656c           u = (el
-000181f0: 202d 206c 695b 315d 2920 2f20 286c 695b   - li[1]) / (li[
-00018200: 325d 202d 206c 695b 315d 290a 2020 2020  2] - li[1]).    
-00018210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018220: 2020 2020 636c 6920 3d20 636f 6d70 7265      cli = compre
-00018230: 7373 6564 5f64 6965 6c73 5b69 5d0a 2020  ssed_diels[i].  
-00018240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018250: 2020 2020 2020 6365 6c20 3d20 636c 695b        cel = cli[
-00018260: 315d 202b 2075 202a 2028 636c 695b 325d  1] + u * (cli[2]
-00018270: 202d 2063 6c69 5b31 5d29 0a20 2020 2020   - cli[1]).     
-00018280: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00018290: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-000182a0: 2020 2020 2020 2020 2020 2020 2063 656c               cel
-000182b0: 203d 2065 6c0a 2020 2020 2020 2020 2020   = el.          
-000182c0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-000182d0: 2063 656c 0a0a 2020 2020 2020 2020 2020   cel..          
-000182e0: 2020 2020 2020 636f 6d70 7265 7373 6564        compressed
-000182f0: 5f73 6967 6e61 6c73 203d 205b 5d0a 2020  _signals = [].  
-00018300: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-00018310: 7220 6c69 2069 6e20 7369 676e 616c 5f6c  r li in signal_l
-00018320: 6179 6572 733a 0a20 2020 2020 2020 2020  ayers:.         
-00018330: 2020 2020 2020 2020 2020 2063 6c65 203d             cle =
-00018340: 205f 636f 6e76 6572 745f 656c 6576 6174   _convert_elevat
-00018350: 696f 6e28 6c69 5b31 5d29 0a20 2020 2020  ion(li[1]).     
-00018360: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00018370: 7565 203d 205f 636f 6e76 6572 745f 656c  ue = _convert_el
-00018380: 6576 6174 696f 6e28 6c69 5b32 5d29 0a20  evation(li[2]). 
-00018390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000183a0: 2020 2063 7420 3d20 6375 6520 2d20 636c     ct = cue - cl
-000183b0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-000183c0: 2020 2020 2020 636f 6d70 7265 7373 6564        compressed
-000183d0: 5f73 6967 6e61 6c73 2e61 7070 656e 6428  _signals.append(
-000183e0: 5b6c 695b 305d 2c20 636c 652c 2063 7565  [li[0], cle, cue
-000183f0: 2c20 6374 5d29 0a0a 2020 2020 2020 2020  , ct])..        
-00018400: 2020 2020 2020 2020 6469 656c 6563 7472          dielectr
-00018410: 6963 5f6c 6179 6572 7320 3d20 636f 6d70  ic_layers = comp
-00018420: 7265 7373 6564 5f64 6965 6c73 0a20 2020  ressed_diels.   
-00018430: 2020 2020 2020 2020 2020 2020 2073 6967               sig
-00018440: 6e61 6c5f 6c61 7965 7273 203d 2063 6f6d  nal_layers = com
-00018450: 7072 6573 7365 645f 7369 676e 616c 730a  pressed_signals.
-00018460: 0a20 2020 2020 2020 2023 2063 7265 6174  .        # creat
-00018470: 6520 7468 6520 6461 7461 2066 6f72 2074  e the data for t
-00018480: 6865 2070 6c6f 740a 2020 2020 2020 2020  he plot.        
-00018490: 6469 656c 5f61 6c70 6861 203d 2030 2e34  diel_alpha = 0.4
-000184a0: 0a20 2020 2020 2020 2073 6967 6e61 6c5f  .        signal_
-000184b0: 616c 7068 6120 3d20 302e 360a 2020 2020  alpha = 0.6.    
-000184c0: 2020 2020 7a65 726f 5f74 6869 636b 6e65      zero_thickne
-000184d0: 7373 5f61 6c70 6861 203d 2031 2e30 0a20  ss_alpha = 1.0. 
-000184e0: 2020 2020 2020 2061 6e6e 6f74 6174 696f         annotatio
-000184f0: 6e5f 666f 6e74 7369 7a65 203d 2031 340a  n_fontsize = 14.
-00018500: 2020 2020 2020 2020 616e 6e6f 7461 7469          annotati
-00018510: 6f6e 5f78 5f6d 6172 6769 6e20 3d20 302e  on_x_margin = 0.
-00018520: 3031 0a20 2020 2020 2020 2061 6e6e 6f74  01.        annot
-00018530: 6174 696f 6e73 203d 205b 5d0a 2020 2020  ations = [].    
-00018540: 2020 2020 706c 6f74 5f64 6174 6120 3d20      plot_data = 
-00018550: 5b5d 0a20 2020 2020 2020 2069 6620 7374  [].        if st
-00018560: 6163 6b75 705f 6d6f 6465 203d 3d20 224c  ackup_mode == "L
-00018570: 616d 696e 6174 6522 3a0a 2020 2020 2020  aminate":.      
-00018580: 2020 2020 2020 6d69 6e5f 7468 6963 6b6e        min_thickn
-00018590: 6573 7320 3d20 6d69 6e28 5b69 5b33 5d20  ess = min([i[3] 
-000185a0: 666f 7220 6920 696e 206c 6179 6572 735f  for i in layers_
-000185b0: 6461 7461 2069 6620 695b 335d 2021 3d20  data if i[3] != 
-000185c0: 305d 290a 2020 2020 2020 2020 2020 2020  0]).            
-000185d0: 666f 7220 6c79 2069 6e20 6c61 7965 7273  for ly in layers
-000185e0: 5f64 6174 613a 0a20 2020 2020 2020 2020  _data:.         
-000185f0: 2020 2020 2020 206c 6179 6572 203d 206c         layer = l
-00018600: 795b 305d 0a0a 2020 2020 2020 2020 2020  y[0]..          
-00018610: 2020 2020 2020 2320 7365 7420 636f 6c6f        # set colo
-00018620: 7220 616e 6420 6c61 6265 6c0a 2020 2020  r and label.    
-00018630: 2020 2020 2020 2020 2020 2020 636f 6c6f              colo
-00018640: 7220 3d20 5b66 6c6f 6174 2869 2920 2f20  r = [float(i) / 
-00018650: 3235 3620 666f 7220 6920 696e 206c 6179  256 for i in lay
-00018660: 6572 2e63 6f6c 6f72 5d0a 2020 2020 2020  er.color].      
-00018670: 2020 2020 2020 2020 2020 6966 2063 6f6c            if col
-00018680: 6f72 203d 3d20 5b31 2e30 2c20 312e 302c  or == [1.0, 1.0,
-00018690: 2031 2e30 5d3a 0a20 2020 2020 2020 2020   1.0]:.         
-000186a0: 2020 2020 2020 2020 2020 2063 6f6c 6f72             color
-000186b0: 203d 205b 302e 392c 2030 2e39 2c20 302e   = [0.9, 0.9, 0.
-000186c0: 395d 0a20 2020 2020 2020 2020 2020 2020  9].             
-000186d0: 2020 206c 6162 656c 203d 2022 7b7d 2c20     label = "{}, 
-000186e0: 7b7d 2c20 7468 6963 6b3a 207b 3a2e 3366  {}, thick: {:.3f
-000186f0: 7d75 6d2c 2065 6c65 763a 207b 3a2e 3366  }um, elev: {:.3f
-00018700: 7d75 6d22 2e66 6f72 6d61 7428 0a20 2020  }um".format(.   
-00018710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018720: 206c 6179 6572 2e6e 616d 652c 206c 6179   layer.name, lay
-00018730: 6572 2e6d 6174 6572 6961 6c2c 206c 6179  er.material, lay
-00018740: 6572 2e74 6869 636b 6e65 7373 202a 2031  er.thickness * 1
-00018750: 6536 2c20 6c61 7965 722e 6c6f 7765 725f  e6, layer.lower_
-00018760: 656c 6576 6174 696f 6e20 2a20 3165 360a  elevation * 1e6.
-00018770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018780: 290a 0a20 2020 2020 2020 2020 2020 2020  )..             
-00018790: 2020 2023 2063 7265 6174 6520 7061 7463     # create patc
-000187a0: 680a 2020 2020 2020 2020 2020 2020 2020  h.              
-000187b0: 2020 7820 3d20 5b30 2c20 302c 2031 2c20    x = [0, 0, 1, 
-000187c0: 315d 0a20 2020 2020 2020 2020 2020 2020  1].             
-000187d0: 2020 2069 6620 6c79 5b33 5d20 3e20 303a     if ly[3] > 0:
-000187e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000187f0: 2020 2020 206c 6f77 6572 5f65 6c65 7661       lower_eleva
-00018800: 7469 6f6e 203d 206c 795b 315d 0a20 2020  tion = ly[1].   
-00018810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018820: 2075 7070 6572 5f65 6c65 7661 7469 6f6e   upper_elevation
-00018830: 203d 206c 795b 325d 0a20 2020 2020 2020   = ly[2].       
-00018840: 2020 2020 2020 2020 2020 2020 2079 203d               y =
-00018850: 205b 6c6f 7765 725f 656c 6576 6174 696f   [lower_elevatio
-00018860: 6e2c 2075 7070 6572 5f65 6c65 7661 7469  n, upper_elevati
-00018870: 6f6e 2c20 7570 7065 725f 656c 6576 6174  on, upper_elevat
-00018880: 696f 6e2c 206c 6f77 6572 5f65 6c65 7661  ion, lower_eleva
-00018890: 7469 6f6e 5d0a 2020 2020 2020 2020 2020  tion].          
-000188a0: 2020 2020 2020 2020 2020 706c 6f74 5f64            plot_d
-000188b0: 6174 612e 696e 7365 7274 2830 2c20 5b78  ata.insert(0, [x
-000188c0: 2c20 792c 2063 6f6c 6f72 2c20 6c61 6265  , y, color, labe
-000188d0: 6c2c 2073 6967 6e61 6c5f 616c 7068 612c  l, signal_alpha,
-000188e0: 2022 6669 6c6c 225d 290a 2020 2020 2020   "fill"]).      
-000188f0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00018900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018910: 2020 2020 6c6f 7765 725f 656c 6576 6174      lower_elevat
-00018920: 696f 6e20 3d20 6c79 5b31 5d20 2d20 6d69  ion = ly[1] - mi
-00018930: 6e5f 7468 6963 6b6e 6573 7320 2a20 302e  n_thickness * 0.
-00018940: 3120 2023 206d 616b 6520 7468 6520 7a65  1  # make the ze
-00018950: 726f 2074 6869 636b 6e65 7373 206c 6179  ro thickness lay
-00018960: 6572 7320 6d6f 7265 2076 6973 6962 6c65  ers more visible
-00018970: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018980: 2020 2020 2075 7070 6572 5f65 6c65 7661       upper_eleva
-00018990: 7469 6f6e 203d 206c 795b 325d 202b 206d  tion = ly[2] + m
-000189a0: 696e 5f74 6869 636b 6e65 7373 202a 2030  in_thickness * 0
-000189b0: 2e31 0a20 2020 2020 2020 2020 2020 2020  .1.             
-000189c0: 2020 2020 2020 2079 203d 205b 6c6f 7765         y = [lowe
-000189d0: 725f 656c 6576 6174 696f 6e2c 2075 7070  r_elevation, upp
-000189e0: 6572 5f65 6c65 7661 7469 6f6e 2c20 7570  er_elevation, up
-000189f0: 7065 725f 656c 6576 6174 696f 6e2c 206c  per_elevation, l
-00018a00: 6f77 6572 5f65 6c65 7661 7469 6f6e 5d0a  ower_elevation].
-00018a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018a20: 2020 2020 2320 7075 7420 7468 6520 7a65      # put the ze
-00018a30: 726f 2074 6869 636b 6e65 7373 206c 6179  ro thickness lay
-00018a40: 6572 7320 6f6e 2074 6f70 0a20 2020 2020  ers on top.     
-00018a50: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00018a60: 6c6f 745f 6461 7461 2e61 7070 656e 6428  lot_data.append(
-00018a70: 5b78 2c20 792c 2063 6f6c 6f72 2c20 6c61  [x, y, color, la
-00018a80: 6265 6c2c 207a 6572 6f5f 7468 6963 6b6e  bel, zero_thickn
-00018a90: 6573 735f 616c 7068 612c 2022 6669 6c6c  ess_alpha, "fill
-00018aa0: 225d 290a 0a20 2020 2020 2020 2020 2020  "])..           
-00018ab0: 2020 2020 2023 2063 7265 6174 6520 616e       # create an
-00018ac0: 6e6f 7461 7469 6f6e 0a20 2020 2020 2020  notation.       
-00018ad0: 2020 2020 2020 2020 2079 5f70 6f73 203d           y_pos =
-00018ae0: 2028 6c6f 7765 725f 656c 6576 6174 696f   (lower_elevatio
-00018af0: 6e20 2b20 7570 7065 725f 656c 6576 6174  n + upper_elevat
-00018b00: 696f 6e29 202f 2032 0a20 2020 2020 2020  ion) / 2.       
-00018b10: 2020 2020 2020 2020 2069 6620 6c61 7965           if laye
-00018b20: 722e 7479 7065 203d 3d20 2264 6965 6c65  r.type == "diele
-00018b30: 6374 7269 6322 3a0a 2020 2020 2020 2020  ctric":.        
-00018b40: 2020 2020 2020 2020 2020 2020 785f 706f              x_po
-00018b50: 7320 3d20 2d61 6e6e 6f74 6174 696f 6e5f  s = -annotation_
-00018b60: 785f 6d61 7267 696e 0a20 2020 2020 2020  x_margin.       
-00018b70: 2020 2020 2020 2020 2020 2020 2061 6e6e               ann
-00018b80: 6f74 6174 696f 6e73 2e61 7070 656e 6428  otations.append(
-00018b90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018ba0: 2020 2020 2020 2020 205b 785f 706f 732c           [x_pos,
-00018bb0: 2079 5f70 6f73 2c20 6c61 7965 722e 6e61   y_pos, layer.na
-00018bc0: 6d65 2c20 7b22 666f 6e74 7369 7a65 223a  me, {"fontsize":
-00018bd0: 2061 6e6e 6f74 6174 696f 6e5f 666f 6e74   annotation_font
-00018be0: 7369 7a65 2c20 2268 6f72 697a 6f6e 7461  size, "horizonta
-00018bf0: 6c61 6c69 676e 6d65 6e74 223a 2022 7269  lalignment": "ri
-00018c00: 6768 7422 7d5d 0a20 2020 2020 2020 2020  ght"}].         
-00018c10: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-00018c20: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
-00018c30: 6620 6c61 7965 722e 7479 7065 203d 3d20  f layer.type == 
-00018c40: 2273 6967 6e61 6c22 3a0a 2020 2020 2020  "signal":.      
-00018c50: 2020 2020 2020 2020 2020 2020 2020 785f                x_
-00018c60: 706f 7320 3d20 312e 3020 2b20 616e 6e6f  pos = 1.0 + anno
-00018c70: 7461 7469 6f6e 5f78 5f6d 6172 6769 6e0a  tation_x_margin.
-00018c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018c90: 2020 2020 616e 6e6f 7461 7469 6f6e 732e      annotations.
-00018ca0: 6170 7065 6e64 285b 785f 706f 732c 2079  append([x_pos, y
-00018cb0: 5f70 6f73 2c20 6c61 7965 722e 6e61 6d65  _pos, layer.name
-00018cc0: 2c20 7b22 666f 6e74 7369 7a65 223a 2061  , {"fontsize": a
-00018cd0: 6e6e 6f74 6174 696f 6e5f 666f 6e74 7369  nnotation_fontsi
-00018ce0: 7a65 7d5d 290a 0a20 2020 2020 2020 2020  ze}])..         
-00018cf0: 2020 2023 2065 7661 6c75 6174 6520 7468     # evaluate th
-00018d00: 6520 6c65 6765 6e64 2072 656f 7264 6572  e legend reorder
-00018d10: 0a20 2020 2020 2020 2020 2020 206c 6567  .            leg
-00018d20: 656e 645f 6f72 6465 7220 3d20 5b5d 0a20  end_order = []. 
-00018d30: 2020 2020 2020 2020 2020 2066 6f72 206c             for l
-00018d40: 7920 696e 206c 6179 6572 735f 6461 7461  y in layers_data
-00018d50: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00018d60: 2020 6e61 6d65 203d 206c 795b 305d 2e6e    name = ly[0].n
-00018d70: 616d 650a 2020 2020 2020 2020 2020 2020  ame.            
-00018d80: 2020 2020 666f 7220 692c 2061 2069 6e20      for i, a in 
-00018d90: 656e 756d 6572 6174 6528 706c 6f74 5f64  enumerate(plot_d
-00018da0: 6174 6129 3a0a 2020 2020 2020 2020 2020  ata):.          
-00018db0: 2020 2020 2020 2020 2020 696e 616d 6520            iname 
-00018dc0: 3d20 615b 335d 2e73 706c 6974 2822 2c22  = a[3].split(","
-00018dd0: 295b 305d 0a20 2020 2020 2020 2020 2020  )[0].           
-00018de0: 2020 2020 2020 2020 2069 6620 6e61 6d65           if name
-00018df0: 203d 3d20 696e 616d 653a 0a20 2020 2020   == iname:.     
-00018e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018e10: 2020 206c 6567 656e 645f 6f72 6465 722e     legend_order.
-00018e20: 6170 7065 6e64 2869 290a 2020 2020 2020  append(i).      
-00018e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018e40: 2020 6272 6561 6b0a 0a20 2020 2020 2020    break..       
-00018e50: 2065 6c69 6620 7374 6163 6b75 705f 6d6f   elif stackup_mo
-00018e60: 6465 203d 3d20 224f 7665 726c 6170 7069  de == "Overlappi
-00018e70: 6e67 223a 0a20 2020 2020 2020 2020 2020  ng":.           
-00018e80: 206d 696e 5f74 6869 636b 6e65 7373 203d   min_thickness =
-00018e90: 206d 696e 285b 695b 335d 2066 6f72 2069   min([i[3] for i
-00018ea0: 2069 6e20 7369 676e 616c 5f6c 6179 6572   in signal_layer
-00018eb0: 7320 6966 2069 5b33 5d20 213d 2030 5d29  s if i[3] != 0])
-00018ec0: 0a20 2020 2020 2020 2020 2020 2063 6f6c  .            col
-00018ed0: 756d 6e73 203d 205b 5d20 2023 2066 6972  umns = []  # fir
-00018ee0: 7374 2063 6f6c 756d 6e20 6973 2078 3d5b  st column is x=[
-00018ef0: 302c 315d 2c20 7365 636f 6e64 2063 6f6c  0,1], second col
-00018f00: 756d 6e20 6973 2078 3d5b 312c 325d 2061  umn is x=[1,2] a
-00018f10: 6e64 2073 6f20 6f6e 2e2e 2e0a 2020 2020  nd so on....    
-00018f20: 2020 2020 2020 2020 666f 7220 6c79 2069          for ly i
-00018f30: 6e20 7369 676e 616c 5f6c 6179 6572 733a  n signal_layers:
-00018f40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018f50: 206c 6f77 6572 5f65 6c65 7661 7469 6f6e   lower_elevation
-00018f60: 203d 206c 795b 315d 2020 2320 6c6f 7765   = ly[1]  # lowe
-00018f70: 7220 656c 6576 6174 696f 6e0a 2020 2020  r elevation.    
-00018f80: 2020 2020 2020 2020 2020 2020 7420 3d20              t = 
-00018f90: 6c79 5b33 5d20 2023 2074 6869 636b 6e65  ly[3]  # thickne
-00018fa0: 7373 0a20 2020 2020 2020 2020 2020 2020  ss.             
-00018fb0: 2020 2070 7574 5f69 6e5f 636f 6c75 6d6e     put_in_column
-00018fc0: 203d 2030 0a20 2020 2020 2020 2020 2020   = 0.           
-00018fd0: 2020 2020 2063 656c 6c5f 706f 7369 7469       cell_positi
-00018fe0: 6f6e 203d 2030 0a20 2020 2020 2020 2020  on = 0.         
-00018ff0: 2020 2020 2020 2066 6f72 2063 2069 6e20         for c in 
-00019000: 636f 6c75 6d6e 733a 0a20 2020 2020 2020  columns:.       
-00019010: 2020 2020 2020 2020 2020 2020 2075 6570               uep
-00019020: 203d 2063 5b2d 315d 5b30 5d5b 325d 2020   = c[-1][0][2]  
-00019030: 2320 7570 7065 7220 656c 6576 6174 696f  # upper elevatio
-00019040: 6e20 6f66 2074 6865 206c 6173 7420 656e  n of the last en
-00019050: 7472 7920 6f66 2074 6861 7420 636f 6c75  try of that colu
-00019060: 6d6e 0a20 2020 2020 2020 2020 2020 2020  mn.             
-00019070: 2020 2020 2020 2074 7020 3d20 635b 2d31         tp = c[-1
-00019080: 5d5b 305d 5b33 5d20 2023 2074 6869 636b  ][0][3]  # thick
-00019090: 6e65 7373 206f 6620 7468 6520 6c61 7374  ness of the last
-000190a0: 2065 6e74 7279 206f 6620 7468 6174 2063   entry of that c
-000190b0: 6f6c 756d 6e0a 2020 2020 2020 2020 2020  olumn.          
-000190c0: 2020 2020 2020 2020 2020 6966 206c 6f77            if low
-000190d0: 6572 5f65 6c65 7661 7469 6f6e 203c 2075  er_elevation < u
-000190e0: 6570 206f 7220 2861 6273 286c 6f77 6572  ep or (abs(lower
-000190f0: 5f65 6c65 7661 7469 6f6e 202d 2075 6570  _elevation - uep
-00019100: 2920 3c20 3165 2d31 3520 616e 6420 7470  ) < 1e-15 and tp
-00019110: 203d 3d20 3020 616e 6420 7420 3d3d 2030   == 0 and t == 0
-00019120: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00019130: 2020 2020 2020 2020 2020 2070 7574 5f69             put_i
-00019140: 6e5f 636f 6c75 6d6e 202b 3d20 310a 2020  n_column += 1.  
-00019150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019160: 2020 2020 2020 6365 6c6c 5f70 6f73 6974        cell_posit
-00019170: 696f 6e20 3d20 6c65 6e28 6329 0a20 2020  ion = len(c).   
-00019180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019190: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-000191a0: 2020 2020 2020 2020 2020 2020 2020 2062                 b
-000191b0: 7265 616b 0a20 2020 2020 2020 2020 2020  reak.           
-000191c0: 2020 2020 2069 6620 6c65 6e28 636f 6c75       if len(colu
-000191d0: 6d6e 7329 203c 2070 7574 5f69 6e5f 636f  mns) < put_in_co
-000191e0: 6c75 6d6e 202b 2031 3a20 2023 2061 6464  lumn + 1:  # add
-000191f0: 2061 206e 6577 2063 6f6c 756d 6e20 6966   a new column if
-00019200: 2072 6571 7569 7265 640a 2020 2020 2020   required.      
-00019210: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00019220: 6c75 6d6e 732e 6170 7065 6e64 285b 5d29  lumns.append([])
-00019230: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019240: 2023 2070 7574 207a 6572 6f73 2061 7420   # put zeros at 
-00019250: 7468 6520 6265 6769 6e6e 696e 6720 6f66  the beginning of
-00019260: 2074 6865 2063 6f6c 756d 6e20 756e 7469   the column unti
-00019270: 6c20 7468 6572 6520 6973 2074 6865 2066  l there is the f
-00019280: 6972 7374 206c 6179 6572 0a20 2020 2020  irst layer.     
-00019290: 2020 2020 2020 2020 2020 2069 6620 6365             if ce
-000192a0: 6c6c 5f70 6f73 6974 696f 6e20 213d 2030  ll_position != 0
-000192b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000192c0: 2020 2020 2020 6669 6c6c 5f63 656c 6c73        fill_cells
-000192d0: 203d 2063 656c 6c5f 706f 7369 7469 6f6e   = cell_position
-000192e0: 202d 2031 202d 206c 656e 2863 6f6c 756d   - 1 - len(colum
-000192f0: 6e73 5b70 7574 5f69 6e5f 636f 6c75 6d6e  ns[put_in_column
-00019300: 5d29 0a20 2020 2020 2020 2020 2020 2020  ]).             
-00019310: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-00019320: 7261 6e67 6528 6669 6c6c 5f63 656c 6c73  range(fill_cells
-00019330: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00019340: 2020 2020 2020 2020 2020 2063 6f6c 756d             colum
-00019350: 6e73 5b70 7574 5f69 6e5f 636f 6c75 6d6e  ns[put_in_column
-00019360: 5d2e 6170 7065 6e64 2830 290a 2020 2020  ].append(0).    
-00019370: 2020 2020 2020 2020 2020 2020 2320 6170              # ap
-00019380: 7065 6e64 2074 6865 206c 6179 6572 2074  pend the layer t
-00019390: 6f20 7468 6520 7072 6f70 6572 2063 6f6c  o the proper col
-000193a0: 756d 6e20 616e 6420 726f 770a 2020 2020  umn and row.    
-000193b0: 2020 2020 2020 2020 2020 2020 7820 3d20              x = 
-000193c0: 5b70 7574 5f69 6e5f 636f 6c75 6d6e 202b  [put_in_column +
-000193d0: 2031 2c20 7075 745f 696e 5f63 6f6c 756d   1, put_in_colum
-000193e0: 6e20 2b20 312c 2070 7574 5f69 6e5f 636f  n + 1, put_in_co
-000193f0: 6c75 6d6e 202b 2032 2c20 7075 745f 696e  lumn + 2, put_in
-00019400: 5f63 6f6c 756d 6e20 2b20 325d 0a20 2020  _column + 2].   
-00019410: 2020 2020 2020 2020 2020 2020 2063 6f6c               col
-00019420: 756d 6e73 5b70 7574 5f69 6e5f 636f 6c75  umns[put_in_colu
-00019430: 6d6e 5d2e 6170 7065 6e64 285b 6c79 2c20  mn].append([ly, 
-00019440: 785d 290a 0a20 2020 2020 2020 2020 2020  x])..           
-00019450: 2023 2066 696c 6c20 7468 6520 636f 6c75   # fill the colu
-00019460: 6d6e 7320 6d61 7472 6978 2077 6974 6820  mns matrix with 
-00019470: 7a65 726f 7320 6f6e 2074 6f70 0a20 2020  zeros on top.   
-00019480: 2020 2020 2020 2020 206e 5f72 6f77 7320           n_rows 
-00019490: 3d20 6d61 7828 5b6c 656e 2869 2920 666f  = max([len(i) fo
-000194a0: 7220 6920 696e 2063 6f6c 756d 6e73 5d29  r i in columns])
-000194b0: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-000194c0: 2063 2069 6e20 636f 6c75 6d6e 733a 0a20   c in columns:. 
-000194d0: 2020 2020 2020 2020 2020 2020 2020 2077                 w
-000194e0: 6869 6c65 206c 656e 2863 2920 3c20 6e5f  hile len(c) < n_
-000194f0: 726f 7773 3a0a 2020 2020 2020 2020 2020  rows:.          
-00019500: 2020 2020 2020 2020 2020 632e 6170 7065            c.appe
-00019510: 6e64 2830 290a 2020 2020 2020 2020 2020  nd(0).          
-00019520: 2020 2320 6578 7061 6e64 2074 6f20 7468    # expand to th
-00019530: 6520 7269 6768 7420 7468 6520 6669 6c6c  e right the fill
-00019540: 2066 6f72 2074 6865 2073 6967 6e61 6c73   for the signals
-00019550: 2074 6861 7420 6861 7665 206e 6f20 6f76   that have no ov
-00019560: 6572 6c61 7020 6f6e 2074 6865 2072 6967  erlap on the rig
-00019570: 6874 0a20 2020 2020 2020 2020 2020 2077  ht.            w
-00019580: 6964 7468 203d 206c 656e 2863 6f6c 756d  idth = len(colum
-00019590: 6e73 2920 2b20 310a 2020 2020 2020 2020  ns) + 1.        
-000195a0: 2020 2020 666f 7220 692c 2063 2069 6e20      for i, c in 
-000195b0: 656e 756d 6572 6174 6528 636f 6c75 6d6e  enumerate(column
-000195c0: 735b 3a2d 315d 293a 0a20 2020 2020 2020  s[:-1]):.       
-000195d0: 2020 2020 2020 2020 2066 6f72 206a 2c20           for j, 
-000195e0: 7220 696e 2065 6e75 6d65 7261 7465 2863  r in enumerate(c
-000195f0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00019600: 2020 2020 2020 2069 6620 7220 213d 2030         if r != 0
-00019610: 3a20 2023 2061 6e64 2064 6e61 6d65 203d  :  # and dname =
-00019620: 3d20 725b 305d 2e6e 616d 653a 0a20 2020  = r[0].name:.   
-00019630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019640: 2020 2020 2069 6620 636f 6c75 6d6e 735b       if columns[
-00019650: 6920 2b20 315d 5b6a 5d20 3d3d 2030 3a0a  i + 1][j] == 0:.
-00019660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019670: 2020 2020 2020 2020 2020 2020 2320 6e6f              # no
-00019680: 7468 696e 6720 6f6e 2074 6865 2072 6967  thing on the rig
-00019690: 6874 2c20 736f 2065 7870 616e 6420 7468  ht, so expand th
-000196a0: 6520 6669 6c6c 0a20 2020 2020 2020 2020  e fill.         
-000196b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000196c0: 2020 2078 203d 2072 5b31 5d0a 2020 2020     x = r[1].    
-000196d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000196e0: 2020 2020 2020 2020 725b 315d 203d 205b          r[1] = [
-000196f0: 785b 305d 2c20 785b 305d 2c20 7769 6474  x[0], x[0], widt
-00019700: 682c 2077 6964 7468 5d0a 0a20 2020 2020  h, width]..     
-00019710: 2020 2020 2020 2066 6f72 2063 2069 6e20         for c in 
-00019720: 636f 6c75 6d6e 733a 0a20 2020 2020 2020  columns:.       
-00019730: 2020 2020 2020 2020 2066 6f72 2072 2069           for r i
-00019740: 6e20 633a 0a20 2020 2020 2020 2020 2020  n c:.           
-00019750: 2020 2020 2020 2020 2069 6620 7220 213d           if r !=
-00019760: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
-00019770: 2020 2020 2020 2020 2020 2020 6c79 203d              ly =
-00019780: 2072 5b30 5d0a 2020 2020 2020 2020 2020   r[0].          
-00019790: 2020 2020 2020 2020 2020 2020 2020 6c61                la
-000197a0: 7965 7220 3d20 6c79 5b30 5d0a 2020 2020  yer = ly[0].    
-000197b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000197c0: 2020 2020 7820 3d20 725b 315d 0a0a 2020      x = r[1]..  
-000197d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000197e0: 2020 2020 2020 2320 7365 7420 636f 6c6f        # set colo
-000197f0: 7220 616e 6420 6c61 6265 6c0a 2020 2020  r and label.    
+00014cb0: 2022 526f 7567 686e 6573 7322 3a20 6d6f   "Roughness": mo
+00014cc0: 6465 6c2e 6765 745f 526f 7567 686e 6573  del.get_Roughnes
+00014cd0: 7328 292e 546f 446f 7562 6c65 2829 0a20  s().ToDouble(). 
+00014ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014cf0: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
+00014d00: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00014d10: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00014d20: 6f75 6768 6e65 7373 5f6d 6f64 656c 735b  oughness_models[
+00014d30: 6e61 6d65 5d5b 2248 7572 6179 5369 6465  name]["HuraySide
+00014d40: 5375 7266 6163 6552 6f75 6768 6e65 7373  SurfaceRoughness
+00014d50: 225d 203d 207b 0a20 2020 2020 2020 2020  "] = {.         
+00014d60: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00014d70: 4861 6c6c 4875 7261 7953 7572 6661 6365  HallHuraySurface
+00014d80: 5261 7469 6f22 3a20 6d6f 6465 6c2e 6765  Ratio": model.ge
+00014d90: 745f 4e6f 6475 6c65 5261 6469 7573 2829  t_NoduleRadius()
+00014da0: 2e54 6f44 6f75 626c 6528 292c 0a20 2020  .ToDouble(),.   
+00014db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014dc0: 2020 2020 2022 4e6f 6475 6c65 5261 6469       "NoduleRadi
+00014dd0: 7573 223a 206d 6f64 656c 2e67 6574 5f53  us": model.get_S
+00014de0: 7572 6661 6365 5261 7469 6f28 292e 546f  urfaceRatio().To
+00014df0: 446f 7562 6c65 2829 2c0a 2020 2020 2020  Double(),.      
+00014e00: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
+00014e10: 0a20 2020 2020 2020 206e 6f6e 5f73 7461  .        non_sta
+00014e20: 636b 7570 5f6c 6179 6572 7320 3d20 4f72  ckup_layers = Or
+00014e30: 6465 7265 6444 6963 7428 290a 2020 2020  deredDict().    
+00014e40: 2020 2020 666f 7220 6e61 6d65 2c20 7661      for name, va
+00014e50: 6c20 696e 2073 656c 662e 6e6f 6e5f 7374  l in self.non_st
+00014e60: 6163 6b75 705f 6c61 7965 7273 2e69 7465  ackup_layers.ite
+00014e70: 6d73 2829 3a0a 2020 2020 2020 2020 2020  ms():.          
+00014e80: 2020 6c61 7965 7220 3d20 6469 6374 2829    layer = dict()
+00014e90: 0a20 2020 2020 2020 2020 2020 206c 6179  .            lay
+00014ea0: 6572 5b22 4e61 6d65 225d 203d 2076 616c  er["Name"] = val
+00014eb0: 2e6e 616d 650a 2020 2020 2020 2020 2020  .name.          
+00014ec0: 2020 6c61 7965 725b 2254 7970 6522 5d20    layer["Type"] 
+00014ed0: 3d20 7661 6c2e 7479 7065 0a20 2020 2020  = val.type.     
+00014ee0: 2020 2020 2020 206e 6f6e 5f73 7461 636b         non_stack
+00014ef0: 7570 5f6c 6179 6572 735b 6e61 6d65 5d20  up_layers[name] 
+00014f00: 3d20 6c61 7965 720a 0a20 2020 2020 2020  = layer..       
+00014f10: 206d 6174 6572 6961 6c73 203d 207b 7d0a   materials = {}.
+00014f20: 2020 2020 2020 2020 666f 7220 6e61 6d65          for name
+00014f30: 2c20 7661 6c20 696e 2073 656c 662e 5f70  , val in self._p
+00014f40: 6564 622e 6d61 7465 7269 616c 732e 6d61  edb.materials.ma
+00014f50: 7465 7269 616c 732e 6974 656d 7328 293a  terials.items():
+00014f60: 0a20 2020 2020 2020 2020 2020 206d 6174  .            mat
+00014f70: 6572 6961 6c20 3d20 7b7d 0a20 2020 2020  erial = {}.     
+00014f80: 2020 2020 2020 2069 6620 7661 6c2e 636f         if val.co
+00014f90: 6e64 7563 7469 7669 7479 3a0a 2020 2020  nductivity:.    
+00014fa0: 2020 2020 2020 2020 2020 2020 6966 2076              if v
+00014fb0: 616c 2e63 6f6e 6475 6374 6976 6974 7920  al.conductivity 
+00014fc0: 3e20 3465 373a 0a20 2020 2020 2020 2020  > 4e7:.         
+00014fd0: 2020 2020 2020 2020 2020 206d 6174 6572             mater
+00014fe0: 6961 6c5b 2243 6f6e 6475 6374 6976 6974  ial["Conductivit
+00014ff0: 7922 5d20 3d20 7661 6c2e 636f 6e64 7563  y"] = val.conduc
+00015000: 7469 7669 7479 0a20 2020 2020 2020 2020  tivity.         
+00015010: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00015020: 2020 2020 2020 2020 206d 6174 6572 6961           materia
+00015030: 6c5b 2250 6572 6d69 7474 6976 6974 7922  l["Permittivity"
+00015040: 5d20 3d20 7661 6c2e 7065 726d 6974 7469  ] = val.permitti
+00015050: 7669 7479 0a20 2020 2020 2020 2020 2020  vity.           
+00015060: 2020 2020 206d 6174 6572 6961 6c5b 2244       material["D
+00015070: 6965 6c65 6374 7269 634c 6f73 7354 616e  ielectricLossTan
+00015080: 6765 6e74 225d 203d 2076 616c 2e64 6965  gent"] = val.die
+00015090: 6c65 6374 7269 635f 6c6f 7373 5f74 616e  lectric_loss_tan
+000150a0: 6765 6e74 0a20 2020 2020 2020 2020 2020  gent.           
+000150b0: 206d 6174 6572 6961 6c73 5b6e 616d 655d   materials[name]
+000150c0: 203d 206d 6174 6572 6961 6c0a 0a20 2020   = material..   
+000150d0: 2020 2020 2072 6574 7572 6e20 6c61 7965       return laye
+000150e0: 7273 2c20 6d61 7465 7269 616c 732c 2072  rs, materials, r
+000150f0: 6f75 6768 6e65 7373 5f6d 6f64 656c 732c  oughness_models,
+00015100: 206e 6f6e 5f73 7461 636b 7570 5f6c 6179   non_stackup_lay
+00015110: 6572 730a 0a20 2020 2040 7079 6564 625f  ers..    @pyedb_
+00015120: 6675 6e63 7469 6f6e 5f68 616e 646c 6572  function_handler
+00015130: 2829 0a20 2020 2064 6566 205f 6164 645f  ().    def _add_
+00015140: 6d61 7465 7269 616c 735f 6672 6f6d 5f64  materials_from_d
+00015150: 6963 7469 6f6e 6172 7928 7365 6c66 2c20  ictionary(self, 
+00015160: 6d61 7465 7269 616c 5f64 6963 7429 3a0a  material_dict):.
+00015170: 2020 2020 2020 2020 6d61 7465 7269 616c          material
+00015180: 7320 3d20 7365 6c66 2e73 656c 662e 5f70  s = self.self._p
+00015190: 6564 622e 6d61 7465 7269 616c 732e 6d61  edb.materials.ma
+000151a0: 7465 7269 616c 730a 2020 2020 2020 2020  terials.        
+000151b0: 666f 7220 6e61 6d65 2c20 6d61 7465 7269  for name, materi
+000151c0: 616c 5f70 726f 7065 7274 6965 7320 696e  al_properties in
+000151d0: 206d 6174 6572 6961 6c5f 6469 6374 2e69   material_dict.i
+000151e0: 7465 6d73 2829 3a0a 2020 2020 2020 2020  tems():.        
+000151f0: 2020 2020 6966 206e 6f74 206e 616d 6520      if not name 
+00015200: 696e 206d 6174 6572 6961 6c73 3a0a 2020  in materials:.  
+00015210: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00015220: 2022 436f 6e64 7563 7469 7669 7479 2220   "Conductivity" 
+00015230: 696e 206d 6174 6572 6961 6c5f 7072 6f70  in material_prop
+00015240: 6572 7469 6573 3a0a 2020 2020 2020 2020  erties:.        
+00015250: 2020 2020 2020 2020 2020 2020 6d61 7465              mate
+00015260: 7269 616c 732e 6164 645f 636f 6e64 7563  rials.add_conduc
+00015270: 746f 725f 6d61 7465 7269 616c 286e 616d  tor_material(nam
+00015280: 652c 206d 6174 6572 6961 6c5f 7072 6f70  e, material_prop
+00015290: 6572 7469 6573 5b22 436f 6e64 7563 7469  erties["Conducti
+000152a0: 7669 7479 225d 290a 2020 2020 2020 2020  vity"]).        
+000152b0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+000152c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000152d0: 2020 6d61 7465 7269 616c 732e 6164 645f    materials.add_
+000152e0: 6469 656c 6563 7472 6963 5f6d 6174 6572  dielectric_mater
+000152f0: 6961 6c28 0a20 2020 2020 2020 2020 2020  ial(.           
+00015300: 2020 2020 2020 2020 2020 2020 206e 616d               nam
+00015310: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
+00015320: 2020 2020 2020 2020 2020 206d 6174 6572             mater
+00015330: 6961 6c5f 7072 6f70 6572 7469 6573 5b22  ial_properties["
+00015340: 5065 726d 6974 7469 7669 7479 225d 2c0a  Permittivity"],.
+00015350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015360: 2020 2020 2020 2020 6d61 7465 7269 616c          material
+00015370: 5f70 726f 7065 7274 6965 735b 2244 6965  _properties["Die
+00015380: 6c65 6374 7269 634c 6f73 7354 616e 6765  lectricLossTange
+00015390: 6e74 225d 2c0a 2020 2020 2020 2020 2020  nt"],.          
+000153a0: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+000153b0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+000153c0: 2020 2020 2020 2020 2020 2020 2020 6d61                ma
+000153d0: 7465 7269 616c 203d 206d 6174 6572 6961  terial = materia
+000153e0: 6c73 5b6e 616d 655d 0a20 2020 2020 2020  ls[name].       
+000153f0: 2020 2020 2020 2020 2069 6620 2243 6f6e           if "Con
+00015400: 6475 6374 6976 6974 7922 2069 6e20 6d61  ductivity" in ma
+00015410: 7465 7269 616c 5f70 726f 7065 7274 6965  terial_propertie
+00015420: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
+00015430: 2020 2020 2020 206d 6174 6572 6961 6c2e         material.
+00015440: 636f 6e64 7563 7469 7669 7479 203d 206d  conductivity = m
+00015450: 6174 6572 6961 6c5f 7072 6f70 6572 7469  aterial_properti
+00015460: 6573 5b22 436f 6e64 7563 7469 7669 7479  es["Conductivity
+00015470: 225d 0a20 2020 2020 2020 2020 2020 2020  "].             
+00015480: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00015490: 2020 2020 2020 2020 2020 2020 206d 6174               mat
+000154a0: 6572 6961 6c2e 7065 726d 6974 7469 7669  erial.permittivi
+000154b0: 7479 203d 206d 6174 6572 6961 6c5f 7072  ty = material_pr
+000154c0: 6f70 6572 7469 6573 5b22 5065 726d 6974  operties["Permit
+000154d0: 7469 7669 7479 225d 0a20 2020 2020 2020  tivity"].       
+000154e0: 2020 2020 2020 2020 2020 2020 206d 6174               mat
+000154f0: 6572 6961 6c2e 6c6f 7373 5f74 616e 6765  erial.loss_tange
+00015500: 7420 3d20 6d61 7465 7269 616c 5f70 726f  t = material_pro
+00015510: 7065 7274 6965 735b 2244 6965 6c65 6374  perties["Dielect
+00015520: 7269 634c 6f73 7354 616e 6765 6e74 225d  ricLossTangent"]
+00015530: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00015540: 5472 7565 0a0a 2020 2020 4070 7965 6462  True..    @pyedb
+00015550: 5f66 756e 6374 696f 6e5f 6861 6e64 6c65  _function_handle
+00015560: 7228 290a 2020 2020 6465 6620 5f69 6d70  r().    def _imp
+00015570: 6f72 745f 786d 6c28 7365 6c66 2c20 6669  ort_xml(self, fi
+00015580: 6c65 5f70 6174 682c 2072 656e 616d 653d  le_path, rename=
+00015590: 4661 6c73 6529 3a0a 2020 2020 2020 2020  False):.        
+000155a0: 2222 2252 6561 6420 6578 7465 726e 616c  """Read external
+000155b0: 2078 6d6c 2066 696c 6520 616e 6420 636f   xml file and co
+000155c0: 6e76 6572 7420 696e 746f 206a 736f 6e20  nvert into json 
+000155d0: 6669 6c65 2e0a 2020 2020 2020 2020 596f  file..        Yo
+000155e0: 7520 6361 6e20 7573 6520 786d 6c20 6669  u can use xml fi
+000155f0: 6c65 2074 6f20 696d 706f 7274 206c 6179  le to import lay
+00015600: 6572 2073 7461 636b 7570 2062 7574 2075  er stackup but u
+00015610: 7369 6e67 206a 736f 6e20 6669 6c65 2069  sing json file i
+00015620: 7320 7265 636f 6d6d 656e 6465 642e 0a20  s recommended.. 
+00015630: 2020 2020 2020 2073 6565 203a 636c 6173         see :clas
+00015640: 733a 6070 7965 6462 2e64 6f74 6e65 742e  s:`pyedb.dotnet.
+00015650: 6564 625f 636f 7265 2e65 6462 5f64 6174  edb_core.edb_dat
+00015660: 612e 7369 6d75 6c61 7469 6f6e 5f63 6f6e  a.simulation_con
+00015670: 6669 6775 7261 7469 6f6e 2e53 696d 756c  figuration.Simul
+00015680: 6174 696f 6e43 6f6e 6669 6775 7261 7469  ationConfigurati
+00015690: 6f6e c2b4 2063 6c61 7373 2074 6f0a 2020  on.. class to.  
+000156a0: 2020 2020 2020 6765 6e65 7261 7465 2066        generate f
+000156b0: 696c 6573 602e 0a0a 2020 2020 2020 2020  iles`...        
+000156c0: 5061 7261 6d65 7465 7273 0a20 2020 2020  Parameters.     
+000156d0: 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0a 2020     ----------.  
+000156e0: 2020 2020 2020 6669 6c65 5f70 6174 683a        file_path:
+000156f0: 2073 7472 0a20 2020 2020 2020 2020 2020   str.           
+00015700: 2050 6174 6820 746f 2065 7874 6572 6e61   Path to externa
+00015710: 6c20 584d 4c20 6669 6c65 2e0a 0a20 2020  l XML file...   
+00015720: 2020 2020 2052 6574 7572 6e73 0a20 2020       Returns.   
+00015730: 2020 2020 202d 2d2d 2d2d 2d2d 0a20 2020       -------.   
+00015740: 2020 2020 2062 6f6f 6c0a 2020 2020 2020       bool.      
+00015750: 2020 2020 2020 6060 5472 7565 6060 2077        ``True`` w
+00015760: 6865 6e20 7375 6363 6573 7366 756c 2c20  hen successful, 
+00015770: 6060 4661 6c73 6560 6020 7768 656e 2066  ``False`` when f
+00015780: 6169 6c65 642e 0a20 2020 2020 2020 2022  ailed..        "
+00015790: 2222 0a20 2020 2020 2020 2069 6620 6e6f  "".        if no
+000157a0: 7420 636f 6c6f 7273 3a0a 2020 2020 2020  t colors:.      
+000157b0: 2020 2020 2020 7365 6c66 2e5f 7065 6462        self._pedb
+000157c0: 2e6c 6f67 6765 722e 6572 726f 7228 224d  .logger.error("M
+000157d0: 6174 706c 6f74 6c69 6220 6973 206e 6565  atplotlib is nee
+000157e0: 6465 642e 2050 6c65 6173 652c 2069 6e73  ded. Please, ins
+000157f0: 7461 6c6c 2069 7420 6669 7273 742e 2229  tall it first.")
+00015800: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00015810: 7572 6e20 4661 6c73 650a 2020 2020 2020  urn False.      
+00015820: 2020 7472 6565 203d 2045 542e 7061 7273    tree = ET.pars
+00015830: 6528 6669 6c65 5f70 6174 6829 0a20 2020  e(file_path).   
+00015840: 2020 2020 2072 6f6f 7420 3d20 7472 6565       root = tree
+00015850: 2e67 6574 726f 6f74 2829 0a20 2020 2020  .getroot().     
+00015860: 2020 2073 7461 636b 7570 203d 2072 6f6f     stackup = roo
+00015870: 742e 6669 6e64 2822 5374 6163 6b75 7022  t.find("Stackup"
+00015880: 290a 2020 2020 2020 2020 7374 6163 6b75  ).        stacku
+00015890: 705f 6469 6374 203d 207b 7d0a 2020 2020  p_dict = {}.    
+000158a0: 2020 2020 6966 2073 7461 636b 7570 2e66      if stackup.f
+000158b0: 696e 6428 224d 6174 6572 6961 6c73 2229  ind("Materials")
+000158c0: 3a0a 2020 2020 2020 2020 2020 2020 7374  :.            st
+000158d0: 6163 6b75 705f 6469 6374 5b22 6d61 7465  ackup_dict["mate
+000158e0: 7269 616c 7322 5d20 3d20 7b7d 0a20 2020  rials"] = {}.   
+000158f0: 2020 2020 2020 2020 2066 6f72 206d 2069           for m i
+00015900: 6e20 7374 6163 6b75 702e 6669 6e64 2822  n stackup.find("
+00015910: 4d61 7465 7269 616c 7322 292e 6669 6e64  Materials").find
+00015920: 616c 6c28 224d 6174 6572 6961 6c22 293a  all("Material"):
+00015930: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00015940: 206d 6174 6572 6961 6c20 3d20 7b22 6e61   material = {"na
+00015950: 6d65 223a 206d 2e61 7474 7269 625b 224e  me": m.attrib["N
+00015960: 616d 6522 5d7d 0a20 2020 2020 2020 2020  ame"]}.         
+00015970: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
+00015980: 6c69 7374 286d 293a 0a20 2020 2020 2020  list(m):.       
+00015990: 2020 2020 2020 2020 2020 2020 206d 6174               mat
+000159a0: 6572 6961 6c5b 692e 7461 672e 6c6f 7765  erial[i.tag.lowe
+000159b0: 7228 295d 203d 2066 6c6f 6174 286c 6973  r()] = float(lis
+000159c0: 7428 6929 5b30 5d2e 7465 7874 290a 2020  t(i)[0].text).  
+000159d0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000159e0: 206d 6174 6572 6961 6c3a 0a20 2020 2020   material:.     
+000159f0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00015a00: 7461 636b 7570 5f64 6963 745b 226d 6174  tackup_dict["mat
+00015a10: 6572 6961 6c73 225d 5b6d 6174 6572 6961  erials"][materia
+00015a20: 6c5b 226e 616d 6522 5d5d 203d 206d 6174  l["name"]] = mat
+00015a30: 6572 6961 6c0a 2020 2020 2020 2020 7374  erial.        st
+00015a40: 6163 6b75 705f 7365 6374 696f 6e20 3d20  ackup_section = 
+00015a50: 7374 6163 6b75 702e 6669 6e64 2822 4c61  stackup.find("La
+00015a60: 7965 7273 2229 0a20 2020 2020 2020 2069  yers").        i
+00015a70: 6620 7374 6163 6b75 705f 7365 6374 696f  f stackup_sectio
+00015a80: 6e3a 0a20 2020 2020 2020 2020 2020 206c  n:.            l
+00015a90: 656e 6774 685f 756e 6974 203d 2073 7461  ength_unit = sta
+00015aa0: 636b 7570 5f73 6563 7469 6f6e 2e61 7474  ckup_section.att
+00015ab0: 7269 625b 224c 656e 6774 6855 6e69 7422  rib["LengthUnit"
+00015ac0: 5d0a 2020 2020 2020 2020 2020 2020 7374  ].            st
+00015ad0: 6163 6b75 705f 6469 6374 5b22 6c61 7965  ackup_dict["laye
+00015ae0: 7273 225d 203d 207b 7d0a 2020 2020 2020  rs"] = {}.      
+00015af0: 2020 2020 2020 666f 7220 6c20 696e 2073        for l in s
+00015b00: 7461 636b 7570 2e66 696e 6428 224c 6179  tackup.find("Lay
+00015b10: 6572 7322 292e 6669 6e64 616c 6c28 224c  ers").findall("L
+00015b20: 6179 6572 2229 3a0a 2020 2020 2020 2020  ayer"):.        
+00015b30: 2020 2020 2020 2020 6c61 7965 7220 3d20          layer = 
+00015b40: 7b22 6e61 6d65 223a 206c 2e61 7474 7269  {"name": l.attri
+00015b50: 625b 224e 616d 6522 5d7d 0a20 2020 2020  b["Name"]}.     
+00015b60: 2020 2020 2020 2020 2020 2066 6f72 206b             for k
+00015b70: 2c20 7620 696e 206c 2e61 7474 7269 622e  , v in l.attrib.
+00015b80: 6974 656d 7328 293a 0a20 2020 2020 2020  items():.       
+00015b90: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00015ba0: 6b20 3d3d 2022 436f 6c6f 7222 3a0a 2020  k == "Color":.  
+00015bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015bc0: 2020 2020 2020 6c61 7965 725b 6b2e 6c6f        layer[k.lo
+00015bd0: 7765 7228 295d 203d 205b 696e 7428 7820  wer()] = [int(x 
+00015be0: 2a20 3235 3529 2066 6f72 2078 2069 6e20  * 255) for x in 
+00015bf0: 6c69 7374 2863 6f6c 6f72 732e 746f 5f72  list(colors.to_r
+00015c00: 6762 2876 2929 5d0a 2020 2020 2020 2020  gb(v))].        
+00015c10: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+00015c20: 206b 203d 3d20 2254 6869 636b 6e65 7373   k == "Thickness
+00015c30: 223a 0a20 2020 2020 2020 2020 2020 2020  ":.             
+00015c40: 2020 2020 2020 2020 2020 206c 6179 6572             layer
+00015c50: 5b6b 2e6c 6f77 6572 2829 5d20 3d20 7620  [k.lower()] = v 
+00015c60: 2b20 6c65 6e67 7468 5f75 6e69 740a 2020  + length_unit.  
+00015c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015c80: 2020 656c 6966 2076 203d 3d20 2263 6f6e    elif v == "con
+00015c90: 6475 6374 6f72 223a 0a20 2020 2020 2020  ductor":.       
+00015ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015cb0: 206c 6179 6572 5b6b 2e6c 6f77 6572 2829   layer[k.lower()
+00015cc0: 5d20 3d20 2273 6967 6e61 6c22 0a20 2020  ] = "signal".   
+00015cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015ce0: 2065 6c69 6620 6b20 3d3d 2022 4669 6c6c   elif k == "Fill
+00015cf0: 4d61 7465 7269 616c 223a 0a20 2020 2020  Material":.     
+00015d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015d10: 2020 206c 6179 6572 5b22 6469 656c 6563     layer["dielec
+00015d20: 7472 6963 5f66 696c 6c22 5d20 3d20 760a  tric_fill"] = v.
+00015d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015d40: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00015d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015d60: 2020 6c61 7965 725b 6b2e 6c6f 7765 7228    layer[k.lower(
+00015d70: 295d 203d 2076 0a20 2020 2020 2020 2020  )] = v.         
+00015d80: 2020 2020 2020 2069 6620 6c61 7965 723a         if layer:
+00015d90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00015da0: 2020 2020 2069 6620 6c61 7965 725b 2274       if layer["t
+00015db0: 7970 6522 5d20 3d3d 2022 7369 676e 616c  ype"] == "signal
+00015dc0: 2220 6f72 206c 6179 6572 5b22 7479 7065  " or layer["type
+00015dd0: 225d 203d 3d20 2264 6965 6c65 6374 7269  "] == "dielectri
+00015de0: 6322 3a0a 2020 2020 2020 2020 2020 2020  c":.            
+00015df0: 2020 2020 2020 2020 2020 2020 7374 6163              stac
+00015e00: 6b75 705f 6469 6374 5b22 6c61 7965 7273  kup_dict["layers
+00015e10: 225d 5b6c 6179 6572 5b22 6e61 6d65 225d  "][layer["name"]
+00015e20: 5d20 3d20 6c61 7965 720a 2020 2020 2020  ] = layer.      
+00015e30: 2020 7265 7475 726e 2073 656c 662e 5f69    return self._i
+00015e40: 6d70 6f72 745f 6469 6374 2873 7461 636b  mport_dict(stack
+00015e50: 7570 5f64 6963 742c 2072 656e 616d 653d  up_dict, rename=
+00015e60: 7265 6e61 6d65 290a 0a20 2020 2040 7079  rename)..    @py
+00015e70: 6564 625f 6675 6e63 7469 6f6e 5f68 616e  edb_function_han
+00015e80: 646c 6572 2829 0a20 2020 2064 6566 205f  dler().    def _
+00015e90: 6578 706f 7274 5f78 6d6c 2873 656c 662c  export_xml(self,
+00015ea0: 2066 696c 655f 7061 7468 293a 0a20 2020   file_path):.   
+00015eb0: 2020 2020 2022 2222 4578 706f 7274 2073       """Export s
+00015ec0: 7461 636b 7570 2069 6e66 6f72 6d61 7469  tackup informati
+00015ed0: 6f6e 2074 6f20 616e 2065 7874 6572 6e61  on to an externa
+00015ee0: 6c20 584d 4c66 696c 652e 0a0a 2020 2020  l XMLfile...    
+00015ef0: 2020 2020 5061 7261 6d65 7465 7273 0a20      Parameters. 
+00015f00: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
+00015f10: 2d0a 2020 2020 2020 2020 6669 6c65 5f70  -.        file_p
+00015f20: 6174 683a 2073 7472 0a20 2020 2020 2020  ath: str.       
+00015f30: 2020 2020 2050 6174 6820 746f 2065 7874       Path to ext
+00015f40: 6572 6e61 6c20 584d 4c20 6669 6c65 2e0a  ernal XML file..
+00015f50: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
+00015f60: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+00015f70: 0a20 2020 2020 2020 2062 6f6f 6c0a 2020  .        bool.  
+00015f80: 2020 2020 2020 2020 2020 6060 5472 7565            ``True
+00015f90: 6060 2077 6865 6e20 7375 6363 6573 7366  `` when successf
+00015fa0: 756c 2c20 6060 4661 6c73 6560 6020 7768  ul, ``False`` wh
+00015fb0: 656e 2066 6169 6c65 642e 0a20 2020 2020  en failed..     
+00015fc0: 2020 2022 2222 0a20 2020 2020 2020 206c     """.        l
+00015fd0: 6179 6572 732c 206d 6174 6572 6961 6c73  ayers, materials
+00015fe0: 2c20 726f 7567 686e 6573 732c 206e 6f6e  , roughness, non
+00015ff0: 5f73 7461 636b 7570 5f6c 6179 6572 7320  _stackup_layers 
+00016000: 3d20 7365 6c66 2e5f 6765 7428 290a 0a20  = self._get().. 
+00016010: 2020 2020 2020 2072 6f6f 7420 3d20 4554         root = ET
+00016020: 2e45 6c65 6d65 6e74 2822 7b68 7474 703a  .Element("{http:
+00016030: 2f2f 7777 772e 616e 7379 732e 636f 6d2f  //www.ansys.com/
+00016040: 636f 6e74 726f 6c7d 436f 6e74 726f 6c22  control}Control"
+00016050: 2c20 6174 7472 6962 3d7b 2273 6368 656d  , attrib={"schem
+00016060: 6156 6572 7369 6f6e 223a 2022 312e 3022  aVersion": "1.0"
+00016070: 7d29 0a0a 2020 2020 2020 2020 656c 5f73  })..        el_s
+00016080: 7461 636b 7570 203d 2045 542e 5375 6245  tackup = ET.SubE
+00016090: 6c65 6d65 6e74 2872 6f6f 742c 2022 5374  lement(root, "St
+000160a0: 6163 6b75 7022 2c20 7b22 7363 6865 6d61  ackup", {"schema
+000160b0: 5665 7273 696f 6e22 3a20 2231 2e30 227d  Version": "1.0"}
+000160c0: 290a 0a20 2020 2020 2020 2065 6c5f 6d61  )..        el_ma
+000160d0: 7465 7269 616c 7320 3d20 4554 2e53 7562  terials = ET.Sub
+000160e0: 456c 656d 656e 7428 656c 5f73 7461 636b  Element(el_stack
+000160f0: 7570 2c20 224d 6174 6572 6961 6c73 2229  up, "Materials")
+00016100: 0a20 2020 2020 2020 2066 6f72 206d 6174  .        for mat
+00016110: 2c20 7661 6c20 696e 206d 6174 6572 6961  , val in materia
+00016120: 6c73 2e69 7465 6d73 2829 3a0a 2020 2020  ls.items():.    
+00016130: 2020 2020 2020 2020 6d61 7465 7269 616c          material
+00016140: 203d 2045 542e 5375 6245 6c65 6d65 6e74   = ET.SubElement
+00016150: 2865 6c5f 6d61 7465 7269 616c 732c 2022  (el_materials, "
+00016160: 4d61 7465 7269 616c 2229 0a20 2020 2020  Material").     
+00016170: 2020 2020 2020 206d 6174 6572 6961 6c2e         material.
+00016180: 7365 7428 224e 616d 6522 2c20 6d61 7429  set("Name", mat)
+00016190: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+000161a0: 2070 6e61 6d65 2c20 7076 616c 2069 6e20   pname, pval in 
+000161b0: 7661 6c2e 6974 656d 7328 293a 0a20 2020  val.items():.   
+000161c0: 2020 2020 2020 2020 2020 2020 206d 6174               mat
+000161d0: 5f70 726f 7020 3d20 4554 2e53 7562 456c  _prop = ET.SubEl
+000161e0: 656d 656e 7428 6d61 7465 7269 616c 2c20  ement(material, 
+000161f0: 706e 616d 6529 0a20 2020 2020 2020 2020  pname).         
+00016200: 2020 2020 2020 2076 616c 7565 203d 2045         value = E
+00016210: 542e 5375 6245 6c65 6d65 6e74 286d 6174  T.SubElement(mat
+00016220: 5f70 726f 702c 2022 446f 7562 6c65 2229  _prop, "Double")
+00016230: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016240: 2076 616c 7565 2e74 6578 7420 3d20 7374   value.text = st
+00016250: 7228 7076 616c 290a 0a20 2020 2020 2020  r(pval)..       
+00016260: 2065 6c5f 6c61 7965 7273 203d 2045 542e   el_layers = ET.
+00016270: 5375 6245 6c65 6d65 6e74 2865 6c5f 7374  SubElement(el_st
+00016280: 6163 6b75 702c 2022 4c61 7965 7273 222c  ackup, "Layers",
+00016290: 207b 224c 656e 6774 6855 6e69 7422 3a20   {"LengthUnit": 
+000162a0: 226d 6574 6572 227d 290a 2020 2020 2020  "meter"}).      
+000162b0: 2020 666f 7220 6c79 722c 2076 616c 2069    for lyr, val i
+000162c0: 6e20 6c61 7965 7273 2e69 7465 6d73 2829  n layers.items()
+000162d0: 3a0a 2020 2020 2020 2020 2020 2020 6c61  :.            la
+000162e0: 7965 7220 3d20 4554 2e53 7562 456c 656d  yer = ET.SubElem
+000162f0: 656e 7428 656c 5f6c 6179 6572 732c 2022  ent(el_layers, "
+00016300: 4c61 7965 7222 290a 2020 2020 2020 2020  Layer").        
+00016310: 2020 2020 7661 6c20 3d20 7b69 3a20 7374      val = {i: st
+00016320: 7228 6a29 2066 6f72 2069 2c20 6a20 696e  r(j) for i, j in
+00016330: 2076 616c 2e69 7465 6d73 2829 7d0a 2020   val.items()}.  
+00016340: 2020 2020 2020 2020 2020 6966 2076 616c            if val
+00016350: 5b22 5479 7065 225d 203d 3d20 2273 6967  ["Type"] == "sig
+00016360: 6e61 6c22 3a0a 2020 2020 2020 2020 2020  nal":.          
+00016370: 2020 2020 2020 7661 6c5b 2254 7970 6522        val["Type"
+00016380: 5d20 3d20 2263 6f6e 6475 6374 6f72 220a  ] = "conductor".
+00016390: 2020 2020 2020 2020 2020 2020 6c61 7965              laye
+000163a0: 722e 6174 7472 6962 2e75 7064 6174 6528  r.attrib.update(
+000163b0: 7661 6c29 0a0a 2020 2020 2020 2020 666f  val)..        fo
+000163c0: 7220 6c79 722c 2076 616c 2069 6e20 6e6f  r lyr, val in no
+000163d0: 6e5f 7374 6163 6b75 705f 6c61 7965 7273  n_stackup_layers
+000163e0: 2e69 7465 6d73 2829 3a0a 2020 2020 2020  .items():.      
+000163f0: 2020 2020 2020 6c61 7965 7220 3d20 4554        layer = ET
+00016400: 2e53 7562 456c 656d 656e 7428 656c 5f6c  .SubElement(el_l
+00016410: 6179 6572 732c 2022 4c61 7965 7222 290a  ayers, "Layer").
+00016420: 2020 2020 2020 2020 2020 2020 7661 6c20              val 
+00016430: 3d20 7b69 3a20 7374 7228 6a29 2066 6f72  = {i: str(j) for
+00016440: 2069 2c20 6a20 696e 2076 616c 2e69 7465   i, j in val.ite
+00016450: 6d73 2829 7d0a 2020 2020 2020 2020 2020  ms()}.          
+00016460: 2020 6c61 7965 722e 6174 7472 6962 2e75    layer.attrib.u
+00016470: 7064 6174 6528 7661 6c29 0a0a 2020 2020  pdate(val)..    
+00016480: 2020 2020 666f 7220 6c79 722c 2076 616c      for lyr, val
+00016490: 2069 6e20 726f 7567 686e 6573 732e 6974   in roughness.it
+000164a0: 656d 7328 293a 0a20 2020 2020 2020 2020  ems():.         
+000164b0: 2020 2065 6c20 3d20 656c 5f6c 6179 6572     el = el_layer
+000164c0: 732e 6669 6e64 2822 2e2f 4c61 7965 725b  s.find("./Layer[
+000164d0: 404e 616d 653d 277b 7d27 5d22 2e66 6f72  @Name='{}']".for
+000164e0: 6d61 7428 6c79 7229 290a 2020 2020 2020  mat(lyr)).      
+000164f0: 2020 2020 2020 666f 7220 706e 616d 652c        for pname,
+00016500: 2070 7661 6c20 696e 2076 616c 2e69 7465   pval in val.ite
+00016510: 6d73 2829 3a0a 2020 2020 2020 2020 2020  ms():.          
+00016520: 2020 2020 2020 7076 616c 203d 207b 693a        pval = {i:
+00016530: 2073 7472 286a 2920 666f 7220 692c 206a   str(j) for i, j
+00016540: 2069 6e20 7076 616c 2e69 7465 6d73 2829   in pval.items()
+00016550: 7d0a 2020 2020 2020 2020 2020 2020 2020  }.              
+00016560: 2020 4554 2e53 7562 456c 656d 656e 7428    ET.SubElement(
+00016570: 656c 2c20 706e 616d 652c 2070 7661 6c29  el, pname, pval)
+00016580: 0a0a 2020 2020 2020 2020 7772 6974 655f  ..        write_
+00016590: 7072 6574 7479 5f78 6d6c 2872 6f6f 742c  pretty_xml(root,
+000165a0: 2066 696c 655f 7061 7468 290a 2020 2020   file_path).    
+000165b0: 2020 2020 7265 7475 726e 2054 7275 650a      return True.
+000165c0: 0a20 2020 2040 7079 6564 625f 6675 6e63  .    @pyedb_func
+000165d0: 7469 6f6e 5f68 616e 646c 6572 2829 0a20  tion_handler(). 
+000165e0: 2020 2064 6566 206c 6f61 6428 7365 6c66     def load(self
+000165f0: 2c20 6669 6c65 5f70 6174 682c 2072 656e  , file_path, ren
+00016600: 616d 653d 4661 6c73 6529 3a0a 2020 2020  ame=False):.    
+00016610: 2020 2020 2222 2249 6d70 6f72 7420 7374      """Import st
+00016620: 6163 6b75 7020 6672 6f6d 2061 2066 696c  ackup from a fil
+00016630: 652e 2054 6865 2066 696c 6520 666f 726d  e. The file form
+00016640: 6174 2063 616e 2062 6520 584d 4c2c 2043  at can be XML, C
+00016650: 5356 2c20 6f72 204a 534f 4e2e 0a0a 0a20  SV, or JSON.... 
+00016660: 2020 2020 2020 2050 6172 616d 6574 6572         Parameter
+00016670: 730a 2020 2020 2020 2020 2d2d 2d2d 2d2d  s.        ------
+00016680: 2d2d 2d2d 0a20 2020 2020 2020 2066 696c  ----.        fil
+00016690: 655f 7061 7468 203a 2073 7472 0a20 2020  e_path : str.   
+000166a0: 2020 2020 2020 2020 2050 6174 6820 746f           Path to
+000166b0: 2073 7461 636b 7570 2066 696c 652e 0a20   stackup file.. 
+000166c0: 2020 2020 2020 2072 656e 616d 6520 3a20         rename : 
+000166d0: 626f 6f6c 0a20 2020 2020 2020 2020 2020  bool.           
+000166e0: 2049 6620 7265 6e61 6d65 2069 7320 6060   If rename is ``
+000166f0: 4661 6c73 6560 6020 7468 656e 206c 6179  False`` then lay
+00016700: 6572 2069 6e20 6c61 796f 7574 206e 6f74  er in layout not
+00016710: 2066 6f75 6e64 2069 6e20 7468 6520 7374   found in the st
+00016720: 6163 6b75 7020 6669 6c65 2061 7265 2064  ackup file are d
+00016730: 656c 6574 6564 2e0a 2020 2020 2020 2020  eleted..        
+00016740: 2020 2020 4f74 6865 7277 6973 652c 2069      Otherwise, i
+00016750: 6620 7468 6520 6e75 6d62 6572 206f 6620  f the number of 
+00016760: 6c61 7965 7220 696e 2074 6865 2073 7461  layer in the sta
+00016770: 636b 7570 2066 696c 6520 6571 7561 6c73  ckup file equals
+00016780: 2074 6865 206e 756d 6265 7220 6f66 2073   the number of s
+00016790: 7461 636b 7570 206c 6179 6572 0a20 2020  tackup layer.   
+000167a0: 2020 2020 2020 2020 2069 6e20 7468 6520           in the 
+000167b0: 6c61 796f 7574 2c20 6c61 7965 7273 2061  layout, layers a
+000167c0: 7265 2072 656e 616d 6564 2061 6363 6f72  re renamed accor
+000167d0: 6469 6e67 2074 6865 2074 6865 2066 696c  ding the the fil
+000167e0: 652e 0a20 2020 2020 2020 2020 2020 204e  e..            N
+000167f0: 6f74 6520 7468 6174 206c 6179 6572 206f  ote that layer o
+00016800: 7264 6572 206d 6174 7465 7273 2c20 616e  rder matters, an
+00016810: 6420 6861 7320 746f 2062 6520 7772 6974  d has to be writ
+00016820: 7465 6e74 2066 726f 6d20 746f 7020 746f  tent from top to
+00016830: 2062 6f74 746f 6d20 6c61 7965 7220 696e   bottom layer in
+00016840: 2074 6865 2066 696c 652e 0a0a 2020 2020   the file...    
+00016850: 2020 2020 5265 7475 726e 730a 2020 2020      Returns.    
+00016860: 2020 2020 2d2d 2d2d 2d2d 2d0a 2020 2020      -------.    
+00016870: 2020 2020 626f 6f6c 0a20 2020 2020 2020      bool.       
+00016880: 2020 2020 2060 6054 7275 6560 6020 7768       ``True`` wh
+00016890: 656e 2073 7563 6365 7373 6675 6c2c 2060  en successful, `
+000168a0: 6046 616c 7365 6060 2077 6865 6e20 6661  `False`` when fa
+000168b0: 696c 6564 2e0a 0a20 2020 2020 2020 2045  iled...        E
+000168c0: 7861 6d70 6c65 730a 2020 2020 2020 2020  xamples.        
+000168d0: 2d2d 2d2d 2d2d 2d2d 0a20 2020 2020 2020  --------.       
+000168e0: 203e 3e3e 2066 726f 6d20 7079 6564 6220   >>> from pyedb 
+000168f0: 696d 706f 7274 2045 6462 0a20 2020 2020  import Edb.     
+00016900: 2020 203e 3e3e 2065 6462 203d 2045 6462     >>> edb = Edb
+00016910: 2829 0a20 2020 2020 2020 203e 3e3e 2065  ().        >>> e
+00016920: 6462 2e73 7461 636b 7570 2e6c 6f61 6428  db.stackup.load(
+00016930: 2273 7461 636b 7570 2e78 6d6c 2229 0a20  "stackup.xml"). 
+00016940: 2020 2020 2020 2022 2222 0a0a 2020 2020         """..    
+00016950: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+00016960: 6528 6669 6c65 5f70 6174 682c 2064 6963  e(file_path, dic
+00016970: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
+00016980: 7265 7475 726e 2073 656c 662e 5f69 6d70  return self._imp
+00016990: 6f72 745f 6469 6374 2866 696c 655f 7061  ort_dict(file_pa
+000169a0: 7468 290a 2020 2020 2020 2020 656c 6966  th).        elif
+000169b0: 2066 696c 655f 7061 7468 2e65 6e64 7377   file_path.endsw
+000169c0: 6974 6828 222e 6373 7622 293a 0a20 2020  ith(".csv"):.   
+000169d0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+000169e0: 7365 6c66 2e5f 696d 706f 7274 5f63 7376  self._import_csv
+000169f0: 2866 696c 655f 7061 7468 290a 2020 2020  (file_path).    
+00016a00: 2020 2020 656c 6966 2066 696c 655f 7061      elif file_pa
+00016a10: 7468 2e65 6e64 7377 6974 6828 222e 6a73  th.endswith(".js
+00016a20: 6f6e 2229 3a0a 2020 2020 2020 2020 2020  on"):.          
+00016a30: 2020 7265 7475 726e 2073 656c 662e 5f69    return self._i
+00016a40: 6d70 6f72 745f 6a73 6f6e 2866 696c 655f  mport_json(file_
+00016a50: 7061 7468 2c20 7265 6e61 6d65 3d72 656e  path, rename=ren
+00016a60: 616d 6529 0a20 2020 2020 2020 2065 6c69  ame).        eli
+00016a70: 6620 6669 6c65 5f70 6174 682e 656e 6473  f file_path.ends
+00016a80: 7769 7468 2822 2e78 6d6c 2229 3a0a 2020  with(".xml"):.  
+00016a90: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00016aa0: 2073 656c 662e 5f69 6d70 6f72 745f 786d   self._import_xm
+00016ab0: 6c28 6669 6c65 5f70 6174 682c 2072 656e  l(file_path, ren
+00016ac0: 616d 653d 7265 6e61 6d65 290a 2020 2020  ame=rename).    
+00016ad0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00016ae0: 2020 2020 2020 7265 7475 726e 2046 616c        return Fal
+00016af0: 7365 0a0a 2020 2020 4070 7965 6462 5f66  se..    @pyedb_f
+00016b00: 756e 6374 696f 6e5f 6861 6e64 6c65 7228  unction_handler(
+00016b10: 290a 2020 2020 6465 6620 696d 706f 7274  ).    def import
+00016b20: 5f73 7461 636b 7570 2873 656c 662c 2066  _stackup(self, f
+00016b30: 696c 655f 7061 7468 293a 0a20 2020 2020  ile_path):.     
+00016b40: 2020 2022 2222 496d 706f 7274 2073 7461     """Import sta
+00016b50: 636b 7570 2066 726f 6d20 6120 6669 6c65  ckup from a file
+00016b60: 2e20 5468 6520 6669 6c65 2066 6f72 6d61  . The file forma
+00016b70: 7420 6361 6e20 6265 2058 4d4c 2c20 4353  t can be XML, CS
+00016b80: 562c 206f 7220 4a53 4f4e 2e0a 0a20 2020  V, or JSON...   
+00016b90: 2020 2020 202e 2e20 6465 7072 6563 6174       .. deprecat
+00016ba0: 6564 3a3a 2030 2e36 2e36 310a 2020 2020  ed:: 0.6.61.    
+00016bb0: 2020 2020 2020 2055 7365 203a 6675 6e63         Use :func
+00016bc0: 3a60 6c6f 6164 6020 696e 7374 6561 642e  :`load` instead.
+00016bd0: 0a0a 2020 2020 2020 2020 5061 7261 6d65  ..        Parame
+00016be0: 7465 7273 0a20 2020 2020 2020 202d 2d2d  ters.        ---
+00016bf0: 2d2d 2d2d 2d2d 2d0a 2020 2020 2020 2020  -------.        
+00016c00: 6669 6c65 5f70 6174 6820 3a20 7374 720a  file_path : str.
+00016c10: 2020 2020 2020 2020 2020 2020 5061 7468              Path
+00016c20: 2074 6f20 7374 6163 6b75 7020 6669 6c65   to stackup file
+00016c30: 2e0a 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
+00016c40: 6e73 0a20 2020 2020 2020 202d 2d2d 2d2d  ns.        -----
+00016c50: 2d2d 0a20 2020 2020 2020 2062 6f6f 6c0a  --.        bool.
+00016c60: 2020 2020 2020 2020 2020 2020 6060 5472              ``Tr
+00016c70: 7565 6060 2077 6865 6e20 7375 6363 6573  ue`` when succes
+00016c80: 7366 756c 2c20 6060 4661 6c73 6560 6020  sful, ``False`` 
+00016c90: 7768 656e 2066 6169 6c65 642e 0a0a 2020  when failed...  
+00016ca0: 2020 2020 2020 4578 616d 706c 6573 0a20        Examples. 
+00016cb0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0a         --------.
+00016cc0: 2020 2020 2020 2020 3e3e 3e20 6672 6f6d          >>> from
+00016cd0: 2070 7965 6462 2069 6d70 6f72 7420 4564   pyedb import Ed
+00016ce0: 620a 2020 2020 2020 2020 3e3e 3e20 6564  b.        >>> ed
+00016cf0: 6220 3d20 4564 6228 290a 2020 2020 2020  b = Edb().      
+00016d00: 2020 3e3e 3e20 6564 622e 7374 6163 6b75    >>> edb.stacku
+00016d10: 702e 696d 706f 7274 5f73 7461 636b 7570  p.import_stackup
+00016d20: 2822 7374 6163 6b75 702e 786d 6c22 290a  ("stackup.xml").
+00016d30: 2020 2020 2020 2020 2222 220a 0a20 2020          """..   
+00016d40: 2020 2020 2073 656c 662e 5f6c 6f67 6765       self._logge
+00016d50: 722e 7761 726e 696e 6728 224d 6574 686f  r.warning("Metho
+00016d60: 6420 6578 706f 7274 5f73 7461 636b 7570  d export_stackup
+00016d70: 2069 7320 6465 7072 6563 6174 6564 2e20   is deprecated. 
+00016d80: 5573 6520 2e65 7870 6f72 742e 2229 0a20  Use .export."). 
+00016d90: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00016da0: 6c66 2e6c 6f61 6428 6669 6c65 5f70 6174  lf.load(file_pat
+00016db0: 6829 0a0a 2020 2020 4070 7965 6462 5f66  h)..    @pyedb_f
+00016dc0: 756e 6374 696f 6e5f 6861 6e64 6c65 7228  unction_handler(
+00016dd0: 290a 2020 2020 6465 6620 706c 6f74 280a  ).    def plot(.
+00016de0: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
+00016df0: 2020 2020 2020 7361 7665 5f70 6c6f 743d        save_plot=
+00016e00: 4e6f 6e65 2c0a 2020 2020 2020 2020 7369  None,.        si
+00016e10: 7a65 3d28 3230 3030 2c20 3135 3030 292c  ze=(2000, 1500),
+00016e20: 0a20 2020 2020 2020 2070 6c6f 745f 6465  .        plot_de
+00016e30: 6669 6e69 7469 6f6e 733d 4e6f 6e65 2c0a  finitions=None,.
+00016e40: 2020 2020 2020 2020 6669 7273 745f 6c61          first_la
+00016e50: 7965 723d 4e6f 6e65 2c0a 2020 2020 2020  yer=None,.      
+00016e60: 2020 6c61 7374 5f6c 6179 6572 3d4e 6f6e    last_layer=Non
+00016e70: 652c 0a20 2020 2020 2020 2073 6361 6c65  e,.        scale
+00016e80: 5f65 6c65 7661 7469 6f6e 3d54 7275 652c  _elevation=True,
+00016e90: 0a20 2020 2029 3a0a 2020 2020 2020 2020  .    ):.        
+00016ea0: 2222 2250 6c6f 7420 6375 7272 656e 7420  """Plot current 
+00016eb0: 7374 6163 6b75 7020 616e 642c 206f 7074  stackup and, opt
+00016ec0: 696f 6e61 6c6c 792c 206f 7665 726c 6170  ionally, overlap
+00016ed0: 2070 6164 7374 6163 6b20 6465 6669 6e69   padstack defini
+00016ee0: 7469 6f6e 732e 0a20 2020 2020 2020 2050  tions..        P
+00016ef0: 6c6f 7420 7375 7070 6f72 7473 206f 6e6c  lot supports onl
+00016f00: 7920 274c 616d 696e 6174 6527 2061 6e64  y 'Laminate' and
+00016f10: 2027 4f76 6572 6c61 7070 696e 6727 2073   'Overlapping' s
+00016f20: 7461 636b 7570 2074 7970 6573 2e0a 0a20  tackup types... 
+00016f30: 2020 2020 2020 2050 6172 616d 6574 6572         Parameter
+00016f40: 730a 2020 2020 2020 2020 2d2d 2d2d 2d2d  s.        ------
+00016f50: 2d2d 2d2d 0a20 2020 2020 2020 2073 6176  ----.        sav
+00016f60: 655f 706c 6f74 203a 2073 7472 2c20 6f70  e_plot : str, op
+00016f70: 7469 6f6e 616c 0a20 2020 2020 2020 2020  tional.         
+00016f80: 2020 2049 6620 6060 4e6f 6e65 6060 2074     If ``None`` t
+00016f90: 6865 2070 6c6f 7420 7769 6c6c 2062 6520  he plot will be 
+00016fa0: 7368 6f77 6e2e 0a20 2020 2020 2020 2020  shown..         
+00016fb0: 2020 2049 6620 6120 6669 6c65 2070 6174     If a file pat
+00016fc0: 6820 6973 2073 7065 6369 6669 6564 2074  h is specified t
+00016fd0: 6865 2070 6c6f 7420 7769 6c6c 2062 6520  he plot will be 
+00016fe0: 7361 7665 6420 746f 2073 7563 6820 6669  saved to such fi
+00016ff0: 6c65 2e0a 2020 2020 2020 2020 7369 7a65  le..        size
+00017000: 203a 2074 7570 6c65 2c20 6f70 7469 6f6e   : tuple, option
+00017010: 616c 0a20 2020 2020 2020 2020 2020 2049  al.            I
+00017020: 6d61 6765 2073 697a 6520 696e 2070 6978  mage size in pix
+00017030: 656c 2028 7769 6474 682c 2068 6569 6768  el (width, heigh
+00017040: 7429 2e20 4465 6661 756c 7420 7661 6c75  t). Default valu
+00017050: 6520 6973 2060 6028 3230 3030 2c20 3135  e is ``(2000, 15
+00017060: 3030 2960 600a 2020 2020 2020 2020 706c  00)``.        pl
+00017070: 6f74 5f64 6566 696e 6974 696f 6e73 203a  ot_definitions :
+00017080: 2073 7472 2c20 6c69 7374 2c20 6f70 7469   str, list, opti
+00017090: 6f6e 616c 0a20 2020 2020 2020 2020 2020  onal.           
+000170a0: 204c 6973 7420 6f66 2070 6164 7374 6163   List of padstac
+000170b0: 6b20 6465 6669 6e69 7469 6f6e 7320 746f  k definitions to
+000170c0: 2070 6c6f 7420 6f6e 2074 6865 2073 7461   plot on the sta
+000170d0: 636b 7570 2e0a 2020 2020 2020 2020 2020  ckup..          
+000170e0: 2020 4974 2069 7320 7375 7070 6f72 7465    It is supporte
+000170f0: 6420 6f6e 6c79 2066 6f72 204c 616d 696e  d only for Lamin
+00017100: 6174 6520 6d6f 6465 2e0a 2020 2020 2020  ate mode..      
+00017110: 2020 6669 7273 745f 6c61 7965 7220 3a20    first_layer : 
+00017120: 7374 7220 6f72 203a 636c 6173 733a 6070  str or :class:`p
+00017130: 7965 6462 2e64 6f74 6e65 742e 6564 625f  yedb.dotnet.edb_
+00017140: 636f 7265 2e65 6462 5f64 6174 612e 6c61  core.edb_data.la
+00017150: 7965 725f 6461 7461 2e4c 6179 6572 4564  yer_data.LayerEd
+00017160: 6243 6c61 7373 600a 2020 2020 2020 2020  bClass`.        
+00017170: 2020 2020 4669 7273 7420 6c61 7965 7220      First layer 
+00017180: 746f 2070 6c6f 7420 6672 6f6d 2074 6865  to plot from the
+00017190: 2062 6f74 746f 6d2e 2044 6566 6175 6c74   bottom. Default
+000171a0: 2069 7320 604e 6f6e 6560 2074 6f20 7374   is `None` to st
+000171b0: 6172 7420 706c 6f74 7469 6e67 2066 726f  art plotting fro
+000171c0: 6d20 626f 7474 6f6d 2e0a 2020 2020 2020  m bottom..      
+000171d0: 2020 6c61 7374 5f6c 6179 6572 203a 2073    last_layer : s
+000171e0: 7472 206f 7220 3a63 6c61 7373 3a60 7079  tr or :class:`py
+000171f0: 6564 622e 646f 746e 6574 2e65 6462 5f63  edb.dotnet.edb_c
+00017200: 6f72 652e 6564 625f 6461 7461 2e6c 6179  ore.edb_data.lay
+00017210: 6572 5f64 6174 612e 4c61 7965 7245 6462  er_data.LayerEdb
+00017220: 436c 6173 7360 0a20 2020 2020 2020 2020  Class`.         
+00017230: 2020 204c 6173 7420 6c61 7965 7220 746f     Last layer to
+00017240: 2070 6c6f 7420 6672 6f6d 2074 6865 2062   plot from the b
+00017250: 6f74 746f 6d2e 2044 6566 6175 6c74 2069  ottom. Default i
+00017260: 7320 604e 6f6e 6560 2074 6f20 706c 6f74  s `None` to plot
+00017270: 2075 7020 746f 2074 6f70 206c 6179 6572   up to top layer
+00017280: 2e0a 2020 2020 2020 2020 7363 616c 655f  ..        scale_
+00017290: 656c 6576 6174 696f 6e20 3a20 626f 6f6c  elevation : bool
+000172a0: 2c20 6f70 7469 6f6e 616c 0a20 2020 2020  , optional.     
+000172b0: 2020 2020 2020 2054 6865 2072 6561 6c20         The real 
+000172c0: 6c61 7965 7220 7468 6963 6b6e 6573 7320  layer thickness 
+000172d0: 6973 2073 6361 6c65 6420 736f 2074 6861  is scaled so tha
+000172e0: 7420 6d61 785f 7468 6963 6b6e 6573 7320  t max_thickness 
+000172f0: 3d20 3320 2a20 6d69 6e5f 7468 6963 6b6e  = 3 * min_thickn
+00017300: 6573 732e 0a20 2020 2020 2020 2020 2020  ess..           
+00017310: 2044 6566 6175 6c74 2069 7320 6054 7275   Default is `Tru
+00017320: 6560 2e0a 0a20 2020 2020 2020 2052 6574  e`...        Ret
+00017330: 7572 6e73 0a20 2020 2020 2020 202d 2d2d  urns.        ---
+00017340: 2d2d 2d2d 0a20 2020 2020 2020 203a 636c  ----.        :cl
+00017350: 6173 733a 606d 6174 706c 6f74 6c69 622e  ass:`matplotlib.
+00017360: 706c 7460 0a20 2020 2020 2020 2022 2222  plt`.        """
+00017370: 0a20 2020 2020 2020 2069 6620 6973 5f69  .        if is_i
+00017380: 726f 6e70 7974 686f 6e3a 0a20 2020 2020  ronpython:.     
+00017390: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
+000173a0: 6c73 650a 2020 2020 2020 2020 6672 6f6d  lse.        from
+000173b0: 2070 7965 6462 2e67 656e 6572 6963 2e63   pyedb.generic.c
+000173c0: 6f6e 7374 616e 7473 2069 6d70 6f72 7420  onstants import 
+000173d0: 4353 5334 5f43 4f4c 4f52 530a 2020 2020  CSS4_COLORS.    
+000173e0: 2020 2020 6672 6f6d 2070 7965 6462 2e67      from pyedb.g
+000173f0: 656e 6572 6963 2e70 6c6f 7420 696d 706f  eneric.plot impo
+00017400: 7274 2070 6c6f 745f 6d61 7470 6c6f 746c  rt plot_matplotl
+00017410: 6962 0a0a 2020 2020 2020 2020 6c61 7965  ib..        laye
+00017420: 725f 6e61 6d65 7320 3d20 6c69 7374 2873  r_names = list(s
+00017430: 656c 662e 7374 6163 6b75 705f 6c61 7965  elf.stackup_laye
+00017440: 7273 2e6b 6579 7328 2929 0a20 2020 2020  rs.keys()).     
+00017450: 2020 2069 6620 6669 7273 745f 6c61 7965     if first_laye
+00017460: 7220 6973 204e 6f6e 6520 6f72 2066 6972  r is None or fir
+00017470: 7374 5f6c 6179 6572 206e 6f74 2069 6e20  st_layer not in 
+00017480: 6c61 7965 725f 6e61 6d65 733a 0a20 2020  layer_names:.   
+00017490: 2020 2020 2020 2020 2062 6f74 746f 6d5f           bottom_
+000174a0: 6c61 7965 7220 3d20 6c61 7965 725f 6e61  layer = layer_na
+000174b0: 6d65 735b 2d31 5d0a 2020 2020 2020 2020  mes[-1].        
+000174c0: 656c 6966 2069 7369 6e73 7461 6e63 6528  elif isinstance(
+000174d0: 6669 7273 745f 6c61 7965 722c 2073 7472  first_layer, str
+000174e0: 293a 0a20 2020 2020 2020 2020 2020 2062  ):.            b
+000174f0: 6f74 746f 6d5f 6c61 7965 7220 3d20 6669  ottom_layer = fi
+00017500: 7273 745f 6c61 7965 720a 2020 2020 2020  rst_layer.      
+00017510: 2020 656c 6966 2069 7369 6e73 7461 6e63    elif isinstanc
+00017520: 6528 6669 7273 745f 6c61 7965 722c 204c  e(first_layer, L
+00017530: 6179 6572 4564 6243 6c61 7373 293a 0a20  ayerEdbClass):. 
+00017540: 2020 2020 2020 2020 2020 2062 6f74 746f             botto
+00017550: 6d5f 6c61 7965 7220 3d20 6669 7273 745f  m_layer = first_
+00017560: 6c61 7965 722e 6e61 6d65 0a20 2020 2020  layer.name.     
+00017570: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00017580: 2020 2020 2072 6169 7365 2041 7474 7269       raise Attri
+00017590: 6275 7465 4572 726f 7228 2266 6972 7374  buteError("first
+000175a0: 5f6c 6179 6572 206d 7573 7420 6265 2073  _layer must be s
+000175b0: 7472 206f 7220 636c 6173 7320 6064 6f74  tr or class `dot
+000175c0: 6e65 742e 6564 625f 636f 7265 2e65 6462  net.edb_core.edb
+000175d0: 5f64 6174 612e 6c61 7965 725f 6461 7461  _data.layer_data
+000175e0: 2e4c 6179 6572 4564 6243 6c61 7373 6022  .LayerEdbClass`"
+000175f0: 290a 2020 2020 2020 2020 6966 206c 6173  ).        if las
+00017600: 745f 6c61 7965 7220 6973 204e 6f6e 6520  t_layer is None 
+00017610: 6f72 206c 6173 745f 6c61 7965 7220 6e6f  or last_layer no
+00017620: 7420 696e 206c 6179 6572 5f6e 616d 6573  t in layer_names
+00017630: 3a0a 2020 2020 2020 2020 2020 2020 746f  :.            to
+00017640: 705f 6c61 7965 7220 3d20 6c61 7965 725f  p_layer = layer_
+00017650: 6e61 6d65 735b 305d 0a20 2020 2020 2020  names[0].       
+00017660: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
+00017670: 286c 6173 745f 6c61 7965 722c 2073 7472  (last_layer, str
+00017680: 293a 0a20 2020 2020 2020 2020 2020 2074  ):.            t
+00017690: 6f70 5f6c 6179 6572 203d 206c 6173 745f  op_layer = last_
+000176a0: 6c61 7965 720a 2020 2020 2020 2020 656c  layer.        el
+000176b0: 6966 2069 7369 6e73 7461 6e63 6528 6c61  if isinstance(la
+000176c0: 7374 5f6c 6179 6572 2c20 4c61 7965 7245  st_layer, LayerE
+000176d0: 6462 436c 6173 7329 3a0a 2020 2020 2020  dbClass):.      
+000176e0: 2020 2020 2020 746f 705f 6c61 7965 7220        top_layer 
+000176f0: 3d20 6c61 7374 5f6c 6179 6572 2e6e 616d  = last_layer.nam
+00017700: 650a 2020 2020 2020 2020 656c 7365 3a0a  e.        else:.
+00017710: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00017720: 6520 4174 7472 6962 7574 6545 7272 6f72  e AttributeError
+00017730: 2822 6c61 7374 5f6c 6179 6572 206d 7573  ("last_layer mus
+00017740: 7420 6265 2073 7472 206f 7220 636c 6173  t be str or clas
+00017750: 7320 6064 6f74 6e65 742e 6564 625f 636f  s `dotnet.edb_co
+00017760: 7265 2e65 6462 5f64 6174 612e 6c61 7965  re.edb_data.laye
+00017770: 725f 6461 7461 2e4c 6179 6572 4564 6243  r_data.LayerEdbC
+00017780: 6c61 7373 6022 290a 0a20 2020 2020 2020  lass`")..       
+00017790: 2073 7461 636b 7570 5f6d 6f64 6520 3d20   stackup_mode = 
+000177a0: 7365 6c66 2e73 7461 636b 7570 5f6d 6f64  self.stackup_mod
+000177b0: 650a 2020 2020 2020 2020 6966 2073 7461  e.        if sta
+000177c0: 636b 7570 5f6d 6f64 6520 6e6f 7420 696e  ckup_mode not in
+000177d0: 205b 224c 616d 696e 6174 6522 2c20 224f   ["Laminate", "O
+000177e0: 7665 726c 6170 7069 6e67 225d 3a0a 2020  verlapping"]:.  
+000177f0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00017800: 4174 7472 6962 7574 6545 7272 6f72 2822  AttributeError("
+00017810: 7374 6163 6b75 7020 706c 6f74 2073 7570  stackup plot sup
+00017820: 706f 7274 7320 6f6e 6c79 2027 4c61 6d69  ports only 'Lami
+00017830: 6e61 7465 2720 616e 6420 274f 7665 726c  nate' and 'Overl
+00017840: 6170 7069 6e67 2720 7374 6163 6b75 7020  apping' stackup 
+00017850: 7479 7065 732e 2229 0a0a 2020 2020 2020  types.")..      
+00017860: 2020 2320 6275 696c 6420 7468 6520 6c61    # build the la
+00017870: 7965 7273 2064 6174 610a 2020 2020 2020  yers data.      
+00017880: 2020 6c61 7965 7273 5f64 6174 6120 3d20    layers_data = 
+00017890: 5b5d 0a20 2020 2020 2020 2073 6b69 705f  [].        skip_
+000178a0: 666c 6167 203d 2054 7275 650a 2020 2020  flag = True.    
+000178b0: 2020 2020 666f 7220 6c61 7965 7220 696e      for layer in
+000178c0: 2073 656c 662e 7374 6163 6b75 705f 6c61   self.stackup_la
+000178d0: 7965 7273 2e76 616c 7565 7328 293a 2020  yers.values():  
+000178e0: 2320 7374 6172 7420 6672 6f6d 2074 6f70  # start from top
+000178f0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00017900: 6c61 7965 722e 6e61 6d65 2021 3d20 746f  layer.name != to
+00017910: 705f 6c61 7965 7220 616e 6420 736b 6970  p_layer and skip
+00017920: 5f66 6c61 673a 0a20 2020 2020 2020 2020  _flag:.         
+00017930: 2020 2020 2020 2063 6f6e 7469 6e75 650a         continue.
+00017940: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00017950: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00017960: 2020 736b 6970 5f66 6c61 6720 3d20 4661    skip_flag = Fa
+00017970: 6c73 650a 2020 2020 2020 2020 2020 2020  lse.            
+00017980: 6c61 7965 7273 5f64 6174 612e 6170 7065  layers_data.appe
+00017990: 6e64 285b 6c61 7965 722c 206c 6179 6572  nd([layer, layer
+000179a0: 2e6c 6f77 6572 5f65 6c65 7661 7469 6f6e  .lower_elevation
+000179b0: 2c20 6c61 7965 722e 7570 7065 725f 656c  , layer.upper_el
+000179c0: 6576 6174 696f 6e2c 206c 6179 6572 2e74  evation, layer.t
+000179d0: 6869 636b 6e65 7373 5d29 0a20 2020 2020  hickness]).     
+000179e0: 2020 2020 2020 2069 6620 6c61 7965 722e         if layer.
+000179f0: 6e61 6d65 203d 3d20 626f 7474 6f6d 5f6c  name == bottom_l
+00017a00: 6179 6572 3a0a 2020 2020 2020 2020 2020  ayer:.          
+00017a10: 2020 2020 2020 6272 6561 6b0a 2020 2020        break.    
+00017a20: 2020 2020 6c61 7965 7273 5f64 6174 612e      layers_data.
+00017a30: 7265 7665 7273 6528 2920 2023 206c 6574  reverse()  # let
+00017a40: 2773 2073 7461 7274 2066 726f 6d20 7468  's start from th
+00017a50: 6520 626f 7474 6f6d 0a0a 2020 2020 2020  e bottom..      
+00017a60: 2020 2320 7365 7061 7261 7465 2064 6965    # separate die
+00017a70: 6c65 6374 7269 6320 616e 6420 7369 676e  lectric and sign
+00017a80: 616c 2069 6620 6f76 6572 6c61 7070 696e  al if overlappin
+00017a90: 6720 7374 6163 6b75 700a 2020 2020 2020  g stackup.      
+00017aa0: 2020 6966 2073 7461 636b 7570 5f6d 6f64    if stackup_mod
+00017ab0: 6520 3d3d 2022 4f76 6572 6c61 7070 696e  e == "Overlappin
+00017ac0: 6722 3a0a 2020 2020 2020 2020 2020 2020  g":.            
+00017ad0: 6469 656c 6563 7472 6963 5f6c 6179 6572  dielectric_layer
+00017ae0: 7320 3d20 5b6c 2066 6f72 206c 2069 6e20  s = [l for l in 
+00017af0: 6c61 7965 7273 5f64 6174 6120 6966 206c  layers_data if l
+00017b00: 5b30 5d2e 7479 7065 203d 3d20 2264 6965  [0].type == "die
+00017b10: 6c65 6374 7269 6322 5d0a 2020 2020 2020  lectric"].      
+00017b20: 2020 2020 2020 7369 676e 616c 5f6c 6179        signal_lay
+00017b30: 6572 7320 3d20 5b6c 2066 6f72 206c 2069  ers = [l for l i
+00017b40: 6e20 6c61 7965 7273 5f64 6174 6120 6966  n layers_data if
+00017b50: 206c 5b30 5d2e 7479 7065 203d 3d20 2273   l[0].type == "s
+00017b60: 6967 6e61 6c22 5d0a 0a20 2020 2020 2020  ignal"]..       
+00017b70: 2023 2063 6f6d 7072 6573 7320 7468 6520   # compress the 
+00017b80: 7468 6963 6b6e 6573 7365 7320 6966 2072  thicknesses if r
+00017b90: 6571 7569 7265 640a 2020 2020 2020 2020  equired.        
+00017ba0: 6966 2073 6361 6c65 5f65 6c65 7661 7469  if scale_elevati
+00017bb0: 6f6e 3a0a 2020 2020 2020 2020 2020 2020  on:.            
+00017bc0: 6d69 6e5f 7468 6963 6b6e 6573 7320 3d20  min_thickness = 
+00017bd0: 6d69 6e28 5b69 5b33 5d20 666f 7220 6920  min([i[3] for i 
+00017be0: 696e 206c 6179 6572 735f 6461 7461 2069  in layers_data i
+00017bf0: 6620 695b 335d 2021 3d20 305d 290a 2020  f i[3] != 0]).  
+00017c00: 2020 2020 2020 2020 2020 6d61 785f 7468            max_th
+00017c10: 6963 6b6e 6573 7320 3d20 6d61 7828 5b69  ickness = max([i
+00017c20: 5b33 5d20 666f 7220 6920 696e 206c 6179  [3] for i in lay
+00017c30: 6572 735f 6461 7461 5d29 0a20 2020 2020  ers_data]).     
+00017c40: 2020 2020 2020 2063 203d 2033 2020 2320         c = 3  # 
+00017c50: 6d61 785f 7468 6963 6b6e 6573 7320 3d20  max_thickness = 
+00017c60: 6320 2a20 6d69 6e5f 7468 6963 6b6e 6573  c * min_thicknes
+00017c70: 730a 0a20 2020 2020 2020 2020 2020 2064  s..            d
+00017c80: 6566 205f 636f 6d70 7265 7373 5f74 2879  ef _compress_t(y
+00017c90: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00017ca0: 2020 206d 203d 206d 696e 5f74 6869 636b     m = min_thick
+00017cb0: 6e65 7373 0a20 2020 2020 2020 2020 2020  ness.           
+00017cc0: 2020 2020 204d 203d 206d 6178 5f74 6869       M = max_thi
+00017cd0: 636b 6e65 7373 0a20 2020 2020 2020 2020  ckness.         
+00017ce0: 2020 2020 2020 206b 203d 2028 6320 2d20         k = (c - 
+00017cf0: 3129 202a 206d 202f 2028 4d20 2d20 6d29  1) * m / (M - m)
+00017d00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00017d10: 2069 6620 7920 3e20 303a 0a20 2020 2020   if y > 0:.     
+00017d20: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00017d30: 6574 7572 6e20 2879 202d 206d 2920 2a20  eturn (y - m) * 
+00017d40: 6b20 2b20 6d0a 2020 2020 2020 2020 2020  k + m.          
+00017d50: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00017d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017d70: 7265 7475 726e 2030 2e30 0a0a 2020 2020  return 0.0..    
+00017d80: 2020 2020 2020 2020 6966 2073 7461 636b          if stack
+00017d90: 7570 5f6d 6f64 6520 3d3d 2022 4c61 6d69  up_mode == "Lami
+00017da0: 6e61 7465 223a 0a20 2020 2020 2020 2020  nate":.         
+00017db0: 2020 2020 2020 206c 3020 3d20 6c61 7965         l0 = laye
+00017dc0: 7273 5f64 6174 615b 305d 0a20 2020 2020  rs_data[0].     
+00017dd0: 2020 2020 2020 2020 2020 2063 6f6d 7072             compr
+00017de0: 6573 7365 645f 6c61 7965 7273 5f64 6174  essed_layers_dat
+00017df0: 6120 3d20 5b5b 6c30 5b30 5d2c 206c 305b  a = [[l0[0], l0[
+00017e00: 315d 2c20 5f63 6f6d 7072 6573 735f 7428  1], _compress_t(
+00017e10: 6c30 5b33 5d29 2c20 5f63 6f6d 7072 6573  l0[3]), _compres
+00017e20: 735f 7428 6c30 5b33 5d29 5d5d 2020 2320  s_t(l0[3])]]  # 
+00017e30: 7468 6520 6669 7273 7420 726f 770a 2020  the first row.  
+00017e40: 2020 2020 2020 2020 2020 2020 2020 6c70                lp
+00017e50: 203d 2063 6f6d 7072 6573 7365 645f 6c61   = compressed_la
+00017e60: 7965 7273 5f64 6174 615b 305d 0a20 2020  yers_data[0].   
+00017e70: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+00017e80: 206c 6920 696e 206c 6179 6572 735f 6461   li in layers_da
+00017e90: 7461 5b31 3a5d 3a20 2023 2074 6865 206f  ta[1:]:  # the o
+00017ea0: 7468 6572 2072 6f77 730a 2020 2020 2020  ther rows.      
+00017eb0: 2020 2020 2020 2020 2020 2020 2020 6374                ct
+00017ec0: 203d 205f 636f 6d70 7265 7373 5f74 286c   = _compress_t(l
+00017ed0: 695b 335d 290a 2020 2020 2020 2020 2020  i[3]).          
+00017ee0: 2020 2020 2020 2020 2020 636f 6d70 7265            compre
+00017ef0: 7373 6564 5f6c 6179 6572 735f 6461 7461  ssed_layers_data
+00017f00: 2e61 7070 656e 6428 5b6c 695b 305d 2c20  .append([li[0], 
+00017f10: 6c70 5b32 5d2c 206c 705b 325d 202b 2063  lp[2], lp[2] + c
+00017f20: 742c 2063 745d 290a 2020 2020 2020 2020  t, ct]).        
+00017f30: 2020 2020 2020 2020 2020 2020 6c70 203d              lp =
+00017f40: 2063 6f6d 7072 6573 7365 645f 6c61 7965   compressed_laye
+00017f50: 7273 5f64 6174 615b 2d31 5d0a 2020 2020  rs_data[-1].    
+00017f60: 2020 2020 2020 2020 2020 2020 6c61 7965              laye
+00017f70: 7273 5f64 6174 6120 3d20 636f 6d70 7265  rs_data = compre
+00017f80: 7373 6564 5f6c 6179 6572 735f 6461 7461  ssed_layers_data
+00017f90: 0a0a 2020 2020 2020 2020 2020 2020 656c  ..            el
+00017fa0: 6966 2073 7461 636b 7570 5f6d 6f64 6520  if stackup_mode 
+00017fb0: 3d3d 2022 4f76 6572 6c61 7070 696e 6722  == "Overlapping"
+00017fc0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00017fd0: 2020 636f 6d70 7265 7373 6564 5f64 6965    compressed_die
+00017fe0: 6c73 203d 205b 5d0a 2020 2020 2020 2020  ls = [].        
+00017ff0: 2020 2020 2020 2020 6669 7273 745f 6469          first_di
+00018000: 656c 203d 2054 7275 650a 2020 2020 2020  el = True.      
+00018010: 2020 2020 2020 2020 2020 666f 7220 6c69            for li
+00018020: 2069 6e20 6469 656c 6563 7472 6963 5f6c   in dielectric_l
+00018030: 6179 6572 733a 0a20 2020 2020 2020 2020  ayers:.         
+00018040: 2020 2020 2020 2020 2020 2063 7420 3d20             ct = 
+00018050: 5f63 6f6d 7072 6573 735f 7428 6c69 5b33  _compress_t(li[3
+00018060: 5d29 0a20 2020 2020 2020 2020 2020 2020  ]).             
+00018070: 2020 2020 2020 2069 6620 6669 7273 745f         if first_
+00018080: 6469 656c 3a0a 2020 2020 2020 2020 2020  diel:.          
+00018090: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000180a0: 206c 695b 315d 203e 2030 3a0a 2020 2020   li[1] > 0:.    
+000180b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000180c0: 2020 2020 2020 2020 6c30 6c65 203d 205f          l0le = _
+000180d0: 636f 6d70 7265 7373 5f74 286c 695b 315d  compress_t(li[1]
+000180e0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000180f0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00018100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018110: 2020 2020 2020 2020 2020 2020 6c30 6c65              l0le
+00018120: 203d 206c 695b 315d 0a20 2020 2020 2020   = li[1].       
+00018130: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018140: 2063 6f6d 7072 6573 7365 645f 6469 656c   compressed_diel
+00018150: 732e 6170 7065 6e64 285b 6c69 5b30 5d2c  s.append([li[0],
+00018160: 206c 306c 652c 206c 306c 6520 2b20 6374   l0le, l0le + ct
+00018170: 2c20 6374 5d29 0a20 2020 2020 2020 2020  , ct]).         
+00018180: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00018190: 6972 7374 5f64 6965 6c20 3d20 4661 6c73  irst_diel = Fals
+000181a0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+000181b0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+000181c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000181d0: 2020 2020 6c70 203d 2063 6f6d 7072 6573      lp = compres
+000181e0: 7365 645f 6469 656c 735b 2d31 5d0a 2020  sed_diels[-1].  
+000181f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018200: 2020 2020 2020 636f 6d70 7265 7373 6564        compressed
+00018210: 5f64 6965 6c73 2e61 7070 656e 6428 5b6c  _diels.append([l
+00018220: 695b 305d 2c20 6c70 5b32 5d2c 206c 705b  i[0], lp[2], lp[
+00018230: 325d 202b 2063 742c 2063 745d 290a 0a20  2] + ct, ct]).. 
+00018240: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+00018250: 6566 205f 636f 6e76 6572 745f 656c 6576  ef _convert_elev
+00018260: 6174 696f 6e28 656c 293a 0a20 2020 2020  ation(el):.     
+00018270: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00018280: 6e73 6964 6520 3d20 4661 6c73 650a 2020  nside = False.  
+00018290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000182a0: 2020 666f 7220 692c 206c 6920 696e 2065    for i, li in e
+000182b0: 6e75 6d65 7261 7465 2864 6965 6c65 6374  numerate(dielect
+000182c0: 7269 635f 6c61 7965 7273 293a 0a20 2020  ric_layers):.   
+000182d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000182e0: 2020 2020 2069 6620 6c69 5b31 5d20 3c3d       if li[1] <=
+000182f0: 2065 6c20 3c3d 206c 695b 325d 3a0a 2020   el <= li[2]:.  
+00018300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018310: 2020 2020 2020 2020 2020 696e 7369 6465            inside
+00018320: 203d 2054 7275 650a 2020 2020 2020 2020   = True.        
+00018330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018340: 2020 2020 6272 6561 6b0a 2020 2020 2020      break.      
+00018350: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00018360: 2069 6e73 6964 653a 0a20 2020 2020 2020   inside:.       
+00018370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018380: 2075 203d 2028 656c 202d 206c 695b 315d   u = (el - li[1]
+00018390: 2920 2f20 286c 695b 325d 202d 206c 695b  ) / (li[2] - li[
+000183a0: 315d 290a 2020 2020 2020 2020 2020 2020  1]).            
+000183b0: 2020 2020 2020 2020 2020 2020 636c 6920              cli 
+000183c0: 3d20 636f 6d70 7265 7373 6564 5f64 6965  = compressed_die
+000183d0: 6c73 5b69 5d0a 2020 2020 2020 2020 2020  ls[i].          
+000183e0: 2020 2020 2020 2020 2020 2020 2020 6365                ce
+000183f0: 6c20 3d20 636c 695b 315d 202b 2075 202a  l = cli[1] + u *
+00018400: 2028 636c 695b 325d 202d 2063 6c69 5b31   (cli[2] - cli[1
+00018410: 5d29 0a20 2020 2020 2020 2020 2020 2020  ]).             
+00018420: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00018430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018440: 2020 2020 2063 656c 203d 2065 6c0a 2020       cel = el.  
+00018450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018460: 2020 7265 7475 726e 2063 656c 0a0a 2020    return cel..  
+00018470: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00018480: 6d70 7265 7373 6564 5f73 6967 6e61 6c73  mpressed_signals
+00018490: 203d 205b 5d0a 2020 2020 2020 2020 2020   = [].          
+000184a0: 2020 2020 2020 666f 7220 6c69 2069 6e20        for li in 
+000184b0: 7369 676e 616c 5f6c 6179 6572 733a 0a20  signal_layers:. 
+000184c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000184d0: 2020 2063 6c65 203d 205f 636f 6e76 6572     cle = _conver
+000184e0: 745f 656c 6576 6174 696f 6e28 6c69 5b31  t_elevation(li[1
+000184f0: 5d29 0a20 2020 2020 2020 2020 2020 2020  ]).             
+00018500: 2020 2020 2020 2063 7565 203d 205f 636f         cue = _co
+00018510: 6e76 6572 745f 656c 6576 6174 696f 6e28  nvert_elevation(
+00018520: 6c69 5b32 5d29 0a20 2020 2020 2020 2020  li[2]).         
+00018530: 2020 2020 2020 2020 2020 2063 7420 3d20             ct = 
+00018540: 6375 6520 2d20 636c 650a 2020 2020 2020  cue - cle.      
+00018550: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00018560: 6d70 7265 7373 6564 5f73 6967 6e61 6c73  mpressed_signals
+00018570: 2e61 7070 656e 6428 5b6c 695b 305d 2c20  .append([li[0], 
+00018580: 636c 652c 2063 7565 2c20 6374 5d29 0a0a  cle, cue, ct])..
+00018590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000185a0: 6469 656c 6563 7472 6963 5f6c 6179 6572  dielectric_layer
+000185b0: 7320 3d20 636f 6d70 7265 7373 6564 5f64  s = compressed_d
+000185c0: 6965 6c73 0a20 2020 2020 2020 2020 2020  iels.           
+000185d0: 2020 2020 2073 6967 6e61 6c5f 6c61 7965       signal_laye
+000185e0: 7273 203d 2063 6f6d 7072 6573 7365 645f  rs = compressed_
+000185f0: 7369 676e 616c 730a 0a20 2020 2020 2020  signals..       
+00018600: 2023 2063 7265 6174 6520 7468 6520 6461   # create the da
+00018610: 7461 2066 6f72 2074 6865 2070 6c6f 740a  ta for the plot.
+00018620: 2020 2020 2020 2020 6469 656c 5f61 6c70          diel_alp
+00018630: 6861 203d 2030 2e34 0a20 2020 2020 2020  ha = 0.4.       
+00018640: 2073 6967 6e61 6c5f 616c 7068 6120 3d20   signal_alpha = 
+00018650: 302e 360a 2020 2020 2020 2020 7a65 726f  0.6.        zero
+00018660: 5f74 6869 636b 6e65 7373 5f61 6c70 6861  _thickness_alpha
+00018670: 203d 2031 2e30 0a20 2020 2020 2020 2061   = 1.0.        a
+00018680: 6e6e 6f74 6174 696f 6e5f 666f 6e74 7369  nnotation_fontsi
+00018690: 7a65 203d 2031 340a 2020 2020 2020 2020  ze = 14.        
+000186a0: 616e 6e6f 7461 7469 6f6e 5f78 5f6d 6172  annotation_x_mar
+000186b0: 6769 6e20 3d20 302e 3031 0a20 2020 2020  gin = 0.01.     
+000186c0: 2020 2061 6e6e 6f74 6174 696f 6e73 203d     annotations =
+000186d0: 205b 5d0a 2020 2020 2020 2020 706c 6f74   [].        plot
+000186e0: 5f64 6174 6120 3d20 5b5d 0a20 2020 2020  _data = [].     
+000186f0: 2020 2069 6620 7374 6163 6b75 705f 6d6f     if stackup_mo
+00018700: 6465 203d 3d20 224c 616d 696e 6174 6522  de == "Laminate"
+00018710: 3a0a 2020 2020 2020 2020 2020 2020 6d69  :.            mi
+00018720: 6e5f 7468 6963 6b6e 6573 7320 3d20 6d69  n_thickness = mi
+00018730: 6e28 5b69 5b33 5d20 666f 7220 6920 696e  n([i[3] for i in
+00018740: 206c 6179 6572 735f 6461 7461 2069 6620   layers_data if 
+00018750: 695b 335d 2021 3d20 305d 290a 2020 2020  i[3] != 0]).    
+00018760: 2020 2020 2020 2020 666f 7220 6c79 2069          for ly i
+00018770: 6e20 6c61 7965 7273 5f64 6174 613a 0a20  n layers_data:. 
+00018780: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+00018790: 6179 6572 203d 206c 795b 305d 0a0a 2020  ayer = ly[0]..  
+000187a0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+000187b0: 7365 7420 636f 6c6f 7220 616e 6420 6c61  set color and la
+000187c0: 6265 6c0a 2020 2020 2020 2020 2020 2020  bel.            
+000187d0: 2020 2020 636f 6c6f 7220 3d20 5b66 6c6f      color = [flo
+000187e0: 6174 2869 2920 2f20 3235 3620 666f 7220  at(i) / 256 for 
+000187f0: 6920 696e 206c 6179 6572 2e63 6f6c 6f72  i in layer.color
+00018800: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+00018810: 2020 6966 2063 6f6c 6f72 203d 3d20 5b31    if color == [1
+00018820: 2e30 2c20 312e 302c 2031 2e30 5d3a 0a20  .0, 1.0, 1.0]:. 
+00018830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018840: 2020 2063 6f6c 6f72 203d 205b 302e 392c     color = [0.9,
+00018850: 2030 2e39 2c20 302e 395d 0a20 2020 2020   0.9, 0.9].     
+00018860: 2020 2020 2020 2020 2020 206c 6162 656c             label
+00018870: 203d 2022 7b7d 2c20 7b7d 2c20 7468 6963   = "{}, {}, thic
+00018880: 6b3a 207b 3a2e 3366 7d75 6d2c 2065 6c65  k: {:.3f}um, ele
+00018890: 763a 207b 3a2e 3366 7d75 6d22 2e66 6f72  v: {:.3f}um".for
+000188a0: 6d61 7428 0a20 2020 2020 2020 2020 2020  mat(.           
+000188b0: 2020 2020 2020 2020 206c 6179 6572 2e6e           layer.n
+000188c0: 616d 652c 206c 6179 6572 2e6d 6174 6572  ame, layer.mater
+000188d0: 6961 6c2c 206c 6179 6572 2e74 6869 636b  ial, layer.thick
+000188e0: 6e65 7373 202a 2031 6536 2c20 6c61 7965  ness * 1e6, laye
+000188f0: 722e 6c6f 7765 725f 656c 6576 6174 696f  r.lower_elevatio
+00018900: 6e20 2a20 3165 360a 2020 2020 2020 2020  n * 1e6.        
+00018910: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
+00018920: 2020 2020 2020 2020 2020 2023 2063 7265             # cre
+00018930: 6174 6520 7061 7463 680a 2020 2020 2020  ate patch.      
+00018940: 2020 2020 2020 2020 2020 7820 3d20 5b30            x = [0
+00018950: 2c20 302c 2031 2c20 315d 0a20 2020 2020  , 0, 1, 1].     
+00018960: 2020 2020 2020 2020 2020 2069 6620 6c79             if ly
+00018970: 5b33 5d20 3e20 303a 0a20 2020 2020 2020  [3] > 0:.       
+00018980: 2020 2020 2020 2020 2020 2020 206c 6f77               low
+00018990: 6572 5f65 6c65 7661 7469 6f6e 203d 206c  er_elevation = l
+000189a0: 795b 315d 0a20 2020 2020 2020 2020 2020  y[1].           
+000189b0: 2020 2020 2020 2020 2075 7070 6572 5f65           upper_e
+000189c0: 6c65 7661 7469 6f6e 203d 206c 795b 325d  levation = ly[2]
+000189d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000189e0: 2020 2020 2079 203d 205b 6c6f 7765 725f       y = [lower_
+000189f0: 656c 6576 6174 696f 6e2c 2075 7070 6572  elevation, upper
+00018a00: 5f65 6c65 7661 7469 6f6e 2c20 7570 7065  _elevation, uppe
+00018a10: 725f 656c 6576 6174 696f 6e2c 206c 6f77  r_elevation, low
+00018a20: 6572 5f65 6c65 7661 7469 6f6e 5d0a 2020  er_elevation].  
+00018a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018a40: 2020 706c 6f74 5f64 6174 612e 696e 7365    plot_data.inse
+00018a50: 7274 2830 2c20 5b78 2c20 792c 2063 6f6c  rt(0, [x, y, col
+00018a60: 6f72 2c20 6c61 6265 6c2c 2073 6967 6e61  or, label, signa
+00018a70: 6c5f 616c 7068 612c 2022 6669 6c6c 225d  l_alpha, "fill"]
+00018a80: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00018a90: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00018aa0: 2020 2020 2020 2020 2020 2020 6c6f 7765              lowe
+00018ab0: 725f 656c 6576 6174 696f 6e20 3d20 6c79  r_elevation = ly
+00018ac0: 5b31 5d20 2d20 6d69 6e5f 7468 6963 6b6e  [1] - min_thickn
+00018ad0: 6573 7320 2a20 302e 3120 2023 206d 616b  ess * 0.1  # mak
+00018ae0: 6520 7468 6520 7a65 726f 2074 6869 636b  e the zero thick
+00018af0: 6e65 7373 206c 6179 6572 7320 6d6f 7265  ness layers more
+00018b00: 2076 6973 6962 6c65 0a20 2020 2020 2020   visible.       
+00018b10: 2020 2020 2020 2020 2020 2020 2075 7070               upp
+00018b20: 6572 5f65 6c65 7661 7469 6f6e 203d 206c  er_elevation = l
+00018b30: 795b 325d 202b 206d 696e 5f74 6869 636b  y[2] + min_thick
+00018b40: 6e65 7373 202a 2030 2e31 0a20 2020 2020  ness * 0.1.     
+00018b50: 2020 2020 2020 2020 2020 2020 2020 2079                 y
+00018b60: 203d 205b 6c6f 7765 725f 656c 6576 6174   = [lower_elevat
+00018b70: 696f 6e2c 2075 7070 6572 5f65 6c65 7661  ion, upper_eleva
+00018b80: 7469 6f6e 2c20 7570 7065 725f 656c 6576  tion, upper_elev
+00018b90: 6174 696f 6e2c 206c 6f77 6572 5f65 6c65  ation, lower_ele
+00018ba0: 7661 7469 6f6e 5d0a 2020 2020 2020 2020  vation].        
+00018bb0: 2020 2020 2020 2020 2020 2020 2320 7075              # pu
+00018bc0: 7420 7468 6520 7a65 726f 2074 6869 636b  t the zero thick
+00018bd0: 6e65 7373 206c 6179 6572 7320 6f6e 2074  ness layers on t
+00018be0: 6f70 0a20 2020 2020 2020 2020 2020 2020  op.             
+00018bf0: 2020 2020 2020 2070 6c6f 745f 6461 7461         plot_data
+00018c00: 2e61 7070 656e 6428 5b78 2c20 792c 2063  .append([x, y, c
+00018c10: 6f6c 6f72 2c20 6c61 6265 6c2c 207a 6572  olor, label, zer
+00018c20: 6f5f 7468 6963 6b6e 6573 735f 616c 7068  o_thickness_alph
+00018c30: 612c 2022 6669 6c6c 225d 290a 0a20 2020  a, "fill"])..   
+00018c40: 2020 2020 2020 2020 2020 2020 2023 2063               # c
+00018c50: 7265 6174 6520 616e 6e6f 7461 7469 6f6e  reate annotation
+00018c60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00018c70: 2079 5f70 6f73 203d 2028 6c6f 7765 725f   y_pos = (lower_
+00018c80: 656c 6576 6174 696f 6e20 2b20 7570 7065  elevation + uppe
+00018c90: 725f 656c 6576 6174 696f 6e29 202f 2032  r_elevation) / 2
+00018ca0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00018cb0: 2069 6620 6c61 7965 722e 7479 7065 203d   if layer.type =
+00018cc0: 3d20 2264 6965 6c65 6374 7269 6322 3a0a  = "dielectric":.
+00018cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018ce0: 2020 2020 785f 706f 7320 3d20 2d61 6e6e      x_pos = -ann
+00018cf0: 6f74 6174 696f 6e5f 785f 6d61 7267 696e  otation_x_margin
+00018d00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00018d10: 2020 2020 2061 6e6e 6f74 6174 696f 6e73       annotations
+00018d20: 2e61 7070 656e 6428 0a20 2020 2020 2020  .append(.       
+00018d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018d40: 205b 785f 706f 732c 2079 5f70 6f73 2c20   [x_pos, y_pos, 
+00018d50: 6c61 7965 722e 6e61 6d65 2c20 7b22 666f  layer.name, {"fo
+00018d60: 6e74 7369 7a65 223a 2061 6e6e 6f74 6174  ntsize": annotat
+00018d70: 696f 6e5f 666f 6e74 7369 7a65 2c20 2268  ion_fontsize, "h
+00018d80: 6f72 697a 6f6e 7461 6c61 6c69 676e 6d65  orizontalalignme
+00018d90: 6e74 223a 2022 7269 6768 7422 7d5d 0a20  nt": "right"}]. 
+00018da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018db0: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
+00018dc0: 2020 2020 2065 6c69 6620 6c61 7965 722e       elif layer.
+00018dd0: 7479 7065 203d 3d20 2273 6967 6e61 6c22  type == "signal"
+00018de0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00018df0: 2020 2020 2020 785f 706f 7320 3d20 312e        x_pos = 1.
+00018e00: 3020 2b20 616e 6e6f 7461 7469 6f6e 5f78  0 + annotation_x
+00018e10: 5f6d 6172 6769 6e0a 2020 2020 2020 2020  _margin.        
+00018e20: 2020 2020 2020 2020 2020 2020 616e 6e6f              anno
+00018e30: 7461 7469 6f6e 732e 6170 7065 6e64 285b  tations.append([
+00018e40: 785f 706f 732c 2079 5f70 6f73 2c20 6c61  x_pos, y_pos, la
+00018e50: 7965 722e 6e61 6d65 2c20 7b22 666f 6e74  yer.name, {"font
+00018e60: 7369 7a65 223a 2061 6e6e 6f74 6174 696f  size": annotatio
+00018e70: 6e5f 666f 6e74 7369 7a65 7d5d 290a 0a20  n_fontsize}]).. 
+00018e80: 2020 2020 2020 2020 2020 2023 2065 7661             # eva
+00018e90: 6c75 6174 6520 7468 6520 6c65 6765 6e64  luate the legend
+00018ea0: 2072 656f 7264 6572 0a20 2020 2020 2020   reorder.       
+00018eb0: 2020 2020 206c 6567 656e 645f 6f72 6465       legend_orde
+00018ec0: 7220 3d20 5b5d 0a20 2020 2020 2020 2020  r = [].         
+00018ed0: 2020 2066 6f72 206c 7920 696e 206c 6179     for ly in lay
+00018ee0: 6572 735f 6461 7461 3a0a 2020 2020 2020  ers_data:.      
+00018ef0: 2020 2020 2020 2020 2020 6e61 6d65 203d            name =
+00018f00: 206c 795b 305d 2e6e 616d 650a 2020 2020   ly[0].name.    
+00018f10: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00018f20: 692c 2061 2069 6e20 656e 756d 6572 6174  i, a in enumerat
+00018f30: 6528 706c 6f74 5f64 6174 6129 3a0a 2020  e(plot_data):.  
+00018f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018f50: 2020 696e 616d 6520 3d20 615b 335d 2e73    iname = a[3].s
+00018f60: 706c 6974 2822 2c22 295b 305d 0a20 2020  plit(",")[0].   
+00018f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018f80: 2069 6620 6e61 6d65 203d 3d20 696e 616d   if name == inam
+00018f90: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00018fa0: 2020 2020 2020 2020 2020 206c 6567 656e             legen
+00018fb0: 645f 6f72 6465 722e 6170 7065 6e64 2869  d_order.append(i
+00018fc0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00018fd0: 2020 2020 2020 2020 2020 6272 6561 6b0a            break.
+00018fe0: 0a20 2020 2020 2020 2065 6c69 6620 7374  .        elif st
+00018ff0: 6163 6b75 705f 6d6f 6465 203d 3d20 224f  ackup_mode == "O
+00019000: 7665 726c 6170 7069 6e67 223a 0a20 2020  verlapping":.   
+00019010: 2020 2020 2020 2020 206d 696e 5f74 6869           min_thi
+00019020: 636b 6e65 7373 203d 206d 696e 285b 695b  ckness = min([i[
+00019030: 335d 2066 6f72 2069 2069 6e20 7369 676e  3] for i in sign
+00019040: 616c 5f6c 6179 6572 7320 6966 2069 5b33  al_layers if i[3
+00019050: 5d20 213d 2030 5d29 0a20 2020 2020 2020  ] != 0]).       
+00019060: 2020 2020 2063 6f6c 756d 6e73 203d 205b       columns = [
+00019070: 5d20 2023 2066 6972 7374 2063 6f6c 756d  ]  # first colum
+00019080: 6e20 6973 2078 3d5b 302c 315d 2c20 7365  n is x=[0,1], se
+00019090: 636f 6e64 2063 6f6c 756d 6e20 6973 2078  cond column is x
+000190a0: 3d5b 312c 325d 2061 6e64 2073 6f20 6f6e  =[1,2] and so on
+000190b0: 2e2e 2e0a 2020 2020 2020 2020 2020 2020  ....            
+000190c0: 666f 7220 6c79 2069 6e20 7369 676e 616c  for ly in signal
+000190d0: 5f6c 6179 6572 733a 0a20 2020 2020 2020  _layers:.       
+000190e0: 2020 2020 2020 2020 206c 6f77 6572 5f65           lower_e
+000190f0: 6c65 7661 7469 6f6e 203d 206c 795b 315d  levation = ly[1]
+00019100: 2020 2320 6c6f 7765 7220 656c 6576 6174    # lower elevat
+00019110: 696f 6e0a 2020 2020 2020 2020 2020 2020  ion.            
+00019120: 2020 2020 7420 3d20 6c79 5b33 5d20 2023      t = ly[3]  #
+00019130: 2074 6869 636b 6e65 7373 0a20 2020 2020   thickness.     
+00019140: 2020 2020 2020 2020 2020 2070 7574 5f69             put_i
+00019150: 6e5f 636f 6c75 6d6e 203d 2030 0a20 2020  n_column = 0.   
+00019160: 2020 2020 2020 2020 2020 2020 2063 656c               cel
+00019170: 6c5f 706f 7369 7469 6f6e 203d 2030 0a20  l_position = 0. 
+00019180: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00019190: 6f72 2063 2069 6e20 636f 6c75 6d6e 733a  or c in columns:
+000191a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000191b0: 2020 2020 2075 6570 203d 2063 5b2d 315d       uep = c[-1]
+000191c0: 5b30 5d5b 325d 2020 2320 7570 7065 7220  [0][2]  # upper 
+000191d0: 656c 6576 6174 696f 6e20 6f66 2074 6865  elevation of the
+000191e0: 206c 6173 7420 656e 7472 7920 6f66 2074   last entry of t
+000191f0: 6861 7420 636f 6c75 6d6e 0a20 2020 2020  hat column.     
+00019200: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+00019210: 7020 3d20 635b 2d31 5d5b 305d 5b33 5d20  p = c[-1][0][3] 
+00019220: 2023 2074 6869 636b 6e65 7373 206f 6620   # thickness of 
+00019230: 7468 6520 6c61 7374 2065 6e74 7279 206f  the last entry o
+00019240: 6620 7468 6174 2063 6f6c 756d 6e0a 2020  f that column.  
+00019250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019260: 2020 6966 206c 6f77 6572 5f65 6c65 7661    if lower_eleva
+00019270: 7469 6f6e 203c 2075 6570 206f 7220 2861  tion < uep or (a
+00019280: 6273 286c 6f77 6572 5f65 6c65 7661 7469  bs(lower_elevati
+00019290: 6f6e 202d 2075 6570 2920 3c20 3165 2d31  on - uep) < 1e-1
+000192a0: 3520 616e 6420 7470 203d 3d20 3020 616e  5 and tp == 0 an
+000192b0: 6420 7420 3d3d 2030 293a 0a20 2020 2020  d t == 0):.     
+000192c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000192d0: 2020 2070 7574 5f69 6e5f 636f 6c75 6d6e     put_in_column
+000192e0: 202b 3d20 310a 2020 2020 2020 2020 2020   += 1.          
+000192f0: 2020 2020 2020 2020 2020 2020 2020 6365                ce
+00019300: 6c6c 5f70 6f73 6974 696f 6e20 3d20 6c65  ll_position = le
+00019310: 6e28 6329 0a20 2020 2020 2020 2020 2020  n(c).           
+00019320: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+00019330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019340: 2020 2020 2020 2062 7265 616b 0a20 2020         break.   
+00019350: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00019360: 6c65 6e28 636f 6c75 6d6e 7329 203c 2070  len(columns) < p
+00019370: 7574 5f69 6e5f 636f 6c75 6d6e 202b 2031  ut_in_column + 1
+00019380: 3a20 2023 2061 6464 2061 206e 6577 2063  :  # add a new c
+00019390: 6f6c 756d 6e20 6966 2072 6571 7569 7265  olumn if require
+000193a0: 640a 2020 2020 2020 2020 2020 2020 2020  d.              
+000193b0: 2020 2020 2020 636f 6c75 6d6e 732e 6170        columns.ap
+000193c0: 7065 6e64 285b 5d29 0a20 2020 2020 2020  pend([]).       
+000193d0: 2020 2020 2020 2020 2023 2070 7574 207a           # put z
+000193e0: 6572 6f73 2061 7420 7468 6520 6265 6769  eros at the begi
+000193f0: 6e6e 696e 6720 6f66 2074 6865 2063 6f6c  nning of the col
+00019400: 756d 6e20 756e 7469 6c20 7468 6572 6520  umn until there 
+00019410: 6973 2074 6865 2066 6972 7374 206c 6179  is the first lay
+00019420: 6572 0a20 2020 2020 2020 2020 2020 2020  er.             
+00019430: 2020 2069 6620 6365 6c6c 5f70 6f73 6974     if cell_posit
+00019440: 696f 6e20 213d 2030 3a0a 2020 2020 2020  ion != 0:.      
+00019450: 2020 2020 2020 2020 2020 2020 2020 6669                fi
+00019460: 6c6c 5f63 656c 6c73 203d 2063 656c 6c5f  ll_cells = cell_
+00019470: 706f 7369 7469 6f6e 202d 2031 202d 206c  position - 1 - l
+00019480: 656e 2863 6f6c 756d 6e73 5b70 7574 5f69  en(columns[put_i
+00019490: 6e5f 636f 6c75 6d6e 5d29 0a20 2020 2020  n_column]).     
+000194a0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+000194b0: 6f72 2069 2069 6e20 7261 6e67 6528 6669  or i in range(fi
+000194c0: 6c6c 5f63 656c 6c73 293a 0a20 2020 2020  ll_cells):.     
+000194d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000194e0: 2020 2063 6f6c 756d 6e73 5b70 7574 5f69     columns[put_i
+000194f0: 6e5f 636f 6c75 6d6e 5d2e 6170 7065 6e64  n_column].append
+00019500: 2830 290a 2020 2020 2020 2020 2020 2020  (0).            
+00019510: 2020 2020 2320 6170 7065 6e64 2074 6865      # append the
+00019520: 206c 6179 6572 2074 6f20 7468 6520 7072   layer to the pr
+00019530: 6f70 6572 2063 6f6c 756d 6e20 616e 6420  oper column and 
+00019540: 726f 770a 2020 2020 2020 2020 2020 2020  row.            
+00019550: 2020 2020 7820 3d20 5b70 7574 5f69 6e5f      x = [put_in_
+00019560: 636f 6c75 6d6e 202b 2031 2c20 7075 745f  column + 1, put_
+00019570: 696e 5f63 6f6c 756d 6e20 2b20 312c 2070  in_column + 1, p
+00019580: 7574 5f69 6e5f 636f 6c75 6d6e 202b 2032  ut_in_column + 2
+00019590: 2c20 7075 745f 696e 5f63 6f6c 756d 6e20  , put_in_column 
+000195a0: 2b20 325d 0a20 2020 2020 2020 2020 2020  + 2].           
+000195b0: 2020 2020 2063 6f6c 756d 6e73 5b70 7574       columns[put
+000195c0: 5f69 6e5f 636f 6c75 6d6e 5d2e 6170 7065  _in_column].appe
+000195d0: 6e64 285b 6c79 2c20 785d 290a 0a20 2020  nd([ly, x])..   
+000195e0: 2020 2020 2020 2020 2023 2066 696c 6c20           # fill 
+000195f0: 7468 6520 636f 6c75 6d6e 7320 6d61 7472  the columns matr
+00019600: 6978 2077 6974 6820 7a65 726f 7320 6f6e  ix with zeros on
+00019610: 2074 6f70 0a20 2020 2020 2020 2020 2020   top.           
+00019620: 206e 5f72 6f77 7320 3d20 6d61 7828 5b6c   n_rows = max([l
+00019630: 656e 2869 2920 666f 7220 6920 696e 2063  en(i) for i in c
+00019640: 6f6c 756d 6e73 5d29 0a20 2020 2020 2020  olumns]).       
+00019650: 2020 2020 2066 6f72 2063 2069 6e20 636f       for c in co
+00019660: 6c75 6d6e 733a 0a20 2020 2020 2020 2020  lumns:.         
+00019670: 2020 2020 2020 2077 6869 6c65 206c 656e         while len
+00019680: 2863 2920 3c20 6e5f 726f 7773 3a0a 2020  (c) < n_rows:.  
+00019690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000196a0: 2020 632e 6170 7065 6e64 2830 290a 2020    c.append(0).  
+000196b0: 2020 2020 2020 2020 2020 2320 6578 7061            # expa
+000196c0: 6e64 2074 6f20 7468 6520 7269 6768 7420  nd to the right 
+000196d0: 7468 6520 6669 6c6c 2066 6f72 2074 6865  the fill for the
+000196e0: 2073 6967 6e61 6c73 2074 6861 7420 6861   signals that ha
+000196f0: 7665 206e 6f20 6f76 6572 6c61 7020 6f6e  ve no overlap on
+00019700: 2074 6865 2072 6967 6874 0a20 2020 2020   the right.     
+00019710: 2020 2020 2020 2077 6964 7468 203d 206c         width = l
+00019720: 656e 2863 6f6c 756d 6e73 2920 2b20 310a  en(columns) + 1.
+00019730: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00019740: 692c 2063 2069 6e20 656e 756d 6572 6174  i, c in enumerat
+00019750: 6528 636f 6c75 6d6e 735b 3a2d 315d 293a  e(columns[:-1]):
+00019760: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00019770: 2066 6f72 206a 2c20 7220 696e 2065 6e75   for j, r in enu
+00019780: 6d65 7261 7465 2863 293a 0a20 2020 2020  merate(c):.     
+00019790: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000197a0: 6620 7220 213d 2030 3a20 2023 2061 6e64  f r != 0:  # and
+000197b0: 2064 6e61 6d65 203d 3d20 725b 305d 2e6e   dname == r[0].n
+000197c0: 616d 653a 0a20 2020 2020 2020 2020 2020  ame:.           
+000197d0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+000197e0: 636f 6c75 6d6e 735b 6920 2b20 315d 5b6a  columns[i + 1][j
+000197f0: 5d20 3d3d 2030 3a0a 2020 2020 2020 2020  ] == 0:.        
 00019800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019810: 2020 2020 636f 6c6f 7220 3d20 5b66 6c6f      color = [flo
-00019820: 6174 2869 2920 2f20 3235 3620 666f 7220  at(i) / 256 for 
-00019830: 6920 696e 206c 6179 6572 2e63 6f6c 6f72  i in layer.color
-00019840: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
-00019850: 2020 2020 2020 2020 2020 6966 2063 6f6c            if col
-00019860: 6f72 203d 3d20 5b31 2e30 2c20 312e 302c  or == [1.0, 1.0,
-00019870: 2031 2e30 5d3a 0a20 2020 2020 2020 2020   1.0]:.         
-00019880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019890: 2020 2063 6f6c 6f72 203d 205b 302e 392c     color = [0.9,
-000198a0: 2030 2e39 2c20 302e 395d 0a20 2020 2020   0.9, 0.9].     
-000198b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000198c0: 2020 206c 6162 656c 203d 2022 7b7d 2c20     label = "{}, 
-000198d0: 7b7d 2c20 7468 6963 6b3a 207b 3a2e 3366  {}, thick: {:.3f
-000198e0: 7d75 6d2c 2065 6c65 763a 207b 3a2e 3366  }um, elev: {:.3f
-000198f0: 7d75 6d22 2e66 6f72 6d61 7428 0a20 2020  }um".format(.   
+00019810: 2020 2020 2320 6e6f 7468 696e 6720 6f6e      # nothing on
+00019820: 2074 6865 2072 6967 6874 2c20 736f 2065   the right, so e
+00019830: 7870 616e 6420 7468 6520 6669 6c6c 0a20  xpand the fill. 
+00019840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019850: 2020 2020 2020 2020 2020 2078 203d 2072             x = r
+00019860: 5b31 5d0a 2020 2020 2020 2020 2020 2020  [1].            
+00019870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019880: 725b 315d 203d 205b 785b 305d 2c20 785b  r[1] = [x[0], x[
+00019890: 305d 2c20 7769 6474 682c 2077 6964 7468  0], width, width
+000198a0: 5d0a 0a20 2020 2020 2020 2020 2020 2066  ]..            f
+000198b0: 6f72 2063 2069 6e20 636f 6c75 6d6e 733a  or c in columns:
+000198c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000198d0: 2066 6f72 2072 2069 6e20 633a 0a20 2020   for r in c:.   
+000198e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000198f0: 2069 6620 7220 213d 2030 3a0a 2020 2020   if r != 0:.    
 00019900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019910: 2020 2020 2020 2020 206c 6179 6572 2e6e           layer.n
-00019920: 616d 652c 206c 6179 6572 2e6d 6174 6572  ame, layer.mater
-00019930: 6961 6c2c 206c 6179 6572 2e74 6869 636b  ial, layer.thick
-00019940: 6e65 7373 202a 2031 6536 2c20 6c61 7965  ness * 1e6, laye
-00019950: 722e 6c6f 7765 725f 656c 6576 6174 696f  r.lower_elevatio
-00019960: 6e20 2a20 3165 360a 2020 2020 2020 2020  n * 1e6.        
-00019970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019980: 290a 0a20 2020 2020 2020 2020 2020 2020  )..             
-00019990: 2020 2020 2020 2020 2020 2069 6620 6c79             if ly
-000199a0: 5b33 5d20 3e20 303a 0a20 2020 2020 2020  [3] > 0:.       
-000199b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000199c0: 2020 2020 206c 6f77 6572 5f65 6c65 7661       lower_eleva
-000199d0: 7469 6f6e 203d 206c 795b 315d 0a20 2020  tion = ly[1].   
+00019910: 2020 2020 6c79 203d 2072 5b30 5d0a 2020      ly = r[0].  
+00019920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019930: 2020 2020 2020 6c61 7965 7220 3d20 6c79        layer = ly
+00019940: 5b30 5d0a 2020 2020 2020 2020 2020 2020  [0].            
+00019950: 2020 2020 2020 2020 2020 2020 7820 3d20              x = 
+00019960: 725b 315d 0a0a 2020 2020 2020 2020 2020  r[1]..          
+00019970: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00019980: 7365 7420 636f 6c6f 7220 616e 6420 6c61  set color and la
+00019990: 6265 6c0a 2020 2020 2020 2020 2020 2020  bel.            
+000199a0: 2020 2020 2020 2020 2020 2020 636f 6c6f              colo
+000199b0: 7220 3d20 5b66 6c6f 6174 2869 2920 2f20  r = [float(i) / 
+000199c0: 3235 3620 666f 7220 6920 696e 206c 6179  256 for i in lay
+000199d0: 6572 2e63 6f6c 6f72 5d0a 2020 2020 2020  er.color].      
 000199e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000199f0: 2020 2020 2020 2020 2075 7070 6572 5f65           upper_e
-00019a00: 6c65 7661 7469 6f6e 203d 206c 795b 325d  levation = ly[2]
-00019a10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019a20: 2020 2020 2020 2020 2020 2020 2079 203d               y =
-00019a30: 205b 6c6f 7765 725f 656c 6576 6174 696f   [lower_elevatio
-00019a40: 6e2c 2075 7070 6572 5f65 6c65 7661 7469  n, upper_elevati
-00019a50: 6f6e 2c20 7570 7065 725f 656c 6576 6174  on, upper_elevat
-00019a60: 696f 6e2c 206c 6f77 6572 5f65 6c65 7661  ion, lower_eleva
-00019a70: 7469 6f6e 5d0a 2020 2020 2020 2020 2020  tion].          
-00019a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019a90: 2020 706c 6f74 5f64 6174 612e 696e 7365    plot_data.inse
-00019aa0: 7274 2830 2c20 5b78 2c20 792c 2063 6f6c  rt(0, [x, y, col
-00019ab0: 6f72 2c20 6c61 6265 6c2c 2073 6967 6e61  or, label, signa
-00019ac0: 6c5f 616c 7068 612c 2022 6669 6c6c 225d  l_alpha, "fill"]
-00019ad0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00019ae0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00019af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019b00: 2020 2020 2020 2020 2020 2020 6c6f 7765              lowe
-00019b10: 725f 656c 6576 6174 696f 6e20 3d20 6c79  r_elevation = ly
-00019b20: 5b31 5d20 2d20 6d69 6e5f 7468 6963 6b6e  [1] - min_thickn
-00019b30: 6573 7320 2a20 302e 3120 2023 206d 616b  ess * 0.1  # mak
-00019b40: 6520 7468 6520 7a65 726f 2074 6869 636b  e the zero thick
-00019b50: 6e65 7373 206c 6179 6572 7320 6d6f 7265  ness layers more
-00019b60: 2076 6973 6962 6c65 0a20 2020 2020 2020   visible.       
-00019b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019b80: 2020 2020 2075 7070 6572 5f65 6c65 7661       upper_eleva
-00019b90: 7469 6f6e 203d 206c 795b 325d 202b 206d  tion = ly[2] + m
-00019ba0: 696e 5f74 6869 636b 6e65 7373 202a 2030  in_thickness * 0
-00019bb0: 2e31 0a20 2020 2020 2020 2020 2020 2020  .1.             
-00019bc0: 2020 2020 2020 2020 2020 2020 2020 2079                 y
-00019bd0: 203d 205b 6c6f 7765 725f 656c 6576 6174   = [lower_elevat
-00019be0: 696f 6e2c 2075 7070 6572 5f65 6c65 7661  ion, upper_eleva
-00019bf0: 7469 6f6e 2c20 7570 7065 725f 656c 6576  tion, upper_elev
-00019c00: 6174 696f 6e2c 206c 6f77 6572 5f65 6c65  ation, lower_ele
-00019c10: 7661 7469 6f6e 5d0a 2020 2020 2020 2020  vation].        
-00019c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019c30: 2020 2020 2320 7075 7420 7468 6520 7a65      # put the ze
-00019c40: 726f 2074 6869 636b 6e65 7373 206c 6179  ro thickness lay
-00019c50: 6572 7320 6f6e 2074 6f70 0a20 2020 2020  ers on top.     
-00019c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019c70: 2020 2020 2020 2070 6c6f 745f 6461 7461         plot_data
-00019c80: 2e61 7070 656e 6428 5b78 2c20 792c 2063  .append([x, y, c
-00019c90: 6f6c 6f72 2c20 6c61 6265 6c2c 207a 6572  olor, label, zer
-00019ca0: 6f5f 7468 6963 6b6e 6573 735f 616c 7068  o_thickness_alph
-00019cb0: 612c 2022 6669 6c6c 225d 290a 0a20 2020  a, "fill"])..   
-00019cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019cd0: 2020 2020 2023 2063 7265 6174 6520 616e       # create an
-00019ce0: 6e6f 7461 7469 6f6e 0a20 2020 2020 2020  notation.       
-00019cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019d00: 2078 5f70 6f73 203d 2031 2e30 0a20 2020   x_pos = 1.0.   
-00019d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019d20: 2020 2020 2079 5f70 6f73 203d 2028 6c6f       y_pos = (lo
-00019d30: 7765 725f 656c 6576 6174 696f 6e20 2b20  wer_elevation + 
-00019d40: 7570 7065 725f 656c 6576 6174 696f 6e29  upper_elevation)
-00019d50: 202f 2032 0a20 2020 2020 2020 2020 2020   / 2.           
-00019d60: 2020 2020 2020 2020 2020 2020 2061 6e6e               ann
-00019d70: 6f74 6174 696f 6e73 2e61 7070 656e 6428  otations.append(
-00019d80: 5b78 5f70 6f73 2c20 795f 706f 732c 206c  [x_pos, y_pos, l
-00019d90: 6179 6572 2e6e 616d 652c 207b 2266 6f6e  ayer.name, {"fon
-00019da0: 7473 697a 6522 3a20 616e 6e6f 7461 7469  tsize": annotati
-00019db0: 6f6e 5f66 6f6e 7473 697a 657d 5d29 0a0a  on_fontsize}])..
-00019dc0: 2020 2020 2020 2020 2020 2020 2320 6f72              # or
-00019dd0: 6465 7220 7468 6520 616e 6e6f 7461 7469  der the annotati
-00019de0: 6f6e 7320 6261 7365 6420 6f6e 2079 5f70  ons based on y_p
-00019df0: 6f73 2028 6974 2069 7320 6e65 6365 7373  os (it is necess
-00019e00: 6172 7920 6c61 7465 7220 746f 206d 6f76  ary later to mov
-00019e10: 6520 7468 656d 2074 6f20 6176 6f69 6420  e them to avoid 
-00019e20: 7465 7874 206f 7665 726c 6170 7069 6e67  text overlapping
-00019e30: 290a 2020 2020 2020 2020 2020 2020 616e  ).            an
-00019e40: 6e6f 7461 7469 6f6e 732e 736f 7274 286b  notations.sort(k
-00019e50: 6579 3d6c 616d 6264 6120 653a 2065 5b31  ey=lambda e: e[1
-00019e60: 5d29 0a20 2020 2020 2020 2020 2020 2023  ]).            #
-00019e70: 206d 6f76 6520 616c 6c20 7468 6520 616e   move all the an
-00019e80: 6e6f 7461 7469 6f6e 7320 746f 2074 6865  notations to the
-00019e90: 2066 696e 616c 2078 2028 6974 2063 6f75   final x (it cou
-00019ea0: 6c64 2062 6520 6c61 7267 6572 2074 6861  ld be larger tha
-00019eb0: 6e20 3120 6475 6520 746f 2061 6464 6974  n 1 due to addit
-00019ec0: 696f 6e61 6c20 636f 6c75 6d6e 7329 0a20  ional columns). 
-00019ed0: 2020 2020 2020 2020 2020 2077 6964 7468             width
-00019ee0: 203d 206c 656e 2863 6f6c 756d 6e73 2920   = len(columns) 
-00019ef0: 2b20 310a 2020 2020 2020 2020 2020 2020  + 1.            
-00019f00: 666f 7220 692c 2061 2069 6e20 656e 756d  for i, a in enum
-00019f10: 6572 6174 6528 616e 6e6f 7461 7469 6f6e  erate(annotation
-00019f20: 7329 3a0a 2020 2020 2020 2020 2020 2020  s):.            
-00019f30: 2020 2020 615b 305d 203d 2077 6964 7468      a[0] = width
-00019f40: 202b 2061 6e6e 6f74 6174 696f 6e5f 785f   + annotation_x_
-00019f50: 6d61 7267 696e 202a 2077 6964 7468 0a0a  margin * width..
-00019f60: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-00019f70: 6c79 2069 6e20 6469 656c 6563 7472 6963  ly in dielectric
-00019f80: 5f6c 6179 6572 733a 0a20 2020 2020 2020  _layers:.       
-00019f90: 2020 2020 2020 2020 206c 6179 6572 203d           layer =
-00019fa0: 206c 795b 305d 0a20 2020 2020 2020 2020   ly[0].         
-00019fb0: 2020 2020 2020 2023 2073 6574 2063 6f6c         # set col
-00019fc0: 6f72 2061 6e64 206c 6162 656c 0a20 2020  or and label.   
-00019fd0: 2020 2020 2020 2020 2020 2020 2063 6f6c               col
-00019fe0: 6f72 203d 205b 666c 6f61 7428 6929 202f  or = [float(i) /
-00019ff0: 2032 3536 2066 6f72 2069 2069 6e20 6c61   256 for i in la
-0001a000: 7965 722e 636f 6c6f 725d 0a20 2020 2020  yer.color].     
-0001a010: 2020 2020 2020 2020 2020 2069 6620 636f             if co
-0001a020: 6c6f 7220 3d3d 205b 312e 302c 2031 2e30  lor == [1.0, 1.0
-0001a030: 2c20 312e 305d 3a0a 2020 2020 2020 2020  , 1.0]:.        
-0001a040: 2020 2020 2020 2020 2020 2020 636f 6c6f              colo
-0001a050: 7220 3d20 5b30 2e39 2c20 302e 392c 2030  r = [0.9, 0.9, 0
-0001a060: 2e39 5d0a 2020 2020 2020 2020 2020 2020  .9].            
-0001a070: 2020 2020 6c61 6265 6c20 3d20 227b 7d2c      label = "{},
-0001a080: 207b 7d2c 2074 6869 636b 3a20 7b3a 2e33   {}, thick: {:.3
-0001a090: 667d 756d 2c20 656c 6576 3a20 7b3a 2e33  f}um, elev: {:.3
-0001a0a0: 667d 756d 222e 666f 726d 6174 280a 2020  f}um".format(.  
-0001a0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a0c0: 2020 6c61 7965 722e 6e61 6d65 2c20 6c61    layer.name, la
-0001a0d0: 7965 722e 6d61 7465 7269 616c 2c20 6c61  yer.material, la
-0001a0e0: 7965 722e 7468 6963 6b6e 6573 7320 2a20  yer.thickness * 
-0001a0f0: 3165 362c 206c 6179 6572 2e6c 6f77 6572  1e6, layer.lower
-0001a100: 5f65 6c65 7661 7469 6f6e 202a 2031 6536  _elevation * 1e6
-0001a110: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001a120: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
-0001a130: 2020 2023 2063 7265 6174 6520 7468 6520     # create the 
-0001a140: 7061 7463 680a 2020 2020 2020 2020 2020  patch.          
-0001a150: 2020 2020 2020 6c6f 7765 725f 656c 6576        lower_elev
-0001a160: 6174 696f 6e20 3d20 6c79 5b31 5d0a 2020  ation = ly[1].  
-0001a170: 2020 2020 2020 2020 2020 2020 2020 7570                up
-0001a180: 7065 725f 656c 6576 6174 696f 6e20 3d20  per_elevation = 
-0001a190: 6c79 5b32 5d0a 2020 2020 2020 2020 2020  ly[2].          
-0001a1a0: 2020 2020 2020 7920 3d20 5b6c 6f77 6572        y = [lower
-0001a1b0: 5f65 6c65 7661 7469 6f6e 2c20 7570 7065  _elevation, uppe
-0001a1c0: 725f 656c 6576 6174 696f 6e2c 2075 7070  r_elevation, upp
-0001a1d0: 6572 5f65 6c65 7661 7469 6f6e 2c20 6c6f  er_elevation, lo
-0001a1e0: 7765 725f 656c 6576 6174 696f 6e5d 0a20  wer_elevation]. 
-0001a1f0: 2020 2020 2020 2020 2020 2020 2020 2078                 x
-0001a200: 203d 205b 302c 2030 2c20 7769 6474 682c   = [0, 0, width,
-0001a210: 2077 6964 7468 5d0a 2020 2020 2020 2020   width].        
-0001a220: 2020 2020 2020 2020 706c 6f74 5f64 6174          plot_dat
-0001a230: 612e 696e 7365 7274 2830 2c20 5b78 2c20  a.insert(0, [x, 
-0001a240: 792c 2063 6f6c 6f72 2c20 6c61 6265 6c2c  y, color, label,
-0001a250: 2064 6965 6c5f 616c 7068 612c 2022 6669   diel_alpha, "fi
-0001a260: 6c6c 225d 290a 0a20 2020 2020 2020 2020  ll"])..         
-0001a270: 2020 2020 2020 2023 2063 7265 6174 6520         # create 
-0001a280: 616e 6e6f 7461 7469 6f6e 0a20 2020 2020  annotation.     
-0001a290: 2020 2020 2020 2020 2020 2078 5f70 6f73             x_pos
-0001a2a0: 203d 202d 616e 6e6f 7461 7469 6f6e 5f78   = -annotation_x
-0001a2b0: 5f6d 6172 6769 6e20 2a20 7769 6474 680a  _margin * width.
-0001a2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a2d0: 795f 706f 7320 3d20 286c 6f77 6572 5f65  y_pos = (lower_e
-0001a2e0: 6c65 7661 7469 6f6e 202b 2075 7070 6572  levation + upper
-0001a2f0: 5f65 6c65 7661 7469 6f6e 2920 2f20 320a  _elevation) / 2.
-0001a300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a310: 616e 6e6f 7461 7469 6f6e 732e 6170 7065  annotations.appe
-0001a320: 6e64 280a 2020 2020 2020 2020 2020 2020  nd(.            
-0001a330: 2020 2020 2020 2020 5b78 5f70 6f73 2c20          [x_pos, 
-0001a340: 795f 706f 732c 206c 6179 6572 2e6e 616d  y_pos, layer.nam
-0001a350: 652c 207b 2266 6f6e 7473 697a 6522 3a20  e, {"fontsize": 
-0001a360: 616e 6e6f 7461 7469 6f6e 5f66 6f6e 7473  annotation_fonts
-0001a370: 697a 652c 2022 686f 7269 7a6f 6e74 616c  ize, "horizontal
-0001a380: 616c 6967 6e6d 656e 7422 3a20 2272 6967  alignment": "rig
-0001a390: 6874 227d 5d0a 2020 2020 2020 2020 2020  ht"}].          
-0001a3a0: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
-0001a3b0: 2020 2020 2023 2065 7661 6c75 6174 6520       # evaluate 
-0001a3c0: 7468 6520 6c65 6765 6e64 2072 656f 7264  the legend reord
-0001a3d0: 6572 0a20 2020 2020 2020 2020 2020 206c  er.            l
-0001a3e0: 6567 656e 645f 6f72 6465 7220 3d20 5b5d  egend_order = []
-0001a3f0: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-0001a400: 206c 7920 696e 2064 6965 6c65 6374 7269   ly in dielectri
-0001a410: 635f 6c61 7965 7273 3a0a 2020 2020 2020  c_layers:.      
-0001a420: 2020 2020 2020 2020 2020 6e61 6d65 203d            name =
-0001a430: 206c 795b 305d 2e6e 616d 650a 2020 2020   ly[0].name.    
-0001a440: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-0001a450: 692c 2061 2069 6e20 656e 756d 6572 6174  i, a in enumerat
-0001a460: 6528 706c 6f74 5f64 6174 6129 3a0a 2020  e(plot_data):.  
-0001a470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a480: 2020 696e 616d 6520 3d20 615b 335d 2e73    iname = a[3].s
-0001a490: 706c 6974 2822 2c22 295b 305d 0a20 2020  plit(",")[0].   
-0001a4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a4b0: 2069 6620 6e61 6d65 203d 3d20 696e 616d   if name == inam
-0001a4c0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0001a4d0: 2020 2020 2020 2020 2020 206c 6567 656e             legen
-0001a4e0: 645f 6f72 6465 722e 6170 7065 6e64 2869  d_order.append(i
-0001a4f0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0001a500: 2020 2020 2020 2020 2020 6272 6561 6b0a            break.
-0001a510: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-0001a520: 6c79 2069 6e20 7369 676e 616c 5f6c 6179  ly in signal_lay
-0001a530: 6572 733a 0a20 2020 2020 2020 2020 2020  ers:.           
-0001a540: 2020 2020 206e 616d 6520 3d20 6c79 5b30       name = ly[0
-0001a550: 5d2e 6e61 6d65 0a20 2020 2020 2020 2020  ].name.         
-0001a560: 2020 2020 2020 2066 6f72 2069 2c20 6120         for i, a 
-0001a570: 696e 2065 6e75 6d65 7261 7465 2870 6c6f  in enumerate(plo
-0001a580: 745f 6461 7461 293a 0a20 2020 2020 2020  t_data):.       
-0001a590: 2020 2020 2020 2020 2020 2020 2069 6e61               ina
-0001a5a0: 6d65 203d 2061 5b33 5d2e 7370 6c69 7428  me = a[3].split(
-0001a5b0: 222c 2229 5b30 5d0a 2020 2020 2020 2020  ",")[0].        
-0001a5c0: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-0001a5d0: 616d 6520 3d3d 2069 6e61 6d65 3a0a 2020  ame == iname:.  
-0001a5e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a5f0: 2020 2020 2020 6c65 6765 6e64 5f6f 7264        legend_ord
-0001a600: 6572 2e61 7070 656e 6428 6929 0a20 2020  er.append(i).   
-0001a610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a620: 2020 2020 2062 7265 616b 0a0a 2020 2020       break..    
-0001a630: 2020 2020 2320 6361 6c63 756c 6174 6520      # calculate 
-0001a640: 7468 6520 6578 7472 656d 6974 6965 7320  the extremities 
-0001a650: 6f66 2074 6865 2070 6c6f 740a 2020 2020  of the plot.    
-0001a660: 2020 2020 785f 6d69 6e20 3d20 302e 300a      x_min = 0.0.
-0001a670: 2020 2020 2020 2020 785f 6d61 7820 3d20          x_max = 
-0001a680: 6d61 7828 5b6d 6178 2869 5b30 5d29 2066  max([max(i[0]) f
-0001a690: 6f72 2069 2069 6e20 706c 6f74 5f64 6174  or i in plot_dat
-0001a6a0: 615d 290a 2020 2020 2020 2020 6966 2073  a]).        if s
-0001a6b0: 7461 636b 7570 5f6d 6f64 6520 3d3d 2022  tackup_mode == "
-0001a6c0: 4c61 6d69 6e61 7465 223a 0a20 2020 2020  Laminate":.     
-0001a6d0: 2020 2020 2020 2079 5f6d 696e 203d 206c         y_min = l
-0001a6e0: 6179 6572 735f 6461 7461 5b30 5d5b 315d  ayers_data[0][1]
-0001a6f0: 0a20 2020 2020 2020 2020 2020 2079 5f6d  .            y_m
-0001a700: 6178 203d 206c 6179 6572 735f 6461 7461  ax = layers_data
-0001a710: 5b2d 315d 5b32 5d0a 2020 2020 2020 2020  [-1][2].        
-0001a720: 656c 6966 2073 7461 636b 7570 5f6d 6f64  elif stackup_mod
-0001a730: 6520 3d3d 2022 4f76 6572 6c61 7070 696e  e == "Overlappin
-0001a740: 6722 3a0a 2020 2020 2020 2020 2020 2020  g":.            
-0001a750: 795f 6d69 6e20 3d20 6d69 6e28 6469 656c  y_min = min(diel
-0001a760: 6563 7472 6963 5f6c 6179 6572 735b 305d  ectric_layers[0]
-0001a770: 5b31 5d2c 2073 6967 6e61 6c5f 6c61 7965  [1], signal_laye
-0001a780: 7273 5b30 5d5b 315d 290a 2020 2020 2020  rs[0][1]).      
-0001a790: 2020 2020 2020 795f 6d61 7820 3d20 6d61        y_max = ma
-0001a7a0: 7828 6469 656c 6563 7472 6963 5f6c 6179  x(dielectric_lay
-0001a7b0: 6572 735b 2d31 5d5b 325d 2c20 7369 676e  ers[-1][2], sign
-0001a7c0: 616c 5f6c 6179 6572 735b 2d31 5d5b 325d  al_layers[-1][2]
-0001a7d0: 290a 0a20 2020 2020 2020 2023 206d 6f76  )..        # mov
-0001a7e0: 6520 7468 6520 616e 6e6f 7461 7469 6f6e  e the annotation
-0001a7f0: 7320 746f 2061 766f 6964 2074 6578 7420  s to avoid text 
-0001a800: 6f76 6572 6c61 7070 696e 670a 2020 2020  overlapping.    
-0001a810: 2020 2020 6e65 775f 616e 6e6f 7461 7469      new_annotati
-0001a820: 6f6e 7320 3d20 5b5d 0a20 2020 2020 2020  ons = [].       
-0001a830: 2066 6f72 2069 2c20 6120 696e 2065 6e75   for i, a in enu
-0001a840: 6d65 7261 7465 2861 6e6e 6f74 6174 696f  merate(annotatio
-0001a850: 6e73 293a 0a20 2020 2020 2020 2020 2020  ns):.           
-0001a860: 2069 6620 6920 3e20 3020 616e 6420 6162   if i > 0 and ab
-0001a870: 7328 615b 315d 202d 2061 6e6e 6f74 6174  s(a[1] - annotat
-0001a880: 696f 6e73 5b69 202d 2031 5d5b 315d 2920  ions[i - 1][1]) 
-0001a890: 3c20 2879 5f6d 6178 202d 2079 5f6d 696e  < (y_max - y_min
-0001a8a0: 2920 2f20 3735 3a0a 2020 2020 2020 2020  ) / 75:.        
-0001a8b0: 2020 2020 2020 2020 6e65 775f 616e 6e6f          new_anno
-0001a8c0: 7461 7469 6f6e 735b 2d31 5d5b 325d 203d  tations[-1][2] =
-0001a8d0: 2073 7472 286e 6577 5f61 6e6e 6f74 6174   str(new_annotat
-0001a8e0: 696f 6e73 5b2d 315d 5b32 5d29 202b 2022  ions[-1][2]) + "
-0001a8f0: 2c20 2220 2b20 7374 7228 615b 325d 290a  , " + str(a[2]).
-0001a900: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0001a910: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001a920: 2020 6e65 775f 616e 6e6f 7461 7469 6f6e    new_annotation
-0001a930: 732e 6170 7065 6e64 2861 290a 2020 2020  s.append(a).    
-0001a940: 2020 2020 616e 6e6f 7461 7469 6f6e 7320      annotations 
-0001a950: 3d20 6e65 775f 616e 6e6f 7461 7469 6f6e  = new_annotation
-0001a960: 730a 0a20 2020 2020 2020 2069 6620 706c  s..        if pl
-0001a970: 6f74 5f64 6566 696e 6974 696f 6e73 3a0a  ot_definitions:.
-0001a980: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-0001a990: 7461 636b 7570 5f6d 6f64 6520 3d3d 2022  tackup_mode == "
-0001a9a0: 4f76 6572 6c61 7070 696e 6722 3a0a 2020  Overlapping":.  
-0001a9b0: 2020 2020 2020 2020 2020 2020 2020 7365                se
-0001a9c0: 6c66 2e5f 6c6f 6767 6572 2e77 6172 6e69  lf._logger.warni
-0001a9d0: 6e67 2822 506c 6f74 206f 6620 7061 6473  ng("Plot of pads
-0001a9e0: 7461 636b 7320 6172 6520 7375 7070 6f72  tacks are suppor
-0001a9f0: 7465 6420 6f6e 6c79 2066 6f72 204c 616d  ted only for Lam
-0001aa00: 696e 6174 6520 6d6f 6465 2e22 290a 0a20  inate mode.").. 
-0001aa10: 2020 2020 2020 2020 2020 206d 6178 5f70             max_p
-0001aa20: 6c6f 7473 203d 2031 300a 0a20 2020 2020  lots = 10..     
-0001aa30: 2020 2020 2020 2069 6620 6e6f 7420 6973         if not is
-0001aa40: 696e 7374 616e 6365 2870 6c6f 745f 6465  instance(plot_de
-0001aa50: 6669 6e69 7469 6f6e 732c 206c 6973 7429  finitions, list)
-0001aa60: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001aa70: 2020 706c 6f74 5f64 6566 696e 6974 696f    plot_definitio
-0001aa80: 6e73 203d 205b 706c 6f74 5f64 6566 696e  ns = [plot_defin
-0001aa90: 6974 696f 6e73 5d0a 2020 2020 2020 2020  itions].        
-0001aaa0: 2020 2020 636f 6c6f 725f 696e 6465 7820      color_index 
-0001aab0: 3d20 300a 2020 2020 2020 2020 2020 2020  = 0.            
-0001aac0: 636f 6c6f 725f 6b65 7973 203d 206c 6973  color_keys = lis
-0001aad0: 7428 4353 5334 5f43 4f4c 4f52 532e 6b65  t(CSS4_COLORS.ke
-0001aae0: 7973 2829 290a 2020 2020 2020 2020 2020  ys()).          
-0001aaf0: 2020 6465 6c74 6120 3d20 3120 2f20 286d    delta = 1 / (m
-0001ab00: 6178 5f70 6c6f 7473 202b 2031 2920 2023  ax_plots + 1)  #
-0001ab10: 2070 6164 7374 6163 6b20 7370 6163 696e   padstack spacin
-0001ab20: 6720 696e 2070 6c6f 7420 636f 6f72 6469  g in plot coordi
-0001ab30: 6e61 7465 730a 2020 2020 2020 2020 2020  nates.          
-0001ab40: 2020 785f 7374 6172 7420 3d20 6465 6c74    x_start = delt
-0001ab50: 610a 0a20 2020 2020 2020 2020 2020 2023  a..            #
-0001ab60: 2066 696e 6420 7468 6520 6d61 7820 7061   find the max pa
-0001ab70: 6473 7461 636b 2073 697a 6520 746f 2063  dstack size to c
-0001ab80: 616c 6375 6c61 7465 2074 6865 2073 6361  alculate the sca
-0001ab90: 6c69 6e67 2066 6163 746f 720a 2020 2020  ling factor.    
-0001aba0: 2020 2020 2020 2020 6d61 785f 7061 6473          max_pads
-0001abb0: 7461 6b5f 7369 7a65 203d 2030 0a20 2020  tak_size = 0.   
-0001abc0: 2020 2020 2020 2020 2066 6f72 2064 6566           for def
-0001abd0: 696e 6974 696f 6e20 696e 2070 6c6f 745f  inition in plot_
-0001abe0: 6465 6669 6e69 7469 6f6e 733a 0a20 2020  definitions:.   
-0001abf0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0001ac00: 6973 696e 7374 616e 6365 2864 6566 696e  isinstance(defin
-0001ac10: 6974 696f 6e2c 2073 7472 293a 0a20 2020  ition, str):.   
-0001ac20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ac30: 2064 6566 696e 6974 696f 6e20 3d20 7365   definition = se
-0001ac40: 6c66 2e5f 7065 6462 2e70 6164 7374 6163  lf._pedb.padstac
-0001ac50: 6b73 2e64 6566 696e 6974 696f 6e73 5b64  ks.definitions[d
-0001ac60: 6566 696e 6974 696f 6e5d 0a20 2020 2020  efinition].     
-0001ac70: 2020 2020 2020 2020 2020 2066 6f72 206c             for l
-0001ac80: 6179 6572 2c20 6465 6673 2069 6e20 6465  ayer, defs in de
-0001ac90: 6669 6e69 7469 6f6e 2e70 6164 5f62 795f  finition.pad_by_
-0001aca0: 6c61 7965 722e 6974 656d 7328 293a 0a20  layer.items():. 
-0001acb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001acc0: 2020 2070 6164 5f73 6861 7065 203d 2064     pad_shape = d
-0001acd0: 6566 732e 6765 6f6d 6574 7279 5f74 7970  efs.geometry_typ
-0001ace0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-0001acf0: 2020 2020 2020 7061 7261 6d73 203d 2064        params = d
-0001ad00: 6566 732e 7061 7261 6d65 7465 7273 5f76  efs.parameters_v
-0001ad10: 616c 7565 730a 2020 2020 2020 2020 2020  alues.          
-0001ad20: 2020 2020 2020 2020 2020 6966 2070 6164            if pad
-0001ad30: 5f73 6861 7065 2069 6e20 5b31 2c20 322c  _shape in [1, 2,
-0001ad40: 2036 5d3a 0a20 2020 2020 2020 2020 2020   6]:.           
-0001ad50: 2020 2020 2020 2020 2020 2020 2070 6164               pad
-0001ad60: 5f73 697a 6520 3d20 7061 7261 6d73 5b30  _size = params[0
-0001ad70: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
-0001ad80: 2020 2020 2020 656c 6966 2070 6164 5f73        elif pad_s
-0001ad90: 6861 7065 2069 6e20 5b33 2c20 342c 2035  hape in [3, 4, 5
-0001ada0: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
-0001adb0: 2020 2020 2020 2020 2020 2070 6164 5f73             pad_s
-0001adc0: 697a 6520 3d20 6d61 7828 7061 7261 6d73  ize = max(params
-0001add0: 5b30 5d2c 2070 6172 616d 735b 315d 290a  [0], params[1]).
-0001ade0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001adf0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0001ae00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ae10: 2020 7061 645f 7369 7a65 203d 2031 652d    pad_size = 1e-
-0001ae20: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
-0001ae30: 2020 2020 2020 6d61 785f 7061 6473 7461        max_padsta
-0001ae40: 6b5f 7369 7a65 203d 206d 6178 2870 6164  k_size = max(pad
-0001ae50: 5f73 697a 652c 206d 6178 5f70 6164 7374  _size, max_padst
-0001ae60: 616b 5f73 697a 6529 0a20 2020 2020 2020  ak_size).       
-0001ae70: 2020 2020 2020 2020 2069 6620 6465 6669           if defi
-0001ae80: 6e69 7469 6f6e 2e68 6f6c 655f 7072 6f70  nition.hole_prop
-0001ae90: 6572 7469 6573 3a0a 2020 2020 2020 2020  erties:.        
-0001aea0: 2020 2020 2020 2020 2020 2020 686f 6c65              hole
-0001aeb0: 5f64 203d 2064 6566 696e 6974 696f 6e2e  _d = definition.
-0001aec0: 686f 6c65 5f70 726f 7065 7274 6965 735b  hole_properties[
-0001aed0: 305d 0a20 2020 2020 2020 2020 2020 2020  0].             
-0001aee0: 2020 2020 2020 206d 6178 5f70 6164 7374         max_padst
-0001aef0: 616b 5f73 697a 6520 3d20 6d61 7828 686f  ak_size = max(ho
-0001af00: 6c65 5f64 2c20 6d61 785f 7061 6473 7461  le_d, max_padsta
-0001af10: 6b5f 7369 7a65 290a 2020 2020 2020 2020  k_size).        
-0001af20: 2020 2020 7363 616c 696e 675f 665f 7061      scaling_f_pa
-0001af30: 6420 3d20 2832 202f 2028 286d 6178 5f70  d = (2 / ((max_p
-0001af40: 6c6f 7473 202b 2031 2920 2a20 3329 2920  lots + 1) * 3)) 
-0001af50: 2f20 6d61 785f 7061 6473 7461 6b5f 7369  / max_padstak_si
-0001af60: 7a65 0a0a 2020 2020 2020 2020 2020 2020  ze..            
-0001af70: 666f 7220 6465 6669 6e69 7469 6f6e 2069  for definition i
-0001af80: 6e20 706c 6f74 5f64 6566 696e 6974 696f  n plot_definitio
-0001af90: 6e73 3a0a 2020 2020 2020 2020 2020 2020  ns:.            
-0001afa0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-0001afb0: 6528 6465 6669 6e69 7469 6f6e 2c20 7374  e(definition, st
-0001afc0: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
-0001afd0: 2020 2020 2020 2020 6465 6669 6e69 7469          definiti
-0001afe0: 6f6e 203d 2073 656c 662e 5f70 6564 622e  on = self._pedb.
-0001aff0: 7061 6473 7461 636b 732e 6465 6669 6e69  padstacks.defini
-0001b000: 7469 6f6e 735b 6465 6669 6e69 7469 6f6e  tions[definition
-0001b010: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
-0001b020: 2020 6d69 6e5f 6c65 203d 2031 6531 320a    min_le = 1e12.
+000199f0: 2020 6966 2063 6f6c 6f72 203d 3d20 5b31    if color == [1
+00019a00: 2e30 2c20 312e 302c 2031 2e30 5d3a 0a20  .0, 1.0, 1.0]:. 
+00019a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019a20: 2020 2020 2020 2020 2020 2063 6f6c 6f72             color
+00019a30: 203d 205b 302e 392c 2030 2e39 2c20 302e   = [0.9, 0.9, 0.
+00019a40: 395d 0a20 2020 2020 2020 2020 2020 2020  9].             
+00019a50: 2020 2020 2020 2020 2020 206c 6162 656c             label
+00019a60: 203d 2022 7b7d 2c20 7b7d 2c20 7468 6963   = "{}, {}, thic
+00019a70: 6b3a 207b 3a2e 3366 7d75 6d2c 2065 6c65  k: {:.3f}um, ele
+00019a80: 763a 207b 3a2e 3366 7d75 6d22 2e66 6f72  v: {:.3f}um".for
+00019a90: 6d61 7428 0a20 2020 2020 2020 2020 2020  mat(.           
+00019aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019ab0: 206c 6179 6572 2e6e 616d 652c 206c 6179   layer.name, lay
+00019ac0: 6572 2e6d 6174 6572 6961 6c2c 206c 6179  er.material, lay
+00019ad0: 6572 2e74 6869 636b 6e65 7373 202a 2031  er.thickness * 1
+00019ae0: 6536 2c20 6c61 7965 722e 6c6f 7765 725f  e6, layer.lower_
+00019af0: 656c 6576 6174 696f 6e20 2a20 3165 360a  elevation * 1e6.
+00019b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019b10: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
+00019b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019b30: 2020 2069 6620 6c79 5b33 5d20 3e20 303a     if ly[3] > 0:
+00019b40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00019b50: 2020 2020 2020 2020 2020 2020 206c 6f77               low
+00019b60: 6572 5f65 6c65 7661 7469 6f6e 203d 206c  er_elevation = l
+00019b70: 795b 315d 0a20 2020 2020 2020 2020 2020  y[1].           
+00019b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019b90: 2075 7070 6572 5f65 6c65 7661 7469 6f6e   upper_elevation
+00019ba0: 203d 206c 795b 325d 0a20 2020 2020 2020   = ly[2].       
+00019bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019bc0: 2020 2020 2079 203d 205b 6c6f 7765 725f       y = [lower_
+00019bd0: 656c 6576 6174 696f 6e2c 2075 7070 6572  elevation, upper
+00019be0: 5f65 6c65 7661 7469 6f6e 2c20 7570 7065  _elevation, uppe
+00019bf0: 725f 656c 6576 6174 696f 6e2c 206c 6f77  r_elevation, low
+00019c00: 6572 5f65 6c65 7661 7469 6f6e 5d0a 2020  er_elevation].  
+00019c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019c20: 2020 2020 2020 2020 2020 706c 6f74 5f64            plot_d
+00019c30: 6174 612e 696e 7365 7274 2830 2c20 5b78  ata.insert(0, [x
+00019c40: 2c20 792c 2063 6f6c 6f72 2c20 6c61 6265  , y, color, labe
+00019c50: 6c2c 2073 6967 6e61 6c5f 616c 7068 612c  l, signal_alpha,
+00019c60: 2022 6669 6c6c 225d 290a 2020 2020 2020   "fill"]).      
+00019c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019c80: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00019c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019ca0: 2020 2020 6c6f 7765 725f 656c 6576 6174      lower_elevat
+00019cb0: 696f 6e20 3d20 6c79 5b31 5d20 2d20 6d69  ion = ly[1] - mi
+00019cc0: 6e5f 7468 6963 6b6e 6573 7320 2a20 302e  n_thickness * 0.
+00019cd0: 3120 2023 206d 616b 6520 7468 6520 7a65  1  # make the ze
+00019ce0: 726f 2074 6869 636b 6e65 7373 206c 6179  ro thickness lay
+00019cf0: 6572 7320 6d6f 7265 2076 6973 6962 6c65  ers more visible
+00019d00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00019d10: 2020 2020 2020 2020 2020 2020 2075 7070               upp
+00019d20: 6572 5f65 6c65 7661 7469 6f6e 203d 206c  er_elevation = l
+00019d30: 795b 325d 202b 206d 696e 5f74 6869 636b  y[2] + min_thick
+00019d40: 6e65 7373 202a 2030 2e31 0a20 2020 2020  ness * 0.1.     
+00019d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019d60: 2020 2020 2020 2079 203d 205b 6c6f 7765         y = [lowe
+00019d70: 725f 656c 6576 6174 696f 6e2c 2075 7070  r_elevation, upp
+00019d80: 6572 5f65 6c65 7661 7469 6f6e 2c20 7570  er_elevation, up
+00019d90: 7065 725f 656c 6576 6174 696f 6e2c 206c  per_elevation, l
+00019da0: 6f77 6572 5f65 6c65 7661 7469 6f6e 5d0a  ower_elevation].
+00019db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019dc0: 2020 2020 2020 2020 2020 2020 2320 7075              # pu
+00019dd0: 7420 7468 6520 7a65 726f 2074 6869 636b  t the zero thick
+00019de0: 6e65 7373 206c 6179 6572 7320 6f6e 2074  ness layers on t
+00019df0: 6f70 0a20 2020 2020 2020 2020 2020 2020  op.             
+00019e00: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00019e10: 6c6f 745f 6461 7461 2e61 7070 656e 6428  lot_data.append(
+00019e20: 5b78 2c20 792c 2063 6f6c 6f72 2c20 6c61  [x, y, color, la
+00019e30: 6265 6c2c 207a 6572 6f5f 7468 6963 6b6e  bel, zero_thickn
+00019e40: 6573 735f 616c 7068 612c 2022 6669 6c6c  ess_alpha, "fill
+00019e50: 225d 290a 0a20 2020 2020 2020 2020 2020  "])..           
+00019e60: 2020 2020 2020 2020 2020 2020 2023 2063               # c
+00019e70: 7265 6174 6520 616e 6e6f 7461 7469 6f6e  reate annotation
+00019e80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00019e90: 2020 2020 2020 2020 2078 5f70 6f73 203d           x_pos =
+00019ea0: 2031 2e30 0a20 2020 2020 2020 2020 2020   1.0.           
+00019eb0: 2020 2020 2020 2020 2020 2020 2079 5f70               y_p
+00019ec0: 6f73 203d 2028 6c6f 7765 725f 656c 6576  os = (lower_elev
+00019ed0: 6174 696f 6e20 2b20 7570 7065 725f 656c  ation + upper_el
+00019ee0: 6576 6174 696f 6e29 202f 2032 0a20 2020  evation) / 2.   
+00019ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019f00: 2020 2020 2061 6e6e 6f74 6174 696f 6e73       annotations
+00019f10: 2e61 7070 656e 6428 5b78 5f70 6f73 2c20  .append([x_pos, 
+00019f20: 795f 706f 732c 206c 6179 6572 2e6e 616d  y_pos, layer.nam
+00019f30: 652c 207b 2266 6f6e 7473 697a 6522 3a20  e, {"fontsize": 
+00019f40: 616e 6e6f 7461 7469 6f6e 5f66 6f6e 7473  annotation_fonts
+00019f50: 697a 657d 5d29 0a0a 2020 2020 2020 2020  ize}])..        
+00019f60: 2020 2020 2320 6f72 6465 7220 7468 6520      # order the 
+00019f70: 616e 6e6f 7461 7469 6f6e 7320 6261 7365  annotations base
+00019f80: 6420 6f6e 2079 5f70 6f73 2028 6974 2069  d on y_pos (it i
+00019f90: 7320 6e65 6365 7373 6172 7920 6c61 7465  s necessary late
+00019fa0: 7220 746f 206d 6f76 6520 7468 656d 2074  r to move them t
+00019fb0: 6f20 6176 6f69 6420 7465 7874 206f 7665  o avoid text ove
+00019fc0: 726c 6170 7069 6e67 290a 2020 2020 2020  rlapping).      
+00019fd0: 2020 2020 2020 616e 6e6f 7461 7469 6f6e        annotation
+00019fe0: 732e 736f 7274 286b 6579 3d6c 616d 6264  s.sort(key=lambd
+00019ff0: 6120 653a 2065 5b31 5d29 0a20 2020 2020  a e: e[1]).     
+0001a000: 2020 2020 2020 2023 206d 6f76 6520 616c         # move al
+0001a010: 6c20 7468 6520 616e 6e6f 7461 7469 6f6e  l the annotation
+0001a020: 7320 746f 2074 6865 2066 696e 616c 2078  s to the final x
+0001a030: 2028 6974 2063 6f75 6c64 2062 6520 6c61   (it could be la
+0001a040: 7267 6572 2074 6861 6e20 3120 6475 6520  rger than 1 due 
+0001a050: 746f 2061 6464 6974 696f 6e61 6c20 636f  to additional co
+0001a060: 6c75 6d6e 7329 0a20 2020 2020 2020 2020  lumns).         
+0001a070: 2020 2077 6964 7468 203d 206c 656e 2863     width = len(c
+0001a080: 6f6c 756d 6e73 2920 2b20 310a 2020 2020  olumns) + 1.    
+0001a090: 2020 2020 2020 2020 666f 7220 692c 2061          for i, a
+0001a0a0: 2069 6e20 656e 756d 6572 6174 6528 616e   in enumerate(an
+0001a0b0: 6e6f 7461 7469 6f6e 7329 3a0a 2020 2020  notations):.    
+0001a0c0: 2020 2020 2020 2020 2020 2020 615b 305d              a[0]
+0001a0d0: 203d 2077 6964 7468 202b 2061 6e6e 6f74   = width + annot
+0001a0e0: 6174 696f 6e5f 785f 6d61 7267 696e 202a  ation_x_margin *
+0001a0f0: 2077 6964 7468 0a0a 2020 2020 2020 2020   width..        
+0001a100: 2020 2020 666f 7220 6c79 2069 6e20 6469      for ly in di
+0001a110: 656c 6563 7472 6963 5f6c 6179 6572 733a  electric_layers:
+0001a120: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001a130: 206c 6179 6572 203d 206c 795b 305d 0a20   layer = ly[0]. 
+0001a140: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0001a150: 2073 6574 2063 6f6c 6f72 2061 6e64 206c   set color and l
+0001a160: 6162 656c 0a20 2020 2020 2020 2020 2020  abel.           
+0001a170: 2020 2020 2063 6f6c 6f72 203d 205b 666c       color = [fl
+0001a180: 6f61 7428 6929 202f 2032 3536 2066 6f72  oat(i) / 256 for
+0001a190: 2069 2069 6e20 6c61 7965 722e 636f 6c6f   i in layer.colo
+0001a1a0: 725d 0a20 2020 2020 2020 2020 2020 2020  r].             
+0001a1b0: 2020 2069 6620 636f 6c6f 7220 3d3d 205b     if color == [
+0001a1c0: 312e 302c 2031 2e30 2c20 312e 305d 3a0a  1.0, 1.0, 1.0]:.
+0001a1d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a1e0: 2020 2020 636f 6c6f 7220 3d20 5b30 2e39      color = [0.9
+0001a1f0: 2c20 302e 392c 2030 2e39 5d0a 2020 2020  , 0.9, 0.9].    
+0001a200: 2020 2020 2020 2020 2020 2020 6c61 6265              labe
+0001a210: 6c20 3d20 227b 7d2c 207b 7d2c 2074 6869  l = "{}, {}, thi
+0001a220: 636b 3a20 7b3a 2e33 667d 756d 2c20 656c  ck: {:.3f}um, el
+0001a230: 6576 3a20 7b3a 2e33 667d 756d 222e 666f  ev: {:.3f}um".fo
+0001a240: 726d 6174 280a 2020 2020 2020 2020 2020  rmat(.          
+0001a250: 2020 2020 2020 2020 2020 6c61 7965 722e            layer.
+0001a260: 6e61 6d65 2c20 6c61 7965 722e 6d61 7465  name, layer.mate
+0001a270: 7269 616c 2c20 6c61 7965 722e 7468 6963  rial, layer.thic
+0001a280: 6b6e 6573 7320 2a20 3165 362c 206c 6179  kness * 1e6, lay
+0001a290: 6572 2e6c 6f77 6572 5f65 6c65 7661 7469  er.lower_elevati
+0001a2a0: 6f6e 202a 2031 6536 0a20 2020 2020 2020  on * 1e6.       
+0001a2b0: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+0001a2c0: 2020 2020 2020 2020 2020 2023 2063 7265             # cre
+0001a2d0: 6174 6520 7468 6520 7061 7463 680a 2020  ate the patch.  
+0001a2e0: 2020 2020 2020 2020 2020 2020 2020 6c6f                lo
+0001a2f0: 7765 725f 656c 6576 6174 696f 6e20 3d20  wer_elevation = 
+0001a300: 6c79 5b31 5d0a 2020 2020 2020 2020 2020  ly[1].          
+0001a310: 2020 2020 2020 7570 7065 725f 656c 6576        upper_elev
+0001a320: 6174 696f 6e20 3d20 6c79 5b32 5d0a 2020  ation = ly[2].  
+0001a330: 2020 2020 2020 2020 2020 2020 2020 7920                y 
+0001a340: 3d20 5b6c 6f77 6572 5f65 6c65 7661 7469  = [lower_elevati
+0001a350: 6f6e 2c20 7570 7065 725f 656c 6576 6174  on, upper_elevat
+0001a360: 696f 6e2c 2075 7070 6572 5f65 6c65 7661  ion, upper_eleva
+0001a370: 7469 6f6e 2c20 6c6f 7765 725f 656c 6576  tion, lower_elev
+0001a380: 6174 696f 6e5d 0a20 2020 2020 2020 2020  ation].         
+0001a390: 2020 2020 2020 2078 203d 205b 302c 2030         x = [0, 0
+0001a3a0: 2c20 7769 6474 682c 2077 6964 7468 5d0a  , width, width].
+0001a3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a3c0: 706c 6f74 5f64 6174 612e 696e 7365 7274  plot_data.insert
+0001a3d0: 2830 2c20 5b78 2c20 792c 2063 6f6c 6f72  (0, [x, y, color
+0001a3e0: 2c20 6c61 6265 6c2c 2064 6965 6c5f 616c  , label, diel_al
+0001a3f0: 7068 612c 2022 6669 6c6c 225d 290a 0a20  pha, "fill"]).. 
+0001a400: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0001a410: 2063 7265 6174 6520 616e 6e6f 7461 7469   create annotati
+0001a420: 6f6e 0a20 2020 2020 2020 2020 2020 2020  on.             
+0001a430: 2020 2078 5f70 6f73 203d 202d 616e 6e6f     x_pos = -anno
+0001a440: 7461 7469 6f6e 5f78 5f6d 6172 6769 6e20  tation_x_margin 
+0001a450: 2a20 7769 6474 680a 2020 2020 2020 2020  * width.        
+0001a460: 2020 2020 2020 2020 795f 706f 7320 3d20          y_pos = 
+0001a470: 286c 6f77 6572 5f65 6c65 7661 7469 6f6e  (lower_elevation
+0001a480: 202b 2075 7070 6572 5f65 6c65 7661 7469   + upper_elevati
+0001a490: 6f6e 2920 2f20 320a 2020 2020 2020 2020  on) / 2.        
+0001a4a0: 2020 2020 2020 2020 616e 6e6f 7461 7469          annotati
+0001a4b0: 6f6e 732e 6170 7065 6e64 280a 2020 2020  ons.append(.    
+0001a4c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a4d0: 5b78 5f70 6f73 2c20 795f 706f 732c 206c  [x_pos, y_pos, l
+0001a4e0: 6179 6572 2e6e 616d 652c 207b 2266 6f6e  ayer.name, {"fon
+0001a4f0: 7473 697a 6522 3a20 616e 6e6f 7461 7469  tsize": annotati
+0001a500: 6f6e 5f66 6f6e 7473 697a 652c 2022 686f  on_fontsize, "ho
+0001a510: 7269 7a6f 6e74 616c 616c 6967 6e6d 656e  rizontalalignmen
+0001a520: 7422 3a20 2272 6967 6874 227d 5d0a 2020  t": "right"}].  
+0001a530: 2020 2020 2020 2020 2020 2020 2020 290a                ).
+0001a540: 0a20 2020 2020 2020 2020 2020 2023 2065  .            # e
+0001a550: 7661 6c75 6174 6520 7468 6520 6c65 6765  valuate the lege
+0001a560: 6e64 2072 656f 7264 6572 0a20 2020 2020  nd reorder.     
+0001a570: 2020 2020 2020 206c 6567 656e 645f 6f72         legend_or
+0001a580: 6465 7220 3d20 5b5d 0a20 2020 2020 2020  der = [].       
+0001a590: 2020 2020 2066 6f72 206c 7920 696e 2064       for ly in d
+0001a5a0: 6965 6c65 6374 7269 635f 6c61 7965 7273  ielectric_layers
+0001a5b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001a5c0: 2020 6e61 6d65 203d 206c 795b 305d 2e6e    name = ly[0].n
+0001a5d0: 616d 650a 2020 2020 2020 2020 2020 2020  ame.            
+0001a5e0: 2020 2020 666f 7220 692c 2061 2069 6e20      for i, a in 
+0001a5f0: 656e 756d 6572 6174 6528 706c 6f74 5f64  enumerate(plot_d
+0001a600: 6174 6129 3a0a 2020 2020 2020 2020 2020  ata):.          
+0001a610: 2020 2020 2020 2020 2020 696e 616d 6520            iname 
+0001a620: 3d20 615b 335d 2e73 706c 6974 2822 2c22  = a[3].split(","
+0001a630: 295b 305d 0a20 2020 2020 2020 2020 2020  )[0].           
+0001a640: 2020 2020 2020 2020 2069 6620 6e61 6d65           if name
+0001a650: 203d 3d20 696e 616d 653a 0a20 2020 2020   == iname:.     
+0001a660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a670: 2020 206c 6567 656e 645f 6f72 6465 722e     legend_order.
+0001a680: 6170 7065 6e64 2869 290a 2020 2020 2020  append(i).      
+0001a690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a6a0: 2020 6272 6561 6b0a 2020 2020 2020 2020    break.        
+0001a6b0: 2020 2020 666f 7220 6c79 2069 6e20 7369      for ly in si
+0001a6c0: 676e 616c 5f6c 6179 6572 733a 0a20 2020  gnal_layers:.   
+0001a6d0: 2020 2020 2020 2020 2020 2020 206e 616d               nam
+0001a6e0: 6520 3d20 6c79 5b30 5d2e 6e61 6d65 0a20  e = ly[0].name. 
+0001a6f0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0001a700: 6f72 2069 2c20 6120 696e 2065 6e75 6d65  or i, a in enume
+0001a710: 7261 7465 2870 6c6f 745f 6461 7461 293a  rate(plot_data):
+0001a720: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001a730: 2020 2020 2069 6e61 6d65 203d 2061 5b33       iname = a[3
+0001a740: 5d2e 7370 6c69 7428 222c 2229 5b30 5d0a  ].split(",")[0].
+0001a750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a760: 2020 2020 6966 206e 616d 6520 3d3d 2069      if name == i
+0001a770: 6e61 6d65 3a0a 2020 2020 2020 2020 2020  name:.          
+0001a780: 2020 2020 2020 2020 2020 2020 2020 6c65                le
+0001a790: 6765 6e64 5f6f 7264 6572 2e61 7070 656e  gend_order.appen
+0001a7a0: 6428 6929 0a20 2020 2020 2020 2020 2020  d(i).           
+0001a7b0: 2020 2020 2020 2020 2020 2020 2062 7265               bre
+0001a7c0: 616b 0a0a 2020 2020 2020 2020 2320 6361  ak..        # ca
+0001a7d0: 6c63 756c 6174 6520 7468 6520 6578 7472  lculate the extr
+0001a7e0: 656d 6974 6965 7320 6f66 2074 6865 2070  emities of the p
+0001a7f0: 6c6f 740a 2020 2020 2020 2020 785f 6d69  lot.        x_mi
+0001a800: 6e20 3d20 302e 300a 2020 2020 2020 2020  n = 0.0.        
+0001a810: 785f 6d61 7820 3d20 6d61 7828 5b6d 6178  x_max = max([max
+0001a820: 2869 5b30 5d29 2066 6f72 2069 2069 6e20  (i[0]) for i in 
+0001a830: 706c 6f74 5f64 6174 615d 290a 2020 2020  plot_data]).    
+0001a840: 2020 2020 6966 2073 7461 636b 7570 5f6d      if stackup_m
+0001a850: 6f64 6520 3d3d 2022 4c61 6d69 6e61 7465  ode == "Laminate
+0001a860: 223a 0a20 2020 2020 2020 2020 2020 2079  ":.            y
+0001a870: 5f6d 696e 203d 206c 6179 6572 735f 6461  _min = layers_da
+0001a880: 7461 5b30 5d5b 315d 0a20 2020 2020 2020  ta[0][1].       
+0001a890: 2020 2020 2079 5f6d 6178 203d 206c 6179       y_max = lay
+0001a8a0: 6572 735f 6461 7461 5b2d 315d 5b32 5d0a  ers_data[-1][2].
+0001a8b0: 2020 2020 2020 2020 656c 6966 2073 7461          elif sta
+0001a8c0: 636b 7570 5f6d 6f64 6520 3d3d 2022 4f76  ckup_mode == "Ov
+0001a8d0: 6572 6c61 7070 696e 6722 3a0a 2020 2020  erlapping":.    
+0001a8e0: 2020 2020 2020 2020 795f 6d69 6e20 3d20          y_min = 
+0001a8f0: 6d69 6e28 6469 656c 6563 7472 6963 5f6c  min(dielectric_l
+0001a900: 6179 6572 735b 305d 5b31 5d2c 2073 6967  ayers[0][1], sig
+0001a910: 6e61 6c5f 6c61 7965 7273 5b30 5d5b 315d  nal_layers[0][1]
+0001a920: 290a 2020 2020 2020 2020 2020 2020 795f  ).            y_
+0001a930: 6d61 7820 3d20 6d61 7828 6469 656c 6563  max = max(dielec
+0001a940: 7472 6963 5f6c 6179 6572 735b 2d31 5d5b  tric_layers[-1][
+0001a950: 325d 2c20 7369 676e 616c 5f6c 6179 6572  2], signal_layer
+0001a960: 735b 2d31 5d5b 325d 290a 0a20 2020 2020  s[-1][2])..     
+0001a970: 2020 2023 206d 6f76 6520 7468 6520 616e     # move the an
+0001a980: 6e6f 7461 7469 6f6e 7320 746f 2061 766f  notations to avo
+0001a990: 6964 2074 6578 7420 6f76 6572 6c61 7070  id text overlapp
+0001a9a0: 696e 670a 2020 2020 2020 2020 6e65 775f  ing.        new_
+0001a9b0: 616e 6e6f 7461 7469 6f6e 7320 3d20 5b5d  annotations = []
+0001a9c0: 0a20 2020 2020 2020 2066 6f72 2069 2c20  .        for i, 
+0001a9d0: 6120 696e 2065 6e75 6d65 7261 7465 2861  a in enumerate(a
+0001a9e0: 6e6e 6f74 6174 696f 6e73 293a 0a20 2020  nnotations):.   
+0001a9f0: 2020 2020 2020 2020 2069 6620 6920 3e20           if i > 
+0001aa00: 3020 616e 6420 6162 7328 615b 315d 202d  0 and abs(a[1] -
+0001aa10: 2061 6e6e 6f74 6174 696f 6e73 5b69 202d   annotations[i -
+0001aa20: 2031 5d5b 315d 2920 3c20 2879 5f6d 6178   1][1]) < (y_max
+0001aa30: 202d 2079 5f6d 696e 2920 2f20 3735 3a0a   - y_min) / 75:.
+0001aa40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001aa50: 6e65 775f 616e 6e6f 7461 7469 6f6e 735b  new_annotations[
+0001aa60: 2d31 5d5b 325d 203d 2073 7472 286e 6577  -1][2] = str(new
+0001aa70: 5f61 6e6e 6f74 6174 696f 6e73 5b2d 315d  _annotations[-1]
+0001aa80: 5b32 5d29 202b 2022 2c20 2220 2b20 7374  [2]) + ", " + st
+0001aa90: 7228 615b 325d 290a 2020 2020 2020 2020  r(a[2]).        
+0001aaa0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0001aab0: 2020 2020 2020 2020 2020 6e65 775f 616e            new_an
+0001aac0: 6e6f 7461 7469 6f6e 732e 6170 7065 6e64  notations.append
+0001aad0: 2861 290a 2020 2020 2020 2020 616e 6e6f  (a).        anno
+0001aae0: 7461 7469 6f6e 7320 3d20 6e65 775f 616e  tations = new_an
+0001aaf0: 6e6f 7461 7469 6f6e 730a 0a20 2020 2020  notations..     
+0001ab00: 2020 2069 6620 706c 6f74 5f64 6566 696e     if plot_defin
+0001ab10: 6974 696f 6e73 3a0a 2020 2020 2020 2020  itions:.        
+0001ab20: 2020 2020 6966 2073 7461 636b 7570 5f6d      if stackup_m
+0001ab30: 6f64 6520 3d3d 2022 4f76 6572 6c61 7070  ode == "Overlapp
+0001ab40: 696e 6722 3a0a 2020 2020 2020 2020 2020  ing":.          
+0001ab50: 2020 2020 2020 7365 6c66 2e5f 6c6f 6767        self._logg
+0001ab60: 6572 2e77 6172 6e69 6e67 2822 506c 6f74  er.warning("Plot
+0001ab70: 206f 6620 7061 6473 7461 636b 7320 6172   of padstacks ar
+0001ab80: 6520 7375 7070 6f72 7465 6420 6f6e 6c79  e supported only
+0001ab90: 2066 6f72 204c 616d 696e 6174 6520 6d6f   for Laminate mo
+0001aba0: 6465 2e22 290a 0a20 2020 2020 2020 2020  de.")..         
+0001abb0: 2020 206d 6178 5f70 6c6f 7473 203d 2031     max_plots = 1
+0001abc0: 300a 0a20 2020 2020 2020 2020 2020 2069  0..            i
+0001abd0: 6620 6e6f 7420 6973 696e 7374 616e 6365  f not isinstance
+0001abe0: 2870 6c6f 745f 6465 6669 6e69 7469 6f6e  (plot_definition
+0001abf0: 732c 206c 6973 7429 3a0a 2020 2020 2020  s, list):.      
+0001ac00: 2020 2020 2020 2020 2020 706c 6f74 5f64            plot_d
+0001ac10: 6566 696e 6974 696f 6e73 203d 205b 706c  efinitions = [pl
+0001ac20: 6f74 5f64 6566 696e 6974 696f 6e73 5d0a  ot_definitions].
+0001ac30: 2020 2020 2020 2020 2020 2020 636f 6c6f              colo
+0001ac40: 725f 696e 6465 7820 3d20 300a 2020 2020  r_index = 0.    
+0001ac50: 2020 2020 2020 2020 636f 6c6f 725f 6b65          color_ke
+0001ac60: 7973 203d 206c 6973 7428 4353 5334 5f43  ys = list(CSS4_C
+0001ac70: 4f4c 4f52 532e 6b65 7973 2829 290a 2020  OLORS.keys()).  
+0001ac80: 2020 2020 2020 2020 2020 6465 6c74 6120            delta 
+0001ac90: 3d20 3120 2f20 286d 6178 5f70 6c6f 7473  = 1 / (max_plots
+0001aca0: 202b 2031 2920 2023 2070 6164 7374 6163   + 1)  # padstac
+0001acb0: 6b20 7370 6163 696e 6720 696e 2070 6c6f  k spacing in plo
+0001acc0: 7420 636f 6f72 6469 6e61 7465 730a 2020  t coordinates.  
+0001acd0: 2020 2020 2020 2020 2020 785f 7374 6172            x_star
+0001ace0: 7420 3d20 6465 6c74 610a 0a20 2020 2020  t = delta..     
+0001acf0: 2020 2020 2020 2023 2066 696e 6420 7468         # find th
+0001ad00: 6520 6d61 7820 7061 6473 7461 636b 2073  e max padstack s
+0001ad10: 697a 6520 746f 2063 616c 6375 6c61 7465  ize to calculate
+0001ad20: 2074 6865 2073 6361 6c69 6e67 2066 6163   the scaling fac
+0001ad30: 746f 720a 2020 2020 2020 2020 2020 2020  tor.            
+0001ad40: 6d61 785f 7061 6473 7461 6b5f 7369 7a65  max_padstak_size
+0001ad50: 203d 2030 0a20 2020 2020 2020 2020 2020   = 0.           
+0001ad60: 2066 6f72 2064 6566 696e 6974 696f 6e20   for definition 
+0001ad70: 696e 2070 6c6f 745f 6465 6669 6e69 7469  in plot_definiti
+0001ad80: 6f6e 733a 0a20 2020 2020 2020 2020 2020  ons:.           
+0001ad90: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+0001ada0: 6365 2864 6566 696e 6974 696f 6e2c 2073  ce(definition, s
+0001adb0: 7472 293a 0a20 2020 2020 2020 2020 2020  tr):.           
+0001adc0: 2020 2020 2020 2020 2064 6566 696e 6974           definit
+0001add0: 696f 6e20 3d20 7365 6c66 2e5f 7065 6462  ion = self._pedb
+0001ade0: 2e70 6164 7374 6163 6b73 2e64 6566 696e  .padstacks.defin
+0001adf0: 6974 696f 6e73 5b64 6566 696e 6974 696f  itions[definitio
+0001ae00: 6e5d 0a20 2020 2020 2020 2020 2020 2020  n].             
+0001ae10: 2020 2066 6f72 206c 6179 6572 2c20 6465     for layer, de
+0001ae20: 6673 2069 6e20 6465 6669 6e69 7469 6f6e  fs in definition
+0001ae30: 2e70 6164 5f62 795f 6c61 7965 722e 6974  .pad_by_layer.it
+0001ae40: 656d 7328 293a 0a20 2020 2020 2020 2020  ems():.         
+0001ae50: 2020 2020 2020 2020 2020 2070 6164 5f73             pad_s
+0001ae60: 6861 7065 203d 2064 6566 732e 6765 6f6d  hape = defs.geom
+0001ae70: 6574 7279 5f74 7970 650a 2020 2020 2020  etry_type.      
+0001ae80: 2020 2020 2020 2020 2020 2020 2020 7061                pa
+0001ae90: 7261 6d73 203d 2064 6566 732e 7061 7261  rams = defs.para
+0001aea0: 6d65 7465 7273 5f76 616c 7565 730a 2020  meters_values.  
+0001aeb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001aec0: 2020 6966 2070 6164 5f73 6861 7065 2069    if pad_shape i
+0001aed0: 6e20 5b31 2c20 322c 2036 5d3a 0a20 2020  n [1, 2, 6]:.   
+0001aee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001aef0: 2020 2020 2070 6164 5f73 697a 6520 3d20       pad_size = 
+0001af00: 7061 7261 6d73 5b30 5d0a 2020 2020 2020  params[0].      
+0001af10: 2020 2020 2020 2020 2020 2020 2020 656c                el
+0001af20: 6966 2070 6164 5f73 6861 7065 2069 6e20  if pad_shape in 
+0001af30: 5b33 2c20 342c 2035 5d3a 0a20 2020 2020  [3, 4, 5]:.     
+0001af40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001af50: 2020 2070 6164 5f73 697a 6520 3d20 6d61     pad_size = ma
+0001af60: 7828 7061 7261 6d73 5b30 5d2c 2070 6172  x(params[0], par
+0001af70: 616d 735b 315d 290a 2020 2020 2020 2020  ams[1]).        
+0001af80: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0001af90: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001afa0: 2020 2020 2020 2020 2020 7061 645f 7369            pad_si
+0001afb0: 7a65 203d 2031 652d 340a 2020 2020 2020  ze = 1e-4.      
+0001afc0: 2020 2020 2020 2020 2020 2020 2020 6d61                ma
+0001afd0: 785f 7061 6473 7461 6b5f 7369 7a65 203d  x_padstak_size =
+0001afe0: 206d 6178 2870 6164 5f73 697a 652c 206d   max(pad_size, m
+0001aff0: 6178 5f70 6164 7374 616b 5f73 697a 6529  ax_padstak_size)
+0001b000: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001b010: 2069 6620 6465 6669 6e69 7469 6f6e 2e68   if definition.h
+0001b020: 6f6c 655f 7072 6f70 6572 7469 6573 3a0a  ole_properties:.
 0001b030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b040: 6d61 785f 7565 203d 202d 3165 3132 0a20  max_ue = -1e12. 
-0001b050: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-0001b060: 6178 5f78 203d 2030 0a20 2020 2020 2020  ax_x = 0.       
-0001b070: 2020 2020 2020 2020 2070 6164 7374 6163           padstac
-0001b080: 6b5f 6e61 6d65 203d 2064 6566 696e 6974  k_name = definit
-0001b090: 696f 6e2e 6e61 6d65 0a20 2020 2020 2020  ion.name.       
-0001b0a0: 2020 2020 2020 2020 2061 6e6e 6f74 6174           annotat
-0001b0b0: 696f 6e73 2e61 7070 656e 6428 5b78 5f73  ions.append([x_s
-0001b0c0: 7461 7274 2c20 795f 6d61 782c 2070 6164  tart, y_max, pad
-0001b0d0: 7374 6163 6b5f 6e61 6d65 2c20 7b22 726f  stack_name, {"ro
-0001b0e0: 7461 7469 6f6e 223a 2034 357d 5d29 0a0a  tation": 45}])..
-0001b0f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b100: 7669 615f 7374 6172 745f 6c61 7965 7220  via_start_layer 
-0001b110: 3d20 6465 6669 6e69 7469 6f6e 2e76 6961  = definition.via
-0001b120: 5f73 7461 7274 5f6c 6179 6572 0a20 2020  _start_layer.   
-0001b130: 2020 2020 2020 2020 2020 2020 2076 6961               via
-0001b140: 5f73 746f 705f 6c61 7965 7220 3d20 6465  _stop_layer = de
-0001b150: 6669 6e69 7469 6f6e 2e76 6961 5f73 746f  finition.via_sto
-0001b160: 705f 6c61 7965 720a 0a20 2020 2020 2020  p_layer..       
-0001b170: 2020 2020 2020 2020 2069 6620 7374 6163           if stac
-0001b180: 6b75 705f 6d6f 6465 203d 3d20 224f 7665  kup_mode == "Ove
-0001b190: 726c 6170 7069 6e67 223a 0a20 2020 2020  rlapping":.     
-0001b1a0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0001b1b0: 2068 6572 6520 7365 6172 6368 2074 6865   here search the
-0001b1c0: 2063 6f6c 756d 6e20 7573 696e 6720 7468   column using th
-0001b1d0: 6520 6669 7273 7420 616e 6420 6c61 7374  e first and last
-0001b1e0: 206c 6179 6572 2e20 5069 636b 2074 6865   layer. Pick the
-0001b1f0: 2063 6f6c 756d 6e20 7769 7468 206d 6178   column with max
-0001b200: 2069 6e64 6578 2e0a 2020 2020 2020 2020   index..        
-0001b210: 2020 2020 2020 2020 2020 2020 7061 7373              pass
-0001b220: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001b230: 2020 666f 7220 6c61 7965 722c 2064 6566    for layer, def
-0001b240: 7320 696e 2064 6566 696e 6974 696f 6e2e  s in definition.
-0001b250: 7061 645f 6279 5f6c 6179 6572 2e69 7465  pad_by_layer.ite
-0001b260: 6d73 2829 3a0a 2020 2020 2020 2020 2020  ms():.          
-0001b270: 2020 2020 2020 2020 2020 7061 645f 7368            pad_sh
-0001b280: 6170 6520 3d20 6465 6673 2e67 656f 6d65  ape = defs.geome
-0001b290: 7472 795f 7479 7065 0a20 2020 2020 2020  try_type.       
-0001b2a0: 2020 2020 2020 2020 2020 2020 2070 6172               par
-0001b2b0: 616d 7320 3d20 6465 6673 2e70 6172 616d  ams = defs.param
-0001b2c0: 6574 6572 735f 7661 6c75 6573 0a20 2020  eters_values.   
-0001b2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b2e0: 2069 6620 7061 645f 7368 6170 6520 696e   if pad_shape in
-0001b2f0: 205b 312c 2032 2c20 365d 3a0a 2020 2020   [1, 2, 6]:.    
-0001b300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b310: 2020 2020 7061 645f 7369 7a65 203d 2070      pad_size = p
-0001b320: 6172 616d 735b 305d 0a20 2020 2020 2020  arams[0].       
-0001b330: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
-0001b340: 6620 7061 645f 7368 6170 6520 696e 205b  f pad_shape in [
-0001b350: 332c 2034 2c20 355d 3a0a 2020 2020 2020  3, 4, 5]:.      
-0001b360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b370: 2020 7061 645f 7369 7a65 203d 206d 6178    pad_size = max
-0001b380: 2870 6172 616d 735b 305d 2c20 7061 7261  (params[0], para
-0001b390: 6d73 5b31 5d29 0a20 2020 2020 2020 2020  ms[1]).         
-0001b3a0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-0001b3b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001b3c0: 2020 2020 2020 2020 2070 6164 5f73 697a           pad_siz
-0001b3d0: 6520 3d20 3165 2d34 0a0a 2020 2020 2020  e = 1e-4..      
-0001b3e0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0001b3f0: 2073 7461 636b 7570 5f6d 6f64 6520 3d3d   stackup_mode ==
-0001b400: 2022 4c61 6d69 6e61 7465 223a 0a20 2020   "Laminate":.   
-0001b410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b420: 2020 2020 2078 203d 205b 0a20 2020 2020       x = [.     
-0001b430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b440: 2020 2020 2020 2078 5f73 7461 7274 202d         x_start -
-0001b450: 2070 6164 5f73 697a 6520 2f20 3220 2a20   pad_size / 2 * 
-0001b460: 7363 616c 696e 675f 665f 7061 642c 0a20  scaling_f_pad,. 
-0001b470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b480: 2020 2020 2020 2020 2020 2078 5f73 7461             x_sta
-0001b490: 7274 202d 2070 6164 5f73 697a 6520 2f20  rt - pad_size / 
-0001b4a0: 3220 2a20 7363 616c 696e 675f 665f 7061  2 * scaling_f_pa
-0001b4b0: 642c 0a20 2020 2020 2020 2020 2020 2020  d,.             
-0001b4c0: 2020 2020 2020 2020 2020 2020 2020 2078                 x
-0001b4d0: 5f73 7461 7274 202b 2070 6164 5f73 697a  _start + pad_siz
-0001b4e0: 6520 2f20 3220 2a20 7363 616c 696e 675f  e / 2 * scaling_
-0001b4f0: 665f 7061 642c 0a20 2020 2020 2020 2020  f_pad,.         
-0001b500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b510: 2020 2078 5f73 7461 7274 202b 2070 6164     x_start + pad
-0001b520: 5f73 697a 6520 2f20 3220 2a20 7363 616c  _size / 2 * scal
-0001b530: 696e 675f 665f 7061 642c 0a20 2020 2020  ing_f_pad,.     
-0001b540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b550: 2020 205d 0a20 2020 2020 2020 2020 2020     ].           
-0001b560: 2020 2020 2020 2020 2020 2020 206c 6f77               low
-0001b570: 6572 5f65 6c65 7661 7469 6f6e 203d 205b  er_elevation = [
-0001b580: 655b 315d 2066 6f72 2065 2069 6e20 6c61  e[1] for e in la
-0001b590: 7965 7273 5f64 6174 6120 6966 2065 5b30  yers_data if e[0
-0001b5a0: 5d2e 6e61 6d65 203d 3d20 6c61 7965 7220  ].name == layer 
-0001b5b0: 6f72 206c 6179 6572 203d 3d20 2244 6566  or layer == "Def
-0001b5c0: 6175 6c74 225d 5b30 5d0a 2020 2020 2020  ault"][0].      
-0001b5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b5e0: 2020 7570 7065 725f 656c 6576 6174 696f    upper_elevatio
-0001b5f0: 6e20 3d20 5b65 5b32 5d20 666f 7220 6520  n = [e[2] for e 
-0001b600: 696e 206c 6179 6572 735f 6461 7461 2069  in layers_data i
-0001b610: 6620 655b 305d 2e6e 616d 6520 3d3d 206c  f e[0].name == l
-0001b620: 6179 6572 206f 7220 6c61 7965 7220 3d3d  ayer or layer ==
-0001b630: 2022 4465 6661 756c 7422 5d5b 305d 0a20   "Default"][0]. 
-0001b640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b650: 2020 2020 2020 2079 203d 205b 6c6f 7765         y = [lowe
-0001b660: 725f 656c 6576 6174 696f 6e2c 2075 7070  r_elevation, upp
-0001b670: 6572 5f65 6c65 7661 7469 6f6e 2c20 7570  er_elevation, up
-0001b680: 7065 725f 656c 6576 6174 696f 6e2c 206c  per_elevation, l
-0001b690: 6f77 6572 5f65 6c65 7661 7469 6f6e 5d0a  ower_elevation].
-0001b6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b6b0: 2020 2020 2020 2020 2320 6372 6561 7465          # create
-0001b6c0: 2074 6865 2070 6174 6368 2066 6f72 2074   the patch for t
-0001b6d0: 6861 7420 7369 676e 616c 206c 6179 6572  hat signal layer
-0001b6e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001b6f0: 2020 2020 2020 2020 2070 6c6f 745f 6461           plot_da
-0001b700: 7461 2e61 7070 656e 6428 5b78 2c20 792c  ta.append([x, y,
-0001b710: 2063 6f6c 6f72 5f6b 6579 735b 636f 6c6f   color_keys[colo
-0001b720: 725f 696e 6465 785d 2c20 4e6f 6e65 2c20  r_index], None, 
-0001b730: 312e 302c 2022 6669 6c6c 225d 290a 2020  1.0, "fill"]).  
-0001b740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b750: 2020 656c 6966 2073 7461 636b 7570 5f6d    elif stackup_m
-0001b760: 6f64 6520 3d3d 2022 4f76 6572 6c61 7070  ode == "Overlapp
-0001b770: 696e 6722 3a0a 2020 2020 2020 2020 2020  ing":.          
-0001b780: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0001b790: 6865 7265 2065 7661 6c75 6174 6520 7468  here evaluate th
-0001b7a0: 6520 7820 6261 7365 6420 6f6e 2074 6865  e x based on the
-0001b7b0: 2063 6f6c 756d 6e20 6576 616c 7561 7465   column evaluate
-0001b7c0: 6420 6265 666f 7265 2061 6e64 2074 6865  d before and the
-0001b7d0: 2070 6164 2073 697a 650a 2020 2020 2020   pad size.      
-0001b7e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b7f0: 2020 7061 7373 0a0a 2020 2020 2020 2020    pass..        
-0001b800: 2020 2020 2020 2020 2020 2020 6d69 6e5f              min_
-0001b810: 6c65 203d 206d 696e 286c 6f77 6572 5f65  le = min(lower_e
-0001b820: 6c65 7661 7469 6f6e 2c20 6d69 6e5f 6c65  levation, min_le
-0001b830: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0001b840: 2020 2020 2020 6d61 785f 7565 203d 206d        max_ue = m
-0001b850: 6178 2875 7070 6572 5f65 6c65 7661 7469  ax(upper_elevati
-0001b860: 6f6e 2c20 6d61 785f 7565 290a 2020 2020  on, max_ue).    
-0001b870: 2020 2020 2020 2020 2020 2020 6966 2064              if d
-0001b880: 6566 696e 6974 696f 6e2e 686f 6c65 5f70  efinition.hole_p
-0001b890: 726f 7065 7274 6965 733a 0a20 2020 2020  roperties:.     
-0001b8a0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0001b8b0: 2063 7265 6174 6520 7061 7463 6820 666f   create patch fo
-0001b8c0: 7220 7468 6520 686f 6c65 0a20 2020 2020  r the hole.     
-0001b8d0: 2020 2020 2020 2020 2020 2020 2020 2068                 h
-0001b8e0: 6f6c 655f 7261 6469 7573 203d 2064 6566  ole_radius = def
-0001b8f0: 696e 6974 696f 6e2e 686f 6c65 5f70 726f  inition.hole_pro
-0001b900: 7065 7274 6965 735b 305d 202f 2032 202a  perties[0] / 2 *
-0001b910: 2073 6361 6c69 6e67 5f66 5f70 6164 0a20   scaling_f_pad. 
-0001b920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b930: 2020 2078 203d 205b 785f 7374 6172 7420     x = [x_start 
-0001b940: 2d20 686f 6c65 5f72 6164 6975 732c 2078  - hole_radius, x
-0001b950: 5f73 7461 7274 202d 2068 6f6c 655f 7261  _start - hole_ra
-0001b960: 6469 7573 2c20 785f 7374 6172 7420 2b20  dius, x_start + 
-0001b970: 686f 6c65 5f72 6164 6975 732c 2078 5f73  hole_radius, x_s
-0001b980: 7461 7274 202b 2068 6f6c 655f 7261 6469  tart + hole_radi
-0001b990: 7573 5d0a 2020 2020 2020 2020 2020 2020  us].            
-0001b9a0: 2020 2020 2020 2020 7920 3d20 5b6d 696e          y = [min
-0001b9b0: 5f6c 652c 206d 6178 5f75 652c 206d 6178  _le, max_ue, max
-0001b9c0: 5f75 652c 206d 696e 5f6c 655d 0a20 2020  _ue, min_le].   
-0001b9d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b9e0: 2070 6c6f 745f 6461 7461 2e61 7070 656e   plot_data.appen
-0001b9f0: 6428 5b78 2c20 792c 2063 6f6c 6f72 5f6b  d([x, y, color_k
-0001ba00: 6579 735b 636f 6c6f 725f 696e 6465 785d  eys[color_index]
-0001ba10: 2c20 4e6f 6e65 2c20 302e 372c 2022 6669  , None, 0.7, "fi
-0001ba20: 6c6c 225d 290a 2020 2020 2020 2020 2020  ll"]).          
-0001ba30: 2020 2020 2020 2020 2020 2320 6372 6561            # crea
-0001ba40: 7465 2070 6174 6368 2066 6f72 2074 6865  te patch for the
-0001ba50: 2064 6965 6c65 6374 7269 630a 2020 2020   dielectric.    
-0001ba60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ba70: 6d61 785f 7820 3d20 6d61 7828 6d61 785f  max_x = max(max_
-0001ba80: 782c 2068 6f6c 655f 7261 6469 7573 290a  x, hole_radius).
-0001ba90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001baa0: 2020 2020 7261 6420 3d20 686f 6c65 5f72      rad = hole_r
-0001bab0: 6164 6975 7320 2a20 2831 3030 202d 2064  adius * (100 - d
-0001bac0: 6566 696e 6974 696f 6e2e 686f 6c65 5f70  efinition.hole_p
-0001bad0: 6c61 7469 6e67 5f72 6174 696f 2920 2f20  lating_ratio) / 
-0001bae0: 3130 300a 2020 2020 2020 2020 2020 2020  100.            
-0001baf0: 2020 2020 2020 2020 7820 3d20 5b78 5f73          x = [x_s
-0001bb00: 7461 7274 202d 2072 6164 2c20 785f 7374  tart - rad, x_st
-0001bb10: 6172 7420 2d20 7261 642c 2078 5f73 7461  art - rad, x_sta
-0001bb20: 7274 202b 2072 6164 2c20 785f 7374 6172  rt + rad, x_star
-0001bb30: 7420 2b20 7261 645d 0a20 2020 2020 2020  t + rad].       
-0001bb40: 2020 2020 2020 2020 2020 2020 2070 6c6f               plo
-0001bb50: 745f 6461 7461 2e61 7070 656e 6428 5b78  t_data.append([x
-0001bb60: 2c20 792c 2063 6f6c 6f72 5f6b 6579 735b  , y, color_keys[
-0001bb70: 636f 6c6f 725f 696e 6465 785d 2c20 4e6f  color_index], No
-0001bb80: 6e65 2c20 312e 302c 2022 6669 6c6c 225d  ne, 1.0, "fill"]
-0001bb90: 290a 0a20 2020 2020 2020 2020 2020 2020  )..             
-0001bba0: 2020 2063 6f6c 6f72 5f69 6e64 6578 202b     color_index +
-0001bbb0: 3d20 310a 2020 2020 2020 2020 2020 2020  = 1.            
-0001bbc0: 2020 2020 6966 2063 6f6c 6f72 5f69 6e64      if color_ind
-0001bbd0: 6578 203d 3d20 6d61 785f 706c 6f74 733a  ex == max_plots:
-0001bbe0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001bbf0: 2020 2020 2073 656c 662e 5f6c 6f67 6765       self._logge
-0001bc00: 722e 7761 726e 696e 6728 224d 6178 696d  r.warning("Maxim
-0001bc10: 756d 206e 756d 6265 7220 6f66 2064 6566  um number of def
-0001bc20: 696e 6974 696f 6e73 2070 6c6f 7474 6564  initions plotted
-0001bc30: 2e22 290a 2020 2020 2020 2020 2020 2020  .").            
-0001bc40: 2020 2020 2020 2020 6272 6561 6b0a 2020          break.  
-0001bc50: 2020 2020 2020 2020 2020 2020 2020 785f                x_
-0001bc60: 7374 6172 7420 2b3d 2064 656c 7461 0a0a  start += delta..
-0001bc70: 2020 2020 2020 2020 2320 706c 6f74 2074          # plot t
-0001bc80: 6865 2073 7461 636b 7570 0a20 2020 2020  he stackup.     
-0001bc90: 2020 2070 6c74 203d 2070 6c6f 745f 6d61     plt = plot_ma
-0001bca0: 7470 6c6f 746c 6962 280a 2020 2020 2020  tplotlib(.      
-0001bcb0: 2020 2020 2020 706c 6f74 5f64 6174 612c        plot_data,
-0001bcc0: 0a20 2020 2020 2020 2020 2020 2073 697a  .            siz
-0001bcd0: 653d 7369 7a65 2c0a 2020 2020 2020 2020  e=size,.        
-0001bce0: 2020 2020 7368 6f77 5f6c 6567 656e 643d      show_legend=
-0001bcf0: 4661 6c73 652c 0a20 2020 2020 2020 2020  False,.         
-0001bd00: 2020 2078 6c61 6265 6c3d 2222 2c0a 2020     xlabel="",.  
-0001bd10: 2020 2020 2020 2020 2020 796c 6162 656c            ylabel
-0001bd20: 3d22 222c 0a20 2020 2020 2020 2020 2020  ="",.           
-0001bd30: 2074 6974 6c65 3d22 222c 0a20 2020 2020   title="",.     
-0001bd40: 2020 2020 2020 2073 6e61 7073 686f 745f         snapshot_
-0001bd50: 7061 7468 3d4e 6f6e 652c 0a20 2020 2020  path=None,.     
-0001bd60: 2020 2020 2020 2078 5f6c 696d 6974 733d         x_limits=
-0001bd70: 5b78 5f6d 696e 2c20 785f 6d61 785d 2c0a  [x_min, x_max],.
-0001bd80: 2020 2020 2020 2020 2020 2020 795f 6c69              y_li
-0001bd90: 6d69 7473 3d5b 795f 6d69 6e2c 2079 5f6d  mits=[y_min, y_m
-0001bda0: 6178 5d2c 0a20 2020 2020 2020 2020 2020  ax],.           
-0001bdb0: 2061 7869 735f 6571 7561 6c3d 4661 6c73   axis_equal=Fals
-0001bdc0: 652c 0a20 2020 2020 2020 2020 2020 2061  e,.            a
-0001bdd0: 6e6e 6f74 6174 696f 6e73 3d61 6e6e 6f74  nnotations=annot
-0001bde0: 6174 696f 6e73 2c0a 2020 2020 2020 2020  ations,.        
-0001bdf0: 2020 2020 7368 6f77 3d46 616c 7365 2c0a      show=False,.
-0001be00: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-0001be10: 2020 2320 7765 2068 6176 6520 746f 2063    # we have to c
-0001be20: 7573 746f 6d69 7a65 2073 6f6d 6520 6465  ustomize some de
-0001be30: 6661 756c 7473 2c20 736f 2077 6520 706c  faults, so we pl
-0001be40: 6f74 206f 7220 7361 7665 2074 6865 2066  ot or save the f
-0001be50: 6967 7572 6520 6865 7265 0a20 2020 2020  igure here.     
-0001be60: 2020 2070 6c74 2e61 7869 7328 226f 6666     plt.axis("off
-0001be70: 2229 0a20 2020 2020 2020 2070 6c74 2e62  ").        plt.b
-0001be80: 6f78 2846 616c 7365 290a 2020 2020 2020  ox(False).      
-0001be90: 2020 706c 742e 7469 746c 6528 2253 7461    plt.title("Sta
-0001bea0: 636b 7570 5c6e 2022 2c20 666f 6e74 7369  ckup\n ", fontsi
-0001beb0: 7a65 3d32 3829 0a20 2020 2020 2020 2023  ze=28).        #
-0001bec0: 2065 7661 6c75 6174 6573 2074 6865 206e   evaluates the n
-0001bed0: 756d 6265 7220 6f66 206c 6567 656e 6420  umber of legend 
-0001bee0: 636f 6c75 6d6e 2062 6173 6564 206f 6e20  column based on 
-0001bef0: 7468 6520 6c61 7965 7220 6e61 6d65 206d  the layer name m
-0001bf00: 6178 206c 656e 6774 680a 2020 2020 2020  ax length.      
-0001bf10: 2020 6e63 6f6c 203d 2033 2069 6620 6d61    ncol = 3 if ma
-0001bf20: 7828 5b6c 656e 286e 2920 666f 7220 6e20  x([len(n) for n 
-0001bf30: 696e 206c 6179 6572 5f6e 616d 6573 5d29  in layer_names])
-0001bf40: 203c 2031 3520 656c 7365 2032 0a20 2020   < 15 else 2.   
-0001bf50: 2020 2020 2068 616e 646c 6573 2c20 6c61       handles, la
-0001bf60: 6265 6c73 203d 2070 6c74 2e67 6361 2829  bels = plt.gca()
-0001bf70: 2e67 6574 5f6c 6567 656e 645f 6861 6e64  .get_legend_hand
-0001bf80: 6c65 735f 6c61 6265 6c73 2829 0a20 2020  les_labels().   
-0001bf90: 2020 2020 2070 6c74 2e6c 6567 656e 6428       plt.legend(
-0001bfa0: 0a20 2020 2020 2020 2020 2020 205b 6861  .            [ha
-0001bfb0: 6e64 6c65 735b 6964 785d 2066 6f72 2069  ndles[idx] for i
-0001bfc0: 6478 2069 6e20 6c65 6765 6e64 5f6f 7264  dx in legend_ord
-0001bfd0: 6572 5d2c 0a20 2020 2020 2020 2020 2020  er],.           
-0001bfe0: 205b 6c61 6265 6c73 5b69 6478 5d20 666f   [labels[idx] fo
-0001bff0: 7220 6964 7820 696e 206c 6567 656e 645f  r idx in legend_
-0001c000: 6f72 6465 725d 2c0a 2020 2020 2020 2020  order],.        
-0001c010: 2020 2020 6262 6f78 5f74 6f5f 616e 6368      bbox_to_anch
-0001c020: 6f72 3d28 302c 202d 302e 3035 292c 0a20  or=(0, -0.05),. 
-0001c030: 2020 2020 2020 2020 2020 206c 6f63 3d22             loc="
-0001c040: 7570 7065 7220 6c65 6674 222c 0a20 2020  upper left",.   
-0001c050: 2020 2020 2020 2020 2062 6f72 6465 7261           bordera
-0001c060: 7865 7370 6164 3d30 2c0a 2020 2020 2020  xespad=0,.      
-0001c070: 2020 2020 2020 6e63 6f6c 3d6e 636f 6c2c        ncol=ncol,
-0001c080: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-0001c090: 2020 2070 6c74 2e74 6967 6874 5f6c 6179     plt.tight_lay
-0001c0a0: 6f75 7428 290a 2020 2020 2020 2020 6966  out().        if
-0001c0b0: 2073 6176 655f 706c 6f74 3a0a 2020 2020   save_plot:.    
-0001c0c0: 2020 2020 2020 2020 706c 742e 7361 7665          plt.save
-0001c0d0: 6669 6728 7361 7665 5f70 6c6f 7429 0a20  fig(save_plot). 
-0001c0e0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0001c0f0: 2020 2020 2020 2020 2070 6c74 2e73 686f           plt.sho
-0001c100: 7728 290a 2020 2020 2020 2020 7265 7475  w().        retu
-0001c110: 726e 2070 6c74 0a                        rn plt.
+0001b040: 2020 2020 686f 6c65 5f64 203d 2064 6566      hole_d = def
+0001b050: 696e 6974 696f 6e2e 686f 6c65 5f70 726f  inition.hole_pro
+0001b060: 7065 7274 6965 735b 305d 0a20 2020 2020  perties[0].     
+0001b070: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+0001b080: 6178 5f70 6164 7374 616b 5f73 697a 6520  ax_padstak_size 
+0001b090: 3d20 6d61 7828 686f 6c65 5f64 2c20 6d61  = max(hole_d, ma
+0001b0a0: 785f 7061 6473 7461 6b5f 7369 7a65 290a  x_padstak_size).
+0001b0b0: 2020 2020 2020 2020 2020 2020 7363 616c              scal
+0001b0c0: 696e 675f 665f 7061 6420 3d20 2832 202f  ing_f_pad = (2 /
+0001b0d0: 2028 286d 6178 5f70 6c6f 7473 202b 2031   ((max_plots + 1
+0001b0e0: 2920 2a20 3329 2920 2f20 6d61 785f 7061  ) * 3)) / max_pa
+0001b0f0: 6473 7461 6b5f 7369 7a65 0a0a 2020 2020  dstak_size..    
+0001b100: 2020 2020 2020 2020 666f 7220 6465 6669          for defi
+0001b110: 6e69 7469 6f6e 2069 6e20 706c 6f74 5f64  nition in plot_d
+0001b120: 6566 696e 6974 696f 6e73 3a0a 2020 2020  efinitions:.    
+0001b130: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+0001b140: 7369 6e73 7461 6e63 6528 6465 6669 6e69  sinstance(defini
+0001b150: 7469 6f6e 2c20 7374 7229 3a0a 2020 2020  tion, str):.    
+0001b160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b170: 6465 6669 6e69 7469 6f6e 203d 2073 656c  definition = sel
+0001b180: 662e 5f70 6564 622e 7061 6473 7461 636b  f._pedb.padstack
+0001b190: 732e 6465 6669 6e69 7469 6f6e 735b 6465  s.definitions[de
+0001b1a0: 6669 6e69 7469 6f6e 5d0a 2020 2020 2020  finition].      
+0001b1b0: 2020 2020 2020 2020 2020 6d69 6e5f 6c65            min_le
+0001b1c0: 203d 2031 6531 320a 2020 2020 2020 2020   = 1e12.        
+0001b1d0: 2020 2020 2020 2020 6d61 785f 7565 203d          max_ue =
+0001b1e0: 202d 3165 3132 0a20 2020 2020 2020 2020   -1e12.         
+0001b1f0: 2020 2020 2020 206d 6178 5f78 203d 2030         max_x = 0
+0001b200: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001b210: 2070 6164 7374 6163 6b5f 6e61 6d65 203d   padstack_name =
+0001b220: 2064 6566 696e 6974 696f 6e2e 6e61 6d65   definition.name
+0001b230: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001b240: 2061 6e6e 6f74 6174 696f 6e73 2e61 7070   annotations.app
+0001b250: 656e 6428 5b78 5f73 7461 7274 2c20 795f  end([x_start, y_
+0001b260: 6d61 782c 2070 6164 7374 6163 6b5f 6e61  max, padstack_na
+0001b270: 6d65 2c20 7b22 726f 7461 7469 6f6e 223a  me, {"rotation":
+0001b280: 2034 357d 5d29 0a0a 2020 2020 2020 2020   45}])..        
+0001b290: 2020 2020 2020 2020 7669 615f 7374 6172          via_star
+0001b2a0: 745f 6c61 7965 7220 3d20 6465 6669 6e69  t_layer = defini
+0001b2b0: 7469 6f6e 2e76 6961 5f73 7461 7274 5f6c  tion.via_start_l
+0001b2c0: 6179 6572 0a20 2020 2020 2020 2020 2020  ayer.           
+0001b2d0: 2020 2020 2076 6961 5f73 746f 705f 6c61       via_stop_la
+0001b2e0: 7965 7220 3d20 6465 6669 6e69 7469 6f6e  yer = definition
+0001b2f0: 2e76 6961 5f73 746f 705f 6c61 7965 720a  .via_stop_layer.
+0001b300: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001b310: 2069 6620 7374 6163 6b75 705f 6d6f 6465   if stackup_mode
+0001b320: 203d 3d20 224f 7665 726c 6170 7069 6e67   == "Overlapping
+0001b330: 223a 0a20 2020 2020 2020 2020 2020 2020  ":.             
+0001b340: 2020 2020 2020 2023 2068 6572 6520 7365         # here se
+0001b350: 6172 6368 2074 6865 2063 6f6c 756d 6e20  arch the column 
+0001b360: 7573 696e 6720 7468 6520 6669 7273 7420  using the first 
+0001b370: 616e 6420 6c61 7374 206c 6179 6572 2e20  and last layer. 
+0001b380: 5069 636b 2074 6865 2063 6f6c 756d 6e20  Pick the column 
+0001b390: 7769 7468 206d 6178 2069 6e64 6578 2e0a  with max index..
+0001b3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b3b0: 2020 2020 7061 7373 0a0a 2020 2020 2020      pass..      
+0001b3c0: 2020 2020 2020 2020 2020 666f 7220 6c61            for la
+0001b3d0: 7965 722c 2064 6566 7320 696e 2064 6566  yer, defs in def
+0001b3e0: 696e 6974 696f 6e2e 7061 645f 6279 5f6c  inition.pad_by_l
+0001b3f0: 6179 6572 2e69 7465 6d73 2829 3a0a 2020  ayer.items():.  
+0001b400: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b410: 2020 7061 645f 7368 6170 6520 3d20 6465    pad_shape = de
+0001b420: 6673 2e67 656f 6d65 7472 795f 7479 7065  fs.geometry_type
+0001b430: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001b440: 2020 2020 2070 6172 616d 7320 3d20 6465       params = de
+0001b450: 6673 2e70 6172 616d 6574 6572 735f 7661  fs.parameters_va
+0001b460: 6c75 6573 0a20 2020 2020 2020 2020 2020  lues.           
+0001b470: 2020 2020 2020 2020 2069 6620 7061 645f           if pad_
+0001b480: 7368 6170 6520 696e 205b 312c 2032 2c20  shape in [1, 2, 
+0001b490: 365d 3a0a 2020 2020 2020 2020 2020 2020  6]:.            
+0001b4a0: 2020 2020 2020 2020 2020 2020 7061 645f              pad_
+0001b4b0: 7369 7a65 203d 2070 6172 616d 735b 305d  size = params[0]
+0001b4c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001b4d0: 2020 2020 2065 6c69 6620 7061 645f 7368       elif pad_sh
+0001b4e0: 6170 6520 696e 205b 332c 2034 2c20 355d  ape in [3, 4, 5]
+0001b4f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001b500: 2020 2020 2020 2020 2020 7061 645f 7369            pad_si
+0001b510: 7a65 203d 206d 6178 2870 6172 616d 735b  ze = max(params[
+0001b520: 305d 2c20 7061 7261 6d73 5b31 5d29 0a20  0], params[1]). 
+0001b530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b540: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0001b550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b560: 2070 6164 5f73 697a 6520 3d20 3165 2d34   pad_size = 1e-4
+0001b570: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001b580: 2020 2020 2020 6966 2073 7461 636b 7570        if stackup
+0001b590: 5f6d 6f64 6520 3d3d 2022 4c61 6d69 6e61  _mode == "Lamina
+0001b5a0: 7465 223a 0a20 2020 2020 2020 2020 2020  te":.           
+0001b5b0: 2020 2020 2020 2020 2020 2020 2078 203d               x =
+0001b5c0: 205b 0a20 2020 2020 2020 2020 2020 2020   [.             
+0001b5d0: 2020 2020 2020 2020 2020 2020 2020 2078                 x
+0001b5e0: 5f73 7461 7274 202d 2070 6164 5f73 697a  _start - pad_siz
+0001b5f0: 6520 2f20 3220 2a20 7363 616c 696e 675f  e / 2 * scaling_
+0001b600: 665f 7061 642c 0a20 2020 2020 2020 2020  f_pad,.         
+0001b610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b620: 2020 2078 5f73 7461 7274 202d 2070 6164     x_start - pad
+0001b630: 5f73 697a 6520 2f20 3220 2a20 7363 616c  _size / 2 * scal
+0001b640: 696e 675f 665f 7061 642c 0a20 2020 2020  ing_f_pad,.     
+0001b650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b660: 2020 2020 2020 2078 5f73 7461 7274 202b         x_start +
+0001b670: 2070 6164 5f73 697a 6520 2f20 3220 2a20   pad_size / 2 * 
+0001b680: 7363 616c 696e 675f 665f 7061 642c 0a20  scaling_f_pad,. 
+0001b690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b6a0: 2020 2020 2020 2020 2020 2078 5f73 7461             x_sta
+0001b6b0: 7274 202b 2070 6164 5f73 697a 6520 2f20  rt + pad_size / 
+0001b6c0: 3220 2a20 7363 616c 696e 675f 665f 7061  2 * scaling_f_pa
+0001b6d0: 642c 0a20 2020 2020 2020 2020 2020 2020  d,.             
+0001b6e0: 2020 2020 2020 2020 2020 205d 0a20 2020             ].   
+0001b6f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b700: 2020 2020 206c 6f77 6572 5f65 6c65 7661       lower_eleva
+0001b710: 7469 6f6e 203d 205b 655b 315d 2066 6f72  tion = [e[1] for
+0001b720: 2065 2069 6e20 6c61 7965 7273 5f64 6174   e in layers_dat
+0001b730: 6120 6966 2065 5b30 5d2e 6e61 6d65 203d  a if e[0].name =
+0001b740: 3d20 6c61 7965 7220 6f72 206c 6179 6572  = layer or layer
+0001b750: 203d 3d20 2244 6566 6175 6c74 225d 5b30   == "Default"][0
+0001b760: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+0001b770: 2020 2020 2020 2020 2020 7570 7065 725f            upper_
+0001b780: 656c 6576 6174 696f 6e20 3d20 5b65 5b32  elevation = [e[2
+0001b790: 5d20 666f 7220 6520 696e 206c 6179 6572  ] for e in layer
+0001b7a0: 735f 6461 7461 2069 6620 655b 305d 2e6e  s_data if e[0].n
+0001b7b0: 616d 6520 3d3d 206c 6179 6572 206f 7220  ame == layer or 
+0001b7c0: 6c61 7965 7220 3d3d 2022 4465 6661 756c  layer == "Defaul
+0001b7d0: 7422 5d5b 305d 0a20 2020 2020 2020 2020  t"][0].         
+0001b7e0: 2020 2020 2020 2020 2020 2020 2020 2079                 y
+0001b7f0: 203d 205b 6c6f 7765 725f 656c 6576 6174   = [lower_elevat
+0001b800: 696f 6e2c 2075 7070 6572 5f65 6c65 7661  ion, upper_eleva
+0001b810: 7469 6f6e 2c20 7570 7065 725f 656c 6576  tion, upper_elev
+0001b820: 6174 696f 6e2c 206c 6f77 6572 5f65 6c65  ation, lower_ele
+0001b830: 7661 7469 6f6e 5d0a 2020 2020 2020 2020  vation].        
+0001b840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b850: 2320 6372 6561 7465 2074 6865 2070 6174  # create the pat
+0001b860: 6368 2066 6f72 2074 6861 7420 7369 676e  ch for that sign
+0001b870: 616c 206c 6179 6572 0a20 2020 2020 2020  al layer.       
+0001b880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b890: 2070 6c6f 745f 6461 7461 2e61 7070 656e   plot_data.appen
+0001b8a0: 6428 5b78 2c20 792c 2063 6f6c 6f72 5f6b  d([x, y, color_k
+0001b8b0: 6579 735b 636f 6c6f 725f 696e 6465 785d  eys[color_index]
+0001b8c0: 2c20 4e6f 6e65 2c20 312e 302c 2022 6669  , None, 1.0, "fi
+0001b8d0: 6c6c 225d 290a 2020 2020 2020 2020 2020  ll"]).          
+0001b8e0: 2020 2020 2020 2020 2020 656c 6966 2073            elif s
+0001b8f0: 7461 636b 7570 5f6d 6f64 6520 3d3d 2022  tackup_mode == "
+0001b900: 4f76 6572 6c61 7070 696e 6722 3a0a 2020  Overlapping":.  
+0001b910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b920: 2020 2020 2020 2320 6865 7265 2065 7661        # here eva
+0001b930: 6c75 6174 6520 7468 6520 7820 6261 7365  luate the x base
+0001b940: 6420 6f6e 2074 6865 2063 6f6c 756d 6e20  d on the column 
+0001b950: 6576 616c 7561 7465 6420 6265 666f 7265  evaluated before
+0001b960: 2061 6e64 2074 6865 2070 6164 2073 697a   and the pad siz
+0001b970: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+0001b980: 2020 2020 2020 2020 2020 7061 7373 0a0a            pass..
+0001b990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b9a0: 2020 2020 6d69 6e5f 6c65 203d 206d 696e      min_le = min
+0001b9b0: 286c 6f77 6572 5f65 6c65 7661 7469 6f6e  (lower_elevation
+0001b9c0: 2c20 6d69 6e5f 6c65 290a 2020 2020 2020  , min_le).      
+0001b9d0: 2020 2020 2020 2020 2020 2020 2020 6d61                ma
+0001b9e0: 785f 7565 203d 206d 6178 2875 7070 6572  x_ue = max(upper
+0001b9f0: 5f65 6c65 7661 7469 6f6e 2c20 6d61 785f  _elevation, max_
+0001ba00: 7565 290a 2020 2020 2020 2020 2020 2020  ue).            
+0001ba10: 2020 2020 6966 2064 6566 696e 6974 696f      if definitio
+0001ba20: 6e2e 686f 6c65 5f70 726f 7065 7274 6965  n.hole_propertie
+0001ba30: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
+0001ba40: 2020 2020 2020 2023 2063 7265 6174 6520         # create 
+0001ba50: 7061 7463 6820 666f 7220 7468 6520 686f  patch for the ho
+0001ba60: 6c65 0a20 2020 2020 2020 2020 2020 2020  le.             
+0001ba70: 2020 2020 2020 2068 6f6c 655f 7261 6469         hole_radi
+0001ba80: 7573 203d 2064 6566 696e 6974 696f 6e2e  us = definition.
+0001ba90: 686f 6c65 5f70 726f 7065 7274 6965 735b  hole_properties[
+0001baa0: 305d 202f 2032 202a 2073 6361 6c69 6e67  0] / 2 * scaling
+0001bab0: 5f66 5f70 6164 0a20 2020 2020 2020 2020  _f_pad.         
+0001bac0: 2020 2020 2020 2020 2020 2078 203d 205b             x = [
+0001bad0: 785f 7374 6172 7420 2d20 686f 6c65 5f72  x_start - hole_r
+0001bae0: 6164 6975 732c 2078 5f73 7461 7274 202d  adius, x_start -
+0001baf0: 2068 6f6c 655f 7261 6469 7573 2c20 785f   hole_radius, x_
+0001bb00: 7374 6172 7420 2b20 686f 6c65 5f72 6164  start + hole_rad
+0001bb10: 6975 732c 2078 5f73 7461 7274 202b 2068  ius, x_start + h
+0001bb20: 6f6c 655f 7261 6469 7573 5d0a 2020 2020  ole_radius].    
+0001bb30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bb40: 7920 3d20 5b6d 696e 5f6c 652c 206d 6178  y = [min_le, max
+0001bb50: 5f75 652c 206d 6178 5f75 652c 206d 696e  _ue, max_ue, min
+0001bb60: 5f6c 655d 0a20 2020 2020 2020 2020 2020  _le].           
+0001bb70: 2020 2020 2020 2020 2070 6c6f 745f 6461           plot_da
+0001bb80: 7461 2e61 7070 656e 6428 5b78 2c20 792c  ta.append([x, y,
+0001bb90: 2063 6f6c 6f72 5f6b 6579 735b 636f 6c6f   color_keys[colo
+0001bba0: 725f 696e 6465 785d 2c20 4e6f 6e65 2c20  r_index], None, 
+0001bbb0: 302e 372c 2022 6669 6c6c 225d 290a 2020  0.7, "fill"]).  
+0001bbc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bbd0: 2020 2320 6372 6561 7465 2070 6174 6368    # create patch
+0001bbe0: 2066 6f72 2074 6865 2064 6965 6c65 6374   for the dielect
+0001bbf0: 7269 630a 2020 2020 2020 2020 2020 2020  ric.            
+0001bc00: 2020 2020 2020 2020 6d61 785f 7820 3d20          max_x = 
+0001bc10: 6d61 7828 6d61 785f 782c 2068 6f6c 655f  max(max_x, hole_
+0001bc20: 7261 6469 7573 290a 2020 2020 2020 2020  radius).        
+0001bc30: 2020 2020 2020 2020 2020 2020 7261 6420              rad 
+0001bc40: 3d20 686f 6c65 5f72 6164 6975 7320 2a20  = hole_radius * 
+0001bc50: 2831 3030 202d 2064 6566 696e 6974 696f  (100 - definitio
+0001bc60: 6e2e 686f 6c65 5f70 6c61 7469 6e67 5f72  n.hole_plating_r
+0001bc70: 6174 696f 2920 2f20 3130 300a 2020 2020  atio) / 100.    
+0001bc80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bc90: 7820 3d20 5b78 5f73 7461 7274 202d 2072  x = [x_start - r
+0001bca0: 6164 2c20 785f 7374 6172 7420 2d20 7261  ad, x_start - ra
+0001bcb0: 642c 2078 5f73 7461 7274 202b 2072 6164  d, x_start + rad
+0001bcc0: 2c20 785f 7374 6172 7420 2b20 7261 645d  , x_start + rad]
+0001bcd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001bce0: 2020 2020 2070 6c6f 745f 6461 7461 2e61       plot_data.a
+0001bcf0: 7070 656e 6428 5b78 2c20 792c 2063 6f6c  ppend([x, y, col
+0001bd00: 6f72 5f6b 6579 735b 636f 6c6f 725f 696e  or_keys[color_in
+0001bd10: 6465 785d 2c20 4e6f 6e65 2c20 312e 302c  dex], None, 1.0,
+0001bd20: 2022 6669 6c6c 225d 290a 0a20 2020 2020   "fill"])..     
+0001bd30: 2020 2020 2020 2020 2020 2063 6f6c 6f72             color
+0001bd40: 5f69 6e64 6578 202b 3d20 310a 2020 2020  _index += 1.    
+0001bd50: 2020 2020 2020 2020 2020 2020 6966 2063              if c
+0001bd60: 6f6c 6f72 5f69 6e64 6578 203d 3d20 6d61  olor_index == ma
+0001bd70: 785f 706c 6f74 733a 0a20 2020 2020 2020  x_plots:.       
+0001bd80: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+0001bd90: 662e 5f6c 6f67 6765 722e 7761 726e 696e  f._logger.warnin
+0001bda0: 6728 224d 6178 696d 756d 206e 756d 6265  g("Maximum numbe
+0001bdb0: 7220 6f66 2064 6566 696e 6974 696f 6e73  r of definitions
+0001bdc0: 2070 6c6f 7474 6564 2e22 290a 2020 2020   plotted.").    
+0001bdd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bde0: 6272 6561 6b0a 2020 2020 2020 2020 2020  break.          
+0001bdf0: 2020 2020 2020 785f 7374 6172 7420 2b3d        x_start +=
+0001be00: 2064 656c 7461 0a0a 2020 2020 2020 2020   delta..        
+0001be10: 2320 706c 6f74 2074 6865 2073 7461 636b  # plot the stack
+0001be20: 7570 0a20 2020 2020 2020 2070 6c74 203d  up.        plt =
+0001be30: 2070 6c6f 745f 6d61 7470 6c6f 746c 6962   plot_matplotlib
+0001be40: 280a 2020 2020 2020 2020 2020 2020 706c  (.            pl
+0001be50: 6f74 5f64 6174 612c 0a20 2020 2020 2020  ot_data,.       
+0001be60: 2020 2020 2073 697a 653d 7369 7a65 2c0a       size=size,.
+0001be70: 2020 2020 2020 2020 2020 2020 7368 6f77              show
+0001be80: 5f6c 6567 656e 643d 4661 6c73 652c 0a20  _legend=False,. 
+0001be90: 2020 2020 2020 2020 2020 2078 6c61 6265             xlabe
+0001bea0: 6c3d 2222 2c0a 2020 2020 2020 2020 2020  l="",.          
+0001beb0: 2020 796c 6162 656c 3d22 222c 0a20 2020    ylabel="",.   
+0001bec0: 2020 2020 2020 2020 2074 6974 6c65 3d22           title="
+0001bed0: 222c 0a20 2020 2020 2020 2020 2020 2073  ",.            s
+0001bee0: 6e61 7073 686f 745f 7061 7468 3d4e 6f6e  napshot_path=Non
+0001bef0: 652c 0a20 2020 2020 2020 2020 2020 2078  e,.            x
+0001bf00: 5f6c 696d 6974 733d 5b78 5f6d 696e 2c20  _limits=[x_min, 
+0001bf10: 785f 6d61 785d 2c0a 2020 2020 2020 2020  x_max],.        
+0001bf20: 2020 2020 795f 6c69 6d69 7473 3d5b 795f      y_limits=[y_
+0001bf30: 6d69 6e2c 2079 5f6d 6178 5d2c 0a20 2020  min, y_max],.   
+0001bf40: 2020 2020 2020 2020 2061 7869 735f 6571           axis_eq
+0001bf50: 7561 6c3d 4661 6c73 652c 0a20 2020 2020  ual=False,.     
+0001bf60: 2020 2020 2020 2061 6e6e 6f74 6174 696f         annotatio
+0001bf70: 6e73 3d61 6e6e 6f74 6174 696f 6e73 2c0a  ns=annotations,.
+0001bf80: 2020 2020 2020 2020 2020 2020 7368 6f77              show
+0001bf90: 3d46 616c 7365 2c0a 2020 2020 2020 2020  =False,.        
+0001bfa0: 290a 2020 2020 2020 2020 2320 7765 2068  ).        # we h
+0001bfb0: 6176 6520 746f 2063 7573 746f 6d69 7a65  ave to customize
+0001bfc0: 2073 6f6d 6520 6465 6661 756c 7473 2c20   some defaults, 
+0001bfd0: 736f 2077 6520 706c 6f74 206f 7220 7361  so we plot or sa
+0001bfe0: 7665 2074 6865 2066 6967 7572 6520 6865  ve the figure he
+0001bff0: 7265 0a20 2020 2020 2020 2070 6c74 2e61  re.        plt.a
+0001c000: 7869 7328 226f 6666 2229 0a20 2020 2020  xis("off").     
+0001c010: 2020 2070 6c74 2e62 6f78 2846 616c 7365     plt.box(False
+0001c020: 290a 2020 2020 2020 2020 706c 742e 7469  ).        plt.ti
+0001c030: 746c 6528 2253 7461 636b 7570 5c6e 2022  tle("Stackup\n "
+0001c040: 2c20 666f 6e74 7369 7a65 3d32 3829 0a20  , fontsize=28). 
+0001c050: 2020 2020 2020 2023 2065 7661 6c75 6174         # evaluat
+0001c060: 6573 2074 6865 206e 756d 6265 7220 6f66  es the number of
+0001c070: 206c 6567 656e 6420 636f 6c75 6d6e 2062   legend column b
+0001c080: 6173 6564 206f 6e20 7468 6520 6c61 7965  ased on the laye
+0001c090: 7220 6e61 6d65 206d 6178 206c 656e 6774  r name max lengt
+0001c0a0: 680a 2020 2020 2020 2020 6e63 6f6c 203d  h.        ncol =
+0001c0b0: 2033 2069 6620 6d61 7828 5b6c 656e 286e   3 if max([len(n
+0001c0c0: 2920 666f 7220 6e20 696e 206c 6179 6572  ) for n in layer
+0001c0d0: 5f6e 616d 6573 5d29 203c 2031 3520 656c  _names]) < 15 el
+0001c0e0: 7365 2032 0a20 2020 2020 2020 2068 616e  se 2.        han
+0001c0f0: 646c 6573 2c20 6c61 6265 6c73 203d 2070  dles, labels = p
+0001c100: 6c74 2e67 6361 2829 2e67 6574 5f6c 6567  lt.gca().get_leg
+0001c110: 656e 645f 6861 6e64 6c65 735f 6c61 6265  end_handles_labe
+0001c120: 6c73 2829 0a20 2020 2020 2020 2070 6c74  ls().        plt
+0001c130: 2e6c 6567 656e 6428 0a20 2020 2020 2020  .legend(.       
+0001c140: 2020 2020 205b 6861 6e64 6c65 735b 6964       [handles[id
+0001c150: 785d 2066 6f72 2069 6478 2069 6e20 6c65  x] for idx in le
+0001c160: 6765 6e64 5f6f 7264 6572 5d2c 0a20 2020  gend_order],.   
+0001c170: 2020 2020 2020 2020 205b 6c61 6265 6c73           [labels
+0001c180: 5b69 6478 5d20 666f 7220 6964 7820 696e  [idx] for idx in
+0001c190: 206c 6567 656e 645f 6f72 6465 725d 2c0a   legend_order],.
+0001c1a0: 2020 2020 2020 2020 2020 2020 6262 6f78              bbox
+0001c1b0: 5f74 6f5f 616e 6368 6f72 3d28 302c 202d  _to_anchor=(0, -
+0001c1c0: 302e 3035 292c 0a20 2020 2020 2020 2020  0.05),.         
+0001c1d0: 2020 206c 6f63 3d22 7570 7065 7220 6c65     loc="upper le
+0001c1e0: 6674 222c 0a20 2020 2020 2020 2020 2020  ft",.           
+0001c1f0: 2062 6f72 6465 7261 7865 7370 6164 3d30   borderaxespad=0
+0001c200: 2c0a 2020 2020 2020 2020 2020 2020 6e63  ,.            nc
+0001c210: 6f6c 3d6e 636f 6c2c 0a20 2020 2020 2020  ol=ncol,.       
+0001c220: 2029 0a20 2020 2020 2020 2070 6c74 2e74   ).        plt.t
+0001c230: 6967 6874 5f6c 6179 6f75 7428 290a 2020  ight_layout().  
+0001c240: 2020 2020 2020 6966 2073 6176 655f 706c        if save_pl
+0001c250: 6f74 3a0a 2020 2020 2020 2020 2020 2020  ot:.            
+0001c260: 706c 742e 7361 7665 6669 6728 7361 7665  plt.savefig(save
+0001c270: 5f70 6c6f 7429 0a20 2020 2020 2020 2065  _plot).        e
+0001c280: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0001c290: 2070 6c74 2e73 686f 7728 290a 2020 2020   plt.show().    
+0001c2a0: 2020 2020 7265 7475 726e 2070 6c74 0a        return plt.
```

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/utilities/heatsink.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/utilities/heatsink.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/dotnet/edb_core/utilities/simulation_setup.py` & `pyedb-0.8.0/src/pyedb/dotnet/edb_core/utilities/simulation_setup.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/edb_logger.py` & `pyedb-0.8.0/src/pyedb/edb_logger.py`

 * *Files 6% similar despite different names*

```diff
@@ -411,8 +411,22 @@
     @property
     def glb(self):
         """Global logger."""
         self._global = logging.getLogger("Global")
         return self._global
 
 
-pyedb_logger = EdbLogger(to_stdout=settings.enable_screen_logs)
+logger = logging.getLogger("Global")
+if any("aedt_logger" in str(i) for i in logger.filters):
+    from pyaedt.generic.settings import settings as pyaedt_settings
+
+    from pyedb.generic.settings import settings as pyaedb_settings
+
+    pyedb_logger = pyaedt_settings.logger
+    pyaedb_settings.use_pyaedt_log = True
+    pyaedb_settings.logger = pyedb_logger
+
+else:
+    pyedb_logger = EdbLogger(to_stdout=settings.enable_screen_logs)
+    from pyedb.generic.settings import settings as pyaedb_settings
+
+    pyaedb_settings.logger = pyedb_logger
```

### Comparing `pyedb-0.7.1/src/pyedb/generic/constants.py` & `pyedb-0.8.0/src/pyedb/generic/constants.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/generic/data_handlers.py` & `pyedb-0.8.0/src/pyedb/generic/data_handlers.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/generic/design_types.py` & `pyedb-0.8.0/src/pyedb/generic/design_types.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/generic/filesystem.py` & `pyedb-0.8.0/src/pyedb/generic/filesystem.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/generic/general_methods.py` & `pyedb-0.8.0/src/pyedb/generic/general_methods.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/generic/plot.py` & `pyedb-0.8.0/src/pyedb/generic/plot.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/generic/process.py` & `pyedb-0.8.0/src/pyedb/generic/process.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/generic/settings.py` & `pyedb-0.8.0/src/pyedb/generic/settings.py`

 * *Files 4% similar despite different names*

```diff
@@ -55,14 +55,34 @@
         self.retry_n_times_time_interval = 0.1
         self._global_log_file_name = "pyedb_{}.log".format(os.path.split(os.path.expanduser("~"))[-1])
         self._enable_global_log_file = True
         self._enable_local_log_file = False
         self._global_log_file_size = 10
         self._lsf_queue = None
         self._edb_environment_variables = {}
+        self._use_pyaedt_log = False
+        self._logger = None
+
+    @property
+    def logger(self):
+        """Active logger."""
+        return self._logger
+
+    @logger.setter
+    def logger(self, val):
+        self._logger = val
+
+    @property
+    def use_pyaedt_log(self):
+        """Flag that disable Edb log when PyAEDT is used."""
+        return self._use_pyaedt_log
+
+    @use_pyaedt_log.setter
+    def use_pyaedt_log(self, value):
+        self._use_pyaedt_log = value
 
     @property
     def edb_environment_variables(self):
         """Environment variables that are set before launching a new AEDT session,
         including those that enable the beta features."""
         return self._edb_environment_variables
 
@@ -127,22 +147,14 @@
         return self._enable_debug_methods_argument_logger
 
     @enable_debug_methods_argument_logger.setter
     def enable_debug_methods_argument_logger(self, val):
         self._enable_debug_methods_argument_logger = val
 
     @property
-    def logger(self):
-        """Active logger."""
-        try:
-            return logging.getLogger("Global")
-        except:  # pragma: no cover
-            return logging.getLogger(__name__)
-
-    @property
     def enable_error_handler(self):
         """Flag for enabling and disabling the internal PyEDB error handling."""
         return self._enable_error_handler
 
     @enable_error_handler.setter
     def enable_error_handler(self, val):
         self._enable_error_handler = val
```

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/bom/bom.py` & `pyedb-0.8.0/src/pyedb/ipc2581/bom/bom.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/bom/bom_item.py` & `pyedb-0.8.0/src/pyedb/ipc2581/bom/bom_item.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/bom/characteristics.py` & `pyedb-0.8.0/src/pyedb/ipc2581/bom/characteristics.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/bom/refdes.py` & `pyedb-0.8.0/src/pyedb/ipc2581/bom/refdes.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/content/color.py` & `pyedb-0.8.0/src/pyedb/ipc2581/content/color.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/content/content.py` & `pyedb-0.8.0/src/pyedb/ipc2581/content/content.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/content/dictionary_color.py` & `pyedb-0.8.0/src/pyedb/ipc2581/content/dictionary_color.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/content/dictionary_fill.py` & `pyedb-0.8.0/src/pyedb/ipc2581/content/dictionary_fill.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/content/dictionary_line.py` & `pyedb-0.8.0/src/pyedb/ipc2581/content/dictionary_line.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/content/entry_color.py` & `pyedb-0.8.0/src/pyedb/ipc2581/content/entry_color.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/content/entry_line.py` & `pyedb-0.8.0/src/pyedb/ipc2581/content/entry_line.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/content/fill.py` & `pyedb-0.8.0/src/pyedb/ipc2581/content/fill.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/content/layer_ref.py` & `pyedb-0.8.0/src/pyedb/ipc2581/content/layer_ref.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/content/standard_geometries_dictionary.py` & `pyedb-0.8.0/src/pyedb/ipc2581/content/standard_geometries_dictionary.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/assembly_drawing.py` & `pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/assembly_drawing.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/cad_data.py` & `pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/cad_data.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/component.py` & `pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/component.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/drill.py` & `pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/drill.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/feature.py` & `pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/feature.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/layer.py` & `pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/layer.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/layer_feature.py` & `pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/layer_feature.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/logical_net.py` & `pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/logical_net.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/outline.py` & `pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/outline.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/package.py` & `pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/package.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/padstack_def.py` & `pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/padstack_def.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/padstack_hole_def.py` & `pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/padstack_hole_def.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/padstack_instance.py` & `pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/padstack_instance.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/padstack_pad_def.py` & `pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/padstack_pad_def.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/path.py` & `pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/path.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/phy_net.py` & `pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/phy_net.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/pin.py` & `pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/pin.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/polygon.py` & `pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/polygon.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/profile.py` & `pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/profile.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/stackup.py` & `pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/stackup.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/stackup_group.py` & `pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/stackup_group.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/stackup_layer.py` & `pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/stackup_layer.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_data/step.py` & `pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_data/step.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/ecad/cad_header.py` & `pyedb-0.8.0/src/pyedb/ipc2581/ecad/cad_header.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/ecad/ecad.py` & `pyedb-0.8.0/src/pyedb/ipc2581/ecad/ecad.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/ecad/spec.py` & `pyedb-0.8.0/src/pyedb/ipc2581/ecad/spec.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/history_record.py` & `pyedb-0.8.0/src/pyedb/ipc2581/history_record.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/ipc2581.py` & `pyedb-0.8.0/src/pyedb/ipc2581/ipc2581.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/ipc2581/logistic_header.py` & `pyedb-0.8.0/src/pyedb/ipc2581/logistic_header.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/misc/aedtlib_personalib_install.py` & `pyedb-0.8.0/src/pyedb/misc/aedtlib_personalib_install.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/misc/downloads.py` & `pyedb-0.8.0/src/pyedb/misc/downloads.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/misc/misc.py` & `pyedb-0.8.0/src/pyedb/misc/misc.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/misc/siw_feature_config/emc/component_tags.py` & `pyedb-0.8.0/src/pyedb/misc/siw_feature_config/emc/component_tags.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/misc/siw_feature_config/emc/net_tags.py` & `pyedb-0.8.0/src/pyedb/misc/siw_feature_config/emc/net_tags.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/misc/siw_feature_config/emc/tag_library.py` & `pyedb-0.8.0/src/pyedb/misc/siw_feature_config/emc/tag_library.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/misc/siw_feature_config/emc/xml_generic.py` & `pyedb-0.8.0/src/pyedb/misc/siw_feature_config/emc/xml_generic.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/misc/siw_feature_config/emc_rule_checker_settings.py` & `pyedb-0.8.0/src/pyedb/misc/siw_feature_config/emc_rule_checker_settings.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/modeler/geometry_operators.py` & `pyedb-0.8.0/src/pyedb/modeler/geometry_operators.py`

 * *Files identical despite different names*

### Comparing `pyedb-0.7.1/src/pyedb/siwave.py` & `pyedb-0.8.0/src/pyedb/siwave.py`

 * *Files 4% similar despite different names*

```diff
@@ -10,14 +10,15 @@
 
 import os
 import pkgutil
 import sys
 import time
 
 from pyedb.dotnet.clr_module import _clr
+from pyedb.edb_logger import pyedb_logger
 from pyedb.generic.general_methods import (
     _pythonver,
     is_ironpython,
     is_windows,
     pyedb_function_handler,
 )
 from pyedb.misc.misc import list_installed_ansysem
@@ -61,14 +62,15 @@
 
     @property
     def current_version(self):
         """Current version of AEDT."""
         return self.version_keys[0]
 
     def __init__(self, specified_version=None):
+        self._logger = pyedb_logger
         if is_ironpython:
             _com = "pythonnet"
             import System
         elif is_windows:  # pragma: no cover
             modules = [tup[1] for tup in pkgutil.iter_modules()]
             if _clr:
                 import win32com.client
@@ -323,19 +325,66 @@
         simulation_name : str
             Name of the setup.
         file_path : str
             Path to the exported report.
         bkground_color : str, optional
             Color of the report's background. The default is ``"White"``.
 
-
         Returns
         -------
         bool
             ``True`` when successful, ``False`` when failed.
 
         """
         self.oproject.ScrExportDcSimReportScaling("All", "All", -1, -1, False)
         self.oproject.ScrExportDcSimReport(simulation_name, bkground_color, file_path)
         while not os.path.exists(file_path):
             time.sleep(0.1)
         return True
+
+    @pyedb_function_handler
+    def run_dc_simulation(self):
+        """Run DC simulation."""
+        self._logger.info("Running DC simulation.")
+        return self.oproject.ScrRunDcSimulation(1)
+
+    @pyedb_function_handler
+    def export_icepak_project(self, file_path, dc_simulation_name):
+        """Exports an Icepak project for standalone use.
+
+        Parameters
+        ----------
+        file_path : str,
+            Path of the Icepak project.
+        dc_simulation_name : str
+            Name of the DC simulation.
+
+        Returns
+        -------
+        bool
+            ``True`` when successful, ``False`` when failed.
+
+        """
+
+        self.oproject.ScrExportDcPowerDataToIcepak(True)
+        self._logger.info("Exporting Icepak project.")
+        code = self.oproject.ScrExportIcepakProject(file_path, dc_simulation_name)
+        return True if code == 0 else False
+
+    @pyedb_function_handler
+    def run_icepak_simulation(self, icepak_simulation_name, dc_simulation_name):
+        """Runs an Icepak simulation.
+
+        Parameters
+        ----------
+        icepak_simulation_name : str
+            Name of the Icepak simulation.
+        dc_simulation_name : str
+            Name of the DC simulation.
+
+        Returns
+        -------
+        bool
+            ``True`` when successful, ``False`` when failed.
+
+        """
+        return self.oproject.ScrRunIcepakSimulation(icepak_simulation_name, dc_simulation_name)
```

### Comparing `pyedb-0.7.1/PKG-INFO` & `pyedb-0.8.0/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: pyedb
-Version: 0.7.1
+Version: 0.8.0
 Summary: Higher-Level Pythonic Ansys Electronics Data Base
 Author-email: "ANSYS, Inc." <pyansys.core@ansys.com>
 Maintainer-email: PyEDB developers <simon.vandenbrouck@ansys.com>
 Requires-Python: >=3.8,<4
 Description-Content-Type: text/markdown
 Classifier: Development Status :: 4 - Beta
 Classifier: Intended Audience :: Science/Research
@@ -15,27 +15,27 @@
 Classifier: Programming Language :: Python :: 3.9
 Classifier: Programming Language :: Python :: 3.10
 Classifier: Programming Language :: Python :: 3.11
 Requires-Dist: cffi>=1.16.0,<1.17; platform_system=='Linux'
 Requires-Dist: pywin32 >= 303;platform_system=='Windows'
 Requires-Dist: ansys-pythonnet >= 3.1.0rc3
 Requires-Dist: dotnetcore2 ==3.1.23;platform_system=='Linux'
-Requires-Dist: pydantic>=2.6.4,<2.7
+Requires-Dist: pydantic>=2.6.4,<2.8
 Requires-Dist: toml == 0.10.2
-Requires-Dist: ansys-sphinx-theme>=0.10.0,<0.15 ; extra == "doc"
+Requires-Dist: ansys-sphinx-theme>=0.10.0,<0.16 ; extra == "doc"
 Requires-Dist: imageio>=2.30.0,<2.35 ; extra == "doc"
 Requires-Dist: ipython>=8.13.0,<8.24 ; extra == "doc"
 Requires-Dist: jupyterlab>=4.0.0,<4.3 ; extra == "doc"
 Requires-Dist: matplotlib>=3.5.0,<3.9 ; extra == "doc"
 Requires-Dist: nbsphinx>=0.9.0,<0.10 ; extra == "doc"
 Requires-Dist: numpydoc>=1.5.0,<1.8 ; extra == "doc"
 Requires-Dist: pypandoc>=1.10.0,<1.14 ; extra == "doc"
 Requires-Dist: recommonmark ; extra == "doc"
-Requires-Dist: Sphinx>=7.1.0,<7.3 ; extra == "doc"
-Requires-Dist: sphinx-autobuild==2021.3.14 ; extra == "doc" and ( python_version == '3.8')
+Requires-Dist: Sphinx>=7.1.0,<7.4 ; extra == "doc"
+Requires-Dist: sphinx-autobuild==2024.2.4 ; extra == "doc" and ( python_version == '3.8')
 Requires-Dist: sphinx-autobuild==2024.2.4 ; extra == "doc" and ( python_version > '3.8')
 Requires-Dist: sphinx-copybutton>=0.5.0,<0.6 ; extra == "doc"
 Requires-Dist: sphinx-gallery>=0.14.0,<0.16 ; extra == "doc"
 Requires-Dist: sphinx_design>=0.4.0,<0.6 ; extra == "doc"
 Requires-Dist: matplotlib>=3.5.0,<3.9 ; extra == "full"
 Requires-Dist: numpy>=1.20.0,<2 ; extra == "full"
 Requires-Dist: pandas>=1.1.0,<2.3 ; extra == "full"
```

